

app_version1 = "272"
app_version2 = "Stable"
tcbx926n29 = app_version2 + " " + app_version1;

defaultAvatar1 = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAY1BMVEVYZfJib/OMlfahqPeWn/eBi/XLz/vq6/7////19f5tePTq7P22vPnV2Pyrsvirsvl3gvT09f7Axfp3gfRtePNsePPg4v22vPq2u/qCi/WhqPjf4/zf4v2Xn/essvjLzvuXnvdbidFTAAAETElEQVR4AezBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAIDZudMtV1UlDuCFRKlWIEJ6uOwbzXn/lzzzYc/GWiT6zya/79WrLeYSc5Vq9IFWa3Sr6JehWt0ZZn5RtFJvmHnodPsrPLx1/B9PKx1ziLOPnIRRO84EXaAP/CWnR3pArTWcybpA5G8NsX20pw+cSbpAngEeOQenY+Cf8KIZ4FuDfSV4Ko/7hS7wNjYH7W3MvNeHtn2jvxn+OXcgaP0x8KJo43vgnwqu85EXDfGVULWON9G1BOmDN/M/AnTgDSWC0xve0KAITeSsykFw4qzOQWB4YwNBOfLmPAHpeXsvr5XOgJkjGA3vIlU6A2bvOHvAnXwiCMrwTl5UpUtg5us7BAB2gcg78nXugaC6QORd+bo7AEAXiLwzX+8SANEFNHPdXcAwV90FDgxA037+zwAc7aZlCKnSNTDrADZBdU6DBwbha5wCAabBkWGkSqfAzFa6C8xeADYB9Y2ByEBsbSMAYAy0zHWPActQLPQuKBh3DiwiDRlwzwFOv9JfTpORh5x5rVfQc8CQiLLJiEMaA1oW6XgVq+grVh4yY56JA68x07fm8hCIhXCUPn823zgkG/HK4Rf6kYv8YBt5BQ03BQyv9CMq8M/JQ7IItw+e6cd8QQjKTqCX3OMTtOdCCNZOoCnqkrYgZEFD2/FF/08qDAE4Dji+TtHPKHknVmBboVB2i9HI9zIGahZUhaVqVxCyQEEVQ7rSBMj3QiPUUTCWJkC+8zrQVjzmELBYG2H5jDYUFqAiQDlMtAwKQgjr+nwoq9O2BSEQJQFVWKeNBSEQ6+BYeG3BFIUAHIfasmsLh7IQgLcjDZd0AWXEIZRDMDYCuuj73g95yJGxEuBLPmr6VBSyzMO9Fpzko3kqeA1r8W4GHOWNKQ/JIl4COL4SZf2lPAQhAY4lYrv860rlIVmHlYAsuBhjFwpCwO4LOkb0TMAzAc8EPBPwTMAGngl4JuCZgMig4jMB27AMykJUhCr4ekwzKI10T9hpwzcz6DNSUbRdORzThW/CJSKagd4LjKurof1suFCYVR54MDckpsBXDLk3pliQgxBTHneBrwiaNtOfeUUKCnMQYlKC32x2r7SlmSUpoOQdi5xtoqx1DNP8WW9kKSCVvAu8QnC2USR4/I2bP5vDmhS80pdOjXULw8dc7HSiL6ljYLTmz/ooKvJTdkqTt9G5s/mHczH6qXlV9I32Ehi0+QVfQbn7HryHhvY033V1Tuu3CRncOIj3rL3EV9pf7+53ced0bY+MIZm7ndEt9uNnkxN8OSWhAvjjZ8ktnIoKaMDHF0yH8S416C4Rpv7bU094pWJ9QFv4BJOBvnkFzjWKMvhu4G78IibMIz2EFM3KFUAwCEI+ID9MDia6kd/+enpFj+YE+af+aA8OZAAAAAAG+Vvf46sAAAAAAAAAAAAAAAAAAAAAAFYCeHSjWah9hFcAAAAASUVORK5CYII=`;
defaultAvatar2 = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAhFBMVEV1fop9hpGgpq+ytr2prraXnqfT19vu7/H////29/iGjpju7/DCxszc3+K6vsS6v8WOlqD39/fLztPLz9OPlqDl5+nDx8ygpq6xtr6xtr3m5+iOlp/Dxsvc3+Hd3+GorraGjpnT19rT1tv29/eOlqHU19p+hpGprrWxt72or7bLz9Kfpq+ibmTzAAAEY0lEQVR4AezBAQEAAAQAIPB/swkMqAIAAAAAAAAAAAAAAAAAAAAAgBNZPfFWy86dLimOw3AAV5qYEXFicMKxHIFs03e///PtvaouagjRGMKfNr/vmhorsiMbpwcm+UZjN4PhD2YedR5TZpnZDgfmOww+L/h/jjoaS0iRG7pdk0HBQlECmeevisGEbpDJf7DQlUDJh2xlbm30noWmBGQFuOUcTMeej3CqFeCQzTOCl8i8bymBbPKQDlxeCecGqTH/Dc/ycUVK0LKx51ZVXs08H+WLoSu5la0yQmUK7sXQEKQ592ZOgFLukSE4meUe2YTQlCyinARTFnFOAss9swRlzL1zBCTj/o2ySFdAURCMBV+FiXQFFLP4esADvxGExPKVjJJIX4HCxbcJACyBkq/IxdkDQZVAyVfl4i4AgBIo+cpcvK8AiBJYMsddApY56hJIGcCSrmfFAAq6GsMQTKTvQDEEaILiXAZTBuEAlsAYl8E1wzCRLoEij7QLFKNYmwBhIp0BIo9tBgDMAcMc9xzYMJQcugvytl55VtCHWNx9wHaZ0d+mO6sP6Z7mBnQfYA2R2Fl1yMKCHov8zp3kycHKoQ9x3Mkj9Wv/i9s0FxCC9CJca8cv3JlDxBPecfgz/cwzt9j+etO5hFsCbEM/89I2e/QhoqI+2YBzGnfWEGHRuoBRQ6R9nu0hQJ3AIqgkNwEhLR6oPy7o/2MCQwC2AwWfltAxL/oifgFrhfZhtxitvpexAKug7nnU+gKqw2sO6DDk8bwJKKF6wZRPq8IToO28XqkvDnMK5FiNMB1n9SErqGZ4xeGvQV0IYV2f34ed05qgEIAjgZfAc9oyIATiPbgOvLZgA0IgtkMm7NpCGhCC8evIgkNKILHqEJIQjEZgGfR971wfMmasBLiQj5regkLaObifBd/p0Ls+xHBXOd7NgLH+YepDRIWXAK4yIpE9B4QAJaBgjcq0/3Wl8BDxiJUA4Yuqqob+YiGi7i0BiO4JuCfgnoB7Au4J6ME9AfcE3BNQMqjqnoAYrgkDnAc4BuWoH0sGtUS6J7xdWj4bu5wBHIqqL+yYZz6Lrek47wzOL0M7+kfjLAfyLpGJB3NDYrfnE2wq5VLagNF/GJl3nk/wS+pNM+PuKZAc6EefKP5m87ahPjnWpICMq1lllRsSpmCYxy8aq0sBJcbVnjvw23yR0OHwcR6/cPsuKcjoq+kir1d8lH3O0yl9lYw9oz1+0ZSqQ34SU5O6/KOuV/Zfdf3x4dJFltAB8+wZ9PErvoKqL7vxtp90TY5Pmlyy5ZI2QcDNg+qSZy9VQ9fX1Je7uDM91SNjMPZie/QN9vDFrtZ8OaXwsgcfvjB1y64owBJp+PrlsLrIGfSzIUzN4a7HNxSs2cO8+PSLwfLsJ3Dbh4QEfBlsz/xDjHcTQicHAPIGONck8LJBvpkc7OhMduxzk9CtmUL+U3+2BwcyAAAAAIP8re/xVQAAAAAAAAAAAAAAAAAAAAAAKwFiKavpSRGzHgAAAABJRU5ErkJggg==`;
defaultAvatar3 = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAgVBMVEU7pVxIqmZ4wY+QzaOEx5lsu4TC48zm9Ov////z+fVHqmZUsHCp17jO6Nad0q2d0q5gtnry+vW13cK23cHa7uGp2Lep2Lh4wY6RzKOQzKPa7+Bsu4VgtXrz+vTa7uCExpnn9Orz+fTB48xTsHBHq2a23cKFx5mFxpmRzKR4wI9gtnsomQ4wAAAEZ0lEQVR4AezBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAIDZuc+1tXUYAMDKcKwMO6sDCCM0dN7//Z191B2iGmJR8/7+1KcWliM746ooTlJYLE5U9BuNXSWZRsS8gIVKjYg6S9TvMPjK4P8sLFRTiKkUPK4mMUgYU6Bs8UsmaeABqUoj4U2BDr+lO/Voo2+RcKYArQCPnIPGtvgTlrUCfEtXJYgXUd3PTIGyidPEVj2xNkmV+m94Gn/OpCBaaVuc1VX9i5k/aU1mO5yluxKkUgZXkSkQ6SWu5hUIlOKKFIhTalyRLkCaDkmQRdAgCbMINK5Mgyg1rs6CICWuLy8DXQGJATFeoxcq0BWQvJDVA3qwAREijZ7kRaCXQGKlbAKCngIdemTD7IFETYEOvbJhTwABU6BDz6z3S0DYU2CL3lnfu4Cgp0CKAmzAnx0KYMCbAUVQgV4DSea/CQp0GUxRCOt/CQxyGdyjGCrQJZBUgXaBJA+1CSAq7ArwUwMaBckDrwAfNfASRalEd0EHbY4HZOCHaLn7ALMt4W/NaeSHHHGpUug+YByAwGlkh8Sj0GORDBepCvjKK35ILXNPfP7FbVrtECLpQrjnjp/UDiGzGljTBhd4wy8e8+tN50bcEjBO8COXuerhh5Ae1qQdzmlqh5AZWloXkE8A3N+TEeK3E4jxuo7ZRfNDvhHDeqzT/2dwD/G9HTB4XQE/c2FWAIXMy2S1QTv+EpozQvyughfHo2rjEDKjEHUYkt02AW9F9YIpvy9xTUCG172DtViZJVCJaoT1TLzmh+xENcM7dLsM8kMAF9jJOgxQjDWUFeL/SODieE7buYX4vw7uHR9b0O4hfrdDg9tjC6ljiP+7IzG6TIFIs0OAQmQ0Ahun93tf8kNqlJUA6/II48Y1ZIYVd1vwPXzrPT9EibtB+PbXn9/auIfM6OUlALsSCJRv3EMkJMAgR6fmv67kHkIyWQkgren7PmvvFkKM3wT490zAMwHPBDwT8EzAMwHPBDwT4Gkv4F//TID/84AgHhi2KJT1eybo30bSc8JmO+LNjNuj/0NR/gM7Q4Y3YYaFJ8NKzp2hE/xjqkd0dKgLKjwxT0iczniFTmm6dKPD6PuB6q69+scfYDXTEZengHLAH33B+GazmWBNNXJSAIM1yHKsBiDKoJifn0wjLwVQDNYccIGDqeICZobv+ecn9XlJCkr4UhNXZqZ8dFalDXwpsi1K+/nJ1LEO+Qk0Q2qr3pij/pcxfW/TuCzgGyprUd7Pz30Lytx34z1+BJ9qvOqTe8s13yYQmXXQ3fPspZvAv8ngnAkcNNd6ZBmG8W579Feyh09OhvHmFMflLHz4ZDAzuyIHW4HDZyyH3V3OoLMBZJq+3fUcJnA2naVd+BiLwYebf7TRxAUQ8dPA3PhGzKH+BOLRAQD/CjBfBAfaID9MDk43q6u/R1/Ao2lE/lN/tgcHMgAAAACD/K3v8VUAAAAAAAAAAAAAAAAAAAAAACsBm86sivq4FSMAAAAASUVORK5CYII=`;
defaultAvatar4 = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAjVBMVEX6phr6qyj7wWH8zX78x3D8wWH7vFP+47j+9OP/////+fH6sTf+9OL92Jv+6cb904z80o37t0X++vH93qn90436sTb7sTb7x3D80oz93an+7tT92Zv7wmH9zX/8zH7+79P7tkX92Jr82Jr/+vH+6Mb/9OP/9OL7qyj947j6rCj+79T8zX/95Lj7sTf915vvhd1yAAAEbklEQVR4AezBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAIDZuc/tRpUYAMAisAK54AAJnvFNZ5zYTnn/t7t9dXJc0Y4N8o6//0o8QlMpB0VXcQKt/Ygx+o3ajnGaEdGgdZuGGRGN0hh/h8aPc/ppAi1dc0g+RjhfRZwTE5TAsKTv8riAM4TjjJisBCpaN6rw3FpfEpOUAI8A55yD4qakHSayEWDNaHwL6kXc7/eUQF1cTWMztsyYeIpYw78y2i1PQLXhjovPqrGdlbRTmaemor1Gld4ywJw6kSKoNKbO/AEKJdQhVNj9M+rQKAJtKmJBdoKCWJidIKOOjUCVa+rcBBQZUvcGt4GOgCwHNe6oFxjoCMhmetaAPbkHFaKMejKIAp0C2UTLJiDoEqioRxMda6CgS6CiXk3CLgAFJVBRzyYKpoCQS+CBKOwSyIiCLoGEFIihP4+kQA69QVIBA50DWapzERTAMJiQEhONQ2AAw+ATqYGBDoHsOdBVIBuEughgqK4HBNAHMqKg+wAShd0HXkiVZ9WroCZzs4YE5CEjvfsAF9fwjyKZy0Nm1FatdB/wit+D5uKQu7nSY5G0Zdd8E48c6yFG5564+cVtmvEI0TQRPknbz8yRQ1gBXYqphQVss6A93K8vOmN1Q8BrDdssG9pNHsIsdCnzOKcxRw1hI22rgEENIL2egpB+VwJ3XiX54hGyxx10x3j9HvQIUbIdcHRYBLss5UW8VLYUauiglXwIHQhC+h0Fl55H1c4jZI9I1WFIetwEWFVrwSkdZv0TIF15TaErRmcXeFa1EB7JR7SR5wGUVXAcJpgGRSFALax0HQYg7IJeIQqOBJae57SVR4iKefDJ87GFzCNExXYI/R5bSDxCdNwduSOfEogycQhwiI6FQOz1fu9YHnJNuhJgfF5qevcK2c+ouy2YwLpEHoLqbhBaau1GfjHlIczqSwBVt8Bg+OERoigBjiQq3P91Jf8QlupKACtza21aniyE5T0kQI9LAi4JuCTgkoBLAjpwScAlAZcEWFLKXhIQwmPCCs4DDCllejgTVCVWdHOYXDyno3mNVwoORcUP7OCCjsJhy36HWu4M8dHmp5mTp8a8te54BXQkaeiAUcLlYj1y0Fjk/1nSAU0MnflcUfsUyHPArX8TfLPZ1dAlQ5IUABpHIrMvBIY5qbn87HMuSwG8oXENtdC4r7s3WG++nsvPTNMmBbfwXXH35Wa0U7b4mhbwXXRTkrbLzz6t6JCfQYFT82Wdm2X/cc5aM72r32ANLkrSd/mlb0Hlp914v/6APpmTzs7YfpnA1PUDe8qzF1tD/z7d6R7cKQ6tkXXA+cn26C+6m88SJ3lzSmDZKG8+Q7dnV+ThQVPz5cOhPckZdIqg0+f6rqepwdtnI5j4tA0G8dE/2uiu3oCpLwN35BsxjSlAPz4A4BngOJ2g4Q3y2eQggSNJ/mn9G5ybQuWf+qs9OJABAAAAGORvfY+vAgAAAAAAAAAAAAAAAAAAAABYCfy25L0QL4/pAAAAAElFTkSuQmCC`;
defaultAvatar5 = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAh1BMVEXtQkXuTVDzfX/1lZf0iYvxcXP5xMT96Oj////+8/PuTlDvWVz95+j3rK360ND2oKL2oaLwZWf+8/T4uLnwZWj83Nz3ra73rK7yfX/1lZb1lJb829zxcXT70ND729z6z9D0lZbziYv95+f0lJb5xMXvWlzuTlHzfYD0iIvziYr73NzyfYD5w8SoNjStAAAEaklEQVR4AezBBwEAIAwAoN3+lY3gAgABAAAAAAAAAAAAAAAAAAAAAMAXWT1xVr352LnT/jZ5GADg6oKpDAanmPWEkLLQnd//6z33o90OmhOszPxfV/vN8iU7wG/UdrXJrxFRFzBTaRDR5Bv1OzS+qvF/FmbaUkhdXXISbjY1EsYQKBv8Ur25gQukqmskvCHg8FvGqUtrfYOEMwRoBbjkHLTbBn/C8laAb5iqBPGuaN57hkB58yrb2MoRazeZUv81z+DP1RmIVm4b9HKVe+35k6bOrUMv40qQStW4iFyBSLe4mDsQKMMFKRCnNLggU4A0DkmSk6BFkuYkMLgwA6JscXEWBClxebpMdAUkNYhxj1GoRFdA8lpWDRjBA4hwZTASXSS6BRKbwCFA/hBwGJFNoAaSPgQcRmUFDIC0h4DDyGz0LSDtIfCA0dnYp4Ckh0CGAjxCPE8oQA3RdCiCSnQPJHn8IijRZTBDIWz8JTDJZbBFMVSiSyCpEq0CiU61CCAq0RlAqkRnANGJz4AYc+AORalEV0Ha9DuNDPwQI/ccMOxL+Fv7PPJDdjhXKfQcMHYA5Hlkh9yPQq9FcpylKtgrx7chVuaZWP/iMc0GhEjaCFtu+4k9cQi5gSW9wRkO8CMH9Bh+veh8FLcEjBP8yItv9vBDiBNXB1v4MXvSEGKkVQF6AuD2JyMkbiXwNmhI3gWEeNzDcmzQ/6cLD4l9HOjxuAJ+5oU7AyjEK5dVBj15wq/5tcx15FWQ3x8DfwAN4WNO0GVIftoEOFG1YIbHufAEcCuvd7AUK3MKVKIKYcNf0UzgBZSLex3G3wYZIYAzPMm6DFCsNZQREv9K4CXwntaFhcTfB9vAxxZMeEjc41AX9thCFhbioeKcBZn9eWXYIUAhMgqBN0Hv997yQ7YoKwE25KWmfWiIhxX3s+B7+NZ7fogS9wOhw9m2/M7khxAnLwHoSiBQHsJDJCSgRw6n/F9XCg8huawEkKZ2zuXN2ULIED8BEa0JWBOwJmBNwJqABawJWBOwJsChUG5NQPz7gCQeGLYolI1/JxjXo6TnhIf9iCcz7j/EvxTlP7DTHfAkhm7mvFNSfhmiq83JjhhI24ImnpgnJJ41HmEyGi4uIAfadTTvGjxCP8Jipg84PwWUA37rC8Y3m4cJlmSRkwLobI8su6oDQs0X0P1kGnkpgKKzvcYZ9FB9LMDT/MjdT6yek4ISvtR+rPqd588PVdbCl662DUrrfjI51iU/gbbLbOX6fmf+1ffO2exjWcA31KFBod3PeAtqOO/Be7yHmCwe1Z6p5KIygcicB+6cdy9ugvimHn2m8xWdQwcydOPZzuh3sptPnnvOm1MML1p480nXe05FAfYCm89YDt1Z7qA/dSDT5MaZb44xTFraxsdYDB7Bjz8JhlcFEPHDYDjxDzHatiAeXQD4dwD+JNB0QL6YHLyHE3n/d+sLuDStyH/qz/bgQAYAAABgkL/1Pb4KAAAAAAAAAAAAAAAAAAAAAGAlB3yyZnlY4UQAAAAASUVORK5CYII=`;
defaultAvatar6 = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAZlBMVEXrRZ/sUKXxf73zl8nyi8Pwc7f5xOH96PP////+8/ntXKv86PP2rdX60Of1os/vZ7H+9Pn3udvuaLHzi8P73O32rtX0lsnzlsnwdLf95/P4xOH4xeH4udvsUaXxgL383O3yisPvaLFF0RjvAAAET0lEQVR4AezBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAIDZuc/FVnUYDuBiJbLBKs5ooLvv/5B3X3UTdJzAP4f8PldtLTxkM47K8qKk0fKiyn6jtlfFas3MbnSbfM3M9aqofofGN4H/JzSSaEhoLjkJN0VgZegCvuX3QnFDF6hq1qxsXSDyZ3WsLq31LStLF9AZ4JJzsJGWfyC2GeCTuvEEL9NxP9AF/E2+LaSJSqTYVpWnf9T8s1ASNC8tD4pN3A38SBtWEnlQHT2hqgJPYlURpD1PZk+ASp5QRXB8zROqM0ITWS1yEGxYLXMQ1DyxmqAIT04IiOfpOb/QGVAFgpHzLKqFzoBqh1MDzuSWIGQ1z8RlC10ClSxvEwDYBSLPSJZZA0F1gcizkmV3AIAuEHlmstwlAKILHHh2ssRdAEwXKBnALc1nxwACzaZjCNVC10C1WmYRBDANlgxCljgFAkyDG4ZRLXQKVM1Cq0DlllcEAIyByECahY4A5ZY2AgDGwJ6hNNBVkFuHnWMDe0iNuw8IB09/25S9PWR8mj3oPqDv3gf15pC8Bz0WueNRmuzTzGEPEcw9sfvFbZqkh0AshBtr+5WcOETd4B2H39N37u0b2wegScAwBfSevvPo+Gf2EBXh6mCh70lCCEol4C3P8Rmu50AIViXwlNQl9wkhA3KajiT9P11iCMB2IPBxGf3k0d6JH8FKIcdHPdPP1vZaZg01Cz4mHlWHhJABGdRhyOq0CYhQteCWj4upCbBXXiVNRTCHQANVCNdDM5o9ZAdVDO84fRm0hRCP8Ix1GFBZ5lBDCMCRwGPiOW1MCgFYBzeJjy3UCSEQ26Eu7bGFMi0E4O7IE6d0gaw2h5CGYBQCh6T3e/f2EGGsBEjKI4yH1JABAndb8IU+e7GHVHA3CCOPJvaLaQ9RES8BHD2R8vcJIUAJCGwRq+GvK6WHqBVWAlQbYoyr9mwhKsyQABzXBFwTcE3ANQHXBFwTcE3ANQETiAwqXhOwhMeEAc4DhEHJDGeCUG6Bbg5zOPR8Mv1hB3Moanhgp7vnkwjdyHFXodwZ0qNNLz0ncpLpwIN5QqJ0fEStvbGLCTlwsdO/2fIR7pYm43c8PgX2HGjrM8M3m4OnKQlbUkCdBDbZNR2pKjDM5Ve+t6WAsk6C4xFcaJ4yMjR/4suvxI1Jgaf3Nk9N2PGP1vfNdkPvZdIy2uVXPhoO+d/bdFtpYgi79b9CiFG2Tz6jT6r7lkEvv+EtqHDejXef05yEj3o9U8mlZYLCHAfxnGcv0dP8fDjfgzubYzUyhq4/2x59j918VQbDm1MWjw68+aoLA7uiBAfA5humw3iWM+hVR5h87E//BXjv0BY+w2Rwe/ITuJBnpOC7QTjxjRgnr4RPDwB0BTjNIHC6Qb6YHLzQibz83fqMLs0G8lf92R4cyAAAAAAM8re+x1cBAAAAAAAAAAAAAAAAAAAAAKwEXiSjy96AYeIAAAAASUVORK5CYII=`;

localStorage.experiment_2025_02_mobile_render = "Treatment 1: Use new mobile check";

if (localStorage.sa_theme == "dark") {
    document.body.classList.add('theme-dark');
} else if (localStorage.sa_theme == "midnight") {
    document.body.classList.add('theme-midnight');
} else if (localStorage.sa_theme == "light") {
    document.body.classList.add('theme-light');
} else if (localStorage.sa_theme == "neongreen") {
    document.body.classList.add('theme-neongreen');
} else if (localStorage.sa_theme == "neonpurple") {
    document.body.classList.add('theme-neonpurple');
} else {
    localStorage.sa_theme = "dark";
    document.body.classList.add('theme-dark');
}

if (localStorage.discord_banner) {
    
} else {
    localStorage.discord_banner = ``;
}

if (localStorage.discord_avatar && localStorage.discord_avatar != '') {

} else {
    setRandomDiscordAvatar()
}

function setRandomDiscordAvatar() {
    localStorage.discord_avatar = ``;
    const randomAvatar = Math.floor(Math.random() * (6 - 1 + 1)) + 1;

    if (randomAvatar === 1) {
        localStorage.discord_avatar = defaultAvatar1;
    } else if (randomAvatar === 2) {
        localStorage.discord_avatar = defaultAvatar2;
    } else if (randomAvatar === 3) {
        localStorage.discord_avatar = defaultAvatar3;
    } else if (randomAvatar === 4) {
        localStorage.discord_avatar = defaultAvatar4;
    } else if (randomAvatar === 5) {
        localStorage.discord_avatar = defaultAvatar5;
    } else if (randomAvatar === 6) {
        localStorage.discord_avatar = defaultAvatar6;
    }
}


if (localStorage.discord_username && localStorage.discord_username != '') {

} else {
    setRandomDiscordUsername()
}

function setRandomDiscordUsername() {
    localStorage.discord_username = ``;
    fetch('https://apis.kahoot.it/namerator')
    .then(response => response.json())
    .then((data) => {
        localStorage.discord_username = data.name;
    })

}


if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){
    if (localStorage.experiment_2025_02_mobile_render === "Treatment 1: Use new mobile check") {
    




        document.getElementById("options-sidebar-container").remove();

        sessionStorage.setItem('api-token', 'token');

        const api_password = localStorage.getItem("api-password");
        const api_token = sessionStorage.getItem("api-token");
        api = 'https://shop-archives-api.vercel.app/api';
        discordsupport = 'https://support.discord.com/hc/en-us/articles/';
        discordblog = 'https://discord.com/blog/';
        yapperblog = 'https://yapper.shop/blog/';
        cdn = 'https://cdn.yapper.shop/';
        tmpapi = 'https://api.yapper.shop/tmp';


        endpoints = [
            COLLECTIBLES = "/collectibles-categories",
            COLLECTIBLES_IN_SHOP = "/collectibles-categories-published",
            CONSUMABLES = "/consumables",
            MISCELLANEOUS = "/miscellaneous-categories",
            PROFILES_PLUS = "/profiles-plus-categories",
            HOME_PAGE_ALL = "/preview-1",
            HOME_PAGE_LEAKS = "/preview-2",
            HOME_PAGE_PPLUS = "/preview-3",
            PROFILE_EFFECTS = "/user-profile-effects",
            DOWNLOADABLE_DATA = "/downloads",
            PROFILES_PLUS_EFFECTS = "/profiles-plus-profile-effects",
            LEAKS = "/leaked-categories",
            COLLECTIBLES_MARKETING = "/collectibles-marketing",
            COLLECTIBLES_VARIANTS = "/collectibles-categories-variants",
            EXPERIMENT_ROLLOUTS = "/rollout-handler",
            COLLECTIBLES_SHOP_HOME = "/collectibles-shop-home",
            NEW_ITEMS = "/new-items",
            ORBS_SHOP = "/orbs-shop",
            ORBS_SHOP_DEFAULT = "/orbs-shop-default"
        ]

        yapper_categories = [
            WINDOWKILL = "profiles-plus-1",
            BOPL_BATTLE = "profiles-plus-2",
            PAPER_BEACH = "profiles-plus-3",
            WINDOWKILL_V2 = "profiles-plus-4",
            FIVE_NIGHTS_AT_FREDDYS = "profiles-plus-5",
            PLUS_SPECIAL_EVENT = "profiles-plus-6",
            GEOMETRY_DASH = "profiles-plus-7",
            PAPER_BEACH_V2 = "profiles-plus-8",
            RBXDOORS = "profiles-plus-9"
        ]
    
    
        discord_categories = [
            FANTASY = "1144003461608906824",
            ANIME = "1144302037593497701",
            BREAKFAST = "1144054000099012659",
            DISXCORE = "1144058340327047249",
            FALL = "1157406994873991284",
            HALLOWEEN = "1157410718711304313",
            WINTER = "1174459301239197856",
            MONSTERS = "1179493515038818325",
            CYBERPUNK = "1197342727608746044",
            LUNAR_NEW_YEAR = "1202069709281828935",
            ELEMENTS = "1207046915880124426",
            ANIME_V2 = "1212565175790473246",
            SPECIAL_EVENTS = "1217175518781243583",
            SPECIAL_EVENTS_2 = "1309309974266118144",
            SPRINGTOONS = "1217622942175727736",
            SHY = "1220513972189663413",
            LOFI_VIBES = "1228243842684162121",
            GALAXY = "1232029045928099922",
            FEELIN_RETRO = "1237649643073044491",
            PIRATES = "1237653589896200272",
            ARCADE = "1245086656973901894",
            TIDE = "1252404112650407998",
            DARK_FANTASY = "1256321669388308595",
            ROBERT = "1262491137386614805",
            STORM = "1265375293397270650",
            DOJO = "1266520267946201099",
            THE_VAULT = "1277733175191277721",
            AUTUMN_EQUINOX = "1282816432056569866",
            BAND = "1285465421339693076",
            SPOOKY_NIGHT = "1287835634089594972",
            CHANCE = "1293373563494993952",
            MYTHICAL_CREATURES = "1298033986811068497",
            WARRIOR = "1303490165284802580",
            KAWAII_MODE = "1306330663213072494",
            LOFI_GIRL = "1309668861943218229",
            WINTER_WONDERLAND = "1314020997204283476",
            FANTASY_V2 = "1324454241254903829",
            STEAMPUNK = "1326333074241486859",
            PROGRESS = "1333278032999485461",
            RADIATE = "1336483992429658112",
            VALENTINES = "1333866045521395723",
            ORB = "1332505418219655258",
            ANIME_V3 = "1341506445249609728",
            INSOMNIA = "1343751621364027462",
            NAMEPLATE_TEST = "1344802365307621427",
            AESPA = "1346499610977243196"
        ]
    
        category_types = [
            HERO = 0,
            FEATURED = 1,
            FEED = 2,
            WIDE_BANNER = 3
        ]
    
        item_types = [
            NONE = 100,
            AVATAR_DECORATION = 0,
            PROFILE_EFFECT = 1,
            NAMEPLATE = 2,
            BUNDLE = 1e3,
            VARIANTS_GROUP = 2e3,
            EXTERNAL_SKU = 3e3
        ]

        const nameplate_palettes = {
            crimson: {
                "darkBackground": "#900007",
                "lightBackground": "#E7040F"
            },
            berry: {
                "darkBackground": "#893A99",
                "lightBackground": "#B11FCF"
            },
            sky: {
                "darkBackground": "#0080B7",
                "lightBackground": "#56CCFF"
            },
            teal: {
                "darkBackground": "#086460",
                "lightBackground": "#7DEED7"
            },
            forest: {
                "darkBackground": "#2D5401",
                "lightBackground": "#6AA624"
            },
            bubble_gum: {
                "darkBackground": "#DC3E97",
                "lightBackground": "#F957B3"
            },
            violet: {
                "darkBackground": "#730BC8",
                "lightBackground": "#972FED"
            },
            cobalt: {
                "darkBackground": "#0131C2",
                "lightBackground": "#4278FF"
            },
            clover: {
                "darkBackground": "#047B20",
                "lightBackground": "#63CD5A"
            }
        }

        const params = new URLSearchParams(window.location.search);

        function setParams(params) {
            const url = new URL(window.location);
        
            // Clear all existing query parameters
            url.search = '';
        
            // Set the new query parameters from the provided object
            Object.entries(params).forEach(([key, value]) => {
                url.searchParams.set(key, value);
            });
        
            // Update the address bar without reloading the page
            history.replaceState(null, '', url);
        }

        function addParams(params) {
            const url = new URL(window.location);

            Object.entries(params).forEach(([key, value]) => {
                url.searchParams.set(key, value);
            });

            history.replaceState(null, '', url);
        }

        const clickable_side_tabs_container = document.getElementById('clickable-side-tabs-container');
        if (clickable_side_tabs_container) {  // Check if element exists
            document.getElementById('clickable-side-tabs-container').innerHTML = `
                <meta class="mobile-client" name="viewport" content= "width=device-width, user-scalable=no">
                <div class="dm-divider">Shop</div>
                <div id="collectibles-section">
                    <button class="dm-button" id="shop-tab" onclick="setParams({page: 'shop'}); location.reload();">
                        <p class="dm-button-text">Shop</p>
                    </button>
                    <button class="dm-button" id="miscellaneous-tab" onclick="setParams({page: 'miscellaneous'}); location.reload();">
                        <p class="dm-button-text">Other</p>
                    </button>
                </div>
                <div id="new-profiles-plus-tab-container">
                </div>
            `;

            if (localStorage.experiment_2025_02_profiles_plus_home === "Treatment 2: Enabled") {
                document.getElementById('new-profiles-plus-tab-container').innerHTML = `
                    <div class="dm-divider">Profiles Plus</div>
                    <div id="collectibles-section">
                        <button class="dm-button" id="pplus-tab" onclick="setParams({page: 'pplus'}); location.reload();">
                            <p class="dm-button-text">Browse</p>
                        </button>
                    </div>
                `;
            }

            if (localStorage.experiment_2025_02_profiles_plus_home === "Treatment 3: Hide All Profiles Plus Tabs") {
                document.getElementById('new-profiles-plus-tab-container').innerHTML = ``;
            }
        }

        function pageCheck() {
            // if (params.get("page") === "home") {
            //     document.title = "Featured | Shop Archives";
            //     if (localStorage.experiment_2025_02_fetch_from_vercel_endpoits === "Treatment 1: Enabled") {
            //         if (localStorage.unreleased_discord_collectibles == "true") {
            //             url = api + HOME_PAGE_ALL;
            //             apiUrl = new URL(url);
            //             apiUrl.searchParams.set("include-unpublished", "true");
            //         } else {
            //             apiUrl = api + HOME_PAGE_ALL;
            //         }
            //     } else {
            //         apiUrl = api + HOME_PAGE_ALL;
            //     }
            //     createHomePageElement()
            //     document.getElementById("home-tab").classList.add('dm-button-selected');
            //     document.getElementById("top-bar-container").innerHTML = `
            //         <h2 style="margin-left: 260px; margin-top: 10px;">Featured</h2>
            //         <div id="open-help-modals-buttons-holder"></div>
            //     `;
            // } else if (params.get("page") === "year_recap") {
            //     document.title = "2025 Recap | Shop Archives";
            //     document.getElementById("recap-2024-tab").classList.add('dm-button-selected');
            //     localStorage.dismissible_recap_2024 = "Treatment 1: Seen";
            //     document.getElementById("top-bar-container").innerHTML = `
            //         <h2 style="margin-left: 260px; margin-top: 10px;">2025 Recap</h2>
            //         <div id="open-help-modals-buttons-holder"></div>
            //     `;
            // } else 
            
            if (params.get("page") === "shop") {
                document.title = "Shop All | Shop Archives";
                if (localStorage.experiment_2025_02_fetch_from_vercel_endpoits === "Treatment 1: Enabled") {
                    if (localStorage.unreleased_discord_collectibles == "true") {
                        url = api + COLLECTIBLES;
                        apiUrl = new URL(url);
                        apiUrl.searchParams.set("include-unpublished", "true");
                    } else {
                        apiUrl = api + COLLECTIBLES;
                    }
                } else {
                    apiUrl = api + COLLECTIBLES;
                }
                createMainShopElement()
                document.getElementById("shop-tab").classList.add('dm-button-selected');
                document.getElementById("top-bar-container").innerHTML = `
                    <h2 style="margin-left: 10px; margin-top: 10px;">Shop > Shop All</h2>
                    <div id="open-help-modals-buttons-holder"></div>
                `;
            }
            
            // else if (params.get("page") === "orbs") {
            //     document.title = "Orb Rewards | Shop Archives";
            //     if (localStorage.experiment_2025_02_orbs_shop === "Treatment 2: Orb Shop done like default") {
            //         apiUrl = api + ORBS_SHOP_DEFAULT;
            //     } else {
            //         apiUrl = api + ORBS_SHOP;
            //     }
            //     createMainPotionsElement()
            //     document.getElementById("top-bar-container").innerHTML = `
            //         <h2 style="margin-left: 260px; margin-top: 10px;">Shop > Orb Rewards</h2>
            //         <div id="open-help-modals-buttons-holder"></div>
            //     `;
            // }
            // else if (params.get("page") === "leaks") {
            //     document.title = "Leaks | Shop Archives";
            //     if (localStorage.experiment_2025_02_fetch_from_vercel_endpoits === "Treatment 1: Enabled") {
            //         if (localStorage.unreleased_discord_collectibles == "true") {
            //             url = api + LEAKS;
            //             apiUrl = new URL(url);
            //             apiUrl.searchParams.set("include-unpublished", "true");
            //         } else {
            //             apiUrl = api + LEAKS;
            //         }
            //     } else {
            //         apiUrl = api + LEAKS;
            //     }
            //     createMainShopElement()
            //     document.getElementById("top-bar-container").innerHTML = `
            //         <h2 style="margin-left: 260px; margin-top: 10px;">Shop > Leaks</h2>
            //         <div id="open-help-modals-buttons-holder"></div>
            //     `;
            // } 
            else if (params.get("page") === "consumables") {
                document.title = "Potions | Shop Archives";
                if (localStorage.experiment_2025_02_fetch_from_vercel_endpoits === "Treatment 1: Enabled") {
                    if (localStorage.unreleased_discord_collectibles == "true") {
                        url = api + CONSUMABLES;
                        apiUrl = new URL(url);
                        apiUrl.searchParams.set("include-unpublished", "true");
                    } else {
                        apiUrl = api + CONSUMABLES;
                    }
                } else {
                    apiUrl = api + CONSUMABLES;
                }
                createMainPotionsElement()
                document.getElementById("potions-tab").classList.add('dm-button-selected');
                document.getElementById("top-bar-container").innerHTML = `
                    <h2 style="margin-left: 10px; margin-top: 10px;">Shop > Potions</h2>
                    <div id="open-help-modals-buttons-holder"></div>
                `;
            } else if (params.get("page") === "miscellaneous") {
                document.title = "Miscellaneous | Shop Archives";
                if (localStorage.experiment_2025_02_fetch_from_vercel_endpoits === "Treatment 1: Enabled") {
                    if (localStorage.unreleased_discord_collectibles == "true") {
                        url = api + MISCELLANEOUS;
                        apiUrl = new URL(url);
                        apiUrl.searchParams.set("include-unpublished", "true");
                    } else {
                        apiUrl = api + MISCELLANEOUS;
                    }
                } else {
                    apiUrl = api + MISCELLANEOUS;
                }
                createMainShopElement()
                document.getElementById("miscellaneous-tab").classList.add('dm-button-selected');
                document.getElementById("top-bar-container").innerHTML = `
                    <h2 style="margin-left: 10px; margin-top: 10px;">Shop > Miscellaneous</h2>
                    <div id="open-help-modals-buttons-holder"></div>
                `;
            }
            // else if (params.get("page") === "pplus-home") {
            //     document.title = "Featured | Shop Archives";
            //     if (localStorage.experiment_2025_02_fetch_from_vercel_endpoits === "Treatment 1: Enabled") {
            //         if (localStorage.unreleased_profiles_plus == "true") {
            //             url = api + HOME_PAGE_PPLUS;
            //             apiUrl = new URL(url);
            //             apiUrl.searchParams.set("include-unpublished", "true");
            //         } else {
            //             apiUrl = api + HOME_PAGE_PPLUS;
            //         }
            //     } else {
            //         apiUrl = api + HOME_PAGE_PPLUS;
            //     }
            //     createHomePageElement()
            //     document.getElementById("pplus-home-tab").classList.add('dm-button-selected');
            //     document.getElementById("top-bar-container").innerHTML = `
            //         <h2 style="margin-left: 260px; margin-top: 10px;">Profiles Plus > Featured</h2>
            //         <div id="open-help-modals-buttons-holder"></div>
            //     `;
            // }

            else if (params.get("page") === "pplus") {
                document.title = "Profiles Plus | Shop Archives";
                if (localStorage.experiment_2025_02_fetch_from_vercel_endpoits === "Treatment 1: Enabled") {
                    if (localStorage.unreleased_profiles_plus == "true") {
                        url = api + PROFILES_PLUS;
                        apiUrl = new URL(url);
                        apiUrl.searchParams.set("include-unpublished", "true");
                    } else {
                        apiUrl = api + PROFILES_PLUS;
                    }
                } else {
                    apiUrl = api + PROFILES_PLUS;
                }
                if (localStorage.experiment_2024_12_profiles_plus_marketing_variants == "Treatment 1: Paper Beach V2") {
                    localStorage.dismissible_paper_beach_v2_marketing = "Treatment 1: Seen";
                } else if (localStorage.experiment_2024_12_profiles_plus_marketing_variants == "Treatment 2: Roblox Doors") {
                    localStorage.dismissible_roblox_doors_marketing = "Treatment 1: Seen";
                }
                createMainShopElement()
                document.getElementById("pplus-tab").classList.add('dm-button-selected');
                document.getElementById("top-bar-container").innerHTML = `
                    <h2 style="margin-left: 10px; margin-top: 10px;">Profiles Plus > Browse All</h2>
                    <div id="open-help-modals-buttons-holder"></div>
                `;
            } else if (params.get("page") === "published_listings") {
                document.title = "Published Listings | Shop Archives";
                createPublishedListingsPageElement()
                document.getElementById("published-listings-tab").classList.add('dm-button-selected');
                document.getElementById("top-bar-container").innerHTML = `
                    <h2 style="margin-left: 260px; margin-top: 10px;">Published Listings</h2>
                    <div id="open-help-modals-buttons-holder"></div>
                `;
            } else if (params.get("page") === "orb_converter") {
                document.title = "Orb Converter | Shop Archives";
                createOrbConverterPageElement()
                document.getElementById("orb-converter-tab").classList.add('dm-button-selected');
                document.getElementById("top-bar-container").innerHTML = `
                    <h2 style="margin-left: 260px; margin-top: 10px;">Orb Converter</h2>
                    <div id="open-help-modals-buttons-holder"></div>
                `;
            } else if (params.get("page") === "item_tool") {
                document.title = "Item Tool | Shop Archives";
                createItemToolPageElement()
                document.getElementById("avatar-decorations-debug-tab").classList.add('dm-button-selected');
                document.getElementById("top-bar-container").innerHTML = `
                    <h2 style="margin-left: 260px; margin-top: 10px;">Item Tool | Staff Only</h2>
                    <div id="open-help-modals-buttons-holder"></div>
                `;
            } else {
                setParams({page: 'shop',err: '404'});
                document.title = "Shop All | Shop Archives";
                location.reload();
            }
        }
    
        pageCheck();

        function fetchData() {
            if (params.get("page") != "home" && params.get("page") != "pplus-home" && params.get("page") != "year_recap") {
    
                let profileEffectsCache = null; // Cache for the profile effects data
    
                // Make the function async
                fetch(apiUrl, {
                    method: "GET",
                    headers: {
                        "Password": api_password,
                        "Token": api_token
                    }
                })
                    .then(response => response.json())
                    .then((data) => {
    
                        if (data.message === "Missing Access") {
                            document.getElementById("everything-housing-container").innerHTML = `
                                <div style="text-align: center; margin-top: 10px;" id="failed-to-load-shop">
                                    <img style="width: 200px;" src="https://raw.githubusercontent.com/DTACat/Collectibles/main/Images/shopuhoh.png">
                                    <h2>Well, this is awkward.</h2>
                                    <p>Hmmm, we weren&#8217;t able to load the shop. Check back later.</p>
                                    <p>Error: Missing Access</p>
                                    <button class="refresh-button" onclick="location.reload();">Reload</button>
                                </div>
                            `;
                        } else {
                            processCategories();
                        }
                        // Define async function inside the .then block
                        async function processCategories() {
                            const categoryTemplate = document.querySelector("[data-shop-category-template]");
                            const potionTemplate = document.querySelector("[data-potion-card-template]");
                            const categoryOutput = document.querySelector("[data-shop-output]");
                            const page = params.get("page");
                
                            for (const apiCategory of data) {
                                if (page === "pplus") {
                                    // Existing code for 'pplus' page
                                    const category = categoryTemplate.content.cloneNode(true).children[0];
                                    category.querySelector("[data-shop-category-banner]").id = apiCategory.sku_id;
                
                                    category.querySelector("[data-shop-category-banner-image]").src = `https://cdn.yapper.shop/assets/${apiCategory.mobile_banner}.png`;
                                    category.querySelector("[data-shop-category-banner-image]").alt = 'No Mobile Banner';
    
                                    if (apiCategory.category_bg != null) {
                                        category.querySelector("[data-shop-category-marketing-bg]").src = `https://cdn.yapper.shop/assets/${apiCategory.category_bg}.png`;
                                    }
    
    
                                    const cardOutput = category.querySelector("[data-shop-category-card-holder]");
                                    if (cardOutput) {
                                        for (const product of apiCategory.products) {
                                            const cardTemplate = document.querySelector("[data-shop-item-card-template]");
                                            const card = cardTemplate.content.cloneNode(true).children[0];
    
                                            if (product.type === NONE) {
                                                card.classList.add("type_100");
                                                card.classList.add('hidden')
                                            } else if (product.type === AVATAR_DECORATION) {
                                                product.items.forEach(item => {
                                                    card.classList.add("type_0");
                                                    // Set the innerHTML for the preview holder
                                                    const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                                    previewHolder.classList.add('avatar-decoration-image');
                                                    
                                                    // Set the initial image for the deco card
                                                    const imgElement = document.createElement("img");
                                                    imgElement.id = "shop-card-deco-image";
                                                    imgElement.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;
                                                    
                                                    previewHolder.appendChild(imgElement);
    
                                                    const bgimg = document.createElement("div");
                                                    bgimg.id = "shop-card-deco-bg-image";
                                                    
                                                    previewHolder.appendChild(bgimg);
                                            
                                                    // Set the product details
                                                    card.querySelector("[data-product-card-sku-id]").textContent = `Made By: ${product.credits}`;
                                                    card.querySelector("[data-product-card-name]").textContent = product.name;
                                                    card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                            
                                                    // Hover effect: Change the image src on mouse enter and leave
                                                    if (localStorage.reduced_motion != "true") {
                                                        card.addEventListener("mouseenter", () => {
                                                            imgElement.src = `https://cdn.yapper.shop/custom-collectibles/${item.animated}.png`;
                                                            if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                            }
                                                        });
                                                
                                                        card.addEventListener("mouseleave", () => {
                                                            imgElement.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;
                                                            bgimg.style.backgroundImage = `url(data:image/png;base64,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)`;
                                                        });
                                                    }
                                                });
                                            } else if (product.type === PROFILE_EFFECT) {
                                                card.classList.add("type_1");
    
                                                card.querySelector("[data-product-card-sku-id]").textContent = `Made By: ${product.credits}`;
                                                card.querySelector("[data-product-card-name]").textContent = product.name;
                                                card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                                
                                                // Ensure the item ID is accessible here
                                                let itemId = undefined;
                                                if (Array.isArray(product.items)) {
                                                    // If items is an array, find the item with type 1 and get its id
                                                    const item = product.items.find(item => item.type === 1);
                                                    if (item) {
                                                        itemId = item.id;
                                                    }
                                                } else if (product.items && product.items.type === 1) {
                                                    // If items is an object and has type 1, get its id
                                                    itemId = product.items.id;
                                                }
                                            
                                            
                                                // Fetch profile effects API only if not already cached
                                                if (!profileEffectsCache) {
                                                    const response = await fetch(api + PROFILES_PLUS_EFFECTS, {
                                                        method: "GET",
                                                        headers: {
                                                            "Password": api_password,
                                                            "Token": api_token
                                                        }
                                                    });
                                                    const effectsData = await response.json();
                                                    profileEffectsCache = effectsData.profile_effect_configs;
                                                }
                                            
                                                // Find matching profile effect
                                                const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                            
                                                if (matchingEffect) {
                                                    const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                                    previewHolder.classList.add('profile-effect-image');
                                            
                                                    previewHolder.innerHTML = `
                                                        <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                    `;
                                            
                                                    // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                    const imgElement = card.querySelector("img");
                                            
                                                    if (localStorage.reduced_motion != "true") {
                                                        card.addEventListener("mouseenter", () => {
                                                            if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                const effectUrl = matchingEffect.effects[0]?.src;
                                                                imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                            }
                                                        });
                                                
                                                        card.addEventListener("mouseleave", () => {
                                                            // Revert back to the original thumbnailPreviewSrc when hover ends
                                                            imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                        });
                                                    } else {
                                                        card.addEventListener("mouseenter", () => {
                                                            imgElement.src = matchingEffect.reducedMotionSrc;
                                                        });
                                                
                                                        card.addEventListener("mouseleave", () => {
                                                            // Revert back to the original thumbnailPreviewSrc when hover ends
                                                            imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                        });
                                                    }
                                                }
                                            } else if (product.type === NAMEPLATE) {
                                                card.classList.add("type_2");
    
                                                if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                                } else {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                }
                                                card.querySelector("[data-product-card-name]").textContent = product.name;
                                                card.querySelector("[data-product-card-summary]").textContent = product.summary;
    
                                                const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
    
                                                if (localStorage.discord_username && localStorage.discord_username != '') {
                                                    previewName = localStorage.discord_username;
                                                } else {
                                                    previewName = 'Discord User'
                                                }
    
                                                previewHolder.innerHTML = `
                                                    <div class="nameplate-null-user">
                                                        <div class="nameplate-null-user-avatar"></div>
                                                        <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                    </div>
                                                    <div class="nameplate-null-user">
                                                        <div class="nameplate-null-user-avatar"></div>
                                                        <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                    </div>
                                                    <div class="nameplate-null-user" data-user-nameplate-preview>
                                                        <div class="nameplate-user-avatar" data-nameplate-user-random-avatar></div>
                                                        <p class="nameplate-user-name">${previewName}</p>
                                                    </div>
                                                    <div class="nameplate-null-user">
                                                        <div class="nameplate-null-user-avatar"></div>
                                                        <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                    </div>
                                                    <div class="nameplate-null-user">
                                                        <div class="nameplate-null-user-avatar"></div>
                                                        <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                    </div>
                                                `;
    
                                                const nameplatePreview = previewHolder.querySelector("[data-user-nameplate-preview]");
    
                                                nameplatePreview.style.backgroundImage = `linear-gradient(10deg, #00000000 40%,rgb(144, 0, 7) 180%), linear-gradient(170deg, #00000000 40%,rgb(144, 0, 7) 180%)`;
                                                nameplatePreview.style.boxShadow = `0 0 0 1px #a10606`;
    
                                                const nullUserNameRandomWidth = previewHolder.querySelectorAll("[data-null-user-random-name]");
    
                                                nullUserNameRandomWidth.forEach(UserName => {
                                                    const randomWidth = Math.floor(Math.random() * (180 - 80 + 1)) + 80;
                                                    UserName.style.width = randomWidth + `px`;
                                                });
    
                                                const nullUserAvatar = previewHolder.querySelectorAll("[data-nameplate-user-random-avatar]");
    
                                                nullUserAvatar.forEach(UserAvatar => {
                                                    UserAvatar.style.backgroundImage = `url(${localStorage.discord_avatar})`;
                                                });
                                                
                                            } else if (product.type === BUNDLE) {
                                                card.classList.add("type_1000");
                                                // Fetch the bundled products for the bundle summary
                                                const bundledProducts = product.bundled_products || [];
                                            
                                                // Generate the bundle summary from the names of the bundled products
                                                const type0Product = bundledProducts.find(item => item.type === 0);
                                                const type1Product = bundledProducts.find(item => item.type === 1);
                                            
                                                let bundleSummary = "Bundle Includes: ";
                                                if (type0Product) {
                                                    bundleSummary += `${type0Product.name} Decoration`;
                                                }
                                                if (type1Product) {
                                                    bundleSummary += ` & ${type1Product.name} Profile Effect`;
                                                }
                                            
                                                // Set the summary text
                                                card.querySelector("[data-product-card-summary]").textContent = bundleSummary;
                                            
                                                // Set the basic card details
                                                card.querySelector("[data-product-card-sku-id]").textContent = `Made By: ${product.credits}`;
                                                card.querySelector("[data-product-card-name]").textContent = product.name;
                                            
                                                // Handle each item in the bundle
                                                product.items.forEach(item => {
                                                    if (item.type === 0) {
                                                        // Avatar decoration
                                                        const decoImage = document.createElement("img");
                                                        decoImage.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;
                                                        decoImage.alt = "Avatar Decoration";
                                                        decoImage.classList.add("avatar-decoration-image");
                                                        card.querySelector("[data-shop-card-preview-holder]").appendChild(decoImage);
    
                                                        const bgimg = document.createElement("div");
                                                        bgimg.classList.add("avatar-decoration-bg-image");
                                                        
                                                        card.querySelector("[data-shop-card-preview-holder]").appendChild(bgimg);
                                            
                                                        // Hover effect for decoration image
                                                        if (localStorage.reduced_motion != "true") {
                                                            card.addEventListener("mouseenter", () => {
                                                                decoImage.src = `https://cdn.yapper.shop/custom-collectibles/${item.animated}.png`;
                                                                if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                    bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                                }
                                                            });
                                                            card.addEventListener("mouseleave", () => {
                                                                decoImage.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;
                                                                bgimg.style.backgroundImage = `url(data:image/png;base64,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)`;
                                                            });
                                                        }
                                                    } else if (item.type === 1) {
                                                        // Profile effect
                                                        let profileEffectsCache = null; // Cache profile effects to avoid multiple fetches
                                            
                                                        (async () => {
                                                            if (!profileEffectsCache) {
                                                                const response = await fetch(api + PROFILES_PLUS_EFFECTS, {
                                                                    method: "GET",
                                                                    headers: {
                                                                        "Password": api_password,
                                                                        "Token": api_token
                                                                    }
                                                                });
                                                                const effectsData = await response.json();
                                                                profileEffectsCache = effectsData.profile_effect_configs;
                                                            }
                                            
                                                            const matchingEffect = profileEffectsCache.find(effect => effect.id === item.id);
                                            
                                                            if (matchingEffect) {
                                                                const effectImage = document.createElement("img");
                                                                effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                effectImage.alt = "Profile Effect";
                                                                effectImage.classList.add("profile-effect-image");
                                                                card.querySelector("[data-shop-card-preview-holder]").appendChild(effectImage);
                                            
                                                                // Hover effect for profile effect
                                                                if (localStorage.reduced_motion != "true") {
                                                                    card.addEventListener("mouseenter", () => {
                                                                        if (matchingEffect.effects && matchingEffect.effects[0] && matchingEffect.effects[0].src) {
                                                                            effectImage.src = matchingEffect.effects[0].src;
                                                                        }
                                                                    });
                                                                    card.addEventListener("mouseleave", () => {
                                                                        effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                } else {
                                                                    card.addEventListener("mouseenter", () => {
                                                                        effectImage.src = matchingEffect.reducedMotionSrc;
                                                                    });
                                                                    card.addEventListener("mouseleave", () => {
                                                                        effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                }
                                                            }
                                                        })();
                                                    }
                                                });
                                            } else if (product.type === VARIANTS_GROUP) {
                                                // Update SKU and summary
                                                card.querySelector("[data-product-card-sku-id]").textContent = `Made By: ${product.credits}`;
                                                card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                            
                                                // Always display the base variant name
                                                card.querySelector("[data-product-card-name]").textContent = product.variants[0]?.base_variant_name || "Product";
                                            
                                                // Render variant color blocks as interactive divs
                                                const variantContainer = card.querySelector("[data-shop-card-var-container]");
                                                variantContainer.innerHTML = ""; // Clear existing variant blocks
                                                let currentSelectedVariant = null; // Track selected variant
                                            
                                                product.variants.forEach((variant, index) => {
                                                    // Create variant color block
                                                    const variantColorBlockTmp = document.querySelector("[data-shop-varcolorblock-template]");
                                                    const variantColorBlock = variantColorBlockTmp.content.cloneNode(true).children[0];
                                                    variantColorBlock.classList.add("shop-card-var");
                                                    variantColorBlock.id = "shop-card-var";
                                                    variantColorBlock.style.backgroundColor = `${variant.variant_value}`;
                                            
                                                    // Add click event listener to switch variants
                                                    variantColorBlock.addEventListener("click", () => {
                                                        if (currentSelectedVariant) {
                                                            currentSelectedVariant.classList.remove("shop-card-var-selected");
                                                        }
                                                        variantColorBlock.classList.add("shop-card-var-selected");
                                                        currentSelectedVariant = variantColorBlock;
                                                        applyVariant(variant);
                                                    });
                                            
                                                    // Append the color block to the container
                                                    variantContainer.appendChild(variantColorBlock);
                                            
                                                    // Set the first variant as the default selected
                                                    if (index === 0) {
                                                        currentSelectedVariant = variantColorBlock;
                                                        variantColorBlock.classList.add("shop-card-var-selected");
                                                    }
                                                });
    
                                                let isFirstTimeLoadingVariant = true;
                                                const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                            
                                                // Function to apply the selected variant
                                                function applyVariant(selectedVariant) {
                                                    card.querySelector("[data-shop-card-var-title]").textContent = `(${selectedVariant.variant_label})`;
                                                    if (selectedVariant.type === 0) {
                                                        card.classList.add("type_2000-0");
                                                        previewHolder.innerHTML = ""; // Clear previous decorations
                                                        previewHolder.classList.add('avatar-decoration-image');
                                                        
                                                        // Add the avatar decoration based on the selected variant
                                                        selectedVariant.items?.forEach(item => {
                                                            const decoImage = document.createElement("img");
                                                            const bgimg = document.createElement("div");
                                                            if (isFirstTimeLoadingVariant == true) {
                                                                decoImage.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;
                                                                isFirstTimeLoadingVariant = false;
                                                            } else {
                                                                decoImage.src = `https://cdn.yapper.shop/custom-collectibles/${item.animated}.png`;
                                                                if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                    bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                                }
                                                            }
                                                            decoImage.alt = "Avatar Decoration";
                                                            decoImage.id = "shop-card-deco-image";
                                                            previewHolder.appendChild(decoImage);
    
                                                            bgimg.id = "shop-card-deco-bg-image";
    
                                                            previewHolder.appendChild(bgimg);
                                                        
                                                            // Hover effect for decoration image
                                                            if (localStorage.reduced_motion !== "true") {
                                                                card.addEventListener("mouseenter", () => {
                                                                    decoImage.src = `https://cdn.yapper.shop/custom-collectibles/${item.animated}.png`;
                                                                    if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                        bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                                    }
                                                                });
                                                                card.addEventListener("mouseleave", () => {
                                                                    decoImage.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;
                                                                    bgimg.style.backgroundImage = `url(data:image/png;base64,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)`;
                                                                });
                                                            }
                                                        });
                                                    } else if (selectedVariant.type === 1) {
                                                        card.classList.add("type_2000-1");
                                                        (async () => {
                                                            // Ensure the item ID is accessible here
                                                            let itemId = undefined;
                                                            if (Array.isArray(selectedVariant.items)) {
                                                                // If items is an array, find the item with type 1 and get its id
                                                                const item = selectedVariant.items.find(item => item.type === 1);
                                                                if (item) {
                                                                    itemId = item.id;
                                                                }
                                                            } else if (selectedVariant.items && selectedVariant.items.type === 1) {
                                                                // If items is an object and has type 1, get its id
                                                                itemId = selectedVariant.items.id;
                                                            }
                                                        
                                                        
                                                            // Fetch profile effects API only if not already cached
                                                            if (!profileEffectsCache) {
                                                                const response = await fetch(api + PROFILES_PLUS_EFFECTS, {
                                                                    method: "GET",
                                                                    headers: {
                                                                        "Password": api_password,
                                                                        "Token": api_token
                                                                    }
                                                                });
                                                                const effectsData = await response.json();
                                                                profileEffectsCache = effectsData.profile_effect_configs;
                                                            }
                                                        
                                                            // Find matching profile effect
                                                            const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                                        
                                                            if (matchingEffect) {
                                                                const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                                                previewHolder.classList.add('profile-effect-image');
                                                            
                                                                if (isFirstTimeLoadingVariant == true) {
                                                                    previewHolder.innerHTML = `
                                                                        <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                                    `;
                                                                    isFirstTimeLoadingVariant = false;
                                                                } else {
                                                                    previewHolder.innerHTML = `
                                                                        <img class="thumbnail-preview" src="${matchingEffect.effects[0]?.src}">
                                                                    `;
                                                                }
                                                            
                                                                // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                                const imgElement = card.querySelector("img");
                                                            
                                                                if (localStorage.reduced_motion != "true") {
                                                                    card.addEventListener("mouseenter", () => {
                                                                        if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                            const effectUrl = matchingEffect.effects[0]?.src;
                                                                            imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                        }
                                                                    });
                                                                
                                                                    card.addEventListener("mouseleave", () => {
                                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                } else {
                                                                    card.addEventListener("mouseenter", () => {
                                                                        imgElement.src = matchingEffect.reducedMotionSrc;
                                                                    });
                                                                
                                                                    card.addEventListener("mouseleave", () => {
                                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                }
                                                            }
                                                        })();
                                                    }
                                                }
                                            
                                                // Apply the default variant (first one) initially
                                                if (product.variants.length > 0) {
                                                    applyVariant(product.variants[0]);
                                                }
                                            } else if (product.type === EXTERNAL_SKU) {
                                                card.classList.add("type_3000");
    
                                                if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                                } else {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                }
                                                card.querySelector("[data-product-card-name]").textContent = product.name;
                                                card.querySelector("[data-product-card-summary]").textContent = product.summary;
    
                                                const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
    
                                                previewHolder.innerHTML = `
                                                    <p>item type 3000 (EXTERNAL_SKU) is not yet defined on the client, please remove it from the api</p>
                                                `;
                                                
                                            } else if (product.type === 'plus_more') {
                                                card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                                card.querySelector("[data-product-card-name]").textContent = `Plus More...`;
                                                card.querySelector("[data-product-card-summary]").textContent = `There are more items in this category that are coming soon.`;
    
                                                card.querySelector("[data-shop-price-container]").innerHTML = ``;
                                                card.querySelector("[data-product-card-open-in-shop]").innerHTML = ``;
                                                card.querySelector("[data-share-product-card-button]").innerHTML = ``;
    
                                                const plusMoreQuestionMark = document.createElement("img");
                                                plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.png`;
                                                plusMoreQuestionMark.classList.add("plus-more-question-mark");
                                                card.querySelector("[data-shop-card-preview-holder]").appendChild(plusMoreQuestionMark);
                                    
                                                // Hover effect for decoration image
                                                if (localStorage.reduced_motion != "true") {
                                                    card.addEventListener("mouseenter", () => {
                                                        plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.gif`;
                                                    });
                                                    card.addEventListener("mouseleave", () => {
                                                        plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.png`;
                                                    });
                                                }
                                            } else {
                                                card.classList.add('hidden')
                                            }
    
    
    
                                            if (product.emojiCopy === null) {
                                                card.querySelector("[data-product-card-open-in-shop]").innerHTML = `
                                                    <button class="card-button" onclick="location.href='https://discord.gg/Mcwh7hGcWb';" title="Request item in our Discord server">Request to P+</button>
                                                `;
                                            } else {
                                                card.querySelector("[data-product-card-open-in-shop]").innerHTML = `
                                                    <button class="card-button" onclick="copyEmoji('${product.emojiCopy}');" title="Request item in our Discord server">Copy P+ Emoji</button>
                                                `;
                                            }
    
                                            if (product.premium_type === 2) {
                                                card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                    <div class="premiumWheelBadge_c23530 textBadge_df8943 base_df8943 eyebrow_df8943 baseShapeRound_df8943" aria-label="This bonus item is yours to keep and use anytime with an active Nitro subscription." style="background-color: var(--status-danger);"><svg class="premiumWheel_c23530" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M15 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" class=""></path><path fill="currentColor" fill-rule="evenodd" d="M7 4a1 1 0 0 0 0 2h3a1 1 0 1 1 0 2H5.5a1 1 0 0 0 0 2H8a1 1 0 1 1 0 2H6a1 1 0 1 0 0 2h1.25A8 8 0 1 0 15 4H7Zm8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" clip-rule="evenodd" class=""></path><path fill="currentColor" d="M2.5 10a1 1 0 0 0 0-2H2a1 1 0 0 0 0 2h.5Z" class=""></path></svg></div>
                                                `;
                                            }
    
    
                                            const unpublishedAt = new Date(product.unpublished_at);
                                
                                            if (product.unpublished_at && !isNaN(unpublishedAt.getTime())) {
                                
                                                function updateTimer() {
                                                    const now = new Date();
                                                    const timeDiff = unpublishedAt - now;
                                
                                                    if (timeDiff <= 0) {
                                                        card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="unplublished-tag">
                                                                <p class="unplublished-tag-text">OFF SALE</p>
                                                            </div>
                                                        `;
                                                        clearInterval(timerInterval);
                                                    } else {
                                                        const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                        const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                        const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                                
                                                        card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="unplublished-tag">
                                                                <p class="unplublished-tag-text">${days} DAYS LEFT TO REQUEST</p>
                                                            </div>
                                                        `;
                                                    }
                                                }
                                
                                                const timerInterval = setInterval(updateTimer, 1000);
                                                updateTimer();
                                            }
    
    
                                            const ExpiredAt = new Date(product.expires_at);
                                
                                            if (product.expires_at && !isNaN(ExpiredAt.getTime())) {
                                
                                                function updateTimer() {
                                                    const now = new Date();
                                                    const timeDiff = ExpiredAt - now;
                                
                                                    if (timeDiff <= 0) {
                                                        card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="unplublished-tag">
                                                                <p class="unplublished-tag-text">EXPIRED</p>
                                                            </div>
                                                        `;
                                                        clearInterval(timerInterval);
                                                    } else {
                                                        const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                        const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                        const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                                
                                                        card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="unplublished-tag">
                                                                <p class="unplublished-tag-text">EXPIRES IN ${days}D ${hours}H</p>
                                                            </div>
                                                        `;
                                                    }
                                                }
                                
                                                const timerInterval = setInterval(updateTimer, 1000);
                                                updateTimer();
                                            }
    
                                            const ReleasesAt = new Date(product.releases_at);
                                
                                            if (product.releases_at && !isNaN(ReleasesAt.getTime())) {
                                
                                                function updateTimer() {
                                                    const now = new Date();
                                                    const timeDiff = ReleasesAt - now;
                                
                                                    if (timeDiff <= 0) {
                                                        card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="unplublished-tag">
                                                                <p class="unplublished-tag-text">PUBLISHING...</p>
                                                            </div>
                                                        `;
                                                        clearInterval(timerInterval);
                                                    } else {
                                                        const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                        const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                        const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                                
                                                        card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="unplublished-tag">
                                                                <p class="unplublished-tag-text">${days}D ${hours}H</p>
                                                            </div>
                                                        `;
                                                    }
                                                }
                                
                                                const timerInterval = setInterval(updateTimer, 1000);
                                                updateTimer();
                                            }
    
                                            // Append card to output
                                            card.classList.add('shop-category-card-transparent')
                                            cardOutput.append(card);
                                        }
                                    }
                
                                    categoryOutput.append(category);
                                    
    
                                } else if (page === "consumables") {
                                    // Existing code for 'consumables' page
                                    const potionCard = potionTemplate.content.cloneNode(true).children[0];
                                    potionCard.querySelector("[data-potion-card-holder]").id = apiCategory.sku_id;
    
                                    potionCard.id = apiCategory.sku_id;
    
                                    potionCard.querySelector("[data-potion-card-holder]").classList.add('potion-card-gradient1');
                
                                    if (apiCategory.src === null) {
                                        potionCard.querySelector("[data-potion-card-preview-image]").src = `https://cdn.yapper.shop/assets/31.png`;
                                    } else {
                                        potionCard.querySelector("[data-potion-card-preview-image]").src = `https://cdn.yapper.shop/${apiCategory.endpoint}/${apiCategory.src}.${apiCategory.format}`;
                                    }
                                    potionCard.querySelector("[data-potion-card-preview-image]").alt = apiCategory.name;
    
                                    if (apiCategory.new_text != null) {
                                        potionCard.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                            <div class="unplublished-tag">
                                                <p class="unplublished-tag-text">${apiCategory.new_text}</p>
                                            </div>
                                        `;
                                    }
                
                                    if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                        potionCard.querySelector("[data-product-card-sku-id]").textContent = ``;
                                    } else {
                                        potionCard.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${apiCategory.sku_id}`;
                                    }
                                    potionCard.querySelector("[data-product-card-name]").textContent = apiCategory.name;
                                    potionCard.querySelector("[data-product-card-summary]").textContent = apiCategory.summary;
    
                                    let priceStandard = "N/A";
                            
                                    if (apiCategory.price) {
                                        priceStandard = apiCategory.price.amount;
                                    }
    
    
                                    if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                        potionCard.classList.add('clickable');
    
                                        potionCard.addEventListener("click", () => {
                                            openItemModal();
                                        });
    
                                        async function openItemModal() {
                                            let modal = document.createElement("div");
    
                                            modal.classList.add('modalv2');
    
                                            if (apiCategory.pdp_bg != null) {
                                                pdp = apiCategory.pdp_bg
                                            } else {
                                                pdp = apiCategory.banner
                                            }
    
                                            modal.innerHTML = `
                                                <div class="modalv2-inner">
                                                    <div class="modalv2-inner-left">
                                                        <p data-product-modal-sku-id></p>
                                                        <p style="font-size: large; font-weight: 900;" data-product-modal-name></p>
                                                        <p style="color: var(--8)" data-product-modal-summary></p>
                                                        <div class="modal-shop-price-container" data-shop-price-container>
                                                            <div data-price-standard-container>
                                                                <a style="font-size: large; font-weight: 900;" data-price-standard></a>
                                                            </div>
                                                        </div>
                                                        <div class="modal-left-bottom">
                                                            <div class="modal-buttons" data-modal-buttons></div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div data-modal-top-product-buttons>
                                                        <div title="Close" data-close-product-card-button>
                                                            <svg class="closeIcon_modal" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M17.3 18.7a1 1 0 0 0 1.4-1.4L13.42 12l5.3-5.3a1 1 0 0 0-1.42-1.4L12 10.58l-5.3-5.3a1 1 0 0 0-1.4 1.42L10.58 12l-5.3 5.3a1 1 0 1 0 1.42 1.4L12 13.42l5.3 5.3Z" class=""></path></svg>
                                                        </div>
                                                        <div title="Download Data" data-download-product-card-button></div>
                                                    </div>
    
                                                    <div class="shop-modal-tag-container" data-shop-card-tag-container></div>
    
                                                    <div id="modalv2-inner-right" class="modalv2-inner-right">
                                                        <img class="modalv2-inner-img" src="https://cdn.yapper.shop/assets/110.svg"></img>
                                                        <div data-modal-preview-holder></div>
                                                    </div>
                                                </div>
                                            `;
    
                                            document.body.appendChild(modal);
    
                                            setTimeout(() => {
                                                modal.classList.add('show');
                                            }, 1);
    
    
                                            const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                            previewHolder.classList.add('modal-potion-img');
    
                                            const imgElement = document.createElement("img");
                                            imgElement.classList.add('potion-card-preview');
                                            imgElement.src = `https://cdn.yapper.shop/${apiCategory.endpoint}/${apiCategory.src}.${apiCategory.format}`;
    
                                            previewHolder.appendChild(imgElement);
                                            
                                            // Set the product details
                                            modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${apiCategory.sku_id}`;
                                            modal.querySelector("[data-product-modal-name]").textContent = apiCategory.name;
                                            modal.querySelector("[data-product-modal-summary]").textContent = apiCategory.summary;
    
    
                                            const button_container = document.querySelector("[data-modal-buttons]");
                                            
                                            if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads") {
                                                button_container.innerHTML = `
                                                    <button class="card-button" title="Open this Potion's support article" onclick="location.href='${discordsupport}${apiCategory.support_id}';">Open Support Article</button>
                                                `;
                                                modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                    <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${apiCategory.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                `;
                                            } else if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+") {
                                                button_container.innerHTML = `
                                                    <button class="card-button" title="Open this Potion's support article" onclick="location.href='${discordsupport}${apiCategory.support_id}';">Open Support Article</button>
                                                `;
                                                modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                    <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${apiCategory.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                `;
                                            } else if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                button_container.innerHTML = `
                                                    <button class="card-button" title="Open this Potion's support article" onclick="location.href='${discordsupport}${apiCategory.support_id}';">Open Support Article</button>
                                                `;
                                                modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                    <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${apiCategory.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                `;
                                            } else {
                                                button_container.innerHTML = `
                                                    <button class="card-button" title="Open this Potion's support article" onclick="location.href='${discordsupport}${apiCategory.support_id}';">Open Support Article</button>
                                                `;
                                            }
    
    
                                            let priceStandard = "N/A";
                            
                                            if (apiCategory.price) {
                                                priceStandard = apiCategory.price.amount;
                                            }
    
    
                                            const priceTextNitro = modal.querySelector("[data-price-nitro]");
                                            const priceTextStandard = modal.querySelector("[data-price-standard]");
    
                                            const priceContainerNitro = modal.querySelector("[data-price-nitro-container]");
                                            const priceContainerStandard = modal.querySelector("[data-price-standard-container]");
    
                                            const priceContainer = modal.querySelector("[data-shop-price-container]");
    
                                            if (localStorage.experiment_2025_01_orb_testing === "Treatment 1: Default Prices") {
                                                if (priceTextStandard) {
                                                    priceTextStandard.textContent = priceStandard !== "N/A" ? `${priceStandard}` : "Price (USD): N/A";
                                                }
                                            
                                                let orb_icon = document.createElement("div");
                                            
                                                orb_icon.classList.add('orb-icon');
                                            
                                                priceContainerStandard.appendChild(orb_icon);
                                            
                                            } else if (localStorage.experiment_2025_01_orb_testing === "Treatment 2: 50 Orbs") {
                                                if (priceTextStandard) {
                                                    priceTextStandard.textContent = `50`;
                                                }
                                            
                                                let orb_icon = document.createElement("div");
                                            
                                                orb_icon.classList.add('orb-icon');
                                            
                                                priceContainerStandard.appendChild(orb_icon);
                                            
                                            } else if (localStorage.experiment_2025_01_orb_testing === "Treatment 3: Dynamic") {
    
                                                if (apiCategory.price.currency === "discord_orb") {
                                                    if (priceTextStandard) {
                                                        priceTextStandard.textContent = priceStandard !== "N/A" ? `${priceStandard}` : "Price (USD): N/A";
                                                    }
                                                
                                                    let orb_icon = document.createElement("div");
                                                
                                                    orb_icon.classList.add('orb-icon');
                                                
                                                    priceContainerStandard.appendChild(orb_icon);
                                                
                                                } else {
                                                    if (priceTextStandard) {
                                                        priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "Price (USD): N/A";
                                                    }
                                                }
    
                                            } else {
                                                if (priceTextStandard) {
                                                    priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "Price (USD): N/A";
                                                }
                                            }
    
                                            if (apiCategory.new_text != null) {
                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                    <div class="unplublished-tag">
                                                        <p class="unplublished-tag-text">${apiCategory.new_text}</p>
                                                    </div>
                                                `;
                                            }
    
    
                                            document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                modal.classList.add('potion-wobble')
                                            });
                                    
                                            document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                modal.classList.remove('potion-wobble')
                                            });
                                            
    
    
                                            let modal_back = document.createElement("div");
    
                                            modal_back.classList.add('modalv2-back');
                                            modal_back.id = 'modalv2-back';
    
                                            document.body.appendChild(modal_back);
    
                                            setTimeout(() => {
                                                modal_back.classList.add('show');
                                            }, 1);
    
    
                                            modal.addEventListener('click', (event) => {
                                                if (event.target === modal) {
                                                    modal.classList.remove('show');
                                                    modal_back.classList.remove('show');
                                                    setTimeout(() => {
                                                        modal.remove();
                                                        modal_back.remove();
                                                    }, 300);
                                                }
                                            });
    
                                            document.querySelector("[data-close-product-card-button]").addEventListener('click', () => {
                                                modal.classList.remove('show');
                                                modal_back.classList.remove('show');
                                                setTimeout(() => {
                                                    modal.remove();
                                                    modal_back.remove();
                                                }, 300);
                                            });
                                        }
                                    }
                            
                                    
                                    const priceTextNitro = potionCard.querySelector("[data-price-nitro]");
                                    const priceTextStandard = potionCard.querySelector("[data-price-standard]");
    
                                    const priceContainerNitro = potionCard.querySelector("[data-price-nitro-container]");
                                    const priceContainerStandard = potionCard.querySelector("[data-price-standard-container]");
    
                                    const priceContainer = potionCard.querySelector("[data-shop-price-container]");
    
                                    if (localStorage.experiment_2025_01_orb_testing === "Treatment 1: Default Prices") {
                                        if (priceTextStandard) {
                                            priceTextStandard.textContent = priceStandard !== "N/A" ? `${priceStandard}` : "Price (USD): N/A";
                                        }
                                    
                                        let orb_icon = document.createElement("div");
                                    
                                        orb_icon.classList.add('orb-icon');
                                    
                                        priceContainerStandard.appendChild(orb_icon);
                                    
                                    } else if (localStorage.experiment_2025_01_orb_testing === "Treatment 2: 50 Orbs") {
                                        if (priceTextStandard) {
                                            priceTextStandard.textContent = `50`;
                                        }
                                    
                                        let orb_icon = document.createElement("div");
                                    
                                        orb_icon.classList.add('orb-icon');
                                    
                                        priceContainerStandard.appendChild(orb_icon);
                                    
                                    } else {
                                        if (priceTextStandard) {
                                            priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "Price (USD): N/A";
                                        }
                                    }
    
                                    potionCard.querySelector("[data-product-card-open-in-shop]").innerHTML = `
                                        <button class="card-button" onclick="location.href='${discordsupport}${apiCategory.support_id}';" title="Open this Potion's support article">Open Support Article</button>
                                    `;
    
                                    potionCard.addEventListener("mouseenter", () => {
                                        potionCard.classList.add('potion-wobble')
                                    });
                            
                                    potionCard.addEventListener("mouseleave", () => {
                                        potionCard.classList.remove('potion-wobble')
                                    });
                
                                    categoryOutput.append(potionCard);
                                } else {
                                    // Default page handling
                                    const category = categoryTemplate.content.cloneNode(true).children[0];
                                    category.querySelector("[data-shop-category-banner]").id = apiCategory.sku_id;
    
    
                                    // Banner Image/Video asset
                
                                    category.querySelector("[data-shop-category-banner-image]").src = `https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.mobile_banner}.png?size=4096`;
                                    category.querySelector("[data-shop-category-banner-image]").alt = 'No Mobile Banner';

                                    if (apiCategory.mobile_bg != null) {
                                        category.querySelector("[data-shop-category-marketing-bg]").src = `https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.mobile_bg}.png?size=4096`;
                                    }
                                    
    
                                    category.querySelector("[data-shop-banner-banner-container]").id = `${apiCategory.sku_id}-banner-banner-container`;
    
    
                                    const unpublishedAt = new Date(apiCategory.unpublished_at);
                                
                                    if (apiCategory.unpublished_at && !isNaN(unpublishedAt.getTime())) {
                        
                                        function updateTimer() {
                                            const now = new Date();
                                            const timeDiff = unpublishedAt - now;
                        
                                            if (timeDiff <= 0) {
                                                category.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                    <div class="unplublished-tag">
                                                        <p class="unplublished-tag-text">NOT IN STORE</p>
                                                    </div>
                                                `;
                                                clearInterval(timerInterval);
                                            } else {
                                                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                        
                                                category.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                    <div class="unplublished-tag">
                                                        <p class="unplublished-tag-text">${days} DAYS LEFT IS SHOP</p>
                                                    </div>
                                                `;
                                            }
                                        }
                        
                                        const timerInterval = setInterval(updateTimer, 1000);
                                        updateTimer();
                                    }
    
                
                                    const cardOutput = category.querySelector("[data-shop-category-card-holder]");
                                    if (cardOutput) {
                                        for (const product of apiCategory.products) {
                                            const cardTemplate = document.querySelector("[data-shop-item-card-template]");
                                            const card = cardTemplate.content.cloneNode(true).children[0];
    
                                            if (product.type === NONE) {
                                                card.classList.add("type_100");
                                                card.classList.add('hidden')
                                            } else if (product.type === AVATAR_DECORATION) {
                                                product.items.forEach(item => {
                                                    
                                                    card.classList.add("type_0");
                                                    // Set the innerHTML for the preview holder
                                                    const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                                    previewHolder.classList.add('avatar-decoration-image');
                                                    
                                                    // Set the initial image for the deco card
                                                    const imgElement = document.createElement("img");
                                                    imgElement.id = "shop-card-deco-image";
                                                    imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                    
                                                    previewHolder.appendChild(imgElement);
    
                                                    const bgimg = document.createElement("div");
                                                    bgimg.id = "shop-card-deco-bg-image";
                                                    
                                                    previewHolder.appendChild(bgimg);
                                            
                                                    // Set the product details
                                                    if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                        card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                                    } else {
                                                        card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                    }
                                                    card.querySelector("[data-product-card-name]").textContent = product.name;
                                                    card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                            
                                                    // Hover effect: Change the image src on mouse enter and leave
                                                    if (localStorage.reduced_motion != "true") {
                                                        card.addEventListener("mouseenter", () => {
                                                            imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                            if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                            }
                                                        });
                                                
                                                        card.addEventListener("mouseleave", () => {
                                                            imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                            bgimg.style.backgroundImage = `url(data:image/png;base64,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)`;
                                                        });
                                                    }
                                                    
                                                });
                                            } else if (product.type === PROFILE_EFFECT) {
                                                card.classList.add("type_1");
    
                                                if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                                } else {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                }
                                                card.querySelector("[data-product-card-name]").textContent = product.name;
                                                card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                                
                                                // Ensure the item ID is accessible here
                                                let itemId = undefined;
                                                if (Array.isArray(product.items)) {
                                                    // If items is an array, find the item with type 1 and get its id
                                                    const item = product.items.find(item => item.type === 1);
                                                    if (item) {
                                                        itemId = item.id;
                                                    }
                                                } else if (product.items && product.items.type === 1) {
                                                    // If items is an object and has type 1, get its id
                                                    itemId = product.items.id;
                                                }
                                            
                                            
                                                // Fetch profile effects API only if not already cached
                                                if (!profileEffectsCache) {
                                                    const response = await fetch(api + PROFILE_EFFECTS, {
                                                        method: "GET",
                                                        headers: {
                                                            "Password": api_password,
                                                            "Token": api_token
                                                        }
                                                    });
                                                    const effectsData = await response.json();
                                                    profileEffectsCache = effectsData.profile_effect_configs;
                                                }
                                            
                                                // Find matching profile effect
                                                const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                            
                                                if (matchingEffect) {
                                                    const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                                    previewHolder.classList.add('profile-effect-image');
                                            
                                                    previewHolder.innerHTML = `
                                                        <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                    `;
                                            
                                                    // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                    const imgElement = card.querySelector("img");
                                            
                                                    if (localStorage.reduced_motion != "true") {
                                                        card.addEventListener("mouseenter", () => {
                                                            if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                const effectUrl = matchingEffect.effects[0]?.src;
                                                                imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                            }
                                                        });
                                                
                                                        card.addEventListener("mouseleave", () => {
                                                            // Revert back to the original thumbnailPreviewSrc when hover ends
                                                            imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                        });
                                                    } else {
                                                        card.addEventListener("mouseenter", () => {
                                                            imgElement.src = matchingEffect.reducedMotionSrc;
                                                        });
                                                
                                                        card.addEventListener("mouseleave", () => {
                                                            // Revert back to the original thumbnailPreviewSrc when hover ends
                                                            imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                        });
                                                    }
                                                }
                                            } else if (product.type === NAMEPLATE) {
                                                card.classList.add("type_2");
    
                                                if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                                } else {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                }
                                                card.querySelector("[data-product-card-name]").textContent = product.name;
                                                card.querySelector("[data-product-card-summary]").textContent = product.summary;
    
                                                const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
    
                                                if (localStorage.discord_username && localStorage.discord_username != '') {
                                                    previewName = localStorage.discord_username;
                                                } else {
                                                    previewName = 'Discord User'
                                                }
    
                                                previewHolder.innerHTML = `
                                                    <div class="nameplate-null-user">
                                                        <div class="nameplate-null-user-avatar"></div>
                                                        <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                    </div>
                                                    <div class="nameplate-null-user">
                                                        <div class="nameplate-null-user-avatar"></div>
                                                        <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                    </div>
                                                    <div class="nameplate-null-user" data-user-nameplate-preview>
                                                        <img class="nameplate-null-user" style="position: absolute;" data-user-nameplate-preview-img></img>
                                                        <div class="nameplate-user-avatar" data-nameplate-user-random-avatar></div>
                                                        <p class="nameplate-user-name">${previewName}</p>
                                                    </div>
                                                    <div class="nameplate-null-user">
                                                        <div class="nameplate-null-user-avatar"></div>
                                                        <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                    </div>
                                                    <div class="nameplate-null-user">
                                                        <div class="nameplate-null-user-avatar"></div>
                                                        <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                    </div>
                                                `;
    
                                                product.items.forEach(item => {
                                                    const nameplatePreview = previewHolder.querySelector("[data-user-nameplate-preview]");
                                                    const paletteName = item.palette;
                                                    const asset = `https://cdn.discordapp.com/assets/collectibles/${item.asset}img.png`;
                                                    const bgcolor = nameplate_palettes[paletteName].darkBackground;
    
                                                    previewHolder.querySelector("[data-user-nameplate-preview-img]").src = asset;
    
                                                    nameplatePreview.style.backgroundImage = `linear-gradient(10deg, #00000000 40%, ${bgcolor} 180%), linear-gradient(170deg, #00000000 40%, ${bgcolor} 180%)`;
                                                    // nameplatePreview.style.boxShadow = `0 0 0 1px #a10606`;
                                                    
                                                    const nullUserNameRandomWidth = previewHolder.querySelectorAll("[data-null-user-random-name]");
                                                    
                                                    nullUserNameRandomWidth.forEach(UserName => {
                                                        const randomWidth = Math.floor(Math.random() * (180 - 80 + 1)) + 80;
                                                        UserName.style.width = randomWidth + `px`;
                                                    });
                                                
                                                    const nullUserAvatar = previewHolder.querySelectorAll("[data-nameplate-user-random-avatar]");
                                                
                                                    nullUserAvatar.forEach(UserAvatar => {
                                                        UserAvatar.style.backgroundImage = `url(${localStorage.discord_avatar})`;
                                                    });
                                                });
                                                
                                            } else if (product.type === BUNDLE) {
                                                card.classList.add("type_1000");
                                                // Fetch the bundled products for the bundle summary
                                                const bundledProducts = product.bundled_products || [];
                                            
                                                // Generate the bundle summary from the names of the bundled products
                                                const type0Product = bundledProducts.find(item => item.type === 0);
                                                const type1Product = bundledProducts.find(item => item.type === 1);
                                            
                                                let bundleSummary = "Bundle Includes: ";
                                                if (type0Product) {
                                                    bundleSummary += `${type0Product.name} Decoration`;
                                                }
                                                if (type1Product) {
                                                    bundleSummary += ` & ${type1Product.name} Profile Effect`;
                                                }
                                            
                                                // Set the summary text
                                                card.querySelector("[data-product-card-summary]").textContent = bundleSummary;
                                            
                                                // Set the basic card details
                                                if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                                } else {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                }
                                                card.querySelector("[data-product-card-name]").textContent = product.name;
                                            
                                                // Handle each item in the bundle
                                                product.items.forEach(item => {
                                                    if (item.type === 0) {
                                                        // Avatar decoration
                                                        const decoImage = document.createElement("img");
                                                        decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                        decoImage.alt = "Avatar Decoration";
                                                        decoImage.classList.add("avatar-decoration-image");
                                                        card.querySelector("[data-shop-card-preview-holder]").appendChild(decoImage);
    
                                                        const bgimg = document.createElement("div");
                                                        bgimg.classList.add("avatar-decoration-bg-image");
                                                        
                                                        card.querySelector("[data-shop-card-preview-holder]").appendChild(bgimg);
                                            
                                                        // Hover effect for decoration image
                                                        if (localStorage.reduced_motion != "true") {
                                                            card.addEventListener("mouseenter", () => {
                                                                decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                    bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                                }
                                                            });
                                                            card.addEventListener("mouseleave", () => {
                                                                decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                bgimg.style.backgroundImage = `url(data:image/png;base64,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)`;
                                                            });
                                                        }
                                                    } else if (item.type === 1) {
                                                        // Profile effect
                                                        (async () => {
                                                            // Fetch profile effects if not cached
                                                            if (!profileEffectsCache) {
                                                                const response = await fetch(api + PROFILE_EFFECTS, {
                                                                    method: "GET",
                                                                    headers: {
                                                                        "Password": api_password,
                                                                        "Token": api_token
                                                                    }
                                                                });
                                                                const effectsData = await response.json();
                                                                profileEffectsCache = effectsData.profile_effect_configs;
                                                            }
                                            
                                                            // Find the matching effect
                                                            const matchingEffect = profileEffectsCache.find(effect => effect.id === item.id);
                                            
                                                            if (matchingEffect) {
                                                                const effectImage = document.createElement("img");
                                                                effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                effectImage.alt = "Profile Effect";
                                                                effectImage.classList.add("profile-effect-image");
                                                                card.querySelector("[data-shop-card-preview-holder]").appendChild(effectImage);
                                            
                                                                // Hover effect for profile effect
                                                                if (localStorage.reduced_motion != "true") {
                                                                    card.addEventListener("mouseenter", () => {
                                                                        if (matchingEffect.effects && matchingEffect.effects[0] && matchingEffect.effects[0].src) {
                                                                            effectImage.src = matchingEffect.effects[0].src;
                                                                        }
                                                                    });
                                                                    card.addEventListener("mouseleave", () => {
                                                                        effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                } else {
                                                                    card.addEventListener("mouseenter", () => {
                                                                        effectImage.src = matchingEffect.reducedMotionSrc;
                                                                    });
                                                                    card.addEventListener("mouseleave", () => {
                                                                        effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                }
                                                            }
                                                        })();
                                                    }
                                                });
                                            } else if (product.type === VARIANTS_GROUP) {
                                                // Update SKU and summary
                                                if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                                } else {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                }
                                                card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                            
                                                // Always display the base variant name
                                                card.querySelector("[data-product-card-name]").textContent = product.variants[0]?.base_variant_name || "Product";
                                            
                                                // Render variant color blocks as interactive divs
                                                const variantContainer = card.querySelector("[data-shop-card-var-container]");
                                                variantContainer.innerHTML = ""; // Clear existing variant blocks
                                                let currentSelectedVariant = null; // Track selected variant
                                            
                                                product.variants.forEach((variant, index) => {
                                                    // Create variant color block
                                                    const variantColorBlockTmp = document.querySelector("[data-shop-varcolorblock-template]");
                                                    const variantColorBlock = variantColorBlockTmp.content.cloneNode(true).children[0];
                                                    variantColorBlock.classList.add("shop-card-var");
                                                    variantColorBlock.id = "shop-card-var";
                                                    variantColorBlock.style.backgroundColor = `${variant.variant_value}`;
                                            
                                                    // Add click event listener to switch variants
                                                    variantColorBlock.addEventListener("click", () => {
                                                        if (currentSelectedVariant) {
                                                            currentSelectedVariant.classList.remove("shop-card-var-selected");
                                                        }
                                                        variantColorBlock.classList.add("shop-card-var-selected");
                                                        currentSelectedVariant = variantColorBlock;
                                                        applyVariant(variant);
                                                    });
                                            
                                                    // Append the color block to the container
                                                    variantContainer.appendChild(variantColorBlock);
                                            
                                                    // Set the first variant as the default selected
                                                    if (index === 0) {
                                                        currentSelectedVariant = variantColorBlock;
                                                        variantColorBlock.classList.add("shop-card-var-selected");
                                                    }
                                                });
    
                                                let isFirstTimeLoadingVariant = true;
                                                const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                            
                                                // Function to apply the selected variant
                                                function applyVariant(selectedVariant) {
                                                    card.querySelector("[data-shop-card-var-title]").textContent = `(${selectedVariant.variant_label})`;
    
                                                    if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                        card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                                    } else {
                                                        card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${selectedVariant.sku_id}`;
                                                    }
    
                                                    if (localStorage.experiment_2025_02_shop_card_modals != "Treatment 1: Enable modals" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 2: Enable modals w/ data downloads" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 3: Enable modals w/ p+" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 4: Enable modals w/ p+ on p+ page" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 5: Enable modals w/ data downloads and p+" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                        card.querySelector("[data-share-product-card-button]").innerHTML = `
                                                            <svg class="shareIcon_f4a996" onclick="copyEmoji('https://canary.discord.com/shop#itemSkuId=${selectedVariant.sku_id}');" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M16.32 14.72a1 1 0 0 1 0-1.41l2.51-2.51a3.98 3.98 0 0 0-5.62-5.63l-2.52 2.51a1 1 0 0 1-1.41-1.41l2.52-2.52a5.98 5.98 0 0 1 8.45 8.46l-2.52 2.51a1 1 0 0 1-1.41 0ZM7.68 9.29a1 1 0 0 1 0 1.41l-2.52 2.51a3.98 3.98 0 1 0 5.63 5.63l2.51-2.52a1 1 0 0 1 1.42 1.42l-2.52 2.51a5.98 5.98 0 0 1-8.45-8.45l2.51-2.51a1 1 0 0 1 1.42 0Z" class=""></path><path fill="currentColor" d="M14.7 10.7a1 1 0 0 0-1.4-1.4l-4 4a1 1 0 1 0 1.4 1.4l4-4Z" class=""></path></svg>
                                                        `;
                                                    }
    
                                                    if (selectedVariant.type === 0) {
                                                        card.classList.add("type_2000-0");
                                                        previewHolder.innerHTML = ""; // Clear previous decorations
                                                        previewHolder.classList.add('avatar-decoration-image');
                                                        
                                                        // Add the avatar decoration based on the selected variant
                                                        selectedVariant.items?.forEach(item => {
                                                            const decoImage = document.createElement("img");
                                                            const bgimg = document.createElement("div");
                                                            if (isFirstTimeLoadingVariant == true) {
                                                                decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                isFirstTimeLoadingVariant = false;
                                                            } else {
                                                                decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                    bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                                }
                                                            }
                                                            decoImage.alt = "Avatar Decoration";
                                                            decoImage.id = "shop-card-deco-image";
                                                            previewHolder.appendChild(decoImage);
    
                                                            bgimg.id = "shop-card-deco-bg-image";
    
                                                            previewHolder.appendChild(bgimg);
                                                        
                                                            // Hover effect for decoration image
                                                            if (localStorage.reduced_motion !== "true") {
                                                                card.addEventListener("mouseenter", () => {
                                                                    decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                    if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                        bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                                    }
                                                                });
                                                                card.addEventListener("mouseleave", () => {
                                                                    decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                    bgimg.style.backgroundImage = `url(data:image/png;base64,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)`;
                                                                });
                                                            }
                                                        });
                                                    } else if (selectedVariant.type === 1) {
                                                        card.classList.add("type_2000-1");
                                                        (async () => {
                                                            // Ensure the item ID is accessible here
                                                            let itemId = undefined;
                                                            if (Array.isArray(selectedVariant.items)) {
                                                                // If items is an array, find the item with type 1 and get its id
                                                                const item = selectedVariant.items.find(item => item.type === 1);
                                                                if (item) {
                                                                    itemId = item.id;
                                                                }
                                                            } else if (selectedVariant.items && selectedVariant.items.type === 1) {
                                                                // If items is an object and has type 1, get its id
                                                                itemId = selectedVariant.items.id;
                                                            }
                                                        
                                                        
                                                            // Fetch profile effects API only if not already cached
                                                            if (!profileEffectsCache) {
                                                                const response = await fetch(api + PROFILE_EFFECTS, {
                                                                    method: "GET",
                                                                    headers: {
                                                                        "Password": api_password,
                                                                        "Token": api_token
                                                                    }
                                                                });
                                                                const effectsData = await response.json();
                                                                profileEffectsCache = effectsData.profile_effect_configs;
                                                            }
                                                        
                                                            // Find matching profile effect
                                                            const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                                        
                                                            if (matchingEffect) {
                                                                const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                                                previewHolder.classList.add('profile-effect-image');
                                                            
                                                                if (isFirstTimeLoadingVariant == true) {
                                                                    previewHolder.innerHTML = `
                                                                        <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                                    `;
                                                                    isFirstTimeLoadingVariant = false;
                                                                } else {
                                                                    previewHolder.innerHTML = `
                                                                        <img class="thumbnail-preview" src="${matchingEffect.effects[0]?.src}">
                                                                    `;
                                                                }
                                                            
                                                                // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                                const imgElement = card.querySelector("img");
                                                            
                                                                if (localStorage.reduced_motion != "true") {
                                                                    card.addEventListener("mouseenter", () => {
                                                                        if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                            const effectUrl = matchingEffect.effects[0]?.src;
                                                                            imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                        }
                                                                    });
                                                                
                                                                    card.addEventListener("mouseleave", () => {
                                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                } else {
                                                                    card.addEventListener("mouseenter", () => {
                                                                        imgElement.src = matchingEffect.reducedMotionSrc;
                                                                    });
                                                                
                                                                    card.addEventListener("mouseleave", () => {
                                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                }
                                                            }
                                                        })();
                                                    }
                                                }
                                            
                                                // Apply the default variant (first one) initially
                                                if (product.variants.length > 0) {
                                                    applyVariant(product.variants[0]);
                                                }
                                            } else if (product.type === EXTERNAL_SKU) {
                                                card.classList.add("type_3000");
    
                                                if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                                } else {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                }
                                                card.querySelector("[data-product-card-name]").textContent = product.name;
                                                card.querySelector("[data-product-card-summary]").textContent = product.summary;
    
                                                const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
    
                                                previewHolder.innerHTML = `
                                                    <p>item type 3000 (EXTERNAL_SKU) is not yet defined on the client, please remove it from the api</p>
                                                `;
                                                
                                            } else if (product.type === 'plus_more') {
                                                card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                                card.querySelector("[data-product-card-name]").textContent = `Plus More...`;
                                                card.querySelector("[data-product-card-summary]").textContent = `There are more items in this category that are coming soon.`;
    
                                                card.querySelector("[data-shop-price-container]").innerHTML = ``;
                                                card.querySelector("[data-product-card-open-in-shop]").innerHTML = ``;
                                                card.querySelector("[data-share-product-card-button]").innerHTML = ``;
    
                                                const plusMoreQuestionMark = document.createElement("img");
                                                plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.png`;
                                                plusMoreQuestionMark.classList.add("plus-more-question-mark");
                                                card.querySelector("[data-shop-card-preview-holder]").appendChild(plusMoreQuestionMark);
                                    
                                                // Hover effect for decoration image
                                                if (localStorage.reduced_motion != "true") {
                                                    card.addEventListener("mouseenter", () => {
                                                        plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.gif`;
                                                    });
                                                    card.addEventListener("mouseleave", () => {
                                                        plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.png`;
                                                    });
                                                }
                                            } else {
                                                card.classList.add('hidden')
                                            }
                                            
                                            
                                            const priceTextNitro = card.querySelector("[data-price-nitro]");
                                            const priceTextStandard = card.querySelector("[data-price-standard]");
    
                                            const priceContainerNitro = card.querySelector("[data-price-nitro-container]");
                                            const priceContainerStandard = card.querySelector("[data-price-standard-container]");
    
                                            const priceContainer = card.querySelector("[data-shop-price-container]");
    
                                            let priceStandard = "N/A";
                                            let priceNitro = "N/A";
                                            let priceOrb = "N/A";
    
                                            if (localStorage.experiment_2025_02_extra_options === "Treatment 4: Enabled") {
                                                if (localStorage.is_nitro_user === "true") {
                                                    if (product.prices && product.prices["4"] && product.prices["4"].country_prices && product.prices["4"].country_prices.prices) {
                                                        product.prices["4"].country_prices.prices.forEach(price => {
                                                            if (price.currency === "discord_orb") {
                                                                priceOrb = price.amount;
                                                            }
                                                        });
                                                    }
                                            
                                                    if (product.prices && product.prices["4"] && product.prices["4"].country_prices && product.prices["4"].country_prices.prices) {
                                                        product.prices["4"].country_prices.prices.forEach(price => {
                                                            if (price.currency === "usd") {
                                                                priceStandard = price.amount;
                                                            }
                                                        });
                                                    }
        
                                                    if (priceTextStandard) {
                                                        standardPriceOutput = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "null";
                                                    }
    
                                                    priceContainerStandard.innerHTML = `
                                                        <a style="font-size: large; font-weight: 900; margin-left: 23px">${standardPriceOutput}</a>
                                                        <div class="nitro-icon" style="margin-left: -5px"></div>
                                                    `;
        
                                                    let orb_price = document.createElement("div");
                                                
                                                    orb_price.innerHTML = `
                                                        <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                        <div class="orb-icon" style="margin-left: -25px"></div>
                                                    `;
                                                    orb_price.style.position = `absolute`;
                                                    orb_price.style.right = `0px`;
        
                                                    if (priceOrb != 'N/A') {
                                                        priceContainer.appendChild(orb_price);
                                                    }
                                                } else {
                                                    if (product.prices && product.prices["0"] && product.prices["0"].country_prices && product.prices["0"].country_prices.prices) {
                                                        product.prices["0"].country_prices.prices.forEach(price => {
                                                            if (price.currency === "discord_orb") {
                                                                priceOrb = price.amount;
                                                            }
                                                        });
                                                    }
                                            
                                                    if (product.prices && product.prices["0"] && product.prices["0"].country_prices && product.prices["0"].country_prices.prices) {
                                                        product.prices["0"].country_prices.prices.forEach(price => {
                                                            if (price.currency === "usd") {
                                                                priceStandard = price.amount;
                                                            }
                                                        });
                                                    }
        
                                                    if (priceTextStandard) {
                                                        priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "null";
                                                    }
        
                                                    let orb_price = document.createElement("div");
                                                
                                                    orb_price.innerHTML = `
                                                        <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                        <div class="orb-icon" style="margin-left: -25px"></div>
                                                    `;
                                                    orb_price.style.position = `absolute`;
                                                    orb_price.style.right = `0px`;
        
                                                    if (priceOrb != 'N/A') {
                                                        priceContainer.appendChild(orb_price);
                                                    }
                                                }
    
                                            } else {
                                                if (product.prices && product.prices["0"] && product.prices["0"].country_prices && product.prices["0"].country_prices.prices) {
                                                    product.prices["0"].country_prices.prices.forEach(price => {
                                                        if (price.currency === "usd") {
                                                            priceStandard = price.amount;
                                                        }
                                                    });
                                                }
                                        
                                                if (product.prices && product.prices["4"] && product.prices["4"].country_prices && product.prices["4"].country_prices.prices) {
                                                    product.prices["4"].country_prices.prices.forEach(price => {
                                                        if (price.currency === "usd") {
                                                            priceNitro = price.amount;
                                                        }
                                                    });
                                                }
    
                                                if (priceTextStandard) {
                                                    priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "null";
                                                }
        
                                                if (priceTextNitro) {
                                                    priceTextNitro.textContent = priceNitro !== "N/A" ? `US$${(priceNitro / 100).toFixed(2)} with Nitro` : "null";
                                                }
                                            }
    
                                            if (priceTextStandard.textContent === "null" || priceTextNitro.textContent === "null") {
                                                let error_warning = document.createElement("div");
    
                                                error_warning.classList.add('card_error');
                                                error_warning.innerHTML = `
                                                    <p>ERROR</p>
                                                `;
                                                         
                                                card.appendChild(error_warning);
                                            }
    
                                            card.querySelector("[data-product-card-open-in-shop]").innerHTML = `
                                                <button class="card-button" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';" title="Open this item in the Discord Shop">Open In Shop</button>
                                            `;
    
                                            if (product.premium_type === 2) {
                                                card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                    <div class="premiumWheelBadge_c23530 textBadge_df8943 base_df8943 eyebrow_df8943 baseShapeRound_df8943" aria-label="This bonus item is yours to keep and use anytime with an active Nitro subscription." style="background-color: var(--status-danger);"><svg class="premiumWheel_c23530" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M15 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" class=""></path><path fill="currentColor" fill-rule="evenodd" d="M7 4a1 1 0 0 0 0 2h3a1 1 0 1 1 0 2H5.5a1 1 0 0 0 0 2H8a1 1 0 1 1 0 2H6a1 1 0 1 0 0 2h1.25A8 8 0 1 0 15 4H7Zm8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" clip-rule="evenodd" class=""></path><path fill="currentColor" d="M2.5 10a1 1 0 0 0 0-2H2a1 1 0 0 0 0 2h.5Z" class=""></path></svg></div>
                                                `;
                                            }
    
                                            card.querySelector("[data-share-product-card-button]").innerHTML = `
                                                <svg class="shareIcon_f4a996" onclick="copyEmoji('https://canary.discord.com/shop#itemSkuId=${product.sku_id}');" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M16.32 14.72a1 1 0 0 1 0-1.41l2.51-2.51a3.98 3.98 0 0 0-5.62-5.63l-2.52 2.51a1 1 0 0 1-1.41-1.41l2.52-2.52a5.98 5.98 0 0 1 8.45 8.46l-2.52 2.51a1 1 0 0 1-1.41 0ZM7.68 9.29a1 1 0 0 1 0 1.41l-2.52 2.51a3.98 3.98 0 1 0 5.63 5.63l2.51-2.52a1 1 0 0 1 1.42 1.42l-2.52 2.51a5.98 5.98 0 0 1-8.45-8.45l2.51-2.51a1 1 0 0 1 1.42 0Z" class=""></path><path fill="currentColor" d="M14.7 10.7a1 1 0 0 0-1.4-1.4l-4 4a1 1 0 1 0 1.4 1.4l4-4Z" class=""></path></svg>
                                            `;
    
    
                                            const unpublishedAt = new Date(product.unpublished_at);
                                
                                            if (product.unpublished_at && !isNaN(unpublishedAt.getTime())) {
                                
                                                function updateTimer() {
                                                    const now = new Date();
                                                    const timeDiff = unpublishedAt - now;
                                
                                                    if (timeDiff <= 0) {
                                                        card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="unplublished-tag">
                                                                <p class="unplublished-tag-text">OFF SALE</p>
                                                            </div>
                                                        `;
                                                        clearInterval(timerInterval);
                                                    } else {
                                                        const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                        const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                        const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                                
                                                        card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="unplublished-tag">
                                                                <p class="unplublished-tag-text">${days} DAYS LEFT IN SHOP</p>
                                                            </div>
                                                        `;
                                                    }
                                                }
                                
                                                const timerInterval = setInterval(updateTimer, 1000);
                                                updateTimer();
                                            }
    
                                            const ExpiredAt = new Date(product.expires_at);
                                
                                            if (product.expires_at && !isNaN(ExpiredAt.getTime())) {
                                
                                                function updateTimer() {
                                                    const now = new Date();
                                                    const timeDiff = ExpiredAt - now;
                                
                                                    if (timeDiff <= 0) {
                                                        card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="unplublished-tag">
                                                                <p class="unplublished-tag-text">EXPIRED</p>
                                                            </div>
                                                        `;
                                                        clearInterval(timerInterval);
                                                    } else {
                                                        const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                        const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                        const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                                
                                                        card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="unplublished-tag">
                                                                <p class="unplublished-tag-text">EXPIRES IN ${days}D ${hours}H</p>
                                                            </div>
                                                        `;
                                                    }
                                                }
                                
                                                const timerInterval = setInterval(updateTimer, 1000);
                                                updateTimer();
                                            }
    
                                            // Append card to output
                                            cardOutput.append(card);
                                        }
                                    }
                
                                    categoryOutput.append(category);
                                }
                            }
                        }
                    })
                    .catch(error => {
                        console.error('Error fetching the API:', error);
                        document.getElementById("everything-housing-container").innerHTML = `
                            <div style="text-align: center; margin-top: 10px;" id="failed-to-load-shop">
                                <img style="width: 200px;" src="https://raw.githubusercontent.com/DTACat/Collectibles/main/Images/shopuhoh.png">
                                <h2>Well, this is awkward.</h2>
                                <p>Hmmm, we weren&#8217;t able to load the shop. Check back later.</p>
                                <p>${error}</p>
                                <button class="refresh-button" onclick="location.reload();">Reload</button>
                            </div>
                        `;
                    });
    
            }
        }

        fetchData()


        function createMainShopElement() {
            document.getElementById("everything-housing-container").innerHTML = `
                <div class="shop-container" style="overflow-y: auto;">
                    <div class="shop-category" style="margin-top: 50px;">
                        <template data-shop-category-template>
                            <div class="thy-shop-category-idk">
                                <img class="shop-category-marketing-bg" src="https://cdn.yapper.shop/assets/31.png" data-shop-category-marketing-bg>
                                <div class="shop-category-banner" data-shop-category-banner>
                                    <div class="discordLogo_be5025" style="display: none;" data-shop-discord-watermark-container>
                                        <div><svg class="discordIcon_be5025" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M19.73 4.87a18.2 18.2 0 0 0-4.6-1.44c-.21.4-.4.8-.58 1.21-1.69-.25-3.4-.25-5.1 0-.18-.41-.37-.82-.59-1.2-1.6.27-3.14.75-4.6 1.43A19.04 19.04 0 0 0 .96 17.7a18.43 18.43 0 0 0 5.63 2.87c.46-.62.86-1.28 1.2-1.98-.65-.25-1.29-.55-1.9-.92.17-.12.32-.24.47-.37 3.58 1.7 7.7 1.7 11.28 0l.46.37c-.6.36-1.25.67-1.9.92.35.7.75 1.35 1.2 1.98 2.03-.63 3.94-1.6 5.64-2.87.47-4.87-.78-9.09-3.3-12.83ZM8.3 15.12c-1.1 0-2-1.02-2-2.27 0-1.24.88-2.26 2-2.26s2.02 1.02 2 2.26c0 1.25-.89 2.27-2 2.27Zm7.4 0c-1.1 0-2-1.02-2-2.27 0-1.24.88-2.26 2-2.26s2.02 1.02 2 2.26c0 1.25-.88 2.27-2 2.27Z" class=""></path></svg><svg class="discordWordmark_be5025" aria-hidden="true" role="img" width="55" height="16" viewBox="0 0 55 16"><g fill="currentColor"><path d="M3 4.78717H6.89554C7.83025 4.78717 8.62749 4.93379 9.27812 5.22703C9.92875 5.52027 10.4144 5.92348 10.7352 6.44582C11.0559 6.96815 11.2208 7.5638 11.2208 8.24192C11.2208 8.90171 11.0559 9.49736 10.7168 10.038C10.3778 10.5695 9.8646 11.0002 9.17732 11.3118C8.49003 11.6234 7.6378 11.7791 6.6197 11.7791H3V4.78717ZM6.57388 10.0014C7.2071 10.0014 7.69278 9.84559 8.03184 9.52485C8.3709 9.21328 8.54501 8.77343 8.54501 8.23276C8.54501 7.72875 8.38923 7.32555 8.08682 7.02314C7.78442 6.72073 7.32623 6.56495 6.71225 6.56495H5.49255V10.0014H6.57388Z"></path><path d="M17.2882 11.7709C16.7475 11.6335 16.2618 11.4319 15.8311 11.1569V9.4983C16.161 9.75489 16.5917 9.95649 17.1416 10.1214C17.6914 10.2864 18.2229 10.3689 18.7361 10.3689C18.9743 10.3689 19.1576 10.3414 19.2767 10.2772C19.3959 10.2131 19.46 10.1398 19.46 10.0481C19.46 9.94733 19.4233 9.86485 19.3592 9.80071C19.2951 9.73656 19.1668 9.68158 18.9743 9.62659L17.7739 9.36084C17.0866 9.20506 16.6009 8.97596 16.3077 8.70105C16.0144 8.42613 15.877 8.05042 15.877 7.59223C15.877 7.20735 16.0053 6.86829 16.2527 6.58421C16.5093 6.30013 16.8667 6.0802 17.334 5.92442C17.8014 5.76863 18.342 5.68616 18.9743 5.68616C19.5333 5.68616 20.0465 5.74114 20.5138 5.86944C20.9812 5.98857 21.3661 6.14435 21.6685 6.32763V7.89464C21.3569 7.71136 20.9904 7.56474 20.5871 7.45477C20.1748 7.34481 19.7533 7.28982 19.3226 7.28982C18.6994 7.28982 18.3878 7.39979 18.3878 7.61056C18.3878 7.71136 18.4337 7.78467 18.5345 7.83966C18.6353 7.89464 18.8094 7.94046 19.066 7.99544L20.0648 8.17871C20.7155 8.28868 21.2011 8.49028 21.5219 8.77436C21.8426 9.05844 21.9984 9.47081 21.9984 10.0298C21.9984 10.6346 21.7326 11.1203 21.2011 11.4685C20.6696 11.8259 19.9182 12 18.9468 12C18.3787 11.9817 17.8289 11.9084 17.2882 11.7709Z"></path><path d="M24.4735 11.5602C23.9054 11.2761 23.4655 10.9004 23.1814 10.4239C22.8882 9.94733 22.7507 9.40666 22.7507 8.80185C22.7507 8.20621 22.8974 7.66554 23.1998 7.19819C23.5022 6.72167 23.942 6.35512 24.5194 6.0802C25.0967 5.81445 25.7931 5.677 26.5995 5.677C27.5984 5.677 28.4231 5.88776 29.0829 6.3093V8.1329C28.8538 7.97712 28.5789 7.83965 28.2673 7.74802C27.9558 7.64721 27.6259 7.6014 27.2777 7.6014C26.6545 7.6014 26.178 7.71137 25.8206 7.94046C25.4724 8.16956 25.2983 8.46279 25.2983 8.82934C25.2983 9.18673 25.4632 9.47998 25.8115 9.70907C26.1505 9.93817 26.6453 10.0573 27.2868 10.0573C27.6167 10.0573 27.9466 10.0115 28.2673 9.91067C28.5881 9.80987 28.8722 9.69991 29.1013 9.55329V11.3219C28.3681 11.7618 27.5159 11.9817 26.5537 11.9817C25.7381 11.9817 25.0509 11.8351 24.4735 11.5602Z"></path><path d="M31.6955 11.5602C31.1182 11.2761 30.6783 10.9004 30.3759 10.4147C30.0735 9.929 29.9177 9.38834 29.9177 8.78353C29.9177 8.18788 30.0735 7.64722 30.3759 7.17986C30.6783 6.71251 31.1182 6.34595 31.6863 6.0802C32.2545 5.81445 32.9418 5.677 33.7299 5.677C34.518 5.677 35.2053 5.80529 35.7743 6.0802C36.3425 6.34595 36.7824 6.71251 37.0848 7.17986C37.3872 7.64722 37.5338 8.17872 37.5338 8.78353C37.5338 9.37918 37.3872 9.929 37.0848 10.4147C36.7824 10.9004 36.3517 11.2852 35.7743 11.5602C35.1961 11.8351 34.518 11.9817 33.7299 11.9817C32.951 11.9817 32.2728 11.8351 31.6955 11.5602ZM34.7287 9.79155C34.967 9.55329 35.0953 9.22339 35.0953 8.82934C35.0953 8.42614 34.9762 8.11457 34.7287 7.87632C34.4813 7.63806 34.1514 7.51892 33.7391 7.51892C33.3084 7.51892 32.9785 7.63806 32.731 7.87632C32.4928 8.11457 32.3645 8.42614 32.3645 8.82934C32.3645 9.23255 32.4836 9.55329 32.731 9.79155C32.9785 10.039 33.3084 10.1581 33.7391 10.1581C34.1514 10.1489 34.4905 10.0298 34.7287 9.79155Z"></path><path d="M43.6644 6.0435V8.19699C43.4078 8.03204 43.0779 7.94956 42.6747 7.94956C42.1432 7.94956 41.7308 8.11451 41.4467 8.43524C41.1626 8.75598 41.016 9.25999 41.016 9.93811V11.7709H38.5693V5.9427H40.9702V7.80295C41.0985 7.12482 41.3184 6.62082 41.6117 6.30008C41.9049 5.97935 42.2898 5.80524 42.7572 5.80524C43.1054 5.80524 43.4078 5.88771 43.6644 6.0435Z"></path><path d="M51.9136 4.58649V11.7801H49.4659V10.4696C49.2552 10.9645 48.9436 11.3402 48.5221 11.5968C48.1005 11.8534 47.5782 11.9817 46.9551 11.9817C46.4052 11.9817 45.9195 11.8442 45.5072 11.5785C45.0948 11.3127 44.7741 10.937 44.5542 10.4696C44.3342 9.99313 44.2242 9.46163 44.2242 8.87514C44.2151 8.26117 44.3342 7.71134 44.5816 7.22566C44.8199 6.73998 45.1681 6.36426 45.608 6.08935C46.0479 5.81444 46.5519 5.67698 47.12 5.67698C48.2838 5.67698 49.0627 6.18099 49.4659 7.19817V4.58649H51.9136ZM49.0994 9.7457C49.3468 9.50744 49.4751 9.18671 49.4751 8.80183C49.4751 8.42612 49.356 8.12371 49.1086 7.89462C48.8611 7.66552 48.5312 7.5464 48.1189 7.5464C47.7065 7.5464 47.3766 7.66553 47.1292 7.90378C46.8818 8.14204 46.7626 8.44444 46.7626 8.82932C46.7626 9.2142 46.8818 9.51661 47.1292 9.75487C47.3766 9.99313 47.6973 10.1123 48.1097 10.1123C48.5221 10.1123 48.852 9.99313 49.0994 9.7457Z"></path><path d="M13.4751 6.29095C14.1789 6.29095 14.7489 5.77778 14.7489 5.14547C14.7489 4.51317 14.1789 4 13.4751 4C12.7723 4 12.2014 4.51317 12.2014 5.14547C12.2014 5.77778 12.7723 6.29095 13.4751 6.29095Z"></path><path d="M14.7489 7.07812C13.97 7.41719 12.9986 7.42635 12.2014 7.07812V11.7792H14.7489V7.07812Z"></path></g></svg></div>
                                    </div>
                                    <div id="home-page-preview-banner-container" data-shop-banner-banner-container>
                                        <img class="shop-category-banner-img" src="" data-shop-category-banner-image>
                                    </div>
                                    <div class="shop-category-logo-holder" style="display: none;" data-shop-category-logo-holder>
                                        <img class="shop-category-banner-logo" src="" id="shop-banner-logo" data-shop-category-logo-image>
                                    </div>
                                    <div class="shop-category-text-holder">
                                        <p style="font-size: 18px;" data-shop-category-desc></p>
                                    </div>
                                    <!-- Timer Display -->
                                    <div class="shop-expiry-timer" style="display: none;">
                                        <p class="shop-expiry-timer-timer" id="shop-expiry-timer"></p>
                                    </div>
                                    <div class="shop-card-tag-container" data-shop-card-tag-container>
                                    </div>
                                </div>
                                <div class="shop-category-card-holder" id="shop-category-card-holder" data-shop-category-card-holder>
                                </div>
                            </div>
                        </template>
                        <template data-shop-item-card-template>
                            <div class="shop-category-card">
                                <div data-shop-card-preview-holder>
                                </div>
                                <div class="card-bottom">
                                    <div title="Copy Link" data-share-product-card-button></div>
                                    <a class="item-credits" data-product-card-sku-id>Failed To Load Item</a>
                                    <h3 data-product-card-name>Failed To Load Item</h3>
                                    <p class="shop-card-summary" data-product-card-summary>Failed To Load Item</p>
                                    <div class="shop-price-container" data-shop-price-container>
                                        <div data-price-standard-container>
                                            <a style="font-size: large; font-weight: 900;" data-price-standard></a>
                                        </div>
                                        <div data-price-nitro-container>
                                            <a data-price-nitro></a>
                                        </div>
                                    </div>
                                    <div class="shop-card-var-container" data-shop-card-var-container>
                                    </div>
                                    <a class="shop-card-var-title" data-shop-card-var-title></a>
                                </div>
                                <div class="card-button-container"data-product-card-open-in-shop>
                                    <button class="card-button" title="Open this item in the Discord Shop">Open In Shop</button>
                                </div>
                                <div class="shop-card-tag-container" data-shop-card-tag-container>
                                </div>
                            </div>
                        </template>
                        <template data-shop-varcolorblock-template>
                            <div data-shop-card-var></div>
                        </template>
                        <div data-shop-output>
                        </div>
                        <div id="shop-category-loading-container">
                        </div>
                    </div>
                </div>
            `;
        }



    }
} else if (localStorage.full_client_rework != "false") {

    sessionStorage.setItem('api-token', 'token');

    const api_password = localStorage.getItem("api-password");
    const api_token = sessionStorage.getItem("api-token");

    // api = 'https://raw.githubusercontent.com/Yappering/api/main/v2';
    api = 'https://shop-archives-api.vercel.app/api';
    prvapi = 'https://raw.githubusercontent.com/Yappering/private-api/refs/heads/main/v2';
    discordsupport = 'https://support.discord.com/hc/en-us/articles/';
    discordblog = 'https://discord.com/blog/';
    apidesignedurl = 'https://api.yapper.shop/v2';
    yapperblog = 'https://yapper.shop/blog/';
    yappersupport = 'https://support.yapper.shop/?page=';
    cdn = 'https://cdn.yapper.shop/';
    tmpapi = 'https://api.yapper.shop/tmp';

    // if (localStorage.api_designed_url != "false") {
    //     if (localStorage.experiment_2025_02_fetch_from_vercel_endpoits === "Treatment 1: Enabled") {
    //         api = 'https://shop-archives-api.vercel.app/api'
    //     } else {
    //         api = apidesignedurl;
    //     }
    // }

    function privateAPICheck() {
        // if (localStorage.force_all_api_to_fectch_private_api == "true") {
        //     api = prvapi;
        //     tmpapi = 'https://raw.githubusercontent.com/Yappering/api/main/tmp';
        // } else if (localStorage.api_designed_url != "false") {
        //     api = apidesignedurl;
        // } else {
        //     api = 'https://raw.githubusercontent.com/Yappering/api/main/v2';
        //     tmpapi = 'https://raw.githubusercontent.com/Yappering/api/main/tmp';
        // }
    }


    if (localStorage.experiment_2025_02_fetch_from_vercel_endpoits === "Treatment 1: Enabled") {
        endpoints = [
            COLLECTIBLES = "/collectibles-categories",
            COLLECTIBLES_IN_SHOP = "/collectibles-categories-published",
            CONSUMABLES = "/consumables",
            MISCELLANEOUS = "/miscellaneous-categories",
            PROFILES_PLUS = "/profiles-plus-categories",
            HOME_PAGE_ALL = "/preview-1",
            HOME_PAGE_LEAKS = "/preview-2",
            HOME_PAGE_PPLUS = "/preview-3",
            PROFILE_EFFECTS = "/user-profile-effects",
            DOWNLOADABLE_DATA = "/downloads",
            PROFILES_PLUS_EFFECTS = "/profiles-plus-profile-effects",
            LEAKS = "/leaked-categories",
            COLLECTIBLES_MARKETING = "/collectibles-marketing",
            COLLECTIBLES_VARIANTS = "/collectibles-categories-variants",
            EXPERIMENT_ROLLOUTS = "/rollout-handler",
            COLLECTIBLES_SHOP_HOME = "/collectibles-shop-home",
            NEW_ITEMS = "/new-items",
            ORBS_SHOP = "/orbs-shop",
            ORBS_SHOP_DEFAULT = "/orbs-shop-default",
            HEARTBEAT_DATA = "/heartbeat-data"
        ]
    } else {
        endpoints = [
            COLLECTIBLES = "/collectibles-categories.json",
            COLLECTIBLES_IN_SHOP = "/collectibles-categories-published.json",
            CONSUMABLES = "/consumables.json",
            MISCELLANEOUS = "/miscellaneous-categories.json",
            PROFILES_PLUS = "/profiles-plus-categories.json",
            HOME_PAGE_ALL = "/preview-1.json",
            HOME_PAGE_LEAKS = "/preview-2.json",
            PROFILE_EFFECTS = "/user-profile-effects.json",
            DOWNLOADABLE_DATA = "/downloads.json",
            PROFILES_PLUS_EFFECTS = "/profiles-plus-profile-effects.json",
            LEAKS = "/leaked-categories.json",
            COLLECTIBLES_MARKETING = "/collectibles-marketing.json",
            COLLECTIBLES_VARIANTS = "/collectibles-categories-variants.json",
            EXPERIMENT_ROLLOUTS = "/rollout-handler.json",
            COLLECTIBLES_SHOP_HOME = "/collectibles-shop-home.json",
            NEW_ITEMS = "/new-items.json",
            ORBS_SHOP = "/orbs-shop.json",
            ORBS_SHOP_DEFAULT = "/orbs-shop-default.json"
        ]
    }


    yapper_categories = [
        WINDOWKILL = "profiles-plus-1",
        BOPL_BATTLE = "profiles-plus-2",
        PAPER_BEACH = "profiles-plus-3",
        WINDOWKILL_V2 = "profiles-plus-4",
        FIVE_NIGHTS_AT_FREDDYS = "profiles-plus-5",
        PLUS_SPECIAL_EVENT = "profiles-plus-6",
        GEOMETRY_DASH = "profiles-plus-7",
        PAPER_BEACH_V2 = "profiles-plus-8",
        RBXDOORS = "profiles-plus-9"
    ]


    discord_categories = [
        FANTASY = "1144003461608906824",
        ANIME = "1144302037593497701",
        BREAKFAST = "1144054000099012659",
        DISXCORE = "1144058340327047249",
        FALL = "1157406994873991284",
        HALLOWEEN = "1157410718711304313",
        WINTER = "1174459301239197856",
        MONSTERS = "1179493515038818325",
        CYBERPUNK = "1197342727608746044",
        LUNAR_NEW_YEAR = "1202069709281828935",
        ELEMENTS = "1207046915880124426",
        ANIME_V2 = "1212565175790473246",
        SPECIAL_EVENTS = "1217175518781243583",
        SPECIAL_EVENTS_2 = "1309309974266118144",
        SPRINGTOONS = "1217622942175727736",
        SHY = "1220513972189663413",
        LOFI_VIBES = "1228243842684162121",
        GALAXY = "1232029045928099922",
        FEELIN_RETRO = "1237649643073044491",
        PIRATES = "1237653589896200272",
        ARCADE = "1245086656973901894",
        TIDE = "1252404112650407998",
        DARK_FANTASY = "1256321669388308595",
        ROBERT = "1262491137386614805",
        STORM = "1265375293397270650",
        DOJO = "1266520267946201099",
        THE_VAULT = "1277733175191277721",
        AUTUMN_EQUINOX = "1282816432056569866",
        BAND = "1285465421339693076",
        SPOOKY_NIGHT = "1287835634089594972",
        CHANCE = "1293373563494993952",
        MYTHICAL_CREATURES = "1298033986811068497",
        WARRIOR = "1303490165284802580",
        KAWAII_MODE = "1306330663213072494",
        LOFI_GIRL = "1309668861943218229",
        WINTER_WONDERLAND = "1314020997204283476",
        FANTASY_V2 = "1324454241254903829",
        STEAMPUNK = "1326333074241486859",
        PROGRESS = "1333278032999485461",
        RADIATE = "1336483992429658112",
        VALENTINES = "1333866045521395723",
        ORB = "1332505418219655258",
        ANIME_V3 = "1341506445249609728",
        INSOMNIA = "1343751621364027462",
        NAMEPLATE_TEST = "1344802365307621427",
        AESPA = "1346499610977243196"
    ]

    category_types = [
        HERO = 0,
        FEATURED = 1,
        FEED = 2,
        WIDE_BANNER = 3
    ]

    item_types = [
        NONE = 100,
        AVATAR_DECORATION = 0,
        PROFILE_EFFECT = 1,
        NAMEPLATE = 2,
        BUNDLE = 1e3,
        VARIANTS_GROUP = 2e3,
        EXTERNAL_SKU = 3e3
    ]

    const nameplate_palettes = {
        crimson: {
            "darkBackground": "#900007",
            "lightBackground": "#E7040F"
        },
        berry: {
            "darkBackground": "#893A99",
            "lightBackground": "#B11FCF"
        },
        sky: {
            "darkBackground": "#0080B7",
            "lightBackground": "#56CCFF"
        },
        teal: {
            "darkBackground": "#086460",
            "lightBackground": "#7DEED7"
        },
        forest: {
            "darkBackground": "#2D5401",
            "lightBackground": "#6AA624"
        },
        bubble_gum: {
            "darkBackground": "#DC3E97",
            "lightBackground": "#F957B3"
        },
        violet: {
            "darkBackground": "#730BC8",
            "lightBackground": "#972FED"
        },
        cobalt: {
            "darkBackground": "#0131C2",
            "lightBackground": "#4278FF"
        },
        clover: {
            "darkBackground": "#047B20",
            "lightBackground": "#63CD5A"
        }
    }


    HELP_AVATAR_DECORATIONS = "13410113109911"
    HELP_SHOP = "17162747936663"
    HELP_PROFILE_EFFECTS = "17828465914263"
    HELP_HD_STREAMING_POTION = "27343254089623"
    HELP_CONFETTI_POTION = "29133681590679"


    BLOG_AVATAR_DECORATIONS_PROFILE_EFFECTS = "avatar-decorations-collect-and-keep-the-newest-styles"


    YAPPER_BLOG_2024_RECAP = "2024-recap"
    YAPPER_BLOG_2025_RECAP = "2025-recap"


    DISMISSIBLE_2024_RECAP = "assets/103.svg"
    DISMISSIBLE_2025_RECAP = "assets/160.png"


    m = ["1329609528441831537", "1329609528471195659", "1329609528492429332", "1329609528504746075", "1329609528525979658", "1329609528546693170", "1329609528571858975", "1329611507381829702", "1329611507402801312"];
    g = new Date('2025-01-31');
    newColorsSKUIDS = ["1144308439720394944", "1154896005045694555", "1144307257807491094", "1144305233707671573", "1144307629225672846", "1144308196723408958", "1144307957425778779", "1212569856189407352", "1212570343567261736", "1212570596970467378", "1212581390936178768", "1212569433839636530", "1212581147675205652", "1139323101881061466", "1139323093551165533", "1139323101008642101", "1212582298893946880", "1212582372877541427", "1212582452640350238", "1139323100568244355"];
    newColorsExpireDate = new Date('2025-03-08');
    N = new Date();
    I = ["1212569433839636530", "1144308439720394944", "1314020996201713685", "1212570343567261736", "1314020996776329279", "1271174640026255380", "1271175049168031815", "1232073608168472638", "1293373563407175680", "1314020996327542894", "1139323093991575696", "1232071157746765906", "1232071712695386162", "1144307957425778779", "1306330662990643252", "1280621222496964630", "1306330663015809024", "1306330663070334996", "1243617249974288404", "1309668861578186803", "1303490165213237338", "1306330662898372639", "1298033986508951685", "1282816432026943488", "1306330663137443991", "1197344764174008452", "1298033986727055370", "1298033986571866112", "1271175120437641261", "1314020996361093171", "1309668861645426729", "1256321669467865088", "1314020996864413717", "1306752744278982737", "1271174732577767626", "1144307257807491094", "1144308196723408958", "1287835633787732070", "1306330663162609685", "1306330662940311726", "1309668861901279422", "1282816431871754281", "1287835633485877369", "1228234634379132958", "1144305233707671573", "1298033986643169360", "1139323093551165533", "1212569856189407352", "1282816431850782730", "1144307629225672846", "1232070870093008937", "1207047014769234001", "1212582298893946880", "1232073286582538261", "1282816431985004594", "1293373563381878836", "1282816431964028958", "1306752744258011166", "1309668861846753372", "1271174324375519273", "1256321669426053198", "1287835633615765524", "1286504131325853739", "1306330663183581247", "1139323099687436419", "1287835633590734848", "1256321669493166214", "1286504131518791816", "1243620093431119922", "1262492035558932604", "1306330662927859723", "1197344326133502032", "1228251351415263242", "1232073448415821854", "1158572178179108968", "1298033986752221204", "1262491137394868311", "1309668861620260874", "1271174241860980907", "1220513989729976411", "1282820582408192061", "1154896005045694555", "1207047597294886923", "1306330663036780695", "1309668861674786877", "1197344693630009424", "1306330662965477478", "1174460780842856588", "1271174907081789524", "1282816431813169272", "1298033986622328842", "1139323101881061466", "1262491690900656267", "1303490165171294268", "1139323100568244355", "1243619479645065287", "1262491690971955284", "1316087100260483174", "1139323101008642101", "1228251144065777765", "1207048289610899526", "1287835633561239683", "1232072121950146560", "1303490165045727317", "1228246010116050965", "1309668861871919316", "1207049364464345158", "1243618816639107223", "1265421074514841751", "1316087100277395607", "1159280677246742548", "1262492035558932607", "1207047808838799410", "1306752744299954306", "1298033986668335135", "1266160780928352268", "1262491137386614812", "1139323092645183591", "1220513977683935373", "1256321669467865091", "1237654942202990602", "1287835633536209079", "1262491137394868305", "1256321669493166217", "1212582452640350238", "1158572275507937342", "1306752744228524052", "1174459546748600481", "1262491137394868308", "1309668861599285249", "1262492035558932610", "1144046002110738634", "1293373563184877618", "1298033986693500960", "1285465421260263464", "1306330663091306608", "1287835633645125653", "1303490165074825296", "1298033986538569781", "1303490165150322698", "1262491690900656261", "1256321669467865094", "1207048656289534022", "1285681070196396177", "1287835633674620949", "1237654224712765440", "1293373563121696891", "1303490165255180298", "1303490165120962651", "1212582372877541427", "1287835634005970994", "1303490165099991143", "1271564593746939904", "1314020996629532686", "1316087100260483176", "1228233390260486164", "1287835633867559022", "1158572263411556373", "1303490165192265799", "1237654783209508904", "1309668861704146984", "1212581147675205652", "1309668861548957738", "1245088205330710539", "1287835633896783952", "1316087100260483178", "1139323099251232828", "1262491690900656258", "1232072859485208687", "1197344396983664670", "1309668861788033074", "1314020996600172554", "1159280847262859364", "1314020996461760542", "1220514048068812901", "1293373563302318110", "1228251846032756796", "1197344636558114986", "1282820582223642624", "1287835634035331072", "1298033986777387059", "1243619781362450442", "1282816432001777794", "1212570596970467378", "1157409074422481023", "1256321669426053195", "1146328961417224193", "1293373563327483984", "1303490165234208810", "1266160780978556969", "1228237157554978817", "1287835633947115570", "1282820582345408595", "1271174810227179562", "1282816431830077542", "1287835633842258022", "1283211414323990538", "1282820582303334482", "1282820582429298748", "1306330663116472371", "1157407831348228141", "1293373563210043442", "1287835633515102228", "1309668861758672997", "1287835633703845888", "1287835633733341224", "1197344575832981605", "1316087100260483180", "1237653964582031400", "1287835633817227297", "1266493591207940133", "1309668861817393263", "1316087100260483182", "1298033986555351132", "1237650542772228096", "1207049498065375343", "1287835633980669972", "1314020996516286485", "1285465421193154560", "1268362891946627103", "1282820582244880496", "1293373563352649961", "1220432740638523543", "1243620329331626044", "1220432697718083614", "1267521289330102344", "1146328960951668776", "1293373563457507463", "1245088094437507163", "1262491690900656264", "1314020996432400404", "1220513984273186816", "1293373563159449653", "1314020996721803306", "1285681070196396179", "1285465421050548345", "1282820582366511229", "1256321669467865097", "1285465421285429258", "1293373563239272458", "1271174154514595891", "1217625794382401577", "1228252219502100530", "1285465421029576704", "1243618548673417298", "1220432647453409384", "1266493591275044903", "1217626024540508170", "1232072520249643028", "1245088254647205991", "1237654867330469949", "1314020996570812506", "1314020996227006484", "1245087968759382207", "1144006094134456352", "1314020997166403624", "1144048390594908212", "1287835633762701382", "1212581390936178768", "1285465420995756065", "1217626509737459852", "1314020996491116575", "1309668861729312898", "1237650411410685972", "1245087661316898877", "1217627230818009171", "1256321669388308601", "1314020996310896672", "1274105879238676561", "1293373563432341574", "1314020996273016863", "1282816431943057460", "1220513995308400680", "1293373563264569416", "1228252042791878707", "1314020997078323200", "1237654031732703272", "1267521289355268154", "1298033986592837754", "1285465421214126100", "1245087724265013299", "1314020996990242816", "1314020996663087154", "1282820582282629171", "1282816431922085888", "1314020997107683411", "1237654124443734026", "1314020997137043578", "1266161342801383434", "1285465421096685639", "1237654692985700352", "1174459480348565554", "1314020997019602984", "1314020996252176444", "1144003752978829455", "1282816431901118474", "1285465421306400858", "1285465421239291904", "1285465420979245087", "1314020996692447234", "1144048977138946230", "1217627051217911848", "1217626219651006495", "1217625572168044604", "1286504131392962641", "1237650618777075712", "1207048049571139584", "1314020996289921154", "1237654615474962472", "1314020996927328276", "1286504131439366184", "1285465421016862730", "1217625289681801316", "1243619153688920206", "1217624148080332820", "1144049316009353338", "1245481938202918912", "1245088023452975104", "1314020996960882789", "1285465421121851445", "1243617981435478102", "1144049603109470370", "1285465421071519825", "1256321669426053192", "1245087912350187520", "1207049115339591681", "1144049924397334651", "1237649939027333232", "1237650103980920872", "1237650023794081823", "1237650179721527347", "1245087850177888356", "1285465421167988758", "1277733174797008931"];



    const params = new URLSearchParams(window.location.search);

    function setParams(params) {
        const url = new URL(window.location);
    
        // Clear all existing query parameters
        url.search = '';
    
        // Set the new query parameters from the provided object
        Object.entries(params).forEach(([key, value]) => {
            url.searchParams.set(key, value);
        });
    
        // Update the address bar without reloading the page
        history.replaceState(null, '', url);
    }

    function addParams(params) {
        const url = new URL(window.location);

        Object.entries(params).forEach(([key, value]) => {
            url.searchParams.set(key, value);
        });

        history.replaceState(null, '', url);
    }
    
    // Function to clear the shop data
    function clearShopData() {
        const output = document.querySelector("[data-shop-output]");
        output.innerHTML = ''; // Clears the content of the shop category
        if (params.get("page") === "consumables" || params.get("page") === "orbs") {
            createPotionsCategoryLoadingElement()
        } else {
            createShopCategoryLoadingElement()
        }
    }
    
    // Function to fetch and display shop data
    function fetchData() {
        if (params.get("page") != "home" && params.get("page") != "pplus-home" && params.get("page") != "year_recap") {

            if (params.get("page") === "consumables") {
                createMainPotionsElement()
                createPotionsCategoryLoadingElement()
            } else {
                createMainShopElement()
                createShopCategoryLoadingElement()
            }

            if (params.get("page") === "orbs" && localStorage.experiment_2025_02_orbs_shop != "Treatment 2: Orb Shop done like default" && localStorage.experiment_2025_02_orbs_shop != "Treatment 3: Default + New tag") {
                createMainPotionsElement()
                createPotionsCategoryLoadingElement()
            } else if (params.get("page") === "orbs" && localStorage.experiment_2025_02_orbs_shop === "Treatment 2: Orb Shop done like default" && localStorage.experiment_2025_02_orbs_shop === "Treatment 3: Default + New tag") {
                createMainShopElement()
                createShopCategoryLoadingElement()
            }
        
            // Clear the previous data
            clearShopData();
        
            // Fetch new data

            let profileEffectsCache = null; // Cache for the profile effects data

            // Make the function async
            fetch(apiUrl, {
                method: "GET",
                headers: {
                    "Password": api_password,
                    "Token": api_token
                }
            })
                .then(response => response.json())
                .then((data) => {

                    if (data.message === "Missing Access") {
                        document.getElementById("everything-housing-container").innerHTML = `
                            <div style="text-align: center; margin-top: 10px;" id="failed-to-load-shop">
                                <img style="width: 200px;" src="https://raw.githubusercontent.com/DTACat/Collectibles/main/Images/shopuhoh.png">
                                <h2>${getTextString("SHOP_NOT_LOAD_ERROR_1")}</h2>
                                <p>${getTextString("SHOP_NOT_LOAD_ERROR_2")}</p>
                                <p>${getTextString("SHOP_NOT_LOAD_ERROR")}${data.message}</p>
                                <button class="refresh-button" onclick="location.reload();">${getTextString("SHOP_NOT_LOAD_ERROR_RELOAD")}</button>
                            </div>
                        `;
                    } else if (data.message === "No Leaks") {
                        document.getElementById("everything-housing-container").innerHTML = `
                            <div style="text-align: center; margin-top: 10px;" id="failed-to-load-shop">
                                <img style="width: 200px;" src="https://raw.githubusercontent.com/DTACat/Collectibles/main/Images/shopuhoh.png">
                                <h2>${getTextString("SHOP_NO_LEAKS_ERROR_1")}</h2>
                                <p>${getTextString("SHOP_NO_LEAKS_ERROR_2")}</p>
                                <p>${getTextString("SHOP_NOT_LOAD_ERROR")}${data.message}</p>
                                <button class="refresh-button" onclick="location.reload();">${getTextString("SHOP_NOT_LOAD_ERROR_RELOAD")}</button>
                            </div>
                        `;
                    } else {
                        processCategories();
                    }
                    // Define async function inside the .then block
                    async function processCategories() {
                        const categoryTemplate = document.querySelector("[data-shop-category-template]");
                        const potionTemplate = document.querySelector("[data-potion-card-template]");
                        const categoryOutput = document.querySelector("[data-shop-output]");
                        const page = params.get("page");
            
                        for (const apiCategory of data) {
                            if (page === "pplus") {
                                // Existing code for 'pplus' page
                                const category = categoryTemplate.content.cloneNode(true).children[0];
                                category.querySelector("[data-shop-category-banner]").id = apiCategory.sku_id;

                                if (localStorage.experiment_2025_02_shop_category_modals === "Treatment 1: Enable category modals" || localStorage.experiment_2025_02_shop_category_modals === "Treatment 2: Enable category modals w/ data downloads") {
                                    category.querySelector("[data-shop-category-banner]").classList.add('clickable')
                                }
            
                                if (apiCategory.banner_asset) {
                                    if (apiCategory.banner_asset.animated != null) {
                                        if (apiCategory.banner_asset.static != null) {
                                            category.querySelector("[data-shop-banner-banner-container]").innerHTML = `
                                                <img class="shop-category-banner-img" style="position: absolute; left: 0px; bottom: 0px; width: 1280px;" src="${apiCategory.banner_asset.static}">
                                                <video autoplay muted class="shop-category-banner-img" style="position: absolute; left: 0px; bottom: 0px; width: 1280px; z-index: 1;" src="${apiCategory.banner_asset.animated}" loop></video>
                                            `;
                                        } else {
                                            category.querySelector("[data-shop-banner-banner-container]").innerHTML = `
                                                <video autoplay muted class="shop-category-banner-img" style="position: absolute; left: 0px; bottom: 0px; width: 1280px; z-index: 1;" src="${apiCategory.banner_asset.animated}" loop></video>
                                            `;
                                        }
                                    } else if (apiCategory.banner_asset.static != null) {
                                        category.querySelector("[data-shop-category-banner-image]").src = `${apiCategory.banner_asset.static}`;
                                    }
                                } else {
                                    category.querySelector("[data-shop-category-banner-image]").src = `https://cdn.yapper.shop/assets/${apiCategory.banner}.png`;
                                    category.querySelector("[data-shop-category-banner-image]").alt = apiCategory.name;
                                }
            
                                category.querySelector("[data-shop-category-logo-image]").src = `https://cdn.yapper.shop/assets/${apiCategory.logo}.png`;
                                category.querySelector("[data-shop-category-logo-image]").alt = apiCategory.name;
            
                                category.querySelector("[data-shop-category-desc]").id = `${apiCategory.sku_id}-summary`;
                                category.querySelector("[data-shop-category-desc]").textContent = apiCategory.summary;

                                category.querySelector("[data-shop-banner-banner-container]").id = `${apiCategory.sku_id}-banner-banner-container`;
                                category.querySelector("[data-shop-category-logo-holder]").id = `${apiCategory.sku_id}-logo-container`;
                                category.querySelector("[data-shop-discord-watermark-container]").id = `${apiCategory.sku_id}-discord-watermark-container`;

                                if (apiCategory.category_bg != null) {
                                    category.querySelector("[data-shop-category-marketing-bg]").src = `https://cdn.yapper.shop/assets/${apiCategory.category_bg}.png`;
                                }

                                
                                if (apiCategory.sku_id === PAPER_BEACH) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === WINDOWKILL_V2) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === FIVE_NIGHTS_AT_FREDDYS) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === PLUS_SPECIAL_EVENT) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === GEOMETRY_DASH) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === PAPER_BEACH_V2) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                }

                                if (localStorage.experiment_2025_02_shop_category_modals === "Treatment 1: Enable category modals" || localStorage.experiment_2025_02_shop_category_modals === "Treatment 2: Enable category modals w/ data downloads") {
                                    category.querySelector("[data-shop-category-banner]").classList.add('clickable');

                                    category.querySelector("[data-shop-category-banner]").addEventListener("click", () => {
                                        openCategoryModal();
                                    });
                                    

                                    async function openCategoryModal() {
                                        let modal = document.createElement("div");

                                        modal.classList.add('modalv2');

                                        modal.innerHTML = `
                                            <div class="category-modalv2-inner">
                                                <div class="category-modalv2-inner-left">
                                                    <p data-product-modal-sku-id></p>
                                                    <p style="font-size: large; font-weight: 900;" data-product-modal-name></p>
                                                    <p style="color: var(--8)" data-product-modal-summary></p>
                                                    <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ITEM_COUNT")}${apiCategory.products.length}</p>
                                                    <details>
                                                        <summary class="clickable" style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS")}</summary>
                                                        <div class="shop-category-modal-assets-container" data-shop-category-modal-assets-container></div>
                                                    </details>
                                                    <div class="shop-modal-review-container" data-shop-modal-review-container>
                                                        <p style="font-size: large; font-weight: 900;" data-shop-modal-review-title></p>
                                                    </div>
                                                </div>
                                                <div class="shop-modal-tag-container" data-shop-card-tag-container></div>
                                                <div data-modal-top-product-buttons>
                                                    <div title="Close" data-close-product-card-button>
                                                        <svg class="closeIcon_modal" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M17.3 18.7a1 1 0 0 0 1.4-1.4L13.42 12l5.3-5.3a1 1 0 0 0-1.42-1.4L12 10.58l-5.3-5.3a1 1 0 0 0-1.4 1.42L10.58 12l-5.3 5.3a1 1 0 1 0 1.42 1.4L12 13.42l5.3 5.3Z" class=""></path></svg>
                                                    </div>
                                                    <div title="Copy Link" data-share-product-card-button></div>
                                                    <div title="Download Data" data-download-product-card-button></div>
                                                </div>
                                            </div>
                                        `;

                                        if (localStorage.experiment_2025_03_item_reviews === "Treatment 1: Enabled" || localStorage.experiment_2025_03_item_reviews === "Treatment 2: Simulate not logged in" || localStorage.experiment_2025_03_item_reviews === "Treatment 3: Simulate logged in") {
                                            modal.querySelector("[data-shop-modal-review-title]").textContent = `${getTextString("SHOP_REVIEWS_TITLE")}`;

                                            let reviewLoadingElement = document.createElement("div");
                                            reviewLoadingElement.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_REVIEWS_LOADING")}</p>
                                            `;
                                            reviewLoadingElement.classList.add("review-element");
                                            modal.querySelector("[data-shop-modal-review-container]").appendChild(reviewLoadingElement);
                                            fetch(`https://shop-archives-api.vercel.app/api/reviews?sku_id=${apiCategory.sku_id}`, {
                                                method: "GET",
                                                headers: {
                                                    "Password": api_password,
                                                    "Token": api_token
                                                }
                                            }) // Replace with your API URL
                                            .then(response => response.json())
                                            .then(data => {
                                                if (data.message) {
                                                    const reviewContainer = modal.querySelector("[data-shop-modal-review-container]");
                                                    let reviewElement = document.createElement("div");
    
                                                    reviewElement.classList.add("review-element");
                                                    if (data.message === "Unknown SKU") {
            
                                                        reviewElement.innerHTML = `
                                                            <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_REVIEWS_NONE_TITLE")}</p>
                                                            <p style="color: var(--8)">${getTextString("SHOP_REVIEWS_NONE_DESC")}</p>
                                                        `;
                                                    } else if (data.message === "Missing Access") {
                                                        
                                                        reviewElement.innerHTML = `
                                                            <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_REVIEWS_NO_ACCESS_TITLE")}</p>
                                                            <p style="color: var(--8)">${getTextString("SHOP_REVIEWS_NO_ACCESS_DESC")}</p>
                                                        `;
                                                    } else {
                                                        
                                                        reviewElement.innerHTML = `
                                                            <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_REVIEWS_ERROR_TITLE")}</p>
                                                            <p style="color: var(--8)">${getTextString("SHOP_REVIEWS_ERROR_DESC")}</p>
                                                        `;
                                                    }
                                                    reviewContainer.appendChild(reviewElement);
                                                } else {
                                                    renderReviews(data)
                                                }

                                                reviewLoadingElement.remove();
                                                
                                            })
                                            .catch(error => console.error('Error fetching data:', error));
    
                                            function renderReviews(datareview) {
                                                const reviewContainer = modal.querySelector("[data-shop-modal-review-container]");
                                                datareview.forEach(review => {
                                                    let reviewElement = document.createElement("div");
    
                                                    reviewElement.classList.add("review-element");
        
                                                    reviewElement.innerHTML = `
                                                        <div class="shop-modal-review-name-container" data-shop-modal-review-name-container>
                                                            <p class="shop-modal-review-name" style="font-size: large; font-weight: 900;">${review.reviewer.name}</p>
                                                        </div>
                                                        <div class="shop-modal-review-star-container" data-shop-modal-review-star-container></div>
                                                        <p style="color: var(--8)">${review.review}</p>
                                                    `;

                                                    if (review.reviewer.moderator === "true") {
                                                        let moderatorNametag = document.createElement("p");
    
                                                        moderatorNametag.classList.add("shop-modal-review-nametag-moderator");
                                                        moderatorNametag.textContent = `${getTextString("SHOP_REVIEWS_NAMETAG_MODERATOR")}`;
                                                        
                                                        reviewElement.querySelector("[data-shop-modal-review-name-container]").appendChild(moderatorNametag);
                                                    } else if (review.reviewer.special === "true") {
                                                        let moderatorNametag = document.createElement("p");
    
                                                        moderatorNametag.classList.add("shop-modal-review-nametag-special");
                                                        moderatorNametag.textContent = `${getTextString("SHOP_REVIEWS_NAMETAG_SPECIAL")}`;
                                                        
                                                        reviewElement.querySelector("[data-shop-modal-review-name-container]").appendChild(moderatorNametag);
                                                    }
        
                                                    if (review.stars === "5") {
                                                        reviewElement.querySelector("[data-shop-modal-review-star-container]").innerHTML = `
                                                            <img class="shop-modal-review-stars-img" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMTIwIDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMTMxXzIxKSI+CjxwYXRoIGQ9Ik0xMiAwTDE0LjY5NDIgOC4yOTE4SDIzLjQxMjdMMTYuMzU5MyAxMy40MTY0TDE5LjA1MzQgMjEuNzA4MkwxMiAxNi41ODM2TDQuOTQ2NTggMjEuNzA4Mkw3LjY0MDc0IDEzLjQxNjRMMC41ODczMjIgOC4yOTE4SDkuMzA1ODNMMTIgMFoiIGZpbGw9IiNGRkVDM0UiLz4KPHBhdGggZD0iTTM2IDBMMzguNjk0MiA4LjI5MThINDcuNDEyN0w0MC4zNTkzIDEzLjQxNjRMNDMuMDUzNCAyMS43MDgyTDM2IDE2LjU4MzZMMjguOTQ2NiAyMS43MDgyTDMxLjY0MDcgMTMuNDE2NEwyNC41ODczIDguMjkxOEgzMy4zMDU4TDM2IDBaIiBmaWxsPSIjRkZFQzNFIi8+CjxwYXRoIGQ9Ik02MCAwTDYyLjY5NDIgOC4yOTE4SDcxLjQxMjdMNjQuMzU5MyAxMy40MTY0TDY3LjA1MzQgMjEuNzA4Mkw2MCAxNi41ODM2TDUyLjk0NjYgMjEuNzA4Mkw1NS42NDA3IDEzLjQxNjRMNDguNTg3MyA4LjI5MThINTcuMzA1OEw2MCAwWiIgZmlsbD0iI0ZGRUMzRSIvPgo8cGF0aCBkPSJNODQgMEw4Ni42OTQyIDguMjkxOEg5NS40MTI3TDg4LjM1OTMgMTMuNDE2NEw5MS4wNTM0IDIxLjcwODJMODQgMTYuNTgzNkw3Ni45NDY2IDIxLjcwODJMNzkuNjQwNyAxMy40MTY0TDcyLjU4NzMgOC4yOTE4SDgxLjMwNThMODQgMFoiIGZpbGw9IiNGRkVDM0UiLz4KPHBhdGggZD0iTTEwOCAwTDExMC42OTQgOC4yOTE4SDExOS40MTNMMTEyLjM1OSAxMy40MTY0TDExNS4wNTMgMjEuNzA4MkwxMDggMTYuNTgzNkwxMDAuOTQ3IDIxLjcwODJMMTAzLjY0MSAxMy40MTY0TDk2LjU4NzMgOC4yOTE4SDEwNS4zMDZMMTA4IDBaIiBmaWxsPSIjRkZFQzNFIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTMxXzIxIj4KPHJlY3Qgd2lkdGg9IjEyMCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K"></img>
                                                        `;
                                                    } else if (review.stars === "4") {
                                                        reviewElement.querySelector("[data-shop-modal-review-star-container]").innerHTML = `
                                                            <img class="shop-modal-review-stars-img" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMTIwIDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMTMxXzMyKSI+CjxwYXRoIGQ9Ik0xMiAwTDE0LjY5NDIgOC4yOTE4SDIzLjQxMjdMMTYuMzU5MyAxMy40MTY0TDE5LjA1MzQgMjEuNzA4MkwxMiAxNi41ODM2TDQuOTQ2NTggMjEuNzA4Mkw3LjY0MDc0IDEzLjQxNjRMMC41ODczMjIgOC4yOTE4SDkuMzA1ODNMMTIgMFoiIGZpbGw9IiNGRkVDM0UiLz4KPHBhdGggZD0iTTM2IDBMMzguNjk0MiA4LjI5MThINDcuNDEyN0w0MC4zNTkzIDEzLjQxNjRMNDMuMDUzNCAyMS43MDgyTDM2IDE2LjU4MzZMMjguOTQ2NiAyMS43MDgyTDMxLjY0MDcgMTMuNDE2NEwyNC41ODczIDguMjkxOEgzMy4zMDU4TDM2IDBaIiBmaWxsPSIjRkZFQzNFIi8+CjxwYXRoIGQ9Ik02MCAwTDYyLjY5NDIgOC4yOTE4SDcxLjQxMjdMNjQuMzU5MyAxMy40MTY0TDY3LjA1MzQgMjEuNzA4Mkw2MCAxNi41ODM2TDUyLjk0NjYgMjEuNzA4Mkw1NS42NDA3IDEzLjQxNjRMNDguNTg3MyA4LjI5MThINTcuMzA1OEw2MCAwWiIgZmlsbD0iI0ZGRUMzRSIvPgo8cGF0aCBkPSJNODQgMEw4Ni42OTQyIDguMjkxOEg5NS40MTI3TDg4LjM1OTMgMTMuNDE2NEw5MS4wNTM0IDIxLjcwODJMODQgMTYuNTgzNkw3Ni45NDY2IDIxLjcwODJMNzkuNjQwNyAxMy40MTY0TDcyLjU4NzMgOC4yOTE4SDgxLjMwNThMODQgMFoiIGZpbGw9IiNGRkVDM0UiLz4KPHBhdGggZD0iTTEwOCAwTDExMC42OTQgOC4yOTE4SDExOS40MTNMMTEyLjM1OSAxMy40MTY0TDExNS4wNTMgMjEuNzA4MkwxMDggMTYuNTgzNkwxMDAuOTQ3IDIxLjcwODJMMTAzLjY0MSAxMy40MTY0TDk2LjU4NzMgOC4yOTE4SDEwNS4zMDZMMTA4IDBaIiBmaWxsPSIjNTc1NzU3Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTMxXzMyIj4KPHJlY3Qgd2lkdGg9IjEyMCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K"></img>
                                                        `;
                                                    } else if (review.stars === "3") {
                                                        reviewElement.querySelector("[data-shop-modal-review-star-container]").innerHTML = `
                                                            <img class="shop-modal-review-stars-img" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMTIwIDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMTMxXzM5KSI+CjxwYXRoIGQ9Ik0xMiAwTDE0LjY5NDIgOC4yOTE4SDIzLjQxMjdMMTYuMzU5MyAxMy40MTY0TDE5LjA1MzQgMjEuNzA4MkwxMiAxNi41ODM2TDQuOTQ2NTggMjEuNzA4Mkw3LjY0MDc0IDEzLjQxNjRMMC41ODczMjIgOC4yOTE4SDkuMzA1ODNMMTIgMFoiIGZpbGw9IiNGRkVDM0UiLz4KPHBhdGggZD0iTTM2IDBMMzguNjk0MiA4LjI5MThINDcuNDEyN0w0MC4zNTkzIDEzLjQxNjRMNDMuMDUzNCAyMS43MDgyTDM2IDE2LjU4MzZMMjguOTQ2NiAyMS43MDgyTDMxLjY0MDcgMTMuNDE2NEwyNC41ODczIDguMjkxOEgzMy4zMDU4TDM2IDBaIiBmaWxsPSIjRkZFQzNFIi8+CjxwYXRoIGQ9Ik02MCAwTDYyLjY5NDIgOC4yOTE4SDcxLjQxMjdMNjQuMzU5MyAxMy40MTY0TDY3LjA1MzQgMjEuNzA4Mkw2MCAxNi41ODM2TDUyLjk0NjYgMjEuNzA4Mkw1NS42NDA3IDEzLjQxNjRMNDguNTg3MyA4LjI5MThINTcuMzA1OEw2MCAwWiIgZmlsbD0iI0ZGRUMzRSIvPgo8cGF0aCBkPSJNODQgMEw4Ni42OTQyIDguMjkxOEg5NS40MTI3TDg4LjM1OTMgMTMuNDE2NEw5MS4wNTM0IDIxLjcwODJMODQgMTYuNTgzNkw3Ni45NDY2IDIxLjcwODJMNzkuNjQwNyAxMy40MTY0TDcyLjU4NzMgOC4yOTE4SDgxLjMwNThMODQgMFoiIGZpbGw9IiM1NzU3NTciLz4KPHBhdGggZD0iTTEwOCAwTDExMC42OTQgOC4yOTE4SDExOS40MTNMMTEyLjM1OSAxMy40MTY0TDExNS4wNTMgMjEuNzA4MkwxMDggMTYuNTgzNkwxMDAuOTQ3IDIxLjcwODJMMTAzLjY0MSAxMy40MTY0TDk2LjU4NzMgOC4yOTE4SDEwNS4zMDZMMTA4IDBaIiBmaWxsPSIjNTc1NzU3Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTMxXzM5Ij4KPHJlY3Qgd2lkdGg9IjEyMCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K"></img>
                                                        `;
                                                    } else if (review.stars === "2") {
                                                        reviewElement.querySelector("[data-shop-modal-review-star-container]").innerHTML = `
                                                            <img class="shop-modal-review-stars-img" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMTIwIDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMTMxXzQ2KSI+CjxwYXRoIGQ9Ik0xMiAwTDE0LjY5NDIgOC4yOTE4SDIzLjQxMjdMMTYuMzU5MyAxMy40MTY0TDE5LjA1MzQgMjEuNzA4MkwxMiAxNi41ODM2TDQuOTQ2NTggMjEuNzA4Mkw3LjY0MDc0IDEzLjQxNjRMMC41ODczMjIgOC4yOTE4SDkuMzA1ODNMMTIgMFoiIGZpbGw9IiNGRkVDM0UiLz4KPHBhdGggZD0iTTM2IDBMMzguNjk0MiA4LjI5MThINDcuNDEyN0w0MC4zNTkzIDEzLjQxNjRMNDMuMDUzNCAyMS43MDgyTDM2IDE2LjU4MzZMMjguOTQ2NiAyMS43MDgyTDMxLjY0MDcgMTMuNDE2NEwyNC41ODczIDguMjkxOEgzMy4zMDU4TDM2IDBaIiBmaWxsPSIjRkZFQzNFIi8+CjxwYXRoIGQ9Ik02MCAwTDYyLjY5NDIgOC4yOTE4SDcxLjQxMjdMNjQuMzU5MyAxMy40MTY0TDY3LjA1MzQgMjEuNzA4Mkw2MCAxNi41ODM2TDUyLjk0NjYgMjEuNzA4Mkw1NS42NDA3IDEzLjQxNjRMNDguNTg3MyA4LjI5MThINTcuMzA1OEw2MCAwWiIgZmlsbD0iIzU3NTc1NyIvPgo8cGF0aCBkPSJNODQgMEw4Ni42OTQyIDguMjkxOEg5NS40MTI3TDg4LjM1OTMgMTMuNDE2NEw5MS4wNTM0IDIxLjcwODJMODQgMTYuNTgzNkw3Ni45NDY2IDIxLjcwODJMNzkuNjQwNyAxMy40MTY0TDcyLjU4NzMgOC4yOTE4SDgxLjMwNThMODQgMFoiIGZpbGw9IiM1NzU3NTciLz4KPHBhdGggZD0iTTEwOCAwTDExMC42OTQgOC4yOTE4SDExOS40MTNMMTEyLjM1OSAxMy40MTY0TDExNS4wNTMgMjEuNzA4MkwxMDggMTYuNTgzNkwxMDAuOTQ3IDIxLjcwODJMMTAzLjY0MSAxMy40MTY0TDk2LjU4NzMgOC4yOTE4SDEwNS4zMDZMMTA4IDBaIiBmaWxsPSIjNTc1NzU3Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTMxXzQ2Ij4KPHJlY3Qgd2lkdGg9IjEyMCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K"></img>
                                                        `;
                                                    } else if (review.stars === "1") {
                                                        reviewElement.querySelector("[data-shop-modal-review-star-container]").innerHTML = `
                                                            <img class="shop-modal-review-stars-img" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMTIwIDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMTMxXzUzKSI+CjxwYXRoIGQ9Ik0xMiAwTDE0LjY5NDIgOC4yOTE4SDIzLjQxMjdMMTYuMzU5MyAxMy40MTY0TDE5LjA1MzQgMjEuNzA4MkwxMiAxNi41ODM2TDQuOTQ2NTggMjEuNzA4Mkw3LjY0MDc0IDEzLjQxNjRMMC41ODczMjIgOC4yOTE4SDkuMzA1ODNMMTIgMFoiIGZpbGw9IiNGRkVDM0UiLz4KPHBhdGggZD0iTTM2IDBMMzguNjk0MiA4LjI5MThINDcuNDEyN0w0MC4zNTkzIDEzLjQxNjRMNDMuMDUzNCAyMS43MDgyTDM2IDE2LjU4MzZMMjguOTQ2NiAyMS43MDgyTDMxLjY0MDcgMTMuNDE2NEwyNC41ODczIDguMjkxOEgzMy4zMDU4TDM2IDBaIiBmaWxsPSIjNTc1NzU3Ii8+CjxwYXRoIGQ9Ik02MCAwTDYyLjY5NDIgOC4yOTE4SDcxLjQxMjdMNjQuMzU5MyAxMy40MTY0TDY3LjA1MzQgMjEuNzA4Mkw2MCAxNi41ODM2TDUyLjk0NjYgMjEuNzA4Mkw1NS42NDA3IDEzLjQxNjRMNDguNTg3MyA4LjI5MThINTcuMzA1OEw2MCAwWiIgZmlsbD0iIzU3NTc1NyIvPgo8cGF0aCBkPSJNODQgMEw4Ni42OTQyIDguMjkxOEg5NS40MTI3TDg4LjM1OTMgMTMuNDE2NEw5MS4wNTM0IDIxLjcwODJMODQgMTYuNTgzNkw3Ni45NDY2IDIxLjcwODJMNzkuNjQwNyAxMy40MTY0TDcyLjU4NzMgOC4yOTE4SDgxLjMwNThMODQgMFoiIGZpbGw9IiM1NzU3NTciLz4KPHBhdGggZD0iTTEwOCAwTDExMC42OTQgOC4yOTE4SDExOS40MTNMMTEyLjM1OSAxMy40MTY0TDExNS4wNTMgMjEuNzA4MkwxMDggMTYuNTgzNkwxMDAuOTQ3IDIxLjcwODJMMTAzLjY0MSAxMy40MTY0TDk2LjU4NzMgOC4yOTE4SDEwNS4zMDZMMTA4IDBaIiBmaWxsPSIjNTc1NzU3Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTMxXzUzIj4KPHJlY3Qgd2lkdGg9IjEyMCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K"></img>
                                                        `;
                                                    } else if (review.stars === "0") {
                                                        reviewElement.querySelector("[data-shop-modal-review-star-container]").innerHTML = `
                                                            <img class="shop-modal-review-stars-img" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMTIwIDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMTMyXzYwKSI+CjxwYXRoIGQ9Ik0xMiAwTDE0LjY5NDIgOC4yOTE4SDIzLjQxMjdMMTYuMzU5MyAxMy40MTY0TDE5LjA1MzQgMjEuNzA4MkwxMiAxNi41ODM2TDQuOTQ2NTggMjEuNzA4Mkw3LjY0MDc0IDEzLjQxNjRMMC41ODczMjIgOC4yOTE4SDkuMzA1ODNMMTIgMFoiIGZpbGw9IiM1NzU3NTciLz4KPHBhdGggZD0iTTM2IDBMMzguNjk0MiA4LjI5MThINDcuNDEyN0w0MC4zNTkzIDEzLjQxNjRMNDMuMDUzNCAyMS43MDgyTDM2IDE2LjU4MzZMMjguOTQ2NiAyMS43MDgyTDMxLjY0MDcgMTMuNDE2NEwyNC41ODczIDguMjkxOEgzMy4zMDU4TDM2IDBaIiBmaWxsPSIjNTc1NzU3Ii8+CjxwYXRoIGQ9Ik02MCAwTDYyLjY5NDIgOC4yOTE4SDcxLjQxMjdMNjQuMzU5MyAxMy40MTY0TDY3LjA1MzQgMjEuNzA4Mkw2MCAxNi41ODM2TDUyLjk0NjYgMjEuNzA4Mkw1NS42NDA3IDEzLjQxNjRMNDguNTg3MyA4LjI5MThINTcuMzA1OEw2MCAwWiIgZmlsbD0iIzU3NTc1NyIvPgo8cGF0aCBkPSJNODQgMEw4Ni42OTQyIDguMjkxOEg5NS40MTI3TDg4LjM1OTMgMTMuNDE2NEw5MS4wNTM0IDIxLjcwODJMODQgMTYuNTgzNkw3Ni45NDY2IDIxLjcwODJMNzkuNjQwNyAxMy40MTY0TDcyLjU4NzMgOC4yOTE4SDgxLjMwNThMODQgMFoiIGZpbGw9IiM1NzU3NTciLz4KPHBhdGggZD0iTTEwOCAwTDExMC42OTQgOC4yOTE4SDExOS40MTNMMTEyLjM1OSAxMy40MTY0TDExNS4wNTMgMjEuNzA4MkwxMDggMTYuNTgzNkwxMDAuOTQ3IDIxLjcwODJMMTAzLjY0MSAxMy40MTY0TDk2LjU4NzMgOC4yOTE4SDEwNS4zMDZMMTA4IDBaIiBmaWxsPSIjNTc1NzU3Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTMyXzYwIj4KPHJlY3Qgd2lkdGg9IjEyMCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K"></img>
                                                        `;
                                                    }
        
                                                    reviewContainer.appendChild(reviewElement);
                                                });
                                            }
                                        }

                                        const asset_container = modal.querySelector("[data-shop-category-modal-assets-container]");

                                        if (apiCategory.banner != null) {
                                            let banner_asset = document.createElement("div");

                                            banner_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_BANNER")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.banner}</p>
                                                <img class="category-modalv2-inner-img-banner" src="https://cdn.yapper.shop/assets/${apiCategory.banner}.png"></img> 
                                            `;

                                            asset_container.appendChild(banner_asset);
                                        }

                                        if (apiCategory.banner_asset && apiCategory.banner_asset.static != null) {
                                            let banner_asset = document.createElement("div");

                                            banner_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_BANNER_ASSET_1")}</p>
                                                <img class="category-modalv2-inner-img-banner" src="${apiCategory.banner_asset.static}"></img> 
                                            `;

                                            asset_container.appendChild(banner_asset);
                                        }

                                        if (apiCategory.banner_asset && apiCategory.banner_asset.animated != null) {
                                            let banner_asset = document.createElement("div");

                                            banner_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_BANNER_ASSET_2")}</p>
                                                <video autoplay muted class="category-modalv2-inner-img-banner" src="${apiCategory.banner_asset.animated}" loop></video> 
                                            `;

                                            asset_container.appendChild(banner_asset);
                                        }

                                        if (apiCategory.logo != null) {
                                            let logo_asset = document.createElement("div");

                                            logo_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_LOGO")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.logo}</p>
                                                <img class="category-modalv2-inner-img-logo" src="https://cdn.yapper.shop/assets/${apiCategory.logo}.png"></img> 
                                            `;

                                            asset_container.appendChild(logo_asset);
                                        }

                                        if (apiCategory.mobile_bg != null) {
                                            let mobile_bg_asset = document.createElement("div");

                                            mobile_bg_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_MOBILE_BG")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.mobile_bg}</p>
                                                <img class="category-modalv2-inner-img-mobile_bg" src="https://cdn.yapper.shop/assets/${apiCategory.mobile_bg}.png"></img> 
                                            `;

                                            asset_container.appendChild(mobile_bg_asset);
                                        }

                                        if (apiCategory.pdp_bg != null) {
                                            let pdp_bg_asset = document.createElement("div");

                                            pdp_bg_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_PDP_BG")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.pdp_bg}</p>
                                                <img class="category-modalv2-inner-img-pdp_bg" src="https://cdn.yapper.shop/assets/${apiCategory.pdp_bg}.png"></img> 
                                            `;

                                            asset_container.appendChild(pdp_bg_asset);
                                        }

                                        if (apiCategory.success_modal_bg != null) {
                                            let success_modal_bg_asset = document.createElement("div");

                                            success_modal_bg_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_SUCCESS_MODAL_BG")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.success_modal_bg}</p>
                                                <img class="category-modalv2-inner-img-success_modal_bg" src="https://cdn.yapper.shop/assets/${apiCategory.success_modal_bg}.png"></img> 
                                            `;

                                            asset_container.appendChild(success_modal_bg_asset);
                                        }

                                        if (apiCategory.mobile_banner != null) {
                                            let mobile_banner_asset = document.createElement("div");

                                            mobile_banner_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_MOBILE_BANNER")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.mobile_banner}</p>
                                                <img class="category-modalv2-inner-img-mobile_banner" src="https://cdn.yapper.shop/assets/${apiCategory.mobile_banner}.png"></img> 
                                            `;

                                            asset_container.appendChild(mobile_banner_asset);
                                        }

                                        if (apiCategory.featured_block != null) {
                                            let featured_block_asset = document.createElement("div");

                                            featured_block_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_FEATURED_BLOCK")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.featured_block}</p>
                                                <img class="category-modalv2-inner-img-featured_block" src="https://cdn.yapper.shop/assets/${apiCategory.featured_block}.png"></img> 
                                            `;

                                            asset_container.appendChild(featured_block_asset);
                                        }

                                        if (apiCategory.hero_banner != null) {
                                            let hero_banner_asset = document.createElement("div");

                                            hero_banner_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_HERO_BANNER")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.hero_banner}</p>
                                                <img class="category-modalv2-inner-img-hero_banner" src="https://cdn.yapper.shop/assets/${apiCategory.hero_banner}.png"></img> 
                                            `;

                                            asset_container.appendChild(hero_banner_asset);
                                        }

                                        if (apiCategory.hero_banner_asset && apiCategory.hero_banner_asset.static != null) {
                                            let hero_banner_asset = document.createElement("div");

                                            hero_banner_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_HERO_BANNER_ASSET_1")}</p>
                                                <img class="category-modalv2-inner-img-banner" src="${apiCategory.hero_banner_asset.static}"></img> 
                                            `;

                                            asset_container.appendChild(hero_banner_asset);
                                        }

                                        if (apiCategory.hero_banner_asset && apiCategory.hero_banner_asset.animated != null) {
                                            let hero_banner_asset = document.createElement("div");

                                            hero_banner_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_HERO_BANNER_ASSET_2")}</p>
                                                <video autoplay muted class="category-modalv2-inner-img-banner" src="${apiCategory.hero_banner_asset.animated}" loop></video> 
                                            `;

                                            asset_container.appendChild(hero_banner_asset);
                                        }

                                        if (apiCategory.wide_banner != null) {
                                            let wide_banner_asset = document.createElement("div");

                                            wide_banner_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_WIDE_BANNER")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.wide_banner}</p>
                                                <img class="category-modalv2-inner-img-wide_banner" src="https://cdn.yapper.shop/assets/${apiCategory.wide_banner}.png"></img> 
                                            `;

                                            asset_container.appendChild(wide_banner_asset);
                                        }

                                        if (apiCategory.hero_logo != null) {
                                            let hero_logo_asset = document.createElement("div");

                                            hero_logo_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_HERO_LOGO")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.hero_logo}</p>
                                                <img class="category-modalv2-inner-img-hero_logo" src="https://cdn.yapper.shop/assets/${apiCategory.hero_logo}.png"></img> 
                                            `;

                                            asset_container.appendChild(hero_logo_asset);
                                        }

                                        if (apiCategory.category_bg != null) {
                                            let category_bg_asset = document.createElement("div");

                                            category_bg_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_CATEGORY_BG")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.category_bg}</p>
                                                <img class="category-modalv2-inner-img-category_bg" src="https://cdn.yapper.shop/assets/${apiCategory.category_bg}.png"></img> 
                                            `;

                                            asset_container.appendChild(category_bg_asset);
                                        }

                                        if (apiCategory.condensed_banner_left != null) {
                                            let condensed_banner_left_asset = document.createElement("div");

                                            condensed_banner_left_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_CONDENSED_BANNER_LEFT")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.condensed_banner_left}</p>
                                                <img class="category-modalv2-inner-img-condensed_banner_left" src="https://cdn.yapper.shop/assets/${apiCategory.condensed_banner_left}.png"></img> 
                                            `;

                                            asset_container.appendChild(condensed_banner_left_asset);
                                        }

                                        if (apiCategory.condensed_banner_right != null) {
                                            let condensed_banner_right_asset = document.createElement("div");

                                            condensed_banner_right_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_CONDENSED_BANNER_RIGHT")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.condensed_banner_right}</p>
                                                <img class="category-modalv2-inner-img-condensed_banner_right" src="https://cdn.yapper.shop/assets/${apiCategory.condensed_banner_right}.png"></img> 
                                            `;

                                            asset_container.appendChild(condensed_banner_right_asset);
                                        }

                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${apiCategory.sku_id}`;
                                        modal.querySelector("[data-product-modal-name]").textContent = apiCategory.name;
                                        modal.querySelector("[data-product-modal-summary]").textContent = apiCategory.summary;

                                        document.body.appendChild(modal);

                                        setTimeout(() => {
                                            modal.classList.add('show');
                                        }, 1);

                                        
                                        if (localStorage.experiment_2025_02_shop_category_modals === "Treatment 2: Enable category modals w/ data downloads") {
                                            modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${apiCategory.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                            `;
                                        }

                                        modal.querySelector("[data-share-product-card-button]").style.display = 'none';
                                        


                                        let modal_back = document.createElement("div");

                                        modal_back.classList.add('modalv2-back');
                                        modal_back.id = 'modalv2-back';

                                        document.body.appendChild(modal_back);

                                        setTimeout(() => {
                                            modal_back.classList.add('show');
                                        }, 1);


                                        modal.addEventListener('click', (event) => {
                                            if (event.target === modal) {
                                                modal.classList.remove('show');
                                                modal_back.classList.remove('show');
                                                setTimeout(() => {
                                                    modal.remove();
                                                    modal_back.remove();
                                                }, 300);
                                            }
                                        });

                                        document.querySelector("[data-close-product-card-button]").addEventListener('click', () => {
                                            modal.classList.remove('show');
                                            modal_back.classList.remove('show');
                                            setTimeout(() => {
                                                modal.remove();
                                                modal_back.remove();
                                            }, 300);
                                        });
                                    }
                                }


                                const cardOutput = category.querySelector("[data-shop-category-card-holder]");
                                if (cardOutput) {
                                    for (const product of apiCategory.products) {
                                    const cardTemplate = document.querySelector("[data-shop-item-card-template]");
                                    const card = cardTemplate.content.cloneNode(true).children[0];

                                    if (product.type === NONE) {
                                        card.classList.add("type_100");
                                        card.classList.add('hidden')
                                    } else if (product.type === AVATAR_DECORATION) {
                                        product.items.forEach(item => {
                                            
                                            card.classList.add("type_0");
                                            // Set the innerHTML for the preview holder
                                            const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                            previewHolder.classList.add('avatar-decoration-image');
                                            
                                            // Set the initial image for the deco card
                                            const imgElement = document.createElement("img");
                                            imgElement.id = "shop-card-deco-image";
                                            imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                            
                                            previewHolder.appendChild(imgElement);

                                            const bgimg = document.createElement("div");
                                            bgimg.id = "shop-card-deco-bg-image";
                                            
                                            previewHolder.appendChild(bgimg);
                                    
                                            // Set the product details
                                            if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                            } else {
                                                card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                            }
                                            card.querySelector("[data-product-card-name]").textContent = product.name;
                                            card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                    
                                            // Hover effect: Change the image src on mouse enter and leave
                                            if (localStorage.reduced_motion != "true") {
                                                card.addEventListener("mouseenter", () => {
                                                    imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                    if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                        bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                    }
                                                });
                                        
                                                card.addEventListener("mouseleave", () => {
                                                    imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                    bgimg.style.backgroundImage = `url(data:image/png;base64,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)`;
                                                });
                                            }
                                            
                                        });
                                    } else if (product.type === PROFILE_EFFECT) {
                                        card.classList.add("type_1");

                                        if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                            card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                        } else {
                                            card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                        }
                                        card.querySelector("[data-product-card-name]").textContent = product.name;
                                        card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                        
                                        // Ensure the item ID is accessible here
                                        let itemId = undefined;
                                        if (Array.isArray(product.items)) {
                                            // If items is an array, find the item with type 1 and get its id
                                            const item = product.items.find(item => item.type === 1);
                                            if (item) {
                                                itemId = item.id;
                                            }
                                        } else if (product.items && product.items.type === 1) {
                                            // If items is an object and has type 1, get its id
                                            itemId = product.items.id;
                                        }
                                    
                                    
                                        // Fetch profile effects API only if not already cached
                                        if (!profileEffectsCache) {
                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                method: "GET",
                                                headers: {
                                                    "Password": api_password,
                                                    "Token": api_token
                                                }
                                            });
                                            const effectsData = await response.json();
                                            profileEffectsCache = effectsData.profile_effect_configs;
                                        }
                                    
                                        // Find matching profile effect
                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                    
                                        if (matchingEffect) {
                                            const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                            previewHolder.classList.add('profile-effect-image');
                                    
                                            previewHolder.innerHTML = `
                                                <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                            `;
                                    
                                            // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                            const imgElement = card.querySelector("img");
                                    
                                            if (localStorage.reduced_motion != "true") {
                                                card.addEventListener("mouseenter", () => {
                                                    if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                        const effectUrl = matchingEffect.effects[0]?.src;
                                                        imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                    }
                                                });
                                        
                                                card.addEventListener("mouseleave", () => {
                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                });
                                            } else {
                                                card.addEventListener("mouseenter", () => {
                                                    imgElement.src = matchingEffect.reducedMotionSrc;
                                                });
                                        
                                                card.addEventListener("mouseleave", () => {
                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                });
                                            }
                                        }
                                    } else if (product.type === NAMEPLATE) {
                                        card.classList.add("type_2");

                                        if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                            card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                        } else {
                                            card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                        }
                                        card.querySelector("[data-product-card-name]").textContent = product.name;
                                        card.querySelector("[data-product-card-summary]").textContent = product.summary;

                                        const previewHolder = card.querySelector("[data-shop-card-preview-holder]");

                                        if (localStorage.discord_username && localStorage.discord_username != '') {
                                            previewName = localStorage.discord_username;
                                        } else {
                                            previewName = 'Discord User'
                                        }

                                        previewHolder.innerHTML = `
                                            <div class="nameplate-null-user">
                                                <div class="nameplate-null-user-avatar"></div>
                                                <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                            </div>
                                            <div class="nameplate-null-user">
                                                <div class="nameplate-null-user-avatar"></div>
                                                <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                            </div>
                                            <div class="nameplate-null-user" data-user-nameplate-preview>
                                                <video muted loop class="nameplate-null-user" style="position: absolute;" data-user-nameplate-preview-img></video>
                                                <div class="nameplate-user-avatar" data-nameplate-user-random-avatar></div>
                                                <p class="nameplate-user-name">${previewName}</p>
                                            </div>
                                            <div class="nameplate-null-user">
                                                <div class="nameplate-null-user-avatar"></div>
                                                <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                            </div>
                                            <div class="nameplate-null-user">
                                                <div class="nameplate-null-user-avatar"></div>
                                                <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                            </div>
                                        `;

                                        product.items.forEach(item => {
                                            const nameplatePreview = previewHolder.querySelector("[data-user-nameplate-preview]");
                                            const paletteName = item.palette;
                                            const asset = `https://cdn.discordapp.com/assets/collectibles/${item.asset}asset.webm`;
                                            const bgcolor = nameplate_palettes[paletteName].darkBackground;

                                            const videoElement = previewHolder.querySelector("[data-user-nameplate-preview-img]");

                                            videoElement.src = asset;

                                            nameplatePreview.style.backgroundImage = `linear-gradient(10deg, #00000000 40%, ${bgcolor} 180%), linear-gradient(170deg, #00000000 40%, ${bgcolor} 180%)`;
                                            // nameplatePreview.style.boxShadow = `0 0 0 1px #a10606`;
                                            
                                            const nullUserNameRandomWidth = previewHolder.querySelectorAll("[data-null-user-random-name]");
                                            
                                            nullUserNameRandomWidth.forEach(UserName => {
                                                const randomWidth = Math.floor(Math.random() * (180 - 80 + 1)) + 80;
                                                UserName.style.width = randomWidth + `px`;
                                            });
                                        
                                            const nullUserAvatar = previewHolder.querySelectorAll("[data-nameplate-user-random-avatar]");
                                        
                                            nullUserAvatar.forEach(UserAvatar => {
                                                UserAvatar.style.backgroundImage = `url(${localStorage.discord_avatar})`;
                                            });

                                            if (localStorage.reduced_motion != "true") {
                                                card.addEventListener("mouseenter", () => {
                                                    videoElement.play();
                                                });
                                                card.addEventListener("mouseleave", () => {
                                                    videoElement.pause();
                                                });
                                            }
                                        });
                                        
                                    } else if (product.type === BUNDLE) {
                                        card.classList.add("type_1000");
                                        // Fetch the bundled products for the bundle summary
                                        const bundledProducts = product.bundled_products || [];
                                    
                                        // Generate the bundle summary from the names of the bundled products
                                        const type0Product = bundledProducts.find(item => item.type === 0);
                                        const type1Product = bundledProducts.find(item => item.type === 1);
                                    
                                        let bundleSummary = `${getTextString("CARD_TYPE_BUNDLE_TITLE")}`;
                                        if (type0Product) {
                                            bundleSummary += `${type0Product.name}${getTextString("CARD_TYPE_BUNDLE_TITLE_DECO")}`;
                                        }
                                        if (type1Product) {
                                            bundleSummary += `${type1Product.name}${getTextString("CARD_TYPE_BUNDLE_TITLE_EFFECT")}`;
                                        }
                                    
                                        // Set the summary text
                                        card.querySelector("[data-product-card-summary]").textContent = bundleSummary;
                                    
                                        // Set the basic card details
                                        if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                            card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                        } else {
                                            card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                        }
                                        card.querySelector("[data-product-card-name]").textContent = product.name;
                                    
                                        // Handle each item in the bundle
                                        product.items.forEach(item => {
                                            if (item.type === 0) {
                                                // Avatar decoration
                                                const decoImage = document.createElement("img");
                                                decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                decoImage.alt = "Avatar Decoration";
                                                decoImage.classList.add("avatar-decoration-image");
                                                card.querySelector("[data-shop-card-preview-holder]").appendChild(decoImage);

                                                const bgimg = document.createElement("div");
                                                bgimg.classList.add("avatar-decoration-bg-image");
                                                
                                                card.querySelector("[data-shop-card-preview-holder]").appendChild(bgimg);
                                    
                                                // Hover effect for decoration image
                                                if (localStorage.reduced_motion != "true") {
                                                    card.addEventListener("mouseenter", () => {
                                                        decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                        if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                            bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                        }
                                                    });
                                                    card.addEventListener("mouseleave", () => {
                                                        decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                        bgimg.style.backgroundImage = `url(data:image/png;base64,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)`;
                                                    });
                                                }
                                            } else if (item.type === 1) {
                                                // Profile effect
                                                (async () => {
                                                    // Fetch profile effects if not cached
                                                    if (!profileEffectsCache) {
                                                        const response = await fetch(api + PROFILE_EFFECTS, {
                                                            method: "GET",
                                                            headers: {
                                                                "Password": api_password,
                                                                "Token": api_token
                                                            }
                                                        });
                                                        const effectsData = await response.json();
                                                        profileEffectsCache = effectsData.profile_effect_configs;
                                                    }
                                    
                                                    // Find the matching effect
                                                    const matchingEffect = profileEffectsCache.find(effect => effect.id === item.id);
                                    
                                                    if (matchingEffect) {
                                                        const effectImage = document.createElement("img");
                                                        effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                        effectImage.alt = "Profile Effect";
                                                        effectImage.classList.add("profile-effect-image");
                                                        card.querySelector("[data-shop-card-preview-holder]").appendChild(effectImage);
                                    
                                                        // Hover effect for profile effect
                                                        if (localStorage.reduced_motion != "true") {
                                                            card.addEventListener("mouseenter", () => {
                                                                if (matchingEffect.effects && matchingEffect.effects[0] && matchingEffect.effects[0].src) {
                                                                    effectImage.src = matchingEffect.effects[0].src;
                                                                }
                                                            });
                                                            card.addEventListener("mouseleave", () => {
                                                                effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                            });
                                                        } else {
                                                            card.addEventListener("mouseenter", () => {
                                                                effectImage.src = matchingEffect.reducedMotionSrc;
                                                            });
                                                            card.addEventListener("mouseleave", () => {
                                                                effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                            });
                                                        }
                                                    }
                                                })();
                                            }
                                        });
                                    } else if (product.type === VARIANTS_GROUP) {
                                        // Update SKU and summary
                                        if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                            card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                        } else {
                                            card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                        }
                                        card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                    
                                        // Always display the base variant name
                                        card.querySelector("[data-product-card-name]").textContent = product.variants[0]?.base_variant_name || "Product";
                                    
                                        // Render variant color blocks as interactive divs
                                        const variantContainer = card.querySelector("[data-shop-card-var-container]");
                                        variantContainer.innerHTML = ""; // Clear existing variant blocks
                                        let currentSelectedVariant = null; // Track selected variant
                                    
                                        product.variants.forEach((variant, index) => {
                                            // Create variant color block
                                            const variantColorBlockTmp = document.querySelector("[data-shop-varcolorblock-template]");
                                            const variantColorBlock = variantColorBlockTmp.content.cloneNode(true).children[0];
                                            variantColorBlock.classList.add("shop-card-var");
                                            variantColorBlock.id = "shop-card-var";
                                            variantColorBlock.style.backgroundColor = `${variant.variant_value}`;
                                    
                                            // Add click event listener to switch variants
                                            variantColorBlock.addEventListener("click", () => {
                                                if (currentSelectedVariant) {
                                                    currentSelectedVariant.classList.remove("shop-card-var-selected");
                                                }
                                                variantColorBlock.classList.add("shop-card-var-selected");
                                                currentSelectedVariant = variantColorBlock;
                                                applyVariant(variant);
                                            });
                                    
                                            // Append the color block to the container
                                            variantContainer.appendChild(variantColorBlock);
                                    
                                            // Set the first variant as the default selected
                                            if (index === 0) {
                                                currentSelectedVariant = variantColorBlock;
                                                variantColorBlock.classList.add("shop-card-var-selected");
                                            }
                                        });

                                        let isFirstTimeLoadingVariant = true;
                                        const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                    
                                        // Function to apply the selected variant
                                        function applyVariant(selectedVariant) {
                                            card.querySelector("[data-shop-card-var-title]").textContent = `(${selectedVariant.variant_label})`;

                                            if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                            } else {
                                                card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${selectedVariant.sku_id}`;
                                            }

                                            if (localStorage.experiment_2025_02_shop_card_modals != "Treatment 1: Enable modals" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 2: Enable modals w/ data downloads" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 3: Enable modals w/ p+" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 4: Enable modals w/ p+ on p+ page" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 5: Enable modals w/ data downloads and p+" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                card.querySelector("[data-share-product-card-button]").innerHTML = `
                                                    <svg class="shareIcon_f4a996" onclick="copyEmoji('https://canary.discord.com/shop#itemSkuId=${selectedVariant.sku_id}');" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M16.32 14.72a1 1 0 0 1 0-1.41l2.51-2.51a3.98 3.98 0 0 0-5.62-5.63l-2.52 2.51a1 1 0 0 1-1.41-1.41l2.52-2.52a5.98 5.98 0 0 1 8.45 8.46l-2.52 2.51a1 1 0 0 1-1.41 0ZM7.68 9.29a1 1 0 0 1 0 1.41l-2.52 2.51a3.98 3.98 0 1 0 5.63 5.63l2.51-2.52a1 1 0 0 1 1.42 1.42l-2.52 2.51a5.98 5.98 0 0 1-8.45-8.45l2.51-2.51a1 1 0 0 1 1.42 0Z" class=""></path><path fill="currentColor" d="M14.7 10.7a1 1 0 0 0-1.4-1.4l-4 4a1 1 0 1 0 1.4 1.4l4-4Z" class=""></path></svg>
                                                `;
                                            }

                                            if (selectedVariant.type === 0) {
                                                card.classList.add("type_2000-0");
                                                previewHolder.innerHTML = ""; // Clear previous decorations
                                                previewHolder.classList.add('avatar-decoration-image');
                                                
                                                // Add the avatar decoration based on the selected variant
                                                selectedVariant.items?.forEach(item => {
                                                    const decoImage = document.createElement("img");
                                                    const bgimg = document.createElement("div");
                                                    if (isFirstTimeLoadingVariant == true) {
                                                        decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                        isFirstTimeLoadingVariant = false;
                                                    } else {
                                                        decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                        if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                            bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                        }
                                                    }
                                                    decoImage.alt = "Avatar Decoration";
                                                    decoImage.id = "shop-card-deco-image";
                                                    previewHolder.appendChild(decoImage);

                                                    bgimg.id = "shop-card-deco-bg-image";

                                                    previewHolder.appendChild(bgimg);
                                                
                                                    // Hover effect for decoration image
                                                    if (localStorage.reduced_motion !== "true") {
                                                        card.addEventListener("mouseenter", () => {
                                                            decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                            if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                            }
                                                        });
                                                        card.addEventListener("mouseleave", () => {
                                                            decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                            bgimg.style.backgroundImage = `url(data:image/png;base64,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)`;
                                                        });
                                                    }
                                                });
                                            } else if (selectedVariant.type === 1) {
                                                card.classList.add("type_2000-1");
                                                (async () => {
                                                    // Ensure the item ID is accessible here
                                                    let itemId = undefined;
                                                    if (Array.isArray(selectedVariant.items)) {
                                                        // If items is an array, find the item with type 1 and get its id
                                                        const item = selectedVariant.items.find(item => item.type === 1);
                                                        if (item) {
                                                            itemId = item.id;
                                                        }
                                                    } else if (selectedVariant.items && selectedVariant.items.type === 1) {
                                                        // If items is an object and has type 1, get its id
                                                        itemId = selectedVariant.items.id;
                                                    }
                                                
                                                
                                                    // Fetch profile effects API only if not already cached
                                                    if (!profileEffectsCache) {
                                                        const response = await fetch(api + PROFILE_EFFECTS, {
                                                            method: "GET",
                                                            headers: {
                                                                "Password": api_password,
                                                                "Token": api_token
                                                            }
                                                        });
                                                        const effectsData = await response.json();
                                                        profileEffectsCache = effectsData.profile_effect_configs;
                                                    }
                                                
                                                    // Find matching profile effect
                                                    const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                                
                                                    if (matchingEffect) {
                                                        const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                                        previewHolder.classList.add('profile-effect-image');
                                                    
                                                        if (isFirstTimeLoadingVariant == true) {
                                                            previewHolder.innerHTML = `
                                                                <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                            `;
                                                            isFirstTimeLoadingVariant = false;
                                                        } else {
                                                            previewHolder.innerHTML = `
                                                                <img class="thumbnail-preview" src="${matchingEffect.effects[0]?.src}">
                                                            `;
                                                        }
                                                    
                                                        // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                        const imgElement = card.querySelector("img");
                                                    
                                                        if (localStorage.reduced_motion != "true") {
                                                            card.addEventListener("mouseenter", () => {
                                                                if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                    const effectUrl = matchingEffect.effects[0]?.src;
                                                                    imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                }
                                                            });
                                                        
                                                            card.addEventListener("mouseleave", () => {
                                                                // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                            });
                                                        } else {
                                                            card.addEventListener("mouseenter", () => {
                                                                imgElement.src = matchingEffect.reducedMotionSrc;
                                                            });
                                                        
                                                            card.addEventListener("mouseleave", () => {
                                                                // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                            });
                                                        }
                                                    }
                                                })();
                                            }
                                        }
                                    
                                        // Apply the default variant (first one) initially
                                        if (product.variants.length > 0) {
                                            applyVariant(product.variants[0]);
                                        }
                                    } else if (product.type === EXTERNAL_SKU) {
                                        card.classList.add("type_3000");

                                        if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                            card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                        } else {
                                            card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                        }
                                        card.querySelector("[data-product-card-name]").textContent = product.name;
                                        card.querySelector("[data-product-card-summary]").textContent = product.summary;

                                        const previewHolder = card.querySelector("[data-shop-card-preview-holder]");

                                        if (product.sku_id === "1342211853484429445") {
                                            previewHolder.classList.add('potion-card-preview-holder');
                                                
                                            previewHolder.innerHTML = `
                                                <svg class="potion-card-preview profile-badge-orb-preview" width="187" height="187" viewBox="0 0 187 187" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <g clip-path="url(#clip0_136_3)">
                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M93.2014 34.4915L41.7391 64.2032V123.627L93.2014 153.338L144.664 123.627V64.2032L93.2014 34.4915ZM173.024 47.8295L93.2014 1.7439L13.3789 47.8295V140L93.2014 186.086L173.024 140V47.8295Z" fill="white"/>
                                                <path d="M106.759 80.3577L98.3727 57.9977C96.5807 53.2198 89.8225 53.2198 88.0305 57.9977L79.6447 80.3577L57.2847 88.7437C52.5067 90.5355 52.5067 97.2939 57.2847 99.0857L79.6447 107.472L88.0305 129.832C89.8225 134.61 96.5807 134.61 98.3727 129.832L106.759 107.472L129.119 99.0857C133.896 97.2939 133.896 90.5355 129.119 88.7437L106.759 80.3577Z" fill="white"/>
                                                </g>
                                                <defs>
                                                <clipPath id="clip0_136_3">
                                                <rect width="160.82" height="187" fill="white" transform="translate(13.0908)"/>
                                                </clipPath>
                                                </defs>
                                                </svg>
                                            `;
                                        } else if (product.sku_id === "1333912750274904064") {
                                            previewHolder.classList.add('potion-card-preview-holder');
                                                
                                            previewHolder.innerHTML = `
                                                <svg class="potion-card-preview nitro-3-days-orb-preview" width="187" height="187" viewBox="0 0 187 187" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                <rect y="16" width="187" height="140" fill="url(#pattern0_136_11)"/>
                                                <defs>
                                                <pattern id="pattern0_136_11" patternContentUnits="objectBoundingBox" width="1" height="1">
                                                <use xlink:href="#image0_136_11" transform="matrix(0.00369004 0 0 0.00492884 0 -0.000276753)"/>
                                                </pattern>
                                                <image id="image0_136_11" width="271" height="203" preserveAspectRatio="none" xlink:href="data:image/png;base64,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"/>
                                                </defs>
                                                </svg>

                                            `;
                                        } else {
                                            previewHolder.innerHTML = `
                                                <p>${getTextString("CARD_TYPE_EXTERNAL_SKU_ERROR")}</p>
                                            `;
                                        }
                                        
                                    } else if (product.type === 'plus_more') {
                                        card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                        card.querySelector("[data-product-card-name]").textContent = `${getTextString("CARD_TYPE_PLUS_MORE_TITLE")}`;
                                        card.querySelector("[data-product-card-summary]").textContent = `${getTextString("CARD_TYPE_PLUS_MORE_DESC")}`;

                                        card.querySelector("[data-shop-price-container]").innerHTML = ``;
                                        card.querySelector("[data-product-card-open-in-shop]").innerHTML = ``;
                                        card.querySelector("[data-share-product-card-button]").innerHTML = ``;

                                        const plusMoreQuestionMark = document.createElement("img");
                                        plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.png`;
                                        plusMoreQuestionMark.classList.add("plus-more-question-mark");
                                        card.querySelector("[data-shop-card-preview-holder]").appendChild(plusMoreQuestionMark);
                            
                                        // Hover effect for decoration image
                                        if (localStorage.reduced_motion != "true") {
                                            card.addEventListener("mouseenter", () => {
                                                plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.gif`;
                                            });
                                            card.addEventListener("mouseleave", () => {
                                                plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.png`;
                                            });
                                        }
                                    } else {
                                        card.classList.add('hidden')
                                    }
                                    
                                    
                                    const priceTextNitro = card.querySelector("[data-price-nitro]");
                                    const priceTextStandard = card.querySelector("[data-price-standard]");

                                    const priceContainerNitro = card.querySelector("[data-price-nitro-container]");
                                    const priceContainerStandard = card.querySelector("[data-price-standard-container]");

                                    const priceContainer = card.querySelector("[data-shop-price-container]");

                                    let priceStandard = "N/A";
                                    let priceNitro = "N/A";
                                    let priceOrb = "N/A";

                                    if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                        if (localStorage.is_nitro_user === "true") {
                                            if (product.prices && product.prices["4"] && product.prices["4"].country_prices && product.prices["4"].country_prices.prices) {
                                                product.prices["4"].country_prices.prices.forEach(price => {
                                                    if (price.currency === "usd") {
                                                        priceStandard = price.amount;
                                                    }
                                                    if (price.currency === "discord_orb") {
                                                        priceOrb = price.amount;
                                                    }
                                                });

                                                if (priceStandard != "N/A" && priceOrb != "N/A") {
                                                    let orb_price = document.createElement("div");
                                            
                                                    orb_price.innerHTML = `
                                                        <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                        <div class="orb-icon" style="margin-left: -25px"></div>
                                                    `;
                                                    orb_price.style.position = `absolute`;
                                                    orb_price.style.right = `0px`;
                                                    
                                                    priceContainer.appendChild(orb_price);

                                                    standardPriceOutput = `US$${(priceStandard / 100).toFixed(2)}`;

                                                    priceContainerStandard.innerHTML = `
                                                        <a style="font-size: large; font-weight: 900; margin-left: 23px">${standardPriceOutput}</a>
                                                        <div class="nitro-icon" style="margin-left: -5px"></div>
                                                    `;

                                                } else if (priceStandard != "N/A") {

                                                    standardPriceOutput = `US$${(priceStandard / 100).toFixed(2)}`;

                                                    priceContainerStandard.innerHTML = `
                                                        <a style="font-size: large; font-weight: 900; margin-left: 23px">${standardPriceOutput}</a>
                                                        <div class="nitro-icon" style="margin-left: -5px"></div>
                                                    `;

                                                } else if (priceOrb != "N/A") {

                                                    let orb_price = document.createElement("div");
                                            
                                                    orb_price.innerHTML = `
                                                        <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                        <div class="orb-icon" style="margin-left: -25px"></div>
                                                    `;
                                                    orb_price.style.position = `absolute`;
                                                    orb_price.style.left = `23px`;
                                                    orb_price.style.bottom = `0px`;
                                                    
                                                    priceContainer.appendChild(orb_price);

                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${getTextString("CARD_ORB_EXCLUSIVE_TAG")}</p>
                                                        </div>
                                                    `;
                                                    
                                                }
                                            }
                                        } else {
                                            if (product.prices && product.prices["0"] && product.prices["0"].country_prices && product.prices["0"].country_prices.prices) {
                                                product.prices["0"].country_prices.prices.forEach(price => {
                                                    if (price.currency === "usd") {
                                                        priceStandard = price.amount;
                                                    }
                                                    if (price.currency === "discord_orb") {
                                                        priceOrb = price.amount;
                                                    }
                                                });

                                                if (priceStandard != "N/A" && priceOrb != "N/A") {
                                                    let orb_price = document.createElement("div");
                                            
                                                    orb_price.innerHTML = `
                                                        <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                        <div class="orb-icon" style="margin-left: -25px"></div>
                                                    `;
                                                    orb_price.style.position = `absolute`;
                                                    orb_price.style.right = `0px`;
                                                    
                                                    priceContainer.appendChild(orb_price);

                                                    priceTextStandard.textContent = `US$${(priceStandard / 100).toFixed(2)}`;

                                                } else if (priceStandard != "N/A") {

                                                    priceTextStandard.textContent = `US$${(priceStandard / 100).toFixed(2)}`;

                                                } else if (priceOrb != "N/A") {

                                                    let orb_price = document.createElement("div");
                                            
                                                    orb_price.innerHTML = `
                                                        <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                        <div class="orb-icon" style="margin-left: -25px"></div>
                                                    `;
                                                    orb_price.style.position = `absolute`;
                                                    orb_price.style.left = `23px`;
                                                    orb_price.style.bottom = `0px`;
                                                    
                                                    priceContainer.appendChild(orb_price);

                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${getTextString("CARD_ORB_EXCLUSIVE_TAG")}</p>
                                                        </div>
                                                    `;
                                                    
                                                }
                                            }
                                        }

                                    } else {
                                        if (product.prices && product.prices["0"] && product.prices["0"].country_prices && product.prices["0"].country_prices.prices) {
                                            product.prices["0"].country_prices.prices.forEach(price => {
                                                if (price.currency === "usd") {
                                                    priceStandard = price.amount;
                                                }
                                            });
                                        }
                                
                                        if (product.prices && product.prices["4"] && product.prices["4"].country_prices && product.prices["4"].country_prices.prices) {
                                            product.prices["4"].country_prices.prices.forEach(price => {
                                                if (price.currency === "usd") {
                                                    priceNitro = price.amount;
                                                }
                                            });
                                        }

                                        if (priceTextStandard) {
                                            priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "null";
                                        }

                                        if (priceTextNitro) {
                                            priceTextNitro.textContent = priceNitro !== "N/A" ? `US$${(priceNitro / 100).toFixed(2)} with Nitro` : "null";
                                        }
                                    }

                                    card.querySelector("[data-product-card-open-in-shop]").innerHTML = `
                                        <button class="card-button" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                    `;

                                    if (product.premium_type === 2) {
                                        card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                            <div class="premiumWheelBadge_c23530 textBadge_df8943 base_df8943 eyebrow_df8943 baseShapeRound_df8943" aria-label="This bonus item is yours to keep and use anytime with an active Nitro subscription." style="background-color: var(--status-danger);"><svg class="premiumWheel_c23530" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M15 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" class=""></path><path fill="currentColor" fill-rule="evenodd" d="M7 4a1 1 0 0 0 0 2h3a1 1 0 1 1 0 2H5.5a1 1 0 0 0 0 2H8a1 1 0 1 1 0 2H6a1 1 0 1 0 0 2h1.25A8 8 0 1 0 15 4H7Zm8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" clip-rule="evenodd" class=""></path><path fill="currentColor" d="M2.5 10a1 1 0 0 0 0-2H2a1 1 0 0 0 0 2h.5Z" class=""></path></svg></div>
                                        `;
                                    }

                                    if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                        if (product.type === AVATAR_DECORATION || product.type === PROFILE_EFFECT || product.type === NAMEPLATE || product.type === BUNDLE || product.type === VARIANTS_GROUP || product.type === EXTERNAL_SKU) {
                                            card.classList.add('clickable');

                                            card.addEventListener("click", (event) => {
                                                if (event.target.matches("[data-shop-card-var]")) {
                                                } else {
                                                    openItemModal();
                                                }
                                            });
                                            

                                            async function openItemModal() {
                                                let modal = document.createElement("div");

                                                modal.classList.add('modalv2');

                                                if (apiCategory.pdp_bg != null) {
                                                    pdp = apiCategory.pdp_bg
                                                } else {
                                                    pdp = apiCategory.banner
                                                }

                                                modal.innerHTML = `
                                                    <div class="modalv2-inner">
                                                        <div class="modalv2-inner-left">
                                                            <div data-modal-left-preview-holder></div>
                                                            <p data-product-modal-sku-id></p>
                                                            <p style="font-size: large; font-weight: 900;" data-product-modal-name></p>
                                                            <p style="color: var(--8)" data-product-modal-summary></p>
                                                            <div class="shop-modal-var-container-container" data-shop-modal-var-container-container>
                                                                <div class="shop-modal-var-container" data-shop-modal-var-container></div>
                                                                <a class="shop-modal-var-title" data-shop-modal-var-title></a>
                                                            </div>
                                                            <div class="modal-shop-price-container" data-shop-price-container>
                                                                <div data-price-standard-container>
                                                                    <a style="font-size: large; font-weight: 900;" data-price-standard></a>
                                                                </div>
                                                                <div data-price-nitro-container>
                                                                    <a data-price-nitro></a>
                                                                </div>
                                                            </div>
                                                            <div class="modal-left-bottom">
                                                                <div class="modal-buttons" data-modal-buttons></div>
                                                            </div>
                                                        </div>
                                                        <img class="modalv2-inner-logo" src="https://cdn.yapper.shop/assets/31.png" data-modalv2-inner-logo></img>
                                                        <div class="shop-modal-tag-container" data-shop-card-tag-container></div>

                                                        <div data-modal-top-product-buttons>
                                                            <div title="Close" data-close-product-card-button>
                                                                <svg class="closeIcon_modal" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M17.3 18.7a1 1 0 0 0 1.4-1.4L13.42 12l5.3-5.3a1 1 0 0 0-1.42-1.4L12 10.58l-5.3-5.3a1 1 0 0 0-1.4 1.42L10.58 12l-5.3 5.3a1 1 0 1 0 1.42 1.4L12 13.42l5.3 5.3Z" class=""></path></svg>
                                                            </div>
                                                            <div title="Copy Link" data-share-product-card-button></div>
                                                            <div title="Download Data" data-download-product-card-button></div>
                                                        </div>

                                                        <div id="modalv2-inner-right" class="modalv2-inner-right">
                                                            <img class="modalv2-inner-img" src="https://cdn.discordapp.com/app-assets/1096190356233670716/${pdp}.png?size=4096"></img>
                                                            <div data-modal-preview-holder></div>
                                                        </div>
                                                    </div>
                                                `;

                                                document.body.appendChild(modal);

                                                setTimeout(() => {
                                                    modal.classList.add('show');
                                                }, 1);

                                                if (apiCategory.logo != null) {
                                                    modal.querySelector("[data-modalv2-inner-logo]").src = `https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.logo}.png?size=4096`;
                                                }

                                                if (product.type === AVATAR_DECORATION) {

                                                    modal.classList.add('modal-0');

                                                    product.items.forEach(item => {

                                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                        const previewHolderLeft = modal.querySelector("[data-modal-left-preview-holder]");

                                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                        modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                        modal.querySelector("[data-product-modal-summary]").textContent = product.summary;

                                                        if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {

                                                            previewHolder.classList.add('modal-preview-profile-container');
                                                            previewHolder.innerHTML = `
                                                                <div class="modal-preview-profile1">
                                                                    <div class="options-preview-profile-banner-color"></div>
                                                                    <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                    <div class="profile-avatar-preview-bg"></div>
                                                                    <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                    <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                    <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                    <img id="profileAvatarDecoPreview" class="profile-avatar-deco-preview" src="https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true">
                                                                    <div class="options-preview-profile-status-bg"></div>
                                                                    <div class="options-preview-profile-status-color"></div>
                                                                </div>
                                                            `;

                                                            document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();

                                                            previewHolderLeft.classList.add('modal-left-avatar-decoration-img');

                                                            const imgElement = document.createElement("img");
                                                            imgElement.id = "shop-card-deco-image";
                                                            imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;

                                                            previewHolderLeft.appendChild(imgElement);

                                                            if (localStorage.reduced_motion != "true") {
                                                                imgElement.addEventListener("mouseenter", () => {
                                                                    imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                });
                                                            
                                                                imgElement.addEventListener("mouseleave", () => {
                                                                    imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                });
                                                            }

                                                        } else {
                                                            
                                                            previewHolder.classList.add('modal-avatar-decoration-img');

                                                            const imgElement = document.createElement("img");
                                                            imgElement.id = "shop-card-deco-image";
                                                            imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;

                                                            previewHolder.appendChild(imgElement);

                                                            // Hover effect: Change the image src on mouse enter and leave
                                                            if (localStorage.reduced_motion != "true") {
                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                    imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                });
                                                            
                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                    imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                });
                                                            }
                                                        }

                                                    });
                                                } else if (product.type === PROFILE_EFFECT) {
                                                    modal.classList.add('modal-1');
    
                                                    modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                    modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                    modal.querySelector("[data-product-modal-summary]").textContent = product.summary;

                                                    // Ensure the item ID is accessible here
                                                    let itemId = undefined;
                                                    if (Array.isArray(product.items)) {
                                                        // If items is an array, find the item with type 1 and get its id
                                                        const item = product.items.find(item => item.type === 1);
                                                        if (item) {
                                                            itemId = item.id;
                                                        }
                                                    } else if (product.items && product.items.type === 1) {
                                                        // If items is an object and has type 1, get its id
                                                        itemId = product.items.id;
                                                    }
                                                
                                                
                                                    // Fetch profile effects API only if not already cached
                                                    if (!profileEffectsCache) {
                                                        const response = await fetch(api + PROFILE_EFFECTS, {
                                                            method: "GET",
                                                            headers: {
                                                                "Password": api_password,
                                                                "Token": api_token
                                                            }
                                                        });
                                                        const effectsData = await response.json();
                                                        profileEffectsCache = effectsData.profile_effect_configs;
                                                    }
                                                
                                                    // Find matching profile effect
                                                    const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);

                                                    const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                    const previewHolderLeft = modal.querySelector("[data-modal-left-preview-holder]");
                                                
                                                    if (matchingEffect) {
                                                        if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                                            previewHolder.classList.add('modal-preview-profile-container');
                                                            previewHolder.innerHTML = `
                                                                <div class="modal-preview-profile2">
                                                                    <div class="options-preview-profile-banner-color"></div>
                                                                    <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                    <div class="profile-avatar-preview-bg"></div>
                                                                    <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                    <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                    <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                    <div class="options-preview-profile-status-bg"></div>
                                                                    <div class="options-preview-profile-status-color"></div>
                                                                    <img id="profileProfileEffectPreview" class="profile-profile-effect-preview" src="${matchingEffect.effects[0]?.src}">
                                                                </div>
                                                            `;

                                                            document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();

                                                            previewHolderLeft.classList.add('modal-left-profile-effect-img');
                                                        
                                                            const imgElement = document.createElement("img");
                                                            imgElement.src = matchingEffect.thumbnailPreviewSrc;

                                                            previewHolderLeft.appendChild(imgElement);
                                                        
                                                            if (localStorage.reduced_motion != "true") {
                                                                imgElement.addEventListener("mouseenter", () => {
                                                                    if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                        const effectUrl = matchingEffect.effects[0]?.src;
                                                                        imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                    }
                                                                });
                                                            
                                                                imgElement.addEventListener("mouseleave", () => {
                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                });
                                                            } else {
                                                                imgElement.addEventListener("mouseenter", () => {
                                                                    imgElement.src = matchingEffect.reducedMotionSrc;
                                                                });
                                                            
                                                                imgElement.addEventListener("mouseleave", () => {
                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                });
                                                            }
                                                        } else {
                                                            const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                            previewHolder.classList.add('modal-profile-effect-img');
                                                        
                                                            previewHolder.innerHTML = `
                                                                <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                            `;
                                                        
                                                            // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                            const imgElement = previewHolder.querySelector("img");
                                                        
                                                            if (localStorage.reduced_motion != "true") {
                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                    if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                        const effectUrl = matchingEffect.effects[0]?.src;
                                                                        imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                    }
                                                                });
                                                            
                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                });
                                                            } else {
                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                    imgElement.src = matchingEffect.reducedMotionSrc;
                                                                });
                                                            
                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                });
                                                            }
                                                        }
                                                    }
                                                } else if (product.type === NAMEPLATE) {
                                                    card.classList.add("modal-2");
        
                                                    modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                    modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                    modal.querySelector("[data-product-modal-summary]").textContent = product.summary;
        
                                                    const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                    previewHolder.classList.add('nameplate-modal-preview');
        
                                                    if (localStorage.discord_username && localStorage.discord_username != '') {
                                                        previewName = localStorage.discord_username;
                                                    } else {
                                                        previewName = 'Discord User'
                                                    }

                                                    if (localStorage.experiment_2025_03_early_nameplate_warning === "Treatment 1: Enabled") {
                                                        let nameplateWarning = document.createElement("div");

                                                        nameplateWarning.classList.add('nameplate-modal-early-warning-container');
                                                        nameplateWarning.innerHTML = `
                                                            <p>${getTextString("SHOP_NAMEPLATE_WARNING_NOTICE_1")}</p>
                                                            <a style="color: lightblue;" href="https://support.yapper.shop/?page=nameplates">${getTextString("SHOP_NAMEPLATE_WARNING_NOTICE_2")}</a>
                                                        `;


                                                        modal.querySelector(".modalv2-inner-left").appendChild(nameplateWarning);
                                                    }
        
                                                    previewHolder.innerHTML = `
                                                        <div class="nameplate-null-user">
                                                            <div class="nameplate-null-user-avatar"></div>
                                                            <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                        </div>
                                                        <div class="nameplate-null-user">
                                                            <div class="nameplate-null-user-avatar"></div>
                                                            <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                        </div>
                                                        <div class="nameplate-null-user" data-user-nameplate-preview>
                                                            <video muted loop class="nameplate-null-user" style="position: absolute;" data-user-nameplate-preview-img></video>
                                                            <div class="nameplate-user-avatar" data-nameplate-user-random-avatar></div>
                                                            <p class="nameplate-user-name">${previewName}</p>
                                                        </div>
                                                        <div class="nameplate-null-user">
                                                            <div class="nameplate-null-user-avatar"></div>
                                                            <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                        </div>
                                                        <div class="nameplate-null-user">
                                                            <div class="nameplate-null-user-avatar"></div>
                                                            <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                        </div>
                                                    `;
        
                                                    product.items.forEach(item => {
                                                        const nameplatePreview = previewHolder.querySelector("[data-user-nameplate-preview]");
                                                        const paletteName = item.palette;
                                                        const asset = `https://cdn.discordapp.com/assets/collectibles/${item.asset}asset.webm`;
                                                        const bgcolor = nameplate_palettes[paletteName].darkBackground;
        
                                                        const videoElement = previewHolder.querySelector("[data-user-nameplate-preview-img]");

                                                        videoElement.src = asset;
        
                                                        nameplatePreview.style.backgroundImage = `linear-gradient(10deg, #00000000 40%, ${bgcolor} 180%), linear-gradient(170deg, #00000000 40%, ${bgcolor} 180%)`;
                                                        // nameplatePreview.style.boxShadow = `0 0 0 1px #a10606`;
                                                        
                                                        const nullUserNameRandomWidth = previewHolder.querySelectorAll("[data-null-user-random-name]");
                                                        
                                                        nullUserNameRandomWidth.forEach(UserName => {
                                                            const randomWidth = Math.floor(Math.random() * (180 - 80 + 1)) + 80;
                                                            UserName.style.width = randomWidth + `px`;
                                                        });
                                                    
                                                        const nullUserAvatar = previewHolder.querySelectorAll("[data-nameplate-user-random-avatar]");
                                                    
                                                        nullUserAvatar.forEach(UserAvatar => {
                                                            UserAvatar.style.backgroundImage = `url(${localStorage.discord_avatar})`;
                                                        });

                                                        if (localStorage.reduced_motion != "true") {
                                                            document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                videoElement.play();
                                                            });
                                                            document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                videoElement.pause();
                                                            });
                                                        }
                                                    });
                                                    
                                                } else if (product.type === BUNDLE) {
                                                    modal.classList.add('modal-1000');

                                                    const bundledProducts = product.bundled_products || [];

                                                    const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                
                                                    // Generate the bundle summary from the names of the bundled products
                                                    const type0Product = bundledProducts.find(item => item.type === 0);
                                                    const type1Product = bundledProducts.find(item => item.type === 1);
                                                
                                                    let bundleSummary = `${getTextString("CARD_TYPE_BUNDLE_TITLE")}`;
                                                    if (type0Product) {
                                                        bundleSummary += `${type0Product.name}${getTextString("CARD_TYPE_BUNDLE_TITLE_DECO")}`;
                                                    }
                                                    if (type1Product) {
                                                        bundleSummary += `${type1Product.name}${getTextString("CARD_TYPE_BUNDLE_TITLE_EFFECT")}`;
                                                    }
                                                
                                                    // Set the summary text
                                                    modal.querySelector("[data-product-modal-summary]").textContent = bundleSummary;
                                                
                                                    // Set the basic card details
                                                    modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                    modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                
                                                    // Handle each item in the bundle
                                                    product.items.forEach(item => {
                                                        if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                                            
                                                            if (item.type === 0) {
                                                                decosrc = item.asset
                                                            } else if (item.type === 1) {
                                                                // Profile effect
                                                                (async () => {
                                                                    // Fetch profile effects if not cached
                                                                    if (!profileEffectsCache) {
                                                                        const response = await fetch(api + PROFILE_EFFECTS, {
                                                                            method: "GET",
                                                                            headers: {
                                                                                "Password": api_password,
                                                                                "Token": api_token
                                                                            }
                                                                        });
                                                                        const effectsData = await response.json();
                                                                        profileEffectsCache = effectsData.profile_effect_configs;
                                                                    }
                                                
                                                                    // Find the matching effect
                                                                    const matchingEffect = profileEffectsCache.find(effect => effect.id === item.id);
                                                
                                                                    if (matchingEffect) {
                                                                        if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                            const effectUrl = matchingEffect.effects[0]?.src;
                                                                            renderProfile(effectUrl)
                                                                        }
                                                                    }
                                                                })();
                                                            }

                                                            function renderProfile(effectUrl) {
                                                                previewHolder.classList.add('modal-preview-profile-container');
                                                                previewHolder.innerHTML = `
                                                                    <div class="modal-preview-profile2">
                                                                        <div class="options-preview-profile-banner-color"></div>
                                                                        <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                        <div class="profile-avatar-preview-bg"></div>
                                                                        <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                        <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                        <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                        <img id="profileAvatarDecoPreview" class="profile-avatar-deco-preview" src="https://cdn.discordapp.com/avatar-decoration-presets/${decosrc}.png?size=4096&passthrough=true">
                                                                        <div class="options-preview-profile-status-bg"></div>
                                                                        <div class="options-preview-profile-status-color"></div>
                                                                        <img id="profileProfileEffectPreview" class="profile-profile-effect-preview" src="${effectUrl}">
                                                                    </div>
                                                                `;
                                                                document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();
                                                            }

                                                            
                                                        } else {
                                                            if (item.type === 0) {
                                                                const decoImage = document.createElement("img");
                                                                decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                decoImage.alt = "Avatar Decoration";
                                                                decoImage.classList.add("modal-avatar-decoration-img");
                                                                modal.querySelector("[data-modal-preview-holder]").appendChild(decoImage);
                                                
                                                                // Hover effect for decoration image
                                                                if (localStorage.reduced_motion != "true") {
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                        decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                    });

                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                        decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                    });
                                                                }
                                                            } else if (item.type === 1) {
                                                                // Profile effect
                                                                (async () => {
                                                                    // Fetch profile effects if not cached
                                                                    if (!profileEffectsCache) {
                                                                        const response = await fetch(api + PROFILE_EFFECTS, {
                                                                            method: "GET",
                                                                            headers: {
                                                                                "Password": api_password,
                                                                                "Token": api_token
                                                                            }
                                                                        });
                                                                        const effectsData = await response.json();
                                                                        profileEffectsCache = effectsData.profile_effect_configs;
                                                                    }
                                                
                                                                    // Find the matching effect
                                                                    const matchingEffect = profileEffectsCache.find(effect => effect.id === item.id);
                                                
                                                                    if (matchingEffect) {
                                                                        const effectImage = document.createElement("img");
                                                                        effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                        effectImage.alt = "Profile Effect";
                                                                        effectImage.classList.add("modal-profile-effect-img");
                                                                        modal.querySelector("[data-modal-preview-holder]").appendChild(effectImage);
                                                
                                                                        // Hover effect for profile effect
                                                                        if (localStorage.reduced_motion != "true") {
                                                                            document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                    const effectUrl = matchingEffect.effects[0]?.src;
                                                                                    effectImage.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                                }
                                                                            });
                                                                        
                                                                            document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                            });
                                                                        } else {
                                                                            document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                effectImage.src = matchingEffect.reducedMotionSrc;
                                                                            });
                                                                        
                                                                            document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                            });
                                                                        }
                                                                    }
                                                                })();
                                                            }
                                                        }
                                                    });
                                                } else if (product.type === VARIANTS_GROUP) {
                                                    modal.querySelector("[data-shop-modal-var-container-container]").classList.add('show');
                                                    // Update SKU and summary
                                                    modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                    modal.querySelector("[data-product-modal-summary]").textContent = product.summary;
                                                
                                                    // Always display the base variant name
                                                    modal.querySelector("[data-product-modal-name]").textContent = product.variants[0]?.base_variant_name || "Product";
                                                
                                                    // Render variant color blocks as interactive divs
                                                    const variantContainer = modal.querySelector("[data-shop-modal-var-container]");
                                                    variantContainer.innerHTML = ""; // Clear existing variant blocks
                                                    let currentSelectedVariant = null; // Track selected variant
                                                
                                                    product.variants.forEach((variant, index) => {
                                                        // Create variant color block
                                                        const variantColorBlock = document.createElement("div");
                                                        variantColorBlock.classList.add("shop-card-var");
                                                        variantColorBlock.style.backgroundColor = `${variant.variant_value}`;
                                                
                                                        // Add click event listener to switch variants
                                                        variantColorBlock.addEventListener("click", () => {
                                                            if (currentSelectedVariant) {
                                                                currentSelectedVariant.classList.remove("shop-card-var-selected");
                                                            }
                                                            variantColorBlock.classList.add("shop-card-var-selected");
                                                            currentSelectedVariant = variantColorBlock;
                                                            applyVariant(variant);
                                                        });
                                                
                                                        // Append the color block to the container
                                                        variantContainer.appendChild(variantColorBlock);
                                                
                                                        // Set the first variant as the default selected
                                                        if (index === 0) {
                                                            currentSelectedVariant = variantColorBlock;
                                                            variantColorBlock.classList.add("shop-card-var-selected");
                                                        }
                                                    });
        
                                                    let isFirstTimeLoadingVariant = true;
                                                    const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                    const previewHolderLeft = modal.querySelector("[data-modal-left-preview-holder]");
                                                
                                                    // Function to apply the selected variant
                                                    function applyVariant(selectedVariant) {
                                                        modal.querySelector("[data-shop-modal-var-title]").textContent = `(${selectedVariant.variant_label})`;
                                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${selectedVariant.sku_id}`;
                                                        modal.querySelector("[data-share-product-card-button]").innerHTML = `
                                                            <svg class="shareIcon_modal" onclick="copyEmoji('https://canary.discord.com/shop#itemSkuId=${selectedVariant.sku_id}');" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M16.32 14.72a1 1 0 0 1 0-1.41l2.51-2.51a3.98 3.98 0 0 0-5.62-5.63l-2.52 2.51a1 1 0 0 1-1.41-1.41l2.52-2.52a5.98 5.98 0 0 1 8.45 8.46l-2.52 2.51a1 1 0 0 1-1.41 0ZM7.68 9.29a1 1 0 0 1 0 1.41l-2.52 2.51a3.98 3.98 0 1 0 5.63 5.63l2.51-2.52a1 1 0 0 1 1.42 1.42l-2.52 2.51a5.98 5.98 0 0 1-8.45-8.45l2.51-2.51a1 1 0 0 1 1.42 0Z" class=""></path><path fill="currentColor" d="M14.7 10.7a1 1 0 0 0-1.4-1.4l-4 4a1 1 0 1 0 1.4 1.4l4-4Z" class=""></path></svg>
                                                        `;
                                                        if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                            modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                                <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${selectedVariant.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                            `;
                                                        }
                                                        if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                                            
                                                            if (selectedVariant.type === 0) {
                                                                selectedVariant.items?.forEach(item => {
                                                                    previewHolder.classList.add('modal-preview-profile-container');
                                                                    previewHolder.innerHTML = `
                                                                        <div class="modal-preview-profile1">
                                                                            <div class="options-preview-profile-banner-color"></div>
                                                                            <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                            <div class="profile-avatar-preview-bg"></div>
                                                                            <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                            <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                            <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                            <img id="profileAvatarDecoPreview" class="profile-avatar-deco-preview" src="https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true">
                                                                            <div class="options-preview-profile-status-bg"></div>
                                                                            <div class="options-preview-profile-status-color"></div>
                                                                        </div>
                                                                    `;
                                                                    document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();

                                                                    previewHolderLeft.classList.add('modal-left-avatar-decoration-img');

                                                                    previewHolderLeft.innerHTML = `
                                                                        <img id="shop-card-deco-image" src="https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&amp;passthrough=false" data-left-preview-deco-var>
                                                                    `;

                                                                    const imgElement = previewHolderLeft.querySelector("[data-left-preview-deco-var]");
                                                                    
                                                                    if (localStorage.reduced_motion != "true") {
                                                                        imgElement.addEventListener("mouseenter", () => {
                                                                            imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                        });
                                                                    
                                                                        imgElement.addEventListener("mouseleave", () => {
                                                                            imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                        });
                                                                    }
                                                                });
                                                            } else if (selectedVariant.type === 1) {

                                                                modal.classList.add("modal-2000-1");
                                                                (async () => {
                                                                    // Ensure the item ID is accessible here
                                                                    let itemId = undefined;
                                                                    if (Array.isArray(selectedVariant.items)) {
                                                                        // If items is an array, find the item with type 1 and get its id
                                                                        const item = selectedVariant.items.find(item => item.type === 1);
                                                                        if (item) {
                                                                            itemId = item.id;
                                                                        }
                                                                    } else if (selectedVariant.items && selectedVariant.items.type === 1) {
                                                                        // If items is an object and has type 1, get its id
                                                                        itemId = selectedVariant.items.id;
                                                                    }
                                                                
                                                                
                                                                    // Fetch profile effects API only if not already cached
                                                                    if (!profileEffectsCache) {
                                                                        const response = await fetch(api + PROFILE_EFFECTS, {
                                                                            method: "GET",
                                                                            headers: {
                                                                                "Password": api_password,
                                                                                "Token": api_token
                                                                            }
                                                                        });
                                                                        const effectsData = await response.json();
                                                                        profileEffectsCache = effectsData.profile_effect_configs;
                                                                    }
                                                                
                                                                    // Find matching profile effect
                                                                    const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                                                
                                                                    if (matchingEffect) {
                                                                        if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                            const effectUrl = matchingEffect.effects[0]?.src;
                                                                            previewHolder.classList.add('modal-preview-profile-container');
                                                                            previewHolder.innerHTML = `
                                                                                <div class="modal-preview-profile2">
                                                                                    <div class="options-preview-profile-banner-color"></div>
                                                                                    <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                                    <div class="profile-avatar-preview-bg"></div>
                                                                                    <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                                    <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                                    <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                                    <div class="options-preview-profile-status-bg"></div>
                                                                                    <div class="options-preview-profile-status-color"></div>
                                                                                    <img id="profileProfileEffectPreview" class="profile-profile-effect-preview" src="${effectUrl}">
                                                                                </div>
                                                                            `;
                                                                            document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();
                                                                        }
                                                                    }

                                                                    previewHolderLeft.classList.add('modal-left-profile-effect-img');

                                                                    previewHolderLeft.innerHTML = `
                                                                        <img src="${matchingEffect.thumbnailPreviewSrc}" data-left-preview-effect-var>
                                                                    `;

                                                                    const imgElement = previewHolderLeft.querySelector("[data-left-preview-effect-var]");
                                                                    
                                                                    if (localStorage.reduced_motion != "true") {
                                                                        imgElement.addEventListener("mouseenter", () => {
                                                                            if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                const effectUrl = matchingEffect.effects[0]?.src;
                                                                                imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                            }
                                                                        });
                                                                    
                                                                        imgElement.addEventListener("mouseleave", () => {
                                                                            // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                            imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                        });
                                                                    } else {
                                                                        imgElement.addEventListener("mouseenter", () => {
                                                                            imgElement.src = matchingEffect.reducedMotionSrc;
                                                                        });
                                                                    
                                                                        imgElement.addEventListener("mouseleave", () => {
                                                                            // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                            imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                        });
                                                                    }
                                                                })();
                                                            }

                                                            
                                                        } else {
                                                            if (selectedVariant.type === 0) {
                                                                modal.classList.add("modal-2000-0");
                                                                previewHolder.innerHTML = ""; // Clear previous decorations
                                                                previewHolder.classList.add('modal-avatar-decoration-img');
                                                                
                                                                // Add the avatar decoration based on the selected variant
                                                                selectedVariant.items?.forEach(item => {
                                                                    const decoImage = document.createElement("img");
                                                                    decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                    decoImage.alt = "Avatar Decoration";
                                                                    decoImage.id = "shop-card-deco-image";
                                                                    previewHolder.appendChild(decoImage);
                                                                
                                                                    // Hover effect for decoration image
                                                                    if (localStorage.reduced_motion !== "true") {
                                                                        document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                            decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                        });
                                                                        document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                            decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                        });
                                                                    }
                                                                });
                                                            } else if (selectedVariant.type === 1) {
                                                                modal.classList.add("modal-2000-1");
                                                                (async () => {
                                                                    // Ensure the item ID is accessible here
                                                                    let itemId = undefined;
                                                                    if (Array.isArray(selectedVariant.items)) {
                                                                        // If items is an array, find the item with type 1 and get its id
                                                                        const item = selectedVariant.items.find(item => item.type === 1);
                                                                        if (item) {
                                                                            itemId = item.id;
                                                                        }
                                                                    } else if (selectedVariant.items && selectedVariant.items.type === 1) {
                                                                        // If items is an object and has type 1, get its id
                                                                        itemId = selectedVariant.items.id;
                                                                    }
                                                                
                                                                
                                                                    // Fetch profile effects API only if not already cached
                                                                    if (!profileEffectsCache) {
                                                                        const response = await fetch(api + PROFILE_EFFECTS, {
                                                                            method: "GET",
                                                                            headers: {
                                                                                "Password": api_password,
                                                                                "Token": api_token
                                                                            }
                                                                        });
                                                                        const effectsData = await response.json();
                                                                        profileEffectsCache = effectsData.profile_effect_configs;
                                                                    }
                                                                
                                                                    // Find matching profile effect
                                                                    const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                                                
                                                                    if (matchingEffect) {
                                                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                                        previewHolder.classList.add('modal-profile-effect-img');
                                                                    
                                                                        previewHolder.innerHTML = `
                                                                            <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                                        `;
                                                                    
                                                                        // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                                        const imgElement = previewHolder.querySelector("img");
                                                                    
                                                                        if (localStorage.reduced_motion != "true") {
                                                                            document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                    const effectUrl = matchingEffect.effects[0]?.src;
                                                                                    imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                                }
                                                                            });
                                                                        
                                                                            document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                            });
                                                                        } else {
                                                                            document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                imgElement.src = matchingEffect.reducedMotionSrc;
                                                                            });
                                                                        
                                                                            document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                            });
                                                                        }
                                                                    }
                                                                })();
                                                            }
                                                        }
                                                    }
                                                
                                                    // Apply the default variant (first one) initially
                                                    if (product.variants.length > 0) {
                                                        applyVariant(product.variants[0]);
                                                    }
                                                } else if (product.type === EXTERNAL_SKU) {
                                                    modal.classList.add('modal-3000');
        
                                                    modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                    modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                    modal.querySelector("[data-product-modal-summary]").textContent = product.summary;
        
                                                    const previewHolder = modal.querySelector("[data-modal-preview-holder]");
        
                                                    if (product.sku_id === "1342211853484429445") {
                                                        previewHolder.classList.add('modal-potion-img');
                                                            
                                                        previewHolder.innerHTML = `
                                                            <svg class="potion-card-preview profile-badge-orb-preview" width="187" height="187" viewBox="0 0 187 187" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <g clip-path="url(#clip0_136_3)">
                                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M93.2014 34.4915L41.7391 64.2032V123.627L93.2014 153.338L144.664 123.627V64.2032L93.2014 34.4915ZM173.024 47.8295L93.2014 1.7439L13.3789 47.8295V140L93.2014 186.086L173.024 140V47.8295Z" fill="white"/>
                                                            <path d="M106.759 80.3577L98.3727 57.9977C96.5807 53.2198 89.8225 53.2198 88.0305 57.9977L79.6447 80.3577L57.2847 88.7437C52.5067 90.5355 52.5067 97.2939 57.2847 99.0857L79.6447 107.472L88.0305 129.832C89.8225 134.61 96.5807 134.61 98.3727 129.832L106.759 107.472L129.119 99.0857C133.896 97.2939 133.896 90.5355 129.119 88.7437L106.759 80.3577Z" fill="white"/>
                                                            </g>
                                                            <defs>
                                                            <clipPath id="clip0_136_3">
                                                            <rect width="160.82" height="187" fill="white" transform="translate(13.0908)"/>
                                                            </clipPath>
                                                            </defs>
                                                            </svg>
                                                        `;
                                                    } else if (product.sku_id === "1333912750274904064") {
                                                        previewHolder.classList.add('modal-potion-img');
                                                            
                                                        previewHolder.innerHTML = `
                                                            <svg class="potion-card-preview nitro-3-days-orb-preview" width="187" height="187" viewBox="0 0 187 187" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                            <rect y="16" width="187" height="140" fill="url(#pattern0_136_11)"/>
                                                            <defs>
                                                            <pattern id="pattern0_136_11" patternContentUnits="objectBoundingBox" width="1" height="1">
                                                            <use xlink:href="#image0_136_11" transform="matrix(0.00369004 0 0 0.00492884 0 -0.000276753)"/>
                                                            </pattern>
                                                            <image id="image0_136_11" width="271" height="203" preserveAspectRatio="none" xlink:href="data:image/png;base64,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"/>
                                                            </defs>
                                                            </svg>
        
                                                        `;
                                                    } else {
                                                        previewHolder.innerHTML = `
                                                            <p>${getTextString("CARD_TYPE_EXTERNAL_SKU_ERROR")}</p>
                                                        `;
                                                    }
                                                    
                                                }


                                                const button_container = document.querySelector("[data-modal-buttons]");
                                                
                                                if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads") {
                                                    button_container.innerHTML = `
                                                        <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                    `;
                                                    modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                        <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${product.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                    `;
                                                } else if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+") {
                                                    if (typeof product.emojiCopy != 'undefined') {
                                                        button_container.innerHTML = `
                                                            <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                            <button class="card-button ${product.emojiCopy ? '' : 'card-button-no-emoji'}" onclick="${product.emojiCopy ? `copyEmoji('${product.emojiCopy}')` : `redirectToGoogle()`}" title="${product.emojiCopy ? `${getTextString("CARD_COPY_PPLUS_EMOJI_TITLE")}` : `${getTextString("CARD_REQUEST_PPLUS_EMOJI_TITLE")}`}">${product.emojiCopy ? `${getTextString("CARD_COPY_PPLUS_EMOJI")}` : `${getTextString("CARD_REQUEST_PPLUS_EMOJI")}`}</button>
                                                        `;
                                                    } else {
                                                        button_container.innerHTML = `
                                                            <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                            <button class="card-button card-button-no-emoji" title="${getTextString("CARD_PPLUS_ERROR_TITLE")}">${getTextString("CARD_PPLUS_ERROR")}</button>
                                                        `;
                                                    }
                                                } else if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+") {
                                                    if (typeof product.emojiCopy != 'undefined') {
                                                        button_container.innerHTML = `
                                                            <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                            <button class="card-button ${product.emojiCopy ? '' : 'card-button-no-emoji'}" onclick="${product.emojiCopy ? `copyEmoji('${product.emojiCopy}')` : `redirectToGoogle()`}" title="${product.emojiCopy ? `${getTextString("CARD_COPY_PPLUS_EMOJI_TITLE")}` : `${getTextString("CARD_REQUEST_PPLUS_EMOJI_TITLE")}`}">${product.emojiCopy ? `${getTextString("CARD_COPY_PPLUS_EMOJI")}` : `${getTextString("CARD_REQUEST_PPLUS_EMOJI")}`}</button>
                                                        `;
                                                        modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                            <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${product.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                        `;
                                                    } else {
                                                        button_container.innerHTML = `
                                                            <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                            <button class="card-button card-button-no-emoji" title="${getTextString("CARD_PPLUS_ERROR_TITLE")}">${getTextString("CARD_PPLUS_ERROR")}</button>
                                                        `;
                                                        modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                            <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${product.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                        `;
                                                    }
                                                } else if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                    button_container.innerHTML = `
                                                        <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                    `;
                                                    modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                        <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${product.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                    `;
                                                } else {
                                                    button_container.innerHTML = `
                                                        <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                    `;
                                                }


                                                modal.querySelector("[data-share-product-card-button]").innerHTML = `
                                                    <svg class="shareIcon_modal" onclick="copyEmoji('https://canary.discord.com/shop#itemSkuId=${product.sku_id}');" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M16.32 14.72a1 1 0 0 1 0-1.41l2.51-2.51a3.98 3.98 0 0 0-5.62-5.63l-2.52 2.51a1 1 0 0 1-1.41-1.41l2.52-2.52a5.98 5.98 0 0 1 8.45 8.46l-2.52 2.51a1 1 0 0 1-1.41 0ZM7.68 9.29a1 1 0 0 1 0 1.41l-2.52 2.51a3.98 3.98 0 1 0 5.63 5.63l2.51-2.52a1 1 0 0 1 1.42 1.42l-2.52 2.51a5.98 5.98 0 0 1-8.45-8.45l2.51-2.51a1 1 0 0 1 1.42 0Z" class=""></path><path fill="currentColor" d="M14.7 10.7a1 1 0 0 0-1.4-1.4l-4 4a1 1 0 1 0 1.4 1.4l4-4Z" class=""></path></svg>
                                                `;


                                                const priceTextNitro = modal.querySelector("[data-price-nitro]");
                                                const priceTextStandard = modal.querySelector("[data-price-standard]");

                                                const priceContainerNitro = modal.querySelector("[data-price-nitro-container]");
                                                const priceContainerStandard = modal.querySelector("[data-price-standard-container]");

                                                const priceContainer = modal.querySelector("[data-shop-price-container]");

                                                let priceStandard = "N/A";
                                                let priceNitro = "N/A";
                                                let priceOrb = "N/A";

                                                if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                                    if (localStorage.is_nitro_user === "true") {
                                                        if (product.prices && product.prices["4"] && product.prices["4"].country_prices && product.prices["4"].country_prices.prices) {
                                                            product.prices["4"].country_prices.prices.forEach(price => {
                                                                if (price.currency === "usd") {
                                                                    priceStandard = price.amount;
                                                                }
                                                                if (price.currency === "discord_orb") {
                                                                    priceOrb = price.amount;
                                                                }
                                                            });
            
                                                            if (priceStandard != "N/A" && priceOrb != "N/A") {
                                                                let orb_price = document.createElement("div");
                                                        
                                                                orb_price.innerHTML = `
                                                                    <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                                    <div class="orb-icon" style="margin-left: -25px"></div>
                                                                `;
                                                                orb_price.style.position = `absolute`;
                                                                orb_price.style.right = `0px`;
                                                                
                                                                priceContainer.appendChild(orb_price);
            
                                                                standardPriceOutput = `US$${(priceStandard / 100).toFixed(2)}`;
        
                                                                priceContainerStandard.innerHTML = `
                                                                    <a style="font-size: large; font-weight: 900; margin-left: 23px">${standardPriceOutput}</a>
                                                                    <div class="nitro-icon" style="margin-left: -5px"></div>
                                                                `;
            
                                                            } else if (priceStandard != "N/A") {
            
                                                                standardPriceOutput = `US$${(priceStandard / 100).toFixed(2)}`;
        
                                                                priceContainerStandard.innerHTML = `
                                                                    <a style="font-size: large; font-weight: 900; margin-left: 23px">${standardPriceOutput}</a>
                                                                    <div class="nitro-icon" style="margin-left: -5px"></div>
                                                                `;
            
                                                            } else if (priceOrb != "N/A") {
            
                                                                let orb_price = document.createElement("div");
                                                        
                                                                orb_price.innerHTML = `
                                                                    <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                                    <div class="orb-icon" style="margin-left: -25px"></div>
                                                                `;
                                                                orb_price.style.position = `absolute`;
                                                                orb_price.style.left = `20px`;
                                                                
                                                                priceContainer.appendChild(orb_price);
            
                                                                card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${getTextString("CARD_ORB_EXCLUSIVE_TAG")}</p>
                                                                    </div>
                                                                `;
                                                                
                                                            }
                                                        }
                                                    } else {
                                                        if (product.prices && product.prices["0"] && product.prices["0"].country_prices && product.prices["0"].country_prices.prices) {
                                                            product.prices["0"].country_prices.prices.forEach(price => {
                                                                if (price.currency === "usd") {
                                                                    priceStandard = price.amount;
                                                                }
                                                                if (price.currency === "discord_orb") {
                                                                    priceOrb = price.amount;
                                                                }
                                                            });
            
                                                            if (priceStandard != "N/A" && priceOrb != "N/A") {
                                                                let orb_price = document.createElement("div");
                                                        
                                                                orb_price.innerHTML = `
                                                                    <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                                    <div class="orb-icon" style="margin-left: -25px"></div>
                                                                `;
                                                                orb_price.style.position = `absolute`;
                                                                orb_price.style.right = `0px`;
                                                                
                                                                priceContainer.appendChild(orb_price);
            
                                                                priceTextStandard.textContent = `US$${(priceStandard / 100).toFixed(2)}`;
            
                                                            } else if (priceStandard != "N/A") {
            
                                                                priceTextStandard.textContent = `US$${(priceStandard / 100).toFixed(2)}`;
            
                                                            } else if (priceOrb != "N/A") {
            
                                                                let orb_price = document.createElement("div");
                                                        
                                                                orb_price.innerHTML = `
                                                                    <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                                    <div class="orb-icon" style="margin-left: -25px"></div>
                                                                `;
                                                                orb_price.style.position = `absolute`;
                                                                orb_price.style.left = `23px`;
                                                                
                                                                priceContainer.appendChild(orb_price);
            
                                                                card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${getTextString("CARD_ORB_EXCLUSIVE_TAG")}</p>
                                                                    </div>
                                                                `;
                                                                
                                                            }
                                                        }
                                                    }
        
                                                } else {
                                                    if (product.prices && product.prices["0"] && product.prices["0"].country_prices && product.prices["0"].country_prices.prices) {
                                                        product.prices["0"].country_prices.prices.forEach(price => {
                                                            if (price.currency === "usd") {
                                                                priceStandard = price.amount;
                                                            }
                                                        });
                                                    }
                                            
                                                    if (product.prices && product.prices["4"] && product.prices["4"].country_prices && product.prices["4"].country_prices.prices) {
                                                        product.prices["4"].country_prices.prices.forEach(price => {
                                                            if (price.currency === "usd") {
                                                                priceNitro = price.amount;
                                                            }
                                                        });
                                                    }
        
                                                    if (priceTextStandard) {
                                                        priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "null";
                                                    }
            
                                                    if (priceTextNitro) {
                                                        priceTextNitro.textContent = priceNitro !== "N/A" ? `US$${(priceNitro / 100).toFixed(2)} with Nitro` : "null";
                                                    }
                                                }

                                                if (priceTextStandard.textContent === "null" && priceTextNitro.textContent === "null") {
                                                    let error_warning = document.createElement("div");

                                                    error_warning.classList.add('invalid_currency_warning');
                                                    error_warning.innerHTML = `
                                                        <p>This item does not support this currency!</p>
                                                    `;
                                                                
                                                    priceContainer.appendChild(error_warning);
                                                } else if (priceTextStandard.textContent === "null" || priceTextNitro.textContent === "null") {
                                                    let error_warning = document.createElement("div");

                                                    error_warning.classList.add('invalid_currency_warning');
                                                    error_warning.innerHTML = `
                                                        <p>This item does not fully support this currency!</p>
                                                    `;
                                                                
                                                    priceContainer.appendChild(error_warning);
                                                }


                                                const unpublishedAt = new Date(product.unpublished_at);
                        
                                                if (product.unpublished_at && !isNaN(unpublishedAt.getTime())) {
                        
                                                    function updateTimer() {
                                                        const now = new Date();
                                                        const timeDiff = unpublishedAt - now;
                        
                                                        if (timeDiff <= 0) {
                                                            modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                <div class="unplublished-tag">
                                                                    <p class="unplublished-tag-text">${getTextString("CARD_UNPUBLISHED_TAG")}</p>
                                                                </div>
                                                            `;
                                                            clearInterval(timerInterval);
                                                        } else {
                                                            const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                            const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                            const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                        
                                                            modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                <div class="unplublished-tag">
                                                                    <p class="unplublished-tag-text">${days}${getTextString("CARD_UNPUBLISHED_COUNTDOWN_TAG")}</p>
                                                                </div>
                                                            `;
                                                        }
                                                    }
                        
                                                    const timerInterval = setInterval(updateTimer, 1000);
                                                    updateTimer();
                                                }

                                                const ExpiredAt = new Date(product.expires_at);
                        
                                                if (product.expires_at && !isNaN(ExpiredAt.getTime())) {
                        
                                                    function updateTimer() {
                                                        const now = new Date();
                                                        const timeDiff = ExpiredAt - now;
                        
                                                        if (timeDiff <= 0) {
                                                            modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                <div class="unplublished-tag">
                                                                    <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_TAG")}</p>
                                                                </div>
                                                            `;
                                                            clearInterval(timerInterval);
                                                        } else {
                                                            const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                            const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                            const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                        
                                                            modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                <div class="unplublished-tag">
                                                                    <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_COUNTDOWN_TAG")}${days}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_DAYS")}${hours}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_HOURS")}</p>
                                                                </div>
                                                            `;
                                                        }
                                                    }
                        
                                                    const timerInterval = setInterval(updateTimer, 1000);
                                                    updateTimer();
                                                }

                                                if (product.premium_type === 2) {
                                                    modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="premiumWheelBadge_c23530 textBadge_df8943 base_df8943 eyebrow_df8943 baseShapeRound_df8943" aria-label="This bonus item is yours to keep and use anytime with an active Nitro subscription." style="background-color: var(--status-danger);"><svg class="premiumWheel_c23530" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M15 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" class=""></path><path fill="currentColor" fill-rule="evenodd" d="M7 4a1 1 0 0 0 0 2h3a1 1 0 1 1 0 2H5.5a1 1 0 0 0 0 2H8a1 1 0 1 1 0 2H6a1 1 0 1 0 0 2h1.25A8 8 0 1 0 15 4H7Zm8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" clip-rule="evenodd" class=""></path><path fill="currentColor" d="M2.5 10a1 1 0 0 0 0-2H2a1 1 0 0 0 0 2h.5Z" class=""></path></svg></div>
                                                    `;
                                                }
                                                


                                                let modal_back = document.createElement("div");

                                                modal_back.classList.add('modalv2-back');
                                                modal_back.id = 'modalv2-back';

                                                document.body.appendChild(modal_back);

                                                setTimeout(() => {
                                                    modal_back.classList.add('show');
                                                }, 1);


                                                modal.addEventListener('click', (event) => {
                                                    if (event.target === modal) {
                                                        modal.classList.remove('show');
                                                        modal_back.classList.remove('show');
                                                        setTimeout(() => {
                                                            modal.remove();
                                                            modal_back.remove();
                                                        }, 300);
                                                    }
                                                });

                                                document.querySelector("[data-close-product-card-button]").addEventListener('click', () => {
                                                    modal.classList.remove('show');
                                                    modal_back.classList.remove('show');
                                                    setTimeout(() => {
                                                        modal.remove();
                                                        modal_back.remove();
                                                    }, 300);
                                                });
                                            }
                                        }
                                    } else {
                                        card.querySelector("[data-share-product-card-button]").innerHTML = `
                                            <svg class="shareIcon_f4a996" onclick="copyEmoji('https://canary.discord.com/shop#itemSkuId=${product.sku_id}');" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M16.32 14.72a1 1 0 0 1 0-1.41l2.51-2.51a3.98 3.98 0 0 0-5.62-5.63l-2.52 2.51a1 1 0 0 1-1.41-1.41l2.52-2.52a5.98 5.98 0 0 1 8.45 8.46l-2.52 2.51a1 1 0 0 1-1.41 0ZM7.68 9.29a1 1 0 0 1 0 1.41l-2.52 2.51a3.98 3.98 0 1 0 5.63 5.63l2.51-2.52a1 1 0 0 1 1.42 1.42l-2.52 2.51a5.98 5.98 0 0 1-8.45-8.45l2.51-2.51a1 1 0 0 1 1.42 0Z" class=""></path><path fill="currentColor" d="M14.7 10.7a1 1 0 0 0-1.4-1.4l-4 4a1 1 0 1 0 1.4 1.4l4-4Z" class=""></path></svg>
                                        `;
                                    }


                                    function newItemCheck() {

                                        if (N > g) {
                                        } else {
                                            card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                <div class="unplublished-tag">
                                                    <p class="unplublished-tag-text">${getTextString("CARD_NEW_TAG")}</p>
                                                </div>
                                            `;
                                        }
                                    }
                                                                        
                                    if (m.includes(product.sku_id)) {
                                        newItemCheck();
                                    }

                                    function newColorItemCheck() {

                                        if (N > newColorsExpireDate) {
                                        } else {
                                            card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                <div class="unplublished-tag">
                                                    <p class="unplublished-tag-text">${getTextString("CARD_NEW_COLORS_TAG")}</p>
                                                </div>
                                            `;
                                        }
                                    }
                                                                        
                                    if (newColorsSKUIDS.includes(product.sku_id) && ANIME_V3 === apiCategory.sku_id) {
                                        newColorItemCheck();
                                    }

                                    function popularItemCheck() {
                                        card.classList.add('popular-item');
                                    }
                                                                        
                                    if (I.includes(product.sku_id)) {
                                        popularItemCheck();
                                    }


                                    const unpublishedAt = new Date(product.unpublished_at);
                        
                                    if (product.unpublished_at && !isNaN(unpublishedAt.getTime())) {
                        
                                        function updateTimer() {
                                            const now = new Date();
                                            const timeDiff = unpublishedAt - now;
                        
                                            if (timeDiff <= 0) {
                                                card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                    <div class="unplublished-tag">
                                                        <p class="unplublished-tag-text">${getTextString("CARD_UNPUBLISHED_TAG")}</p>
                                                    </div>
                                                `;
                                                clearInterval(timerInterval);
                                            } else {
                                                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                        
                                                card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                    <div class="unplublished-tag">
                                                        <p class="unplublished-tag-text">${days}${getTextString("CARD_UNPUBLISHED_COUNTDOWN_TAG")}</p>
                                                    </div>
                                                `;
                                            }
                                        }
                        
                                        const timerInterval = setInterval(updateTimer, 1000);
                                        updateTimer();
                                    }

                                    const ExpiredAt = new Date(product.expires_at);
                        
                                    if (product.expires_at && !isNaN(ExpiredAt.getTime())) {
                        
                                        function updateTimer() {
                                            const now = new Date();
                                            const timeDiff = ExpiredAt - now;
                        
                                            if (timeDiff <= 0) {
                                                card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                    <div class="unplublished-tag">
                                                        <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_TAG")}</p>
                                                    </div>
                                                `;
                                                clearInterval(timerInterval);
                                            } else {
                                                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                        
                                                card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                    <div class="unplublished-tag">
                                                        <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_COUNTDOWN_TAG")}${days}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_DAYS")}${hours}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_HOURS")}</p>
                                                    </div>
                                                `;
                                            }
                                        }
                        
                                        const timerInterval = setInterval(updateTimer, 1000);
                                        updateTimer();
                                    }

                                    // Append card to output
                                    cardOutput.append(card);
                                    }
                                }
            
                                categoryOutput.append(category);


                                const paper_beach2_banner = document.getElementById(PAPER_BEACH_V2);
                                const geometry_dash_banner = document.getElementById(GEOMETRY_DASH);
                                const special_event_plus_banner = document.getElementById(PLUS_SPECIAL_EVENT);
                                const fnaf_banner = document.getElementById(FIVE_NIGHTS_AT_FREDDYS);
                                const windowkill2_banner = document.getElementById(WINDOWKILL_V2);
                                const paper_beach_banner = document.getElementById(PAPER_BEACH);
                                const bopl_battle_banner = document.getElementById(BOPL_BATTLE);
                                const windowkill_banner = document.getElementById(WINDOWKILL);

                                if (localStorage.disable_client_banner_overrides != "true") {
                                    
                                    if (paper_beach2_banner) {
                                        document.getElementById(`${PAPER_BEACH_V2}-banner-banner-container`).innerHTML = `
                                            <img style="position: absolute; left: 0px; bottom: 0px; width: 1280px;" src="https://cdn.yapper.shop/assets/112.png">
                                            <img class="paper-beach-sun-banner-decoration" src="https://cdn.yapper.shop/assets/116.png">
                                        `;
                                        document.getElementById(`${PAPER_BEACH_V2}-logo-container`).innerHTML = `
                                                <img class="shop-category-banner-logo-1 shop-logo-sway" src="https://cdn.yapper.shop/assets/115.png" id="shop-banner-logo">
                                            `;
                                        document.getElementById(`${PAPER_BEACH_V2}-summary`).style.color = 'black';
                                    }
                                    
                                    if (windowkill2_banner) {
                                        document.getElementById(WINDOWKILL_V2).innerHTML = `
                                            <img class="shop-category-condensed-banner-img" src="https://cdn.yapper.shop/assets/86.png">
                                            <div class="shop-category-condensed-logo-holder" style="left: 23%;">
                                                <img class="shop-category-banner-logo" src="https://cdn.yapper.shop/assets/53.png" id="shop-banner-logo">
                                            </div>
                                        `;
                                    }
                                    
                                    if (paper_beach_banner) {
                                        document.getElementById(PAPER_BEACH).innerHTML = `
                                            <img class="shop-category-condensed-banner-img" src="https://cdn.yapper.shop/assets/3.png">
                                            <div class="shop-category-condensed-logo-holder" style="right: -6%;">
                                                <img class="shop-category-banner-logo" src="https://cdn.yapper.shop/assets/1.png" id="shop-banner-logo">
                                            </div>
                                        `;
                                    }
                                    
                                    if (bopl_battle_banner) {
                                        document.getElementById(BOPL_BATTLE).innerHTML = `
                                            <img class="shop-category-condensed-banner-img" src="https://cdn.yapper.shop/assets/92.png">
                                            <div class="shop-category-condensed-logo-holder" style="left: 15%;">
                                                <img class="shop-category-banner-logo" src="https://cdn.yapper.shop/assets/60.png" id="shop-banner-logo">
                                            </div>
                                        `;
                                    }
                                }


                                if (paper_beach2_banner) {
                                    try {
                                        document.getElementById(`${PAPER_BEACH_V2}-summary`).style.color = 'black';
                                    } catch (error) {}
                                }

                                if (windowkill2_banner) {
                                    try {
                                        document.getElementById(`${WINDOWKILL_V2}-summary`).style.color = 'black';
                                    } catch (error) {}
                                }

                                if (paper_beach_banner) {
                                    try {
                                        document.getElementById(`${PAPER_BEACH}-summary`).style.color = 'black';
                                    } catch (error) {}
                                }

                                if (bopl_battle_banner) {
                                    try {
                                        document.getElementById(`${BOPL_BATTLE}-summary`).style.color = 'black';
                                    } catch (error) {}
                                }

                                if (windowkill_banner) {
                                    try {
                                        document.getElementById(`${WINDOWKILL}-summary`).style.color = 'black';
                                    } catch (error) {}
                                }


                                

                            } else if (page === "consumables") {
                                // Existing code for 'consumables' page
                                const potionCard = potionTemplate.content.cloneNode(true).children[0];
                                potionCard.querySelector("[data-potion-card-holder]").id = apiCategory.sku_id;

                                potionCard.id = apiCategory.sku_id;

                                potionCard.querySelector("[data-potion-card-holder]").classList.add('potion-card-gradient1');
            
                                if (apiCategory.src === null) {
                                    potionCard.querySelector("[data-potion-card-preview-image]").src = `https://cdn.yapper.shop/assets/31.png`;
                                } else {
                                    potionCard.querySelector("[data-potion-card-preview-image]").src = `https://cdn.yapper.shop/${apiCategory.endpoint}/${apiCategory.src}.${apiCategory.format}`;
                                }
                                potionCard.querySelector("[data-potion-card-preview-image]").alt = apiCategory.name;

                                if (apiCategory.new_text != null) {
                                    potionCard.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                        <div class="unplublished-tag">
                                            <p class="unplublished-tag-text">${apiCategory.new_text}</p>
                                        </div>
                                    `;
                                }
            
                                if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                    potionCard.querySelector("[data-product-card-sku-id]").textContent = ``;
                                } else {
                                    potionCard.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${apiCategory.sku_id}`;
                                }
                                potionCard.querySelector("[data-product-card-name]").textContent = apiCategory.name;
                                potionCard.querySelector("[data-product-card-summary]").textContent = apiCategory.summary;

                                let priceStandard = "N/A";
                        
                                if (apiCategory.price) {
                                    priceStandard = apiCategory.price.amount;
                                }


                                if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                    potionCard.classList.add('clickable');

                                    potionCard.addEventListener("click", () => {
                                        openItemModal();
                                    });

                                    async function openItemModal() {
                                        let modal = document.createElement("div");

                                        modal.classList.add('modalv2');

                                        if (apiCategory.pdp_bg != null) {
                                            pdp = apiCategory.pdp_bg
                                        } else {
                                            pdp = apiCategory.banner
                                        }

                                        modal.innerHTML = `
                                            <div class="modalv2-inner">
                                                <div class="modalv2-inner-left">
                                                    <p data-product-modal-sku-id></p>
                                                    <p style="font-size: large; font-weight: 900;" data-product-modal-name></p>
                                                    <p style="color: var(--8)" data-product-modal-summary></p>
                                                    <div class="modal-shop-price-container" data-shop-price-container>
                                                        <div data-price-standard-container>
                                                            <a style="font-size: large; font-weight: 900;" data-price-standard></a>
                                                        </div>
                                                    </div>
                                                    <div class="modal-left-bottom">
                                                        <div class="modal-buttons" data-modal-buttons></div>
                                                    </div>
                                                </div>
                                                
                                                <div data-modal-top-product-buttons>
                                                    <div title="Close" data-close-product-card-button>
                                                        <svg class="closeIcon_modal" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M17.3 18.7a1 1 0 0 0 1.4-1.4L13.42 12l5.3-5.3a1 1 0 0 0-1.42-1.4L12 10.58l-5.3-5.3a1 1 0 0 0-1.4 1.42L10.58 12l-5.3 5.3a1 1 0 1 0 1.42 1.4L12 13.42l5.3 5.3Z" class=""></path></svg>
                                                    </div>
                                                    <div title="Download Data" data-download-product-card-button></div>
                                                </div>

                                                <div class="shop-modal-tag-container" data-shop-card-tag-container></div>

                                                <div id="modalv2-inner-right" class="modalv2-inner-right">
                                                    <img class="modalv2-inner-img" src="https://cdn.yapper.shop/assets/110.svg"></img>
                                                    <div data-modal-preview-holder></div>
                                                </div>
                                            </div>
                                        `;

                                        document.body.appendChild(modal);

                                        setTimeout(() => {
                                            modal.classList.add('show');
                                        }, 1);


                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                        previewHolder.classList.add('modal-potion-img');

                                        const imgElement = document.createElement("img");
                                        imgElement.classList.add('potion-card-preview');
                                        imgElement.src = `https://cdn.yapper.shop/${apiCategory.endpoint}/${apiCategory.src}.${apiCategory.format}`;

                                        previewHolder.appendChild(imgElement);
                                        
                                        // Set the product details
                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${apiCategory.sku_id}`;
                                        modal.querySelector("[data-product-modal-name]").textContent = apiCategory.name;
                                        modal.querySelector("[data-product-modal-summary]").textContent = apiCategory.summary;


                                        const button_container = document.querySelector("[data-modal-buttons]");
                                        
                                        if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads") {
                                            button_container.innerHTML = `
                                                <button class="card-button" title="Open this Potion's support article" onclick="location.href='${discordsupport}${apiCategory.support_id}';">Open Support Article</button>
                                            `;
                                            modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${apiCategory.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                            `;
                                        } else if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+") {
                                            button_container.innerHTML = `
                                                <button class="card-button" title="Open this Potion's support article" onclick="location.href='${discordsupport}${apiCategory.support_id}';">Open Support Article</button>
                                            `;
                                            modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${apiCategory.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                            `;
                                        } else if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                            button_container.innerHTML = `
                                                <button class="card-button" title="Open this Potion's support article" onclick="location.href='${discordsupport}${apiCategory.support_id}';">Open Support Article</button>
                                            `;
                                            modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${apiCategory.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                            `;
                                        } else {
                                            button_container.innerHTML = `
                                                <button class="card-button" title="Open this Potion's support article" onclick="location.href='${discordsupport}${apiCategory.support_id}';">Open Support Article</button>
                                            `;
                                        }


                                        let priceStandard = "N/A";
                        
                                        if (apiCategory.price) {
                                            priceStandard = apiCategory.price.amount;
                                        }


                                        const priceTextNitro = modal.querySelector("[data-price-nitro]");
                                        const priceTextStandard = modal.querySelector("[data-price-standard]");

                                        const priceContainerNitro = modal.querySelector("[data-price-nitro-container]");
                                        const priceContainerStandard = modal.querySelector("[data-price-standard-container]");

                                        const priceContainer = modal.querySelector("[data-shop-price-container]");

                                        if (localStorage.experiment_2025_01_orb_testing === "Treatment 1: Default Prices") {
                                            if (priceTextStandard) {
                                                priceTextStandard.textContent = priceStandard !== "N/A" ? `${priceStandard}` : "Price (USD): N/A";
                                            }
                                        
                                            let orb_icon = document.createElement("div");
                                        
                                            orb_icon.classList.add('orb-icon');
                                        
                                            priceContainerStandard.appendChild(orb_icon);
                                        
                                        } else if (localStorage.experiment_2025_01_orb_testing === "Treatment 2: 50 Orbs") {
                                            if (priceTextStandard) {
                                                priceTextStandard.textContent = `50`;
                                            }
                                        
                                            let orb_icon = document.createElement("div");
                                        
                                            orb_icon.classList.add('orb-icon');
                                        
                                            priceContainerStandard.appendChild(orb_icon);
                                        
                                        } else if (localStorage.experiment_2025_01_orb_testing === "Treatment 3: Dynamic") {

                                            if (apiCategory.price.currency === "discord_orb") {
                                                if (priceTextStandard) {
                                                    priceTextStandard.textContent = priceStandard !== "N/A" ? `${priceStandard}` : "Price (USD): N/A";
                                                }
                                            
                                                let orb_icon = document.createElement("div");
                                            
                                                orb_icon.classList.add('orb-icon');
                                            
                                                priceContainerStandard.appendChild(orb_icon);
                                            
                                            } else {
                                                if (priceTextStandard) {
                                                    priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "Price (USD): N/A";
                                                }
                                            }

                                        } else {
                                            if (priceTextStandard) {
                                                priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "Price (USD): N/A";
                                            }
                                        }

                                        if (apiCategory.new_text != null) {
                                            modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                <div class="unplublished-tag">
                                                    <p class="unplublished-tag-text">${apiCategory.new_text}</p>
                                                </div>
                                            `;
                                        }


                                        document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                            modal.classList.add('potion-wobble')
                                        });
                                
                                        document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                            modal.classList.remove('potion-wobble')
                                        });
                                        


                                        let modal_back = document.createElement("div");

                                        modal_back.classList.add('modalv2-back');
                                        modal_back.id = 'modalv2-back';

                                        document.body.appendChild(modal_back);

                                        setTimeout(() => {
                                            modal_back.classList.add('show');
                                        }, 1);


                                        modal.addEventListener('click', (event) => {
                                            if (event.target === modal) {
                                                modal.classList.remove('show');
                                                modal_back.classList.remove('show');
                                                setTimeout(() => {
                                                    modal.remove();
                                                    modal_back.remove();
                                                }, 300);
                                            }
                                        });

                                        document.querySelector("[data-close-product-card-button]").addEventListener('click', () => {
                                            modal.classList.remove('show');
                                            modal_back.classList.remove('show');
                                            setTimeout(() => {
                                                modal.remove();
                                                modal_back.remove();
                                            }, 300);
                                        });
                                    }
                                }
                        
                                
                                const priceTextNitro = potionCard.querySelector("[data-price-nitro]");
                                const priceTextStandard = potionCard.querySelector("[data-price-standard]");

                                const priceContainerNitro = potionCard.querySelector("[data-price-nitro-container]");
                                const priceContainerStandard = potionCard.querySelector("[data-price-standard-container]");

                                const priceContainer = potionCard.querySelector("[data-shop-price-container]");

                                if (localStorage.experiment_2025_01_orb_testing === "Treatment 1: Default Prices") {
                                    if (priceTextStandard) {
                                        priceTextStandard.textContent = priceStandard !== "N/A" ? `${priceStandard}` : "Price (USD): N/A";
                                    }
                                
                                    let orb_icon = document.createElement("div");
                                
                                    orb_icon.classList.add('orb-icon');
                                
                                    priceContainerStandard.appendChild(orb_icon);
                                
                                } else if (localStorage.experiment_2025_01_orb_testing === "Treatment 2: 50 Orbs") {
                                    if (priceTextStandard) {
                                        priceTextStandard.textContent = `50`;
                                    }
                                
                                    let orb_icon = document.createElement("div");
                                
                                    orb_icon.classList.add('orb-icon');
                                
                                    priceContainerStandard.appendChild(orb_icon);
                                
                                } else {
                                    if (priceTextStandard) {
                                        priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "Price (USD): N/A";
                                    }
                                }

                                potionCard.querySelector("[data-product-card-open-in-shop]").innerHTML = `
                                    <button class="card-button" onclick="location.href='${discordsupport}${apiCategory.support_id}';" title="Open this Potion's support article">Open Support Article</button>
                                `;

                                potionCard.addEventListener("mouseenter", () => {
                                    potionCard.classList.add('potion-wobble')
                                });
                        
                                potionCard.addEventListener("mouseleave", () => {
                                    potionCard.classList.remove('potion-wobble')
                                });
            
                                categoryOutput.append(potionCard);
                            } else if (page === "orbs" && localStorage.experiment_2025_02_orbs_shop != "Treatment 2: Orb Shop done like default" && localStorage.experiment_2025_02_orbs_shop != "Treatment 3: Default + New tag") {
                                // Existing code for 'consumables' page
                                const potionCard = potionTemplate.content.cloneNode(true).children[0];
                                potionCard.querySelector("[data-potion-card-holder]").id = apiCategory.sku_id;

                                potionCard.id = apiCategory.sku_id;

                                potionCard.querySelector("[data-potion-card-holder]").classList.add('potion-card-gradient2');
            
                                if (apiCategory.src === null) {
                                    potionCard.querySelector("[data-potion-card-preview-image]").src = `https://cdn.yapper.shop/assets/31.png`;
                                } else {
                                    potionCard.querySelector("[data-potion-card-preview-image]").src = `https://cdn.yapper.shop/${apiCategory.endpoint}/${apiCategory.src}.${apiCategory.format}`;
                                }
                                potionCard.querySelector("[data-potion-card-preview-image]").alt = apiCategory.name;

                                if (apiCategory.new_text != null) {
                                    potionCard.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                        <div class="unplublished-tag">
                                            <p class="unplublished-tag-text">${apiCategory.new_text}</p>
                                        </div>
                                    `;
                                }
            
                                if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                    potionCard.querySelector("[data-product-card-sku-id]").textContent = ``;
                                } else {
                                    potionCard.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${apiCategory.sku_id}`;
                                }
                                potionCard.querySelector("[data-product-card-name]").textContent = apiCategory.name;
                                potionCard.querySelector("[data-product-card-summary]").textContent = apiCategory.summary;


                                if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                    potionCard.classList.add('clickable');

                                    potionCard.addEventListener("click", () => {
                                        openItemModal();
                                    });

                                    async function openItemModal() {
                                        let modal = document.createElement("div");

                                        modal.classList.add('modalv2');

                                        if (apiCategory.pdp_bg != null) {
                                            pdp = apiCategory.pdp_bg
                                        } else {
                                            pdp = apiCategory.banner
                                        }

                                        modal.innerHTML = `
                                            <div class="modalv2-inner">
                                                <div class="modalv2-inner-left">
                                                    <p data-product-modal-sku-id></p>
                                                    <p style="font-size: large; font-weight: 900;" data-product-modal-name></p>
                                                    <p style="color: var(--8)" data-product-modal-summary></p>
                                                    <div class="modal-shop-price-container" data-shop-price-container>
                                                        <div data-price-standard-container>
                                                            <a style="font-size: large; font-weight: 900;" data-price-standard></a>
                                                        </div>
                                                    </div>
                                                    <div class="modal-left-bottom">
                                                        <div class="modal-buttons" data-modal-buttons></div>
                                                    </div>
                                                </div>
                                                
                                                <div data-modal-top-product-buttons>
                                                    <div title="Close" data-close-product-card-button>
                                                        <svg class="closeIcon_modal" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M17.3 18.7a1 1 0 0 0 1.4-1.4L13.42 12l5.3-5.3a1 1 0 0 0-1.42-1.4L12 10.58l-5.3-5.3a1 1 0 0 0-1.4 1.42L10.58 12l-5.3 5.3a1 1 0 1 0 1.42 1.4L12 13.42l5.3 5.3Z" class=""></path></svg>
                                                    </div>
                                                    <div title="Download Data" data-download-product-card-button></div>
                                                </div>

                                                <div class="shop-modal-tag-container" data-shop-card-tag-container></div>

                                                <div id="modalv2-inner-right" class="modalv2-inner-right">
                                                    <img class="modalv2-inner-img" src="https://cdn.yapper.shop/assets/110.svg"></img>
                                                    <div data-modal-preview-holder></div>
                                                </div>
                                            </div>
                                        `;

                                        document.body.appendChild(modal);

                                        setTimeout(() => {
                                            modal.classList.add('show');
                                        }, 1);


                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                        previewHolder.classList.add('modal-potion-img');

                                        const imgElement = document.createElement("img");
                                        imgElement.classList.add('potion-card-preview');
                                        imgElement.src = `https://cdn.yapper.shop/${apiCategory.endpoint}/${apiCategory.src}.${apiCategory.format}`;

                                        previewHolder.appendChild(imgElement);
                                        
                                        // Set the product details
                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${apiCategory.sku_id}`;
                                        modal.querySelector("[data-product-modal-name]").textContent = apiCategory.name;
                                        modal.querySelector("[data-product-modal-summary]").textContent = apiCategory.summary;


                                        const button_container = document.querySelector("[data-modal-buttons]");
                                        
                                        if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads") {
                                            button_container.innerHTML = `
                                                <button class="card-button" title="Open this Potion's support article" onclick="location.href='${discordsupport}${apiCategory.support_id}';">Open Support Article</button>
                                            `;
                                            modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${apiCategory.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                            `;
                                        } else if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+") {
                                            button_container.innerHTML = `
                                                <button class="card-button" title="Open this Potion's support article" onclick="location.href='${discordsupport}${apiCategory.support_id}';">Open Support Article</button>
                                            `;
                                            modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${apiCategory.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                            `;
                                        } else if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                            button_container.innerHTML = `
                                                <button class="card-button" title="Open this Potion's support article" onclick="location.href='${discordsupport}${apiCategory.support_id}';">Open Support Article</button>
                                            `;
                                            modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${apiCategory.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                            `;
                                        } else {
                                            button_container.innerHTML = `
                                                <button class="card-button" title="Open this Potion's support article" onclick="location.href='${discordsupport}${apiCategory.support_id}';">Open Support Article</button>
                                            `;
                                        }


                                        let priceStandard = "N/A";
                        
                                        if (apiCategory.price) {
                                            priceStandard = apiCategory.price.amount;
                                        }


                                        const priceTextNitro = modal.querySelector("[data-price-nitro]");
                                        const priceTextStandard = modal.querySelector("[data-price-standard]");

                                        const priceContainerNitro = modal.querySelector("[data-price-nitro-container]");
                                        const priceContainerStandard = modal.querySelector("[data-price-standard-container]");

                                        const priceContainer = modal.querySelector("[data-shop-price-container]");

                                        if (localStorage.experiment_2025_01_orb_testing === "Treatment 1: Default Prices") {
                                            if (priceTextStandard) {
                                                priceTextStandard.textContent = priceStandard !== "N/A" ? `${priceStandard}` : "Price (USD): N/A";
                                            }
                                        
                                            let orb_icon = document.createElement("div");
                                        
                                            orb_icon.classList.add('orb-icon');
                                        
                                            priceContainerStandard.appendChild(orb_icon);
                                        
                                        } else if (localStorage.experiment_2025_01_orb_testing === "Treatment 2: 50 Orbs") {
                                            if (priceTextStandard) {
                                                priceTextStandard.textContent = `50`;
                                            }
                                        
                                            let orb_icon = document.createElement("div");
                                        
                                            orb_icon.classList.add('orb-icon');
                                        
                                            priceContainerStandard.appendChild(orb_icon);
                                        
                                        } else if (localStorage.experiment_2025_01_orb_testing === "Treatment 3: Dynamic") {

                                            if (apiCategory.price.currency === "discord_orb") {
                                                if (priceTextStandard) {
                                                    priceTextStandard.textContent = priceStandard !== "N/A" ? `${priceStandard}` : "Price (USD): N/A";
                                                }
                                            
                                                let orb_icon = document.createElement("div");
                                            
                                                orb_icon.classList.add('orb-icon');
                                            
                                                priceContainerStandard.appendChild(orb_icon);
                                            
                                            } else {
                                                if (priceTextStandard) {
                                                    priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "Price (USD): N/A";
                                                }
                                            }

                                        } else {
                                            if (priceTextStandard) {
                                                priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "Price (USD): N/A";
                                            }
                                        }

                                        if (apiCategory.new_text != null) {
                                            modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                <div class="unplublished-tag">
                                                    <p class="unplublished-tag-text">${apiCategory.new_text}</p>
                                                </div>
                                            `;
                                        }


                                        document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                            modal.classList.add('potion-wobble')
                                        });
                                
                                        document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                            modal.classList.remove('potion-wobble')
                                        });
                                        


                                        let modal_back = document.createElement("div");

                                        modal_back.classList.add('modalv2-back');
                                        modal_back.id = 'modalv2-back';

                                        document.body.appendChild(modal_back);

                                        setTimeout(() => {
                                            modal_back.classList.add('show');
                                        }, 1);


                                        modal.addEventListener('click', (event) => {
                                            if (event.target === modal) {
                                                modal.classList.remove('show');
                                                modal_back.classList.remove('show');
                                                setTimeout(() => {
                                                    modal.remove();
                                                    modal_back.remove();
                                                }, 300);
                                            }
                                        });

                                        document.querySelector("[data-close-product-card-button]").addEventListener('click', () => {
                                            modal.classList.remove('show');
                                            modal_back.classList.remove('show');
                                            setTimeout(() => {
                                                modal.remove();
                                                modal_back.remove();
                                            }, 300);
                                        });
                                    }
                                }


                                let priceStandard = "N/A";
                        
                                if (apiCategory.price) {
                                    priceStandard = apiCategory.price.amount;
                                }
                        
                                
                                const priceTextNitro = potionCard.querySelector("[data-price-nitro]");
                                const priceTextStandard = potionCard.querySelector("[data-price-standard]");

                                const priceContainerNitro = potionCard.querySelector("[data-price-nitro-container]");
                                const priceContainerStandard = potionCard.querySelector("[data-price-standard-container]");

                                const priceContainer = potionCard.querySelector("[data-shop-price-container]");

                                if (localStorage.experiment_2025_01_orb_testing === "Treatment 1: Default Prices") {
                                    if (priceTextStandard) {
                                        priceTextStandard.textContent = priceStandard !== "N/A" ? `${priceStandard}` : "Price (USD): N/A";
                                    }
                                
                                    let orb_icon = document.createElement("div");
                                
                                    orb_icon.classList.add('orb-icon');
                                
                                    priceContainerStandard.appendChild(orb_icon);
                                
                                } else if (localStorage.experiment_2025_01_orb_testing === "Treatment 2: 50 Orbs") {
                                    if (priceTextStandard) {
                                        priceTextStandard.textContent = `50`;
                                    }
                                
                                    let orb_icon = document.createElement("div");
                                
                                    orb_icon.classList.add('orb-icon');
                                
                                    priceContainerStandard.appendChild(orb_icon);
                                
                                } else if (localStorage.experiment_2025_01_orb_testing === "Treatment 3: Dynamic") {

                                    if (apiCategory.price.currency === "discord_orb") {
                                        if (priceTextStandard) {
                                            priceTextStandard.textContent = priceStandard !== "N/A" ? `${priceStandard}` : "Price (USD): N/A";
                                        }
                                    
                                        let orb_icon = document.createElement("div");
                                    
                                        orb_icon.classList.add('orb-icon');
                                    
                                        priceContainerStandard.appendChild(orb_icon);
                                    
                                    } else {
                                        if (priceTextStandard) {
                                            priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "Price (USD): N/A";
                                        }
                                    }

                                } else {
                                    if (priceTextStandard) {
                                        priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "Price (USD): N/A";
                                    }
                                }

                                potionCard.querySelector("[data-product-card-open-in-shop]").innerHTML = `
                                    <button class="card-button" onclick="location.href='${discordsupport}${apiCategory.support_id}';" title="Open this Potion's support article">Open Support Article</button>
                                `;

                                potionCard.addEventListener("mouseenter", () => {
                                    potionCard.classList.add('potion-wobble')
                                });
                        
                                potionCard.addEventListener("mouseleave", () => {
                                    potionCard.classList.remove('potion-wobble')
                                });
            
                                categoryOutput.append(potionCard);
                            } else {
                                // Default page handling
                                const category = categoryTemplate.content.cloneNode(true).children[0];
                                category.querySelector("[data-shop-category-banner]").id = apiCategory.sku_id;


                                // Category info modals

                                if (localStorage.experiment_2025_02_shop_category_modals === "Treatment 1: Enable category modals" || localStorage.experiment_2025_02_shop_category_modals === "Treatment 2: Enable category modals w/ data downloads") {
                                    category.querySelector("[data-shop-category-banner]").classList.add('clickable')
                                }


                                // Banner Image/Video asset
            
                                if (apiCategory.banner_asset) {
                                    if (apiCategory.banner_asset.animated != null) {
                                        if (localStorage.reduced_motion != "true") {
                                            if (apiCategory.banner_asset.static != null) {
                                                category.querySelector("[data-shop-banner-banner-container]").innerHTML = `
                                                    <img class="shop-category-banner-img" style="position: absolute; left: 0px; bottom: 0px; width: 1280px;" src="${apiCategory.banner_asset.static}">
                                                    <video autoplay muted class="shop-category-banner-img" style="position: absolute; left: 0px; bottom: 0px; width: 1280px; z-index: 1;" src="${apiCategory.banner_asset.animated}" loop></video>
                                                `;
                                            } else {
                                                category.querySelector("[data-shop-banner-banner-container]").innerHTML = `
                                                    <video autoplay muted class="shop-category-banner-img" style="position: absolute; left: 0px; bottom: 0px; width: 1280px; z-index: 1;" src="${apiCategory.banner_asset.animated}" loop></video>
                                                `;
                                            }
                                        } else if (apiCategory.banner_asset.static != null) {
                                            category.querySelector("[data-shop-category-banner-image]").src = `${apiCategory.banner_asset.static}`;
                                        } else {
                                            category.querySelector("[data-shop-category-banner-image]").src = `https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.banner}.png?size=4096`;
                                            category.querySelector("[data-shop-category-banner-image]").alt = apiCategory.name;
                                        }
                                    } else if (apiCategory.banner_asset.static != null) {
                                        category.querySelector("[data-shop-category-banner-image]").src = `${apiCategory.banner_asset.static}`;
                                    }
                                } else {
                                    category.querySelector("[data-shop-category-banner-image]").src = `https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.banner}.png?size=4096`;
                                    category.querySelector("[data-shop-category-banner-image]").alt = apiCategory.name;
                                }
                                

                                category.querySelector("[data-shop-banner-banner-container]").id = `${apiCategory.sku_id}-banner-banner-container`;


                                // Logo Image/Video asset
            
                                if (apiCategory.logo != null) {
                                    category.querySelector("[data-shop-category-logo-image]").src = `https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.logo}.png?size=4096`;
                                } else {
                                    category.querySelector("[data-shop-category-logo-image]").src = `https://cdn.yapper.shop/assets/31.png`;
                                }
                                category.querySelector("[data-shop-category-logo-image]").alt = apiCategory.name;

                                category.querySelector("[data-shop-category-logo-holder]").id = `${apiCategory.sku_id}-logo-container`;


            
                                category.querySelector("[data-shop-category-desc]").id = `${apiCategory.sku_id}-summary`;
                                category.querySelector("[data-shop-category-desc]").textContent = apiCategory.summary;


                                category.querySelector("[data-shop-discord-watermark-container]").id = `${apiCategory.sku_id}-discord-watermark-container`;


                                if (apiCategory.sku_id === FANTASY) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === ANIME) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === BREAKFAST) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === DISXCORE) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === FALL) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === HALLOWEEN) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === WINTER) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === MONSTERS) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === CYBERPUNK) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === LUNAR_NEW_YEAR) {
                                    if (apiCategory.banner === "1202069953306689626") {
                                        category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                        category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                    }
                                }
                                if (apiCategory.sku_id === ELEMENTS) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === ANIME_V2) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                    category.querySelector("[data-shop-category-desc]").style.color = 'black';
                                }
                                if (apiCategory.sku_id === SPRINGTOONS) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                    category.querySelector("[data-shop-category-desc]").style.color = 'black';
                                }
                                if (apiCategory.sku_id === SHY) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === LOFI_VIBES) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === GALAXY) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === FEELIN_RETRO) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === PIRATES) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === ARCADE) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === TIDE) {
                                    category.querySelector("[data-shop-category-logo-holder]").style.display = 'unset';
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === DARK_FANTASY) {
                                    category.querySelector("[data-shop-discord-watermark-container]").style.display = 'unset';
                                }
                                if (apiCategory.sku_id === ROBERT) {
                                    category.querySelector("[data-shop-category-desc]").style.color = 'black';
                                }
                                if (apiCategory.sku_id === DOJO) {
                                    category.querySelector("[data-shop-category-desc]").style.color = 'black';
                                }
                                if (apiCategory.sku_id === KAWAII_MODE) {
                                    category.querySelector("[data-shop-category-desc]").style.color = 'black';
                                }

                                if (localStorage.experiment_2025_02_shop_category_modals === "Treatment 1: Enable category modals" || localStorage.experiment_2025_02_shop_category_modals === "Treatment 2: Enable category modals w/ data downloads") {
                                    category.querySelector("[data-shop-category-banner]").classList.add('clickable');

                                    category.querySelector("[data-shop-category-banner]").addEventListener("click", () => {
                                        openCategoryModal();
                                    });
                                    

                                    async function openCategoryModal() {
                                        let modal = document.createElement("div");

                                        modal.classList.add('modalv2');

                                        modal.innerHTML = `
                                            <div class="category-modalv2-inner">
                                                <div class="category-modalv2-inner-left">
                                                    <p data-product-modal-sku-id></p>
                                                    <p style="font-size: large; font-weight: 900;" data-product-modal-name></p>
                                                    <p style="color: var(--8)" data-product-modal-summary></p>
                                                    <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ITEM_COUNT")}${apiCategory.products.length}</p>
                                                    <details>
                                                        <summary class="clickable" style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS")}</summary>
                                                        <div class="shop-category-modal-assets-container" data-shop-category-modal-assets-container></div>
                                                    </details>
                                                    <div class="shop-modal-review-container" data-shop-modal-review-container>
                                                        <p style="font-size: large; font-weight: 900;" data-shop-modal-review-title></p>
                                                    </div>
                                                </div>
                                                <div class="shop-modal-tag-container" data-shop-card-tag-container></div>
                                                <div data-modal-top-product-buttons>
                                                    <div title="Close" data-close-product-card-button>
                                                        <svg class="closeIcon_modal" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M17.3 18.7a1 1 0 0 0 1.4-1.4L13.42 12l5.3-5.3a1 1 0 0 0-1.42-1.4L12 10.58l-5.3-5.3a1 1 0 0 0-1.4 1.42L10.58 12l-5.3 5.3a1 1 0 1 0 1.42 1.4L12 13.42l5.3 5.3Z" class=""></path></svg>
                                                    </div>
                                                    <div title="Copy Link" data-share-product-card-button></div>
                                                    <div title="Download Data" data-download-product-card-button></div>
                                                </div>
                                            </div>
                                        `;

                                        if (localStorage.experiment_2025_03_item_reviews === "Treatment 1: Enabled" || localStorage.experiment_2025_03_item_reviews === "Treatment 2: Simulate not logged in" || localStorage.experiment_2025_03_item_reviews === "Treatment 3: Simulate logged in") {
                                            modal.querySelector("[data-shop-modal-review-title]").textContent = `${getTextString("SHOP_REVIEWS_TITLE")}`;

                                            let reviewLoadingElement = document.createElement("div");
                                            reviewLoadingElement.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_REVIEWS_LOADING")}</p>
                                            `;
                                            reviewLoadingElement.classList.add("review-element");
                                            modal.querySelector("[data-shop-modal-review-container]").appendChild(reviewLoadingElement);
                                            fetch(`https://shop-archives-api.vercel.app/api/reviews?sku_id=${apiCategory.sku_id}`, {
                                                method: "GET",
                                                headers: {
                                                    "Password": api_password,
                                                    "Token": api_token
                                                }
                                            }) // Replace with your API URL
                                            .then(response => response.json())
                                            .then(data => {
                                                if (data.message) {
                                                    const reviewContainer = modal.querySelector("[data-shop-modal-review-container]");
                                                    let reviewElement = document.createElement("div");
    
                                                    reviewElement.classList.add("review-element");
                                                    if (data.message === "Unknown SKU") {
            
                                                        reviewElement.innerHTML = `
                                                            <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_REVIEWS_NONE_TITLE")}</p>
                                                            <p style="color: var(--8)">${getTextString("SHOP_REVIEWS_NONE_DESC")}</p>
                                                        `;
                                                    } else if (data.message === "Missing Access") {
                                                        
                                                        reviewElement.innerHTML = `
                                                            <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_REVIEWS_NO_ACCESS_TITLE")}</p>
                                                            <p style="color: var(--8)">${getTextString("SHOP_REVIEWS_NO_ACCESS_DESC")}</p>
                                                        `;
                                                    } else {
                                                        
                                                        reviewElement.innerHTML = `
                                                            <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_REVIEWS_ERROR_TITLE")}</p>
                                                            <p style="color: var(--8)">${getTextString("SHOP_REVIEWS_ERROR_DESC")}</p>
                                                        `;
                                                    }
                                                    reviewContainer.appendChild(reviewElement);
                                                } else {
                                                    renderReviews(data)
                                                }

                                                reviewLoadingElement.remove();
                                                
                                            })
                                            .catch(error => console.error('Error fetching data:', error));
    
                                            function renderReviews(datareview) {
                                                const reviewContainer = modal.querySelector("[data-shop-modal-review-container]");
                                                datareview.forEach(review => {
                                                    let reviewElement = document.createElement("div");
    
                                                    reviewElement.classList.add("review-element");
        
                                                    reviewElement.innerHTML = `
                                                        <div class="shop-modal-review-name-container" data-shop-modal-review-name-container>
                                                            <p class="shop-modal-review-name" style="font-size: large; font-weight: 900;">${review.reviewer.name}</p>
                                                        </div>
                                                        <div class="shop-modal-review-star-container" data-shop-modal-review-star-container></div>
                                                        <p style="color: var(--8)">${review.review}</p>
                                                    `;

                                                    if (review.reviewer.moderator === "true") {
                                                        let moderatorNametag = document.createElement("p");
    
                                                        moderatorNametag.classList.add("shop-modal-review-nametag-moderator");
                                                        moderatorNametag.textContent = `${getTextString("SHOP_REVIEWS_NAMETAG_MODERATOR")}`;
                                                        
                                                        reviewElement.querySelector("[data-shop-modal-review-name-container]").appendChild(moderatorNametag);
                                                    } else if (review.reviewer.special === "true") {
                                                        let moderatorNametag = document.createElement("p");
    
                                                        moderatorNametag.classList.add("shop-modal-review-nametag-special");
                                                        moderatorNametag.textContent = `${getTextString("SHOP_REVIEWS_NAMETAG_SPECIAL")}`;
                                                        
                                                        reviewElement.querySelector("[data-shop-modal-review-name-container]").appendChild(moderatorNametag);
                                                    }
        
                                                    if (review.stars === "5") {
                                                        reviewElement.querySelector("[data-shop-modal-review-star-container]").innerHTML = `
                                                            <img class="shop-modal-review-stars-img" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMTIwIDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMTMxXzIxKSI+CjxwYXRoIGQ9Ik0xMiAwTDE0LjY5NDIgOC4yOTE4SDIzLjQxMjdMMTYuMzU5MyAxMy40MTY0TDE5LjA1MzQgMjEuNzA4MkwxMiAxNi41ODM2TDQuOTQ2NTggMjEuNzA4Mkw3LjY0MDc0IDEzLjQxNjRMMC41ODczMjIgOC4yOTE4SDkuMzA1ODNMMTIgMFoiIGZpbGw9IiNGRkVDM0UiLz4KPHBhdGggZD0iTTM2IDBMMzguNjk0MiA4LjI5MThINDcuNDEyN0w0MC4zNTkzIDEzLjQxNjRMNDMuMDUzNCAyMS43MDgyTDM2IDE2LjU4MzZMMjguOTQ2NiAyMS43MDgyTDMxLjY0MDcgMTMuNDE2NEwyNC41ODczIDguMjkxOEgzMy4zMDU4TDM2IDBaIiBmaWxsPSIjRkZFQzNFIi8+CjxwYXRoIGQ9Ik02MCAwTDYyLjY5NDIgOC4yOTE4SDcxLjQxMjdMNjQuMzU5MyAxMy40MTY0TDY3LjA1MzQgMjEuNzA4Mkw2MCAxNi41ODM2TDUyLjk0NjYgMjEuNzA4Mkw1NS42NDA3IDEzLjQxNjRMNDguNTg3MyA4LjI5MThINTcuMzA1OEw2MCAwWiIgZmlsbD0iI0ZGRUMzRSIvPgo8cGF0aCBkPSJNODQgMEw4Ni42OTQyIDguMjkxOEg5NS40MTI3TDg4LjM1OTMgMTMuNDE2NEw5MS4wNTM0IDIxLjcwODJMODQgMTYuNTgzNkw3Ni45NDY2IDIxLjcwODJMNzkuNjQwNyAxMy40MTY0TDcyLjU4NzMgOC4yOTE4SDgxLjMwNThMODQgMFoiIGZpbGw9IiNGRkVDM0UiLz4KPHBhdGggZD0iTTEwOCAwTDExMC42OTQgOC4yOTE4SDExOS40MTNMMTEyLjM1OSAxMy40MTY0TDExNS4wNTMgMjEuNzA4MkwxMDggMTYuNTgzNkwxMDAuOTQ3IDIxLjcwODJMMTAzLjY0MSAxMy40MTY0TDk2LjU4NzMgOC4yOTE4SDEwNS4zMDZMMTA4IDBaIiBmaWxsPSIjRkZFQzNFIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTMxXzIxIj4KPHJlY3Qgd2lkdGg9IjEyMCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K"></img>
                                                        `;
                                                    } else if (review.stars === "4") {
                                                        reviewElement.querySelector("[data-shop-modal-review-star-container]").innerHTML = `
                                                            <img class="shop-modal-review-stars-img" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMTIwIDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMTMxXzMyKSI+CjxwYXRoIGQ9Ik0xMiAwTDE0LjY5NDIgOC4yOTE4SDIzLjQxMjdMMTYuMzU5MyAxMy40MTY0TDE5LjA1MzQgMjEuNzA4MkwxMiAxNi41ODM2TDQuOTQ2NTggMjEuNzA4Mkw3LjY0MDc0IDEzLjQxNjRMMC41ODczMjIgOC4yOTE4SDkuMzA1ODNMMTIgMFoiIGZpbGw9IiNGRkVDM0UiLz4KPHBhdGggZD0iTTM2IDBMMzguNjk0MiA4LjI5MThINDcuNDEyN0w0MC4zNTkzIDEzLjQxNjRMNDMuMDUzNCAyMS43MDgyTDM2IDE2LjU4MzZMMjguOTQ2NiAyMS43MDgyTDMxLjY0MDcgMTMuNDE2NEwyNC41ODczIDguMjkxOEgzMy4zMDU4TDM2IDBaIiBmaWxsPSIjRkZFQzNFIi8+CjxwYXRoIGQ9Ik02MCAwTDYyLjY5NDIgOC4yOTE4SDcxLjQxMjdMNjQuMzU5MyAxMy40MTY0TDY3LjA1MzQgMjEuNzA4Mkw2MCAxNi41ODM2TDUyLjk0NjYgMjEuNzA4Mkw1NS42NDA3IDEzLjQxNjRMNDguNTg3MyA4LjI5MThINTcuMzA1OEw2MCAwWiIgZmlsbD0iI0ZGRUMzRSIvPgo8cGF0aCBkPSJNODQgMEw4Ni42OTQyIDguMjkxOEg5NS40MTI3TDg4LjM1OTMgMTMuNDE2NEw5MS4wNTM0IDIxLjcwODJMODQgMTYuNTgzNkw3Ni45NDY2IDIxLjcwODJMNzkuNjQwNyAxMy40MTY0TDcyLjU4NzMgOC4yOTE4SDgxLjMwNThMODQgMFoiIGZpbGw9IiNGRkVDM0UiLz4KPHBhdGggZD0iTTEwOCAwTDExMC42OTQgOC4yOTE4SDExOS40MTNMMTEyLjM1OSAxMy40MTY0TDExNS4wNTMgMjEuNzA4MkwxMDggMTYuNTgzNkwxMDAuOTQ3IDIxLjcwODJMMTAzLjY0MSAxMy40MTY0TDk2LjU4NzMgOC4yOTE4SDEwNS4zMDZMMTA4IDBaIiBmaWxsPSIjNTc1NzU3Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTMxXzMyIj4KPHJlY3Qgd2lkdGg9IjEyMCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K"></img>
                                                        `;
                                                    } else if (review.stars === "3") {
                                                        reviewElement.querySelector("[data-shop-modal-review-star-container]").innerHTML = `
                                                            <img class="shop-modal-review-stars-img" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMTIwIDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMTMxXzM5KSI+CjxwYXRoIGQ9Ik0xMiAwTDE0LjY5NDIgOC4yOTE4SDIzLjQxMjdMMTYuMzU5MyAxMy40MTY0TDE5LjA1MzQgMjEuNzA4MkwxMiAxNi41ODM2TDQuOTQ2NTggMjEuNzA4Mkw3LjY0MDc0IDEzLjQxNjRMMC41ODczMjIgOC4yOTE4SDkuMzA1ODNMMTIgMFoiIGZpbGw9IiNGRkVDM0UiLz4KPHBhdGggZD0iTTM2IDBMMzguNjk0MiA4LjI5MThINDcuNDEyN0w0MC4zNTkzIDEzLjQxNjRMNDMuMDUzNCAyMS43MDgyTDM2IDE2LjU4MzZMMjguOTQ2NiAyMS43MDgyTDMxLjY0MDcgMTMuNDE2NEwyNC41ODczIDguMjkxOEgzMy4zMDU4TDM2IDBaIiBmaWxsPSIjRkZFQzNFIi8+CjxwYXRoIGQ9Ik02MCAwTDYyLjY5NDIgOC4yOTE4SDcxLjQxMjdMNjQuMzU5MyAxMy40MTY0TDY3LjA1MzQgMjEuNzA4Mkw2MCAxNi41ODM2TDUyLjk0NjYgMjEuNzA4Mkw1NS42NDA3IDEzLjQxNjRMNDguNTg3MyA4LjI5MThINTcuMzA1OEw2MCAwWiIgZmlsbD0iI0ZGRUMzRSIvPgo8cGF0aCBkPSJNODQgMEw4Ni42OTQyIDguMjkxOEg5NS40MTI3TDg4LjM1OTMgMTMuNDE2NEw5MS4wNTM0IDIxLjcwODJMODQgMTYuNTgzNkw3Ni45NDY2IDIxLjcwODJMNzkuNjQwNyAxMy40MTY0TDcyLjU4NzMgOC4yOTE4SDgxLjMwNThMODQgMFoiIGZpbGw9IiM1NzU3NTciLz4KPHBhdGggZD0iTTEwOCAwTDExMC42OTQgOC4yOTE4SDExOS40MTNMMTEyLjM1OSAxMy40MTY0TDExNS4wNTMgMjEuNzA4MkwxMDggMTYuNTgzNkwxMDAuOTQ3IDIxLjcwODJMMTAzLjY0MSAxMy40MTY0TDk2LjU4NzMgOC4yOTE4SDEwNS4zMDZMMTA4IDBaIiBmaWxsPSIjNTc1NzU3Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTMxXzM5Ij4KPHJlY3Qgd2lkdGg9IjEyMCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K"></img>
                                                        `;
                                                    } else if (review.stars === "2") {
                                                        reviewElement.querySelector("[data-shop-modal-review-star-container]").innerHTML = `
                                                            <img class="shop-modal-review-stars-img" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMTIwIDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMTMxXzQ2KSI+CjxwYXRoIGQ9Ik0xMiAwTDE0LjY5NDIgOC4yOTE4SDIzLjQxMjdMMTYuMzU5MyAxMy40MTY0TDE5LjA1MzQgMjEuNzA4MkwxMiAxNi41ODM2TDQuOTQ2NTggMjEuNzA4Mkw3LjY0MDc0IDEzLjQxNjRMMC41ODczMjIgOC4yOTE4SDkuMzA1ODNMMTIgMFoiIGZpbGw9IiNGRkVDM0UiLz4KPHBhdGggZD0iTTM2IDBMMzguNjk0MiA4LjI5MThINDcuNDEyN0w0MC4zNTkzIDEzLjQxNjRMNDMuMDUzNCAyMS43MDgyTDM2IDE2LjU4MzZMMjguOTQ2NiAyMS43MDgyTDMxLjY0MDcgMTMuNDE2NEwyNC41ODczIDguMjkxOEgzMy4zMDU4TDM2IDBaIiBmaWxsPSIjRkZFQzNFIi8+CjxwYXRoIGQ9Ik02MCAwTDYyLjY5NDIgOC4yOTE4SDcxLjQxMjdMNjQuMzU5MyAxMy40MTY0TDY3LjA1MzQgMjEuNzA4Mkw2MCAxNi41ODM2TDUyLjk0NjYgMjEuNzA4Mkw1NS42NDA3IDEzLjQxNjRMNDguNTg3MyA4LjI5MThINTcuMzA1OEw2MCAwWiIgZmlsbD0iIzU3NTc1NyIvPgo8cGF0aCBkPSJNODQgMEw4Ni42OTQyIDguMjkxOEg5NS40MTI3TDg4LjM1OTMgMTMuNDE2NEw5MS4wNTM0IDIxLjcwODJMODQgMTYuNTgzNkw3Ni45NDY2IDIxLjcwODJMNzkuNjQwNyAxMy40MTY0TDcyLjU4NzMgOC4yOTE4SDgxLjMwNThMODQgMFoiIGZpbGw9IiM1NzU3NTciLz4KPHBhdGggZD0iTTEwOCAwTDExMC42OTQgOC4yOTE4SDExOS40MTNMMTEyLjM1OSAxMy40MTY0TDExNS4wNTMgMjEuNzA4MkwxMDggMTYuNTgzNkwxMDAuOTQ3IDIxLjcwODJMMTAzLjY0MSAxMy40MTY0TDk2LjU4NzMgOC4yOTE4SDEwNS4zMDZMMTA4IDBaIiBmaWxsPSIjNTc1NzU3Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTMxXzQ2Ij4KPHJlY3Qgd2lkdGg9IjEyMCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K"></img>
                                                        `;
                                                    } else if (review.stars === "1") {
                                                        reviewElement.querySelector("[data-shop-modal-review-star-container]").innerHTML = `
                                                            <img class="shop-modal-review-stars-img" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMTIwIDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMTMxXzUzKSI+CjxwYXRoIGQ9Ik0xMiAwTDE0LjY5NDIgOC4yOTE4SDIzLjQxMjdMMTYuMzU5MyAxMy40MTY0TDE5LjA1MzQgMjEuNzA4MkwxMiAxNi41ODM2TDQuOTQ2NTggMjEuNzA4Mkw3LjY0MDc0IDEzLjQxNjRMMC41ODczMjIgOC4yOTE4SDkuMzA1ODNMMTIgMFoiIGZpbGw9IiNGRkVDM0UiLz4KPHBhdGggZD0iTTM2IDBMMzguNjk0MiA4LjI5MThINDcuNDEyN0w0MC4zNTkzIDEzLjQxNjRMNDMuMDUzNCAyMS43MDgyTDM2IDE2LjU4MzZMMjguOTQ2NiAyMS43MDgyTDMxLjY0MDcgMTMuNDE2NEwyNC41ODczIDguMjkxOEgzMy4zMDU4TDM2IDBaIiBmaWxsPSIjNTc1NzU3Ii8+CjxwYXRoIGQ9Ik02MCAwTDYyLjY5NDIgOC4yOTE4SDcxLjQxMjdMNjQuMzU5MyAxMy40MTY0TDY3LjA1MzQgMjEuNzA4Mkw2MCAxNi41ODM2TDUyLjk0NjYgMjEuNzA4Mkw1NS42NDA3IDEzLjQxNjRMNDguNTg3MyA4LjI5MThINTcuMzA1OEw2MCAwWiIgZmlsbD0iIzU3NTc1NyIvPgo8cGF0aCBkPSJNODQgMEw4Ni42OTQyIDguMjkxOEg5NS40MTI3TDg4LjM1OTMgMTMuNDE2NEw5MS4wNTM0IDIxLjcwODJMODQgMTYuNTgzNkw3Ni45NDY2IDIxLjcwODJMNzkuNjQwNyAxMy40MTY0TDcyLjU4NzMgOC4yOTE4SDgxLjMwNThMODQgMFoiIGZpbGw9IiM1NzU3NTciLz4KPHBhdGggZD0iTTEwOCAwTDExMC42OTQgOC4yOTE4SDExOS40MTNMMTEyLjM1OSAxMy40MTY0TDExNS4wNTMgMjEuNzA4MkwxMDggMTYuNTgzNkwxMDAuOTQ3IDIxLjcwODJMMTAzLjY0MSAxMy40MTY0TDk2LjU4NzMgOC4yOTE4SDEwNS4zMDZMMTA4IDBaIiBmaWxsPSIjNTc1NzU3Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTMxXzUzIj4KPHJlY3Qgd2lkdGg9IjEyMCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K"></img>
                                                        `;
                                                    } else if (review.stars === "0") {
                                                        reviewElement.querySelector("[data-shop-modal-review-star-container]").innerHTML = `
                                                            <img class="shop-modal-review-stars-img" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMTIwIDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMTMyXzYwKSI+CjxwYXRoIGQ9Ik0xMiAwTDE0LjY5NDIgOC4yOTE4SDIzLjQxMjdMMTYuMzU5MyAxMy40MTY0TDE5LjA1MzQgMjEuNzA4MkwxMiAxNi41ODM2TDQuOTQ2NTggMjEuNzA4Mkw3LjY0MDc0IDEzLjQxNjRMMC41ODczMjIgOC4yOTE4SDkuMzA1ODNMMTIgMFoiIGZpbGw9IiM1NzU3NTciLz4KPHBhdGggZD0iTTM2IDBMMzguNjk0MiA4LjI5MThINDcuNDEyN0w0MC4zNTkzIDEzLjQxNjRMNDMuMDUzNCAyMS43MDgyTDM2IDE2LjU4MzZMMjguOTQ2NiAyMS43MDgyTDMxLjY0MDcgMTMuNDE2NEwyNC41ODczIDguMjkxOEgzMy4zMDU4TDM2IDBaIiBmaWxsPSIjNTc1NzU3Ii8+CjxwYXRoIGQ9Ik02MCAwTDYyLjY5NDIgOC4yOTE4SDcxLjQxMjdMNjQuMzU5MyAxMy40MTY0TDY3LjA1MzQgMjEuNzA4Mkw2MCAxNi41ODM2TDUyLjk0NjYgMjEuNzA4Mkw1NS42NDA3IDEzLjQxNjRMNDguNTg3MyA4LjI5MThINTcuMzA1OEw2MCAwWiIgZmlsbD0iIzU3NTc1NyIvPgo8cGF0aCBkPSJNODQgMEw4Ni42OTQyIDguMjkxOEg5NS40MTI3TDg4LjM1OTMgMTMuNDE2NEw5MS4wNTM0IDIxLjcwODJMODQgMTYuNTgzNkw3Ni45NDY2IDIxLjcwODJMNzkuNjQwNyAxMy40MTY0TDcyLjU4NzMgOC4yOTE4SDgxLjMwNThMODQgMFoiIGZpbGw9IiM1NzU3NTciLz4KPHBhdGggZD0iTTEwOCAwTDExMC42OTQgOC4yOTE4SDExOS40MTNMMTEyLjM1OSAxMy40MTY0TDExNS4wNTMgMjEuNzA4MkwxMDggMTYuNTgzNkwxMDAuOTQ3IDIxLjcwODJMMTAzLjY0MSAxMy40MTY0TDk2LjU4NzMgOC4yOTE4SDEwNS4zMDZMMTA4IDBaIiBmaWxsPSIjNTc1NzU3Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTMyXzYwIj4KPHJlY3Qgd2lkdGg9IjEyMCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K"></img>
                                                        `;
                                                    }
        
                                                    reviewContainer.appendChild(reviewElement);
                                                });
                                            }
                                        }


                                        const asset_container = modal.querySelector("[data-shop-category-modal-assets-container]");

                                        if (apiCategory.banner != null) {
                                            let banner_asset = document.createElement("div");

                                            banner_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_BANNER")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.banner}</p>
                                                <img class="category-modalv2-inner-img-banner" src="https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.banner}.png?size=4096"></img> 
                                            `;

                                            asset_container.appendChild(banner_asset);
                                        }

                                        if (apiCategory.banner_asset && apiCategory.banner_asset.static != null) {
                                            let banner_asset = document.createElement("div");

                                            banner_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_BANNER_ASSET_1")}</p>
                                                <img class="category-modalv2-inner-img-banner" src="${apiCategory.banner_asset.static}"></img> 
                                            `;

                                            asset_container.appendChild(banner_asset);
                                        }

                                        if (apiCategory.banner_asset && apiCategory.banner_asset.animated != null) {
                                            let banner_asset = document.createElement("div");

                                            banner_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_BANNER_ASSET_2")}</p>
                                                <video autoplay muted class="category-modalv2-inner-img-banner" src="${apiCategory.banner_asset.animated}" loop></video> 
                                            `;

                                            asset_container.appendChild(banner_asset);
                                        }

                                        if (apiCategory.logo != null) {
                                            let logo_asset = document.createElement("div");

                                            logo_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_LOGO")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.logo}</p>
                                                <img class="category-modalv2-inner-img-logo" src="https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.logo}.png?size=4096"></img> 
                                            `;

                                            asset_container.appendChild(logo_asset);
                                        }

                                        if (apiCategory.mobile_bg != null) {
                                            let mobile_bg_asset = document.createElement("div");

                                            mobile_bg_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_MOBILE_BG")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.mobile_bg}</p>
                                                <img class="category-modalv2-inner-img-mobile_bg" src="https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.mobile_bg}.png?size=4096"></img> 
                                            `;

                                            asset_container.appendChild(mobile_bg_asset);
                                        }

                                        if (apiCategory.pdp_bg != null) {
                                            let pdp_bg_asset = document.createElement("div");

                                            pdp_bg_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_PDP_BG")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.pdp_bg}</p>
                                                <img class="category-modalv2-inner-img-pdp_bg" src="https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.pdp_bg}.png?size=4096"></img> 
                                            `;

                                            asset_container.appendChild(pdp_bg_asset);
                                        }

                                        if (apiCategory.success_modal_bg != null) {
                                            let success_modal_bg_asset = document.createElement("div");

                                            success_modal_bg_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_SUCCESS_MODAL_BG")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.success_modal_bg}</p>
                                                <img class="category-modalv2-inner-img-success_modal_bg" src="https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.success_modal_bg}.png?size=4096"></img> 
                                            `;

                                            asset_container.appendChild(success_modal_bg_asset);
                                        }

                                        if (apiCategory.mobile_banner != null) {
                                            let mobile_banner_asset = document.createElement("div");

                                            mobile_banner_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_MOBILE_BANNER")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.mobile_banner}</p>
                                                <img class="category-modalv2-inner-img-mobile_banner" src="https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.mobile_banner}.png?size=4096"></img> 
                                            `;

                                            asset_container.appendChild(mobile_banner_asset);
                                        }

                                        if (apiCategory.featured_block != null) {
                                            let featured_block_asset = document.createElement("div");

                                            featured_block_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_FEATURED_BLOCK")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.featured_block}</p>
                                                <img class="category-modalv2-inner-img-featured_block" src="https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.featured_block}.png?size=4096"></img> 
                                            `;

                                            asset_container.appendChild(featured_block_asset);
                                        }

                                        if (apiCategory.hero_banner != null) {
                                            let hero_banner_asset = document.createElement("div");

                                            hero_banner_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_HERO_BANNER")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.hero_banner}</p>
                                                <img class="category-modalv2-inner-img-hero_banner" src="https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.hero_banner}.png?size=4096"></img> 
                                            `;

                                            asset_container.appendChild(hero_banner_asset);
                                        }

                                        if (apiCategory.hero_banner_asset && apiCategory.hero_banner_asset.static != null) {
                                            let hero_banner_asset = document.createElement("div");

                                            hero_banner_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_HERO_BANNER_ASSET_1")}</p>
                                                <img class="category-modalv2-inner-img-banner" src="${apiCategory.hero_banner_asset.static}"></img> 
                                            `;

                                            asset_container.appendChild(hero_banner_asset);
                                        }

                                        if (apiCategory.hero_banner_asset && apiCategory.hero_banner_asset.animated != null) {
                                            let hero_banner_asset = document.createElement("div");

                                            hero_banner_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_HERO_BANNER_ASSET_2")}</p>
                                                <video autoplay muted class="category-modalv2-inner-img-banner" src="${apiCategory.hero_banner_asset.animated}" loop></video> 
                                            `;

                                            asset_container.appendChild(hero_banner_asset);
                                        }

                                        if (apiCategory.wide_banner != null) {
                                            let wide_banner_asset = document.createElement("div");

                                            wide_banner_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_WIDE_BANNER")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.wide_banner}</p>
                                                <img class="category-modalv2-inner-img-wide_banner" src="https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.wide_banner}.png?size=4096"></img> 
                                            `;

                                            asset_container.appendChild(wide_banner_asset);
                                        }

                                        if (apiCategory.hero_logo != null) {
                                            let hero_logo_asset = document.createElement("div");

                                            hero_logo_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_HERO_LOGO")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.hero_logo}</p>
                                                <img class="category-modalv2-inner-img-hero_logo" src="https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.hero_logo}.png?size=4096"></img> 
                                            `;

                                            asset_container.appendChild(hero_logo_asset);
                                        }

                                        if (apiCategory.category_bg != null) {
                                            let category_bg_asset = document.createElement("div");

                                            category_bg_asset.innerHTML = `
                                                <p style="font-size: large; font-weight: 900;">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_CATEGORY_BG")}</p>
                                                <p style="color: var(--8)">${getTextString("SHOP_CATEGORY_MODAL_ASSETS_ID")}${apiCategory.category_bg}</p>
                                                <img class="category-modalv2-inner-img-category_bg" src="https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.category_bg}.png?size=4096"></img> 
                                            `;

                                            asset_container.appendChild(category_bg_asset);
                                        }

                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `${getTextString("SHOP_CATEGORY_MODAL_SKU_ID")}${apiCategory.sku_id}`;
                                        modal.querySelector("[data-product-modal-name]").textContent = apiCategory.name;
                                        modal.querySelector("[data-product-modal-summary]").textContent = apiCategory.summary;

                                        document.body.appendChild(modal);

                                        setTimeout(() => {
                                            modal.classList.add('show');
                                        }, 1);

                                        
                                        if (localStorage.experiment_2025_02_shop_category_modals === "Treatment 2: Enable category modals w/ data downloads") {
                                            modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${apiCategory.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                            `;
                                        }

                                        modal.querySelector("[data-share-product-card-button]").style.display = 'none';


                                        const unpublishedAt = new Date(apiCategory.unpublished_at);
                    
                                        if (apiCategory.unpublished_at && !isNaN(unpublishedAt.getTime())) {
                    
                                            function updateTimer() {
                                                const now = new Date();
                                                const timeDiff = unpublishedAt - now;
                    
                                                if (timeDiff <= 0) {
                                                    modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${getTextString("SHOP_CATEGORY_NOT_IN_STORE")}</p>
                                                        </div>
                                                    `;
                                                    clearInterval(timerInterval);
                                                } else {
                                                    const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                    const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                    const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                    
                                                    modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${days}${getTextString("SHOP_CATEGORY_DAYS_LEFT_IN_STORE")}</p>
                                                        </div>
                                                    `;
                                                }
                                            }
                    
                                            const timerInterval = setInterval(updateTimer, 1000);
                                            updateTimer();
                                        }
                                        


                                        let modal_back = document.createElement("div");

                                        modal_back.classList.add('modalv2-back');
                                        modal_back.id = 'modalv2-back';

                                        document.body.appendChild(modal_back);

                                        setTimeout(() => {
                                            modal_back.classList.add('show');
                                        }, 1);


                                        modal.addEventListener('click', (event) => {
                                            if (event.target === modal) {
                                                modal.classList.remove('show');
                                                modal_back.classList.remove('show');
                                                setTimeout(() => {
                                                    modal.remove();
                                                    modal_back.remove();
                                                }, 300);
                                            }
                                        });

                                        document.querySelector("[data-close-product-card-button]").addEventListener('click', () => {
                                            modal.classList.remove('show');
                                            modal_back.classList.remove('show');
                                            setTimeout(() => {
                                                modal.remove();
                                                modal_back.remove();
                                            }, 300);
                                        });
                                    }
                                }


                                const unpublishedAt = new Date(apiCategory.unpublished_at);
                            
                                if (apiCategory.unpublished_at && !isNaN(unpublishedAt.getTime())) {
                    
                                    function updateTimer() {
                                        const now = new Date();
                                        const timeDiff = unpublishedAt - now;
                    
                                        if (timeDiff <= 0) {
                                            category.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                <div class="unplublished-tag">
                                                    <p class="unplublished-tag-text">${getTextString("SHOP_CATEGORY_NOT_IN_STORE")}</p>
                                                </div>
                                            `;
                                            clearInterval(timerInterval);
                                        } else {
                                            const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                            const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                            const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                    
                                            category.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                <div class="unplublished-tag">
                                                    <p class="unplublished-tag-text">${days}${getTextString("SHOP_CATEGORY_DAYS_LEFT_IN_STORE")}</p>
                                                </div>
                                            `;
                                        }
                                    }
                    
                                    const timerInterval = setInterval(updateTimer, 1000);
                                    updateTimer();
                                }

            
                                const cardOutput = category.querySelector("[data-shop-category-card-holder]");
                                if (cardOutput) {
                                    for (const product of apiCategory.products) {
                                        const cardTemplate = document.querySelector("[data-shop-item-card-template]");
                                        const card = cardTemplate.content.cloneNode(true).children[0];

                                        if (product.type === NONE) {
                                            card.classList.add("type_100");
                                            card.classList.add('hidden')
                                        } else if (product.type === AVATAR_DECORATION) {
                                            product.items.forEach(item => {
                                                
                                                card.classList.add("type_0");
                                                // Set the innerHTML for the preview holder
                                                const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                                previewHolder.classList.add('avatar-decoration-image');
                                                
                                                // Set the initial image for the deco card
                                                const imgElement = document.createElement("img");
                                                imgElement.id = "shop-card-deco-image";
                                                imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                
                                                previewHolder.appendChild(imgElement);

                                                const bgimg = document.createElement("div");
                                                bgimg.id = "shop-card-deco-bg-image";
                                                
                                                previewHolder.appendChild(bgimg);
                                        
                                                // Set the product details
                                                if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                                } else {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                }
                                                card.querySelector("[data-product-card-name]").textContent = product.name;
                                                card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                        
                                                // Hover effect: Change the image src on mouse enter and leave
                                                if (localStorage.reduced_motion != "true") {
                                                    card.addEventListener("mouseenter", () => {
                                                        imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                        if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                            bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                        }
                                                    });
                                            
                                                    card.addEventListener("mouseleave", () => {
                                                        imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                        bgimg.style.backgroundImage = `url(data:image/png;base64,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)`;
                                                    });
                                                }
                                                
                                            });
                                        } else if (product.type === PROFILE_EFFECT) {
                                            card.classList.add("type_1");

                                            if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                            } else {
                                                card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                            }
                                            card.querySelector("[data-product-card-name]").textContent = product.name;
                                            card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                            
                                            // Ensure the item ID is accessible here
                                            let itemId = undefined;
                                            if (Array.isArray(product.items)) {
                                                // If items is an array, find the item with type 1 and get its id
                                                const item = product.items.find(item => item.type === 1);
                                                if (item) {
                                                    itemId = item.id;
                                                }
                                            } else if (product.items && product.items.type === 1) {
                                                // If items is an object and has type 1, get its id
                                                itemId = product.items.id;
                                            }
                                        
                                        
                                            // Fetch profile effects API only if not already cached
                                            if (!profileEffectsCache) {
                                                const response = await fetch(api + PROFILE_EFFECTS, {
                                                    method: "GET",
                                                    headers: {
                                                        "Password": api_password,
                                                        "Token": api_token
                                                    }
                                                });
                                                const effectsData = await response.json();
                                                profileEffectsCache = effectsData.profile_effect_configs;
                                            }
                                        
                                            // Find matching profile effect
                                            const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                        
                                            if (matchingEffect) {
                                                const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                                previewHolder.classList.add('profile-effect-image');
                                        
                                                previewHolder.innerHTML = `
                                                    <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                `;
                                        
                                                // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                const imgElement = card.querySelector("img");
                                        
                                                if (localStorage.reduced_motion != "true") {
                                                    card.addEventListener("mouseenter", () => {
                                                        if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                            const effectUrl = matchingEffect.effects[0]?.src;
                                                            imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                        }
                                                    });
                                            
                                                    card.addEventListener("mouseleave", () => {
                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                    });
                                                } else {
                                                    card.addEventListener("mouseenter", () => {
                                                        imgElement.src = matchingEffect.reducedMotionSrc;
                                                    });
                                            
                                                    card.addEventListener("mouseleave", () => {
                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                    });
                                                }
                                            }
                                        } else if (product.type === NAMEPLATE) {
                                            card.classList.add("type_2");

                                            if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                            } else {
                                                card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                            }
                                            card.querySelector("[data-product-card-name]").textContent = product.name;
                                            card.querySelector("[data-product-card-summary]").textContent = product.summary;

                                            const previewHolder = card.querySelector("[data-shop-card-preview-holder]");

                                            if (localStorage.discord_username && localStorage.discord_username != '') {
                                                previewName = localStorage.discord_username;
                                            } else {
                                                previewName = 'Discord User'
                                            }

                                            previewHolder.innerHTML = `
                                                <div class="nameplate-null-user">
                                                    <div class="nameplate-null-user-avatar"></div>
                                                    <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                </div>
                                                <div class="nameplate-null-user">
                                                    <div class="nameplate-null-user-avatar"></div>
                                                    <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                </div>
                                                <div class="nameplate-null-user" data-user-nameplate-preview>
                                                    <video muted loop class="nameplate-null-user" style="position: absolute;" data-user-nameplate-preview-img></video>
                                                    <div class="nameplate-user-avatar" data-nameplate-user-random-avatar></div>
                                                    <p class="nameplate-user-name">${previewName}</p>
                                                </div>
                                                <div class="nameplate-null-user">
                                                    <div class="nameplate-null-user-avatar"></div>
                                                    <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                </div>
                                                <div class="nameplate-null-user">
                                                    <div class="nameplate-null-user-avatar"></div>
                                                    <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                </div>
                                            `;

                                            product.items.forEach(item => {
                                                const nameplatePreview = previewHolder.querySelector("[data-user-nameplate-preview]");
                                                const paletteName = item.palette;
                                                const asset = `https://cdn.discordapp.com/assets/collectibles/${item.asset}asset.webm`;
                                                const bgcolor = nameplate_palettes[paletteName].darkBackground;

                                                const videoElement = previewHolder.querySelector("[data-user-nameplate-preview-img]");

                                                videoElement.src = asset;

                                                nameplatePreview.style.backgroundImage = `linear-gradient(10deg, #00000000 40%, ${bgcolor} 180%), linear-gradient(170deg, #00000000 40%, ${bgcolor} 180%)`;
                                                // nameplatePreview.style.boxShadow = `0 0 0 1px #a10606`;
                                                
                                                const nullUserNameRandomWidth = previewHolder.querySelectorAll("[data-null-user-random-name]");
                                                
                                                nullUserNameRandomWidth.forEach(UserName => {
                                                    const randomWidth = Math.floor(Math.random() * (180 - 80 + 1)) + 80;
                                                    UserName.style.width = randomWidth + `px`;
                                                });
                                            
                                                const nullUserAvatar = previewHolder.querySelectorAll("[data-nameplate-user-random-avatar]");
                                            
                                                nullUserAvatar.forEach(UserAvatar => {
                                                    UserAvatar.style.backgroundImage = `url(${localStorage.discord_avatar})`;
                                                });

                                                if (localStorage.reduced_motion != "true") {
                                                    card.addEventListener("mouseenter", () => {
                                                        videoElement.play();
                                                    });
                                                    card.addEventListener("mouseleave", () => {
                                                        videoElement.pause();
                                                    });
                                                }
                                            });
                                            
                                        } else if (product.type === BUNDLE) {
                                            card.classList.add("type_1000");
                                            // Fetch the bundled products for the bundle summary
                                            const bundledProducts = product.bundled_products || [];
                                        
                                            // Generate the bundle summary from the names of the bundled products
                                            const type0Product = bundledProducts.find(item => item.type === 0);
                                            const type1Product = bundledProducts.find(item => item.type === 1);
                                        
                                            let bundleSummary = `${getTextString("CARD_TYPE_BUNDLE_TITLE")}`;
                                            if (type0Product) {
                                                bundleSummary += `${type0Product.name}${getTextString("CARD_TYPE_BUNDLE_TITLE_DECO")}`;
                                            }
                                            if (type1Product) {
                                                bundleSummary += `${type1Product.name}${getTextString("CARD_TYPE_BUNDLE_TITLE_EFFECT")}`;
                                            }
                                        
                                            // Set the summary text
                                            card.querySelector("[data-product-card-summary]").textContent = bundleSummary;
                                        
                                            // Set the basic card details
                                            if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                            } else {
                                                card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                            }
                                            card.querySelector("[data-product-card-name]").textContent = product.name;
                                        
                                            // Handle each item in the bundle
                                            product.items.forEach(item => {
                                                if (item.type === 0) {
                                                    // Avatar decoration
                                                    const decoImage = document.createElement("img");
                                                    decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                    decoImage.alt = "Avatar Decoration";
                                                    decoImage.classList.add("avatar-decoration-image");
                                                    card.querySelector("[data-shop-card-preview-holder]").appendChild(decoImage);

                                                    const bgimg = document.createElement("div");
                                                    bgimg.classList.add("avatar-decoration-bg-image");
                                                    
                                                    card.querySelector("[data-shop-card-preview-holder]").appendChild(bgimg);
                                        
                                                    // Hover effect for decoration image
                                                    if (localStorage.reduced_motion != "true") {
                                                        card.addEventListener("mouseenter", () => {
                                                            decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                            if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                            }
                                                        });
                                                        card.addEventListener("mouseleave", () => {
                                                            decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                            bgimg.style.backgroundImage = `url(data:image/png;base64,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)`;
                                                        });
                                                    }
                                                } else if (item.type === 1) {
                                                    // Profile effect
                                                    (async () => {
                                                        // Fetch profile effects if not cached
                                                        if (!profileEffectsCache) {
                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                method: "GET",
                                                                headers: {
                                                                    "Password": api_password,
                                                                    "Token": api_token
                                                                }
                                                            });
                                                            const effectsData = await response.json();
                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                        }
                                        
                                                        // Find the matching effect
                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === item.id);
                                        
                                                        if (matchingEffect) {
                                                            const effectImage = document.createElement("img");
                                                            effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                            effectImage.alt = "Profile Effect";
                                                            effectImage.classList.add("profile-effect-image");
                                                            card.querySelector("[data-shop-card-preview-holder]").appendChild(effectImage);
                                        
                                                            // Hover effect for profile effect
                                                            if (localStorage.reduced_motion != "true") {
                                                                card.addEventListener("mouseenter", () => {
                                                                    if (matchingEffect.effects && matchingEffect.effects[0] && matchingEffect.effects[0].src) {
                                                                        effectImage.src = matchingEffect.effects[0].src;
                                                                    }
                                                                });
                                                                card.addEventListener("mouseleave", () => {
                                                                    effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                });
                                                            } else {
                                                                card.addEventListener("mouseenter", () => {
                                                                    effectImage.src = matchingEffect.reducedMotionSrc;
                                                                });
                                                                card.addEventListener("mouseleave", () => {
                                                                    effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                });
                                                            }
                                                        }
                                                    })();
                                                }
                                            });
                                        } else if (product.type === VARIANTS_GROUP) {
                                            // Update SKU and summary
                                            if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                            } else {
                                                card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                            }
                                            card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                        
                                            // Always display the base variant name
                                            card.querySelector("[data-product-card-name]").textContent = product.variants[0]?.base_variant_name || "Product";
                                        
                                            // Render variant color blocks as interactive divs
                                            const variantContainer = card.querySelector("[data-shop-card-var-container]");
                                            variantContainer.innerHTML = ""; // Clear existing variant blocks
                                            let currentSelectedVariant = null; // Track selected variant
                                        
                                            product.variants.forEach((variant, index) => {
                                                // Create variant color block
                                                const variantColorBlockTmp = document.querySelector("[data-shop-varcolorblock-template]");
                                                const variantColorBlock = variantColorBlockTmp.content.cloneNode(true).children[0];
                                                variantColorBlock.classList.add("shop-card-var");
                                                variantColorBlock.id = "shop-card-var";
                                                variantColorBlock.style.backgroundColor = `${variant.variant_value}`;
                                        
                                                // Add click event listener to switch variants
                                                variantColorBlock.addEventListener("click", () => {
                                                    if (currentSelectedVariant) {
                                                        currentSelectedVariant.classList.remove("shop-card-var-selected");
                                                    }
                                                    variantColorBlock.classList.add("shop-card-var-selected");
                                                    currentSelectedVariant = variantColorBlock;
                                                    applyVariant(variant);
                                                });
                                        
                                                // Append the color block to the container
                                                variantContainer.appendChild(variantColorBlock);
                                        
                                                // Set the first variant as the default selected
                                                if (index === 0) {
                                                    currentSelectedVariant = variantColorBlock;
                                                    variantColorBlock.classList.add("shop-card-var-selected");
                                                }
                                            });

                                            let isFirstTimeLoadingVariant = true;
                                            const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                        
                                            // Function to apply the selected variant
                                            function applyVariant(selectedVariant) {
                                                card.querySelector("[data-shop-card-var-title]").textContent = `(${selectedVariant.variant_label})`;

                                                if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                                } else {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${selectedVariant.sku_id}`;
                                                }

                                                if (localStorage.experiment_2025_02_shop_card_modals != "Treatment 1: Enable modals" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 2: Enable modals w/ data downloads" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 3: Enable modals w/ p+" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 4: Enable modals w/ p+ on p+ page" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 5: Enable modals w/ data downloads and p+" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                    card.querySelector("[data-share-product-card-button]").innerHTML = `
                                                        <svg class="shareIcon_f4a996" onclick="copyEmoji('https://canary.discord.com/shop#itemSkuId=${selectedVariant.sku_id}');" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M16.32 14.72a1 1 0 0 1 0-1.41l2.51-2.51a3.98 3.98 0 0 0-5.62-5.63l-2.52 2.51a1 1 0 0 1-1.41-1.41l2.52-2.52a5.98 5.98 0 0 1 8.45 8.46l-2.52 2.51a1 1 0 0 1-1.41 0ZM7.68 9.29a1 1 0 0 1 0 1.41l-2.52 2.51a3.98 3.98 0 1 0 5.63 5.63l2.51-2.52a1 1 0 0 1 1.42 1.42l-2.52 2.51a5.98 5.98 0 0 1-8.45-8.45l2.51-2.51a1 1 0 0 1 1.42 0Z" class=""></path><path fill="currentColor" d="M14.7 10.7a1 1 0 0 0-1.4-1.4l-4 4a1 1 0 1 0 1.4 1.4l4-4Z" class=""></path></svg>
                                                    `;
                                                }

                                                if (selectedVariant.type === 0) {
                                                    card.classList.add("type_2000-0");
                                                    previewHolder.innerHTML = ""; // Clear previous decorations
                                                    previewHolder.classList.add('avatar-decoration-image');
                                                    
                                                    // Add the avatar decoration based on the selected variant
                                                    selectedVariant.items?.forEach(item => {
                                                        const decoImage = document.createElement("img");
                                                        const bgimg = document.createElement("div");
                                                        if (isFirstTimeLoadingVariant == true) {
                                                            decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                            isFirstTimeLoadingVariant = false;
                                                        } else {
                                                            decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                            if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                            }
                                                        }
                                                        decoImage.alt = "Avatar Decoration";
                                                        decoImage.id = "shop-card-deco-image";
                                                        previewHolder.appendChild(decoImage);

                                                        bgimg.id = "shop-card-deco-bg-image";

                                                        previewHolder.appendChild(bgimg);
                                                    
                                                        // Hover effect for decoration image
                                                        if (localStorage.reduced_motion !== "true") {
                                                            card.addEventListener("mouseenter", () => {
                                                                decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                    bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                                }
                                                            });
                                                            card.addEventListener("mouseleave", () => {
                                                                decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                bgimg.style.backgroundImage = `url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIQAAACECAYAAABRRIOnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAy4SURBVHgB7Z3bbxTJFYePCZfYAgMh4m7CJVwSELeIyy5ICFagICHgkQeeeeMf4oUHeAEJCRASQShcHqIlXA0RCgYcBN5wyeIAZmUDhmXn65nytsczPd3V1VXdM/VJzYzxeKan69enTp06p6pNmpuO0tFZeWyvPE6oPFe/r8Vg5XGodAxXfh4KPb6TJqVNmgcad3bpmFo6plQeswRRDJSO/spjU4ikyILgTkcAvy8dsyo/uwTrgTBeSlkkg1JAiiYIGr1LykKYIfkGUfRJwcRRFEFgBZZJ/kVQD6xGX+Ux1+RZEFiDxaVjkbjvDkyBpXgoObYaeRREMwqhGkYuWAvEkSth5EkQrSCEWtCV5EYYeRHEcmk9IYRBDD+Ujh5xjGtB4CyukfoBolZD+Rh94ghXgsASrJXy8NEzFmfdiAtBIALE0KrdQ1ycWIvfiD0QwJ9Lx0rLn1tUVCSWxzel42exgC0LgY/wjXhfQResxfdioQuxcacSat5QOn4rHl1UyP6jlOdLMiNrQRBuXiW+izAB15AuBKveLxmRZUPhOC4Wj2mYz8Fi/CgZkIUgONnN4oeUWTJdyvke/xPDzqZpQSAGnMfp4smayaVjZun4rxgUhUlBKDFknank+RUcdaOiMCUILwZ3GBWFKUH8RcrzEh43IIrfiYGopglBMKzsEo9rOipHqqystIIgzvBH8eQFuuxUcYo0gsAqrBJP3iBOQe2IVkRznOiBaVopnrxC22jNG+lYCEYUW8XPTeQZFebGyUw08tARBFPYM8WTd7hxad9EIe6kgsBv+JN4igIRY3yJn+L+QRIfgj5pmXiKBpOM4+O+OIkgEINPcCkedB3r4r44riC6xAefiowqim5IXEH4rqL4rInzojhOJWKYI56iQ9fRMIrZyELgM/iuonmgOi7SwWxkIYh4FW4Wc/r06TJnzhx5+/atZMGiRYukra1NPnz4IAWD9v4qEVYiSi2FsQ400KxZs2TBggXB80mTJgX/f+zYMXny5ImYZP369bJnz57g+cePH4P3f/bsmbx69cr4Z2UEVqK3dHyu9csoQeTWkaTBV65cGQhg+fLlIwKoZuvWrcYbacuWLaPOY8WKFcEBSiAPHjyQnp6e4Occgi+xROoUFtcThFrAKzdw8bn7N2/eHFiDeiIIw+s5TIkC60B3FHWOYYEgDI579+5JzqhrJepVbtFVrJUcMHfuXFm1apWsW7culgiqQQznzp0LRNTR0SFTpkwJ3ofnEydODB7DDA4OyqdPn4JH7vD379/Lmzdvgue7du0KrFJS+Pu+vj65evVq8DwnUDc6xkrUE8R34jgqiRB0GyDP4G+cOXMmD8JgFZu/Vf9nrVEGXcVCcQhm+cCBAzJ7dvOVdkydOlXWrl0rN2/elC9fvohDaPv/S1W9aK04hPORxbZt2yL76qJDl7Vv3z7JAWMGDtWCcO5M4ritXr1amh0cTxxex5BuN2pgMa7GC5wSHtY1O8QzdBxlw4xy0qoF4bS7aPauohq+K8Nox4zqEcKCoLtwZiG4OK3QVVSDIBxbiVHdxriqXzij1ayDAjHs2LFDHDMymx0WhDNnslWtg2LDhg2ub4aRCcywIDrFEViHVsfxNZilnihBUALmJDLZ6tZBwTVwaCWY8AraXwnCW4cc4PjGCFwGJQgnDiV3BNPXnjKORxzB2h7hLsM64WQWT3nE4TAuwT5lbruMVopKxsVhtzFiIZxZh1aMOzSCa+JwjqMDQbSLA9asiVUm0JIsXbpUHNGJIJwMN70zWR/d7DADdDgRBFO/3pmsD9eGjDEHtDvpMlQSqqc+jrrUwEJY38jEdxeNcXSNJjDtadVCZBF7IGH1xo0bQS2ESl7F5G7cuNHoMI7M62vXrgWJsiq1n88h95MhtMlRkyo7sFz8006iJSvWW7MSmMKFCxeKKah5OHHihDx9+nRUaR3p86omYtmyZdLenk73CO3o0aPBe4ZLBPmcFy9eyN27d2X8+PEyf/58MQWfw/eyyDCCsLq04Pbt24PMYxPQ2KdPn47MXkYkjx49SiUKxHD8+PHI1HnOobe3N7izTYni69evtot8JuguS6iNqToLGofCl7ivpVhHl4sXL8auozBZjONipGFVECYjcEkvPH2xTn+Mv0A3ERf8DPwZE7gYfloVBOV0pqA0Lin379+XpNy+fVuScufOHTGF7co1q4Lo7DQzh0bpvY5Z1rEQr1+/lqRgJUx1G6auWVysCsKU+dMts6eANynPnz8XHRh9mMCkVY0DgrC2nbDtL1eNjpBch9inTZsmFhm0ZiG4sKYuLiX9OugIkiUDdDD1XQl22RQlghgSC5hUuu5FmjdvniSFlWqSwvmZtIa6otRgCEEMiwWqF+ZIi06qmU4YWyc3wXSCi46QNRm2ZiFMZ0clTUhlhlVnCKeWJYoL52Q6NdCihRi05lSa/lJc+J07d8Z6LWKM+9paUKUdV9BZlCSatq4RDFkTRBaOEWtJ7N69O/K9aZyDBw+maqQ478E5sARSFlnTFp3KQSa32HEl8z26meE0OcupoH/F8WMSi8XC1IwnZp6ZVVZqmTx5sqSFibFNmzYFohgYGBiJM/AzSwTt3bs3s1xIZjwtzXr2kg9hxUJkmWHNe+/fv19sgGNqO1XeYnb6OxWH0NrBzdNUvOOfceEfPC1NYBS8hfAoggXRlSBSbQ8cB52JJU8ZS9dulIXgEzONWOZ0IfBCYOHa0f6jfAjI3Ep4csuIyxAWhPYG4nEwlR8Aebc2ps/PwrrYI8ZgfK3/zDNcnFOnTsnQ0FAQfDJdD5EGVbfBQbg5bYRUQcAtY0aMQVgQw5VfZLKaDPmMRBRNzAQiBoTBQc6jikpGbaaSFYiAAiHqMsIpemSHmWhItVtPhtDmI15r9fYIhLCTJwAkgMkfE+tKUa9QK/NaiYN8hKwytPhMREC9Byl24S6Cz+f7pU2O5T35flibjOmW8qbxAdWCoILrr5IxJiacFKTIk/ZeK4FWJapwcMeSsJpUJDQ+ibb9/f3BI59Tq083JQSwvKfG3yXCQsC3YmkRMmYrTfkANBSbrsWBz2OySnUv6vPVLjocqluKw+HDh418B4tWQYHfOKqIpJYgEMO3YgkuJHdW2gkjLmTcSi7TmOgGEQHnb3kEhRhGDSZq7ahDBtViibfrb2qYrlZFudy1Ov0+d/LJkyfFFS9fvgwcZp3aUbqHs2fPyq1bt2zvsEM38a/q/6zX6MQnrG7gqoTBBcJqJCkIvnDhQtaeeCQ05OfPn4OC4rgoIVy5ciWzDWcbQBnbmDmseoLghX8QS1YiDBenu7s7tsVQow3XsCQADmUjXwLRnz9/3qUQgBDDA6kxXdEW8UfI3flSL2qZvlrOJ/3tkSNHcrP1Ied36NChMbGQcMAqJ1FWhpndtX4RZQGcWYkwdCXcfdevXw/MLHtuk7CL9bh06ZI8fvxY8gLnSvexZMmSoOHZee/y5cvBUgSkwDnehS/MTakzmdnW4A9zYSVqQVxBt+4ya/J8bhJhHaCRIAhUfScOFibzZAIji+8lIo+2UW0nZuU/4mkWfpAGSdVxin0fiohPdyo+tGFPoxfFrf7uFk/ReRjnRXEFwRSpz6gqLn0SmtGMIsn6EFgJK5XiHqPQVcSyDpBEEIjBdx3FI5EPmDTo9JOUh6B+55NiwAgxUeROZ0khP+ooBom6CoVOWJpqcaYWu8RxWNtTF7r3f5SOxBMnug06XPkwZ9tDeyIhz0GrrCLNHa7m0q3mTXgaQjehHV1Oa/JRIevdONnZzzMGhPBvSYEJH4CAFVbCyWZunhFoh9RhAVNOISczs3T4ndXcQKEuOQ4/S0pMCYITIQHAi8I+iIEpbSNRZJPDRi8K+xgVA5iOIyhRTK4cnuzAof+nGJ5fyiKwpEThQ9zZwcwlRTapfYZqsow0/lh59HEKsxBnSL41UEyyDj1j1qgEmyE+zJ0WugYikJmmNDZKsjUFMYpvxMcqdGmYHGsKW3ct6ibBk9lV71ckA4vATnBWKnxsmnEcIPwKuhB2FvOp/dFwEyEEFr4w7jzWw0W/zqQY0+cIws+B1IbIL12E9QVlbfkQ9SCnguow71uUwUdgPiLTFQGjcC0IBaJAHK0qDFUQlTjDyTR5EQQgBiWMVkEJ4YnkJKM9T4JQKGGQjdWsjmfuhKDIoyAUCIOAVjP5GLkVgiLPggiDteiS4uZw4iT2iENnMS5FEYRCWY0usbR0YgpU+SMTUYWpeCuaIMIocWA1OsV9t0KjE195LWUhFLLssciCqIYgF8KYEXqeJQOVgyQVBNAUxUvNJIhaIAwWj+wIPU6oPBepb1VU4xJmH678PFR5HJAmrlz7BccI+z+sD4lzAAAAAElFTkSuQmCC)`;
                                                            });
                                                        }
                                                    });
                                                } else if (selectedVariant.type === 1) {
                                                    card.classList.add("type_2000-1");
                                                    (async () => {
                                                        // Ensure the item ID is accessible here
                                                        let itemId = undefined;
                                                        if (Array.isArray(selectedVariant.items)) {
                                                            // If items is an array, find the item with type 1 and get its id
                                                            const item = selectedVariant.items.find(item => item.type === 1);
                                                            if (item) {
                                                                itemId = item.id;
                                                            }
                                                        } else if (selectedVariant.items && selectedVariant.items.type === 1) {
                                                            // If items is an object and has type 1, get its id
                                                            itemId = selectedVariant.items.id;
                                                        }
                                                    
                                                    
                                                        // Fetch profile effects API only if not already cached
                                                        if (!profileEffectsCache) {
                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                method: "GET",
                                                                headers: {
                                                                    "Password": api_password,
                                                                    "Token": api_token
                                                                }
                                                            });
                                                            const effectsData = await response.json();
                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                        }
                                                    
                                                        // Find matching profile effect
                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                                    
                                                        if (matchingEffect) {
                                                            const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                                            previewHolder.classList.add('profile-effect-image');
                                                        
                                                            if (isFirstTimeLoadingVariant == true) {
                                                                previewHolder.innerHTML = `
                                                                    <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                                `;
                                                                isFirstTimeLoadingVariant = false;
                                                            } else {
                                                                previewHolder.innerHTML = `
                                                                    <img class="thumbnail-preview" src="${matchingEffect.effects[0]?.src}">
                                                                `;
                                                            }
                                                        
                                                            // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                            const imgElement = card.querySelector("img");
                                                        
                                                            if (localStorage.reduced_motion != "true") {
                                                                card.addEventListener("mouseenter", () => {
                                                                    if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                        const effectUrl = matchingEffect.effects[0]?.src;
                                                                        imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                    }
                                                                });
                                                            
                                                                card.addEventListener("mouseleave", () => {
                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                });
                                                            } else {
                                                                card.addEventListener("mouseenter", () => {
                                                                    imgElement.src = matchingEffect.reducedMotionSrc;
                                                                });
                                                            
                                                                card.addEventListener("mouseleave", () => {
                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                });
                                                            }
                                                        }
                                                    })();
                                                }
                                            }
                                        
                                            // Apply the default variant (first one) initially
                                            if (product.variants.length > 0) {
                                                applyVariant(product.variants[0]);
                                            }
                                        } else if (product.type === EXTERNAL_SKU) {
                                            card.classList.add("type_3000");

                                            if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                            } else {
                                                card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                            }
                                            card.querySelector("[data-product-card-name]").textContent = product.name;
                                            card.querySelector("[data-product-card-summary]").textContent = product.summary;

                                            const previewHolder = card.querySelector("[data-shop-card-preview-holder]");

                                            if (product.sku_id === "1342211853484429445") {
                                                previewHolder.classList.add('potion-card-preview-holder');
                                                    
                                                previewHolder.innerHTML = `
                                                    <svg class="potion-card-preview profile-badge-orb-preview" width="187" height="187" viewBox="0 0 187 187" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <g clip-path="url(#clip0_136_3)">
                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M93.2014 34.4915L41.7391 64.2032V123.627L93.2014 153.338L144.664 123.627V64.2032L93.2014 34.4915ZM173.024 47.8295L93.2014 1.7439L13.3789 47.8295V140L93.2014 186.086L173.024 140V47.8295Z" fill="white"/>
                                                    <path d="M106.759 80.3577L98.3727 57.9977C96.5807 53.2198 89.8225 53.2198 88.0305 57.9977L79.6447 80.3577L57.2847 88.7437C52.5067 90.5355 52.5067 97.2939 57.2847 99.0857L79.6447 107.472L88.0305 129.832C89.8225 134.61 96.5807 134.61 98.3727 129.832L106.759 107.472L129.119 99.0857C133.896 97.2939 133.896 90.5355 129.119 88.7437L106.759 80.3577Z" fill="white"/>
                                                    </g>
                                                    <defs>
                                                    <clipPath id="clip0_136_3">
                                                    <rect width="160.82" height="187" fill="white" transform="translate(13.0908)"/>
                                                    </clipPath>
                                                    </defs>
                                                    </svg>
                                                `;
                                            } else if (product.sku_id === "1333912750274904064") {
                                                previewHolder.classList.add('potion-card-preview-holder');
                                                    
                                                previewHolder.innerHTML = `
                                                    <svg class="potion-card-preview nitro-3-days-orb-preview" width="187" height="187" viewBox="0 0 187 187" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                    <rect y="16" width="187" height="140" fill="url(#pattern0_136_11)"/>
                                                    <defs>
                                                    <pattern id="pattern0_136_11" patternContentUnits="objectBoundingBox" width="1" height="1">
                                                    <use xlink:href="#image0_136_11" transform="matrix(0.00369004 0 0 0.00492884 0 -0.000276753)"/>
                                                    </pattern>
                                                    <image id="image0_136_11" width="271" height="203" preserveAspectRatio="none" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ8AAADLCAMAAABH/+YaAAADAFBMVEUAAAD///8AAABpaWkAAAAAAAA5OTkAAAAnJycAAAAeHh4AAAAaGhoWFhYJCQkSERIICAgODg4AAABNNVANDQ0AAABwSngMDAwAAAALCwsAAAAKCgoAAACCV41DLT4JCQkAAAAJCQkAAAAqHikICAgAAABVN1AICAgAAACWYpAEBAQHBwcAAABrRnlYOlgwIS8EBASbZrEGBgaAU3UiGCAAAAAEBAQ2IzcDAwOjabVWOFQdFRwDAwNxSXQ1IzMQCxCrcIugZ8R/UoEcExsrHSs+KTyxc5eTX398UJWUX61jQWVJMEqtcKFRNU6VYH6aY69mQl+vcYyjacxwSGyDVZewcqaxcoygZ8B4TnG9e6Wsb9KEVJh/UnWub9eJWILCfqOHVpqsb9WiaYfAe6mPXI6tb9ecZYuTX6HKg5+/e7SscJKjaaysb+DEf7TNhKawcZCobL6vcNKgZ5zRiKKyc9fHgLyzdJaiaaukarGwcd6qbajHgMHKgqGxcqGtbr2ycuTPhqPHgMe2daeucMi3dd2xcr3OhbXGgMmzc+XWiqW4d63MhKfEfs2/e6exccWxcuLDfdHHgK7PhrK1dcLAfNm0dMrSiKW0c93FgLO+esXBfMO6d9jMhLfWiqvFf8XajajIgcC3duTQhra9ecjHgMW5d9jWiqy0c/DNhLzCfcy5d9rZjKrUiLnNhMHYjK7Cfc66d+e8edezcvPdj63Rh77Lgsa/e9XUiLfEfs68eePOhca1dPHej6vTiL/XirbIgM3Ae9i9eePRhsPdj63NhMnBfNvWirnIgNC6d+nfj63Yi7jTiMDPhcfCfdnMg8y9eea1dPPgkavFf9bZjLfVib/NhMzIgdK7eOrBe+DhkazgkK7ej7Ddj7LcjrTcjbTbjbbajbfajLjYi7rXi7zWir3Vib/UicHTiMLSh8TRh8bQhsfPhcnOhMvMg87LgtDKgtLJgdPIgdTHgNbGf9jFf9nFftvEfdzDfd7CfN/BfOHAe+K/euS9eea8eei4du+2dPNMR/0pAAAA2XRSTlMAAQECAgMEBAYGCAkKCw0ODxEREhMTFRUVFxcZGRobGxsdHR4fHyAhISMjJSUnJyYnKSkrKyosLy4wMDAxNDU0NjY5ODs9Pz5AQ0NDSUlMT05RUFNXWFlYWV9eXmFlZGZma2psbXN1dXZ3d3l7gIOCgoSFiYmLi4qRkpOVl5eXmJ2dnp6ioqSkp6ipq6qrqq6wsbKyt7a5ubq6vr/Aw8PJyMjLys/Q0tLU19bY2trc3d3d3uHh4+Pk5ubo6evq7Ozs7O7w8fHy8vP09fX09ff29vj4+vv7+/r8raIVsgAAPQZJREFUeNq0muV/5EyShJ/IUi8zMzMzMzMz836/+3r/0DEzL+/LzMzMaLcyblyqbss6vfrtgKWGlNrWTD4dGVlVsjjaLbyNIIuS0h/ZhzNZdwcGyBAmA0Dm/21ZxieR25ksqfZZ++0WKaPf+6z9eF+O7NCt2+dH9r1jiMRIyVFvx8ADPLxtQQhlyFsgQgDeO68Gir2nxd5zvLWzo61BcHiIRk/LJhIEHgA01H3Ze/bIKN1OKg+dh0ba6BKgAEjIENl2ECMd5fDgoFDk9hz/JG0T+KB25Iy2g3DTUSTQlAJhZ+kbKHzIPMLIkU0dbhCQ5Uc/6jmPAOCBRzwweh9H9zzmyA7Agw9/EOiBdbcmMS1lRrDaex+jM0YpcOSgmPZTWXoIs95DMYAhAQF5mPpQ4yL6VjD1SI959TOf/uSn05KtO9R0687+Nj7eXdUdgJ2H7QDTqMUDVtY76527d26+9t6WZ1OLIJWgVFNJ/cQbtj40Hk0gIKkdh+FxL37N2171VgNgMC0av7RPZfDBqL1e/8wjO1ukzR2quh5xX4126dnhwd2dvO7e2265+dLbsRJAiQcIrXisHtRTDwEfLo+MjGqmnUsfPPWt733TO0dZG8ZoplDG5zTFMn3bBB5Huvr+3Tt277np+huuufS+ZHCW9gpWH7nF0+w3D41HQLFaoZjgMR/59JtfNMl6ohS5HU6VM4U2/z69brvitXfdft8dV19z/Xn3QcpkZHMcG1rhECQCrDzRPMJQnFE7SwWSwaPf9qXvb5KeCGJyND1mIps/WB9gGuLbb7z9jpsuvfr8220qkIws6eojNd6AAZEnmgcOMoAiHEC4vPbzH3/1XGpmzkmmKcrtZUkmEx7Tq11/4213XHz5SfebBKNWLDQUGwoyPqE8BESWPiLpMEFkxDe/+BHmv8LlZPCYyZRHC2YhzCjqjhuvuPHCK89+MBFNGQwakTe+AihPqD6EwnJts5FBAC//+h9PWsfEHxb1gueFgTWrrVE8PXP9TTdceP6Zt1czTaFUGpR1PJJEggw+sf4hBwxAqNX58c9/C8/Xy1xvmcnFai8zWGZgTktS+xe8+JqLLj3jGtvUPXpg6yQAnHAexGYQRjgIvv/ZD82VxYIIWjgxjhbP+ejSJSanb7jq2tNOukqbbpNli0S4OYlPEA8BRHbZZRB9EAT6+bdfDTM1PtchDdP8LfuhDWPWjJcL6M4LL7rwpKto07oE5IMKwSfMT4NWLAVZhOQ/+hPMYn3MnwNvKmWx3xqYJzwvmEbkaoxJZNRvFNIjLOwT2F8IMtR6ixQ/+cmLNt/0pGGMc535r2uS4lKbmZTdssGaG6+66ORf7DghAWP6bt2KB5Qnrl4CiAiDKIjgR19418x3OD9SNQ+tpPm3pSFdizSnxrtOP+WCUx+InobEW2MlUgZ83DzCwpFBbbYKAqTPfflTwgfTluedcwoCy/L4swU6y013asycd/Fvz7hKSY5HI5E1BusE8MAE0WwkCIngnV/6AV6YlCwWfwsXeMw0o3keYuLXN111zpm/2Okj1UcebL4y4OOuFxkiyKKokSRH+dln3gpM0/I+BC0Ox2Qz319n4VnzepjqCMzdJ538v9cYUyE0GKNZr0+Af7TugiIL4UAf+1yd3U4zXjgcT/fmpvsz7zNrK3Mnpro5/1cnn7pDKsmhaAJtPSXy+HgQbuseBCFawTz105/4IFNRTz3Pk7QWZyPLfjpBKk+Zjl59+Tm/PeNqcI+ciHV1ENGDyOP2j4ACzUWKJanw2g9/sFbMqLVOwEROv8sxKS1M5A6y1czFmfCYjG9uvuQXJ1+kXrm3Y9WykYEEHx8Pt4Lp3MamEkHhre962/NfNBHFtMKtWR7znWNp/CEW7YgpSJ9x2kmn7pihZOytiyCM8rh4KNzKhXBBhEIrXvH6Nzz/3Z6ktjhQnSmqKQ95ub/M//aMad3yu//+9f0mIxPa+qrBKYPyePwDAmhAUN2iBE994Utf8LTHPJpu3bHZjiwDt2i1W/d29IIZZovrYvOdZQ7yvNn63pN+8293NIW0kUjk9i6Oj50HoMLGSEUQFFYEHc971jO71WqT9KPvf+T9j9zH0W5UPWzdrR/2lGc8+gUGWFxIns56l0hM4gkPWz7tP//3WjsjMd62XsDHwSNMSAmF4o0+wqUEQVej0q5YAVB66Kw11HcAIh//tFe96uXP3upZnh95TM8eEw/cqJz5b3sjkVTaSmUCZBhHHjMPCdd2q/BGHYriLoKiQSsFwQpWPVC2L62QIqPGz3n/W141dlpNpnUz+jgaEubARRPgtF/++mLbmCRL1lUzkY4EH6s+ZA4AkSQKJYKu4SiEVy35DYCmD8sazvLYt77vnZ6sMS7PXxZG+F7WR4vO+/dfXtbLHpYT2zgkDaA8jvlLgX07ddDRIR7WcFBkgTqi9FsYFPp9hdRbmO/+xBsfOov5Q2vBRRb8o50479T/OXvH1sHGi43IY62XomwNN0MxANHgJl1U5VCQq0Z2V6P+Es1BGhIe8cEPvXK8amZG2TJLych/MIkRiI1Grv/Pfz23D9fOMp7N2CiPhcfGM1yfkoYzg6GuqKUjKxAgGpB1R2S0e98CqkJ4+hc+i+VJC5ntL4sQvNSeN/2FAcjf/NO15kDjlUkZkcfYX1BSpAwpZCkGDER0UjYf6QuSLRBW00oDsSkZ3vOBd4z6yzyORc/E03HbtMbwgTfO+p9/v9ZsFQJEJnBsPIQCcLv3Uo/CEYWQCBWKi4qBQSWWhVpXXREARQ0LT/nyZ2envfPlMo3lxYHuuF5S3s53//Ef77Jt00YjstPIOnoeAhHOoDgclCxIYaEuiJZmKGRVj+lrhew9t6OSVU+Ry+AgX/061vSLtrxw/2WhwXiuRxvwmOZJv/jHO/uwXWe6fZfYKcue5xHGQ5AIT+0DAQUkAkKohsWFoHjlAA0dZMCALBeIFGrF1DV0n9xzVLPUcK2W4dzs2MKLxBoTj0+e8Q//dVduVkRAmzmNsKc8IEaYJnYv1Xh0dw4RWQiketz8Q4RFIANy1VG7xWna4B6C7j0ffyOedI95H1nWx/IExpNa+sVf/7o3drpZapvrQm6rgOFYwhC5eQqMsDfUFODRCATJgWp5FA0QVo4M5NJ3fQigrDsLD7KiIwYP4d0ffMdBh5ysK88cTEpicZarab8dYv3lP5/uPhJvugyNhVuK+5tltKmXkmRMKiagb0uGjoyoOFDrMfIwLul2O2hTuOJBRVbrO9VFasl86JOvnI6zZm1zrkjmNTHvwT74r9z29/98MWm8WSLajYwU3vAwzSr20ciND0mQRAojIRcLKFiS1CDRAZ2LIZBr/2D4W79BKwVUTIGgW/VF0fG5975yktbcPE6z6Zslz5CnNTMWzJV/8V83aB09VmLcFg+tBCTa1r5R0QdC673Y9QmRIEcWhvGpHLIUsrK238BdTTuG61htXHoEjUxkcWEYv0Yrmad+YzIgm6S60G9nXucXEM2cEZ/8N7+7AztpRYPoIxEkKlUsYUBU4xu+170dZBn2W40UhgoGiK0+RAEqGrkVSFmvdqFbr3AbpJd1KYJVRfKKz39wRvbTtDW3vt5C4aUCai+p6WI8//xXZybpJAXpmmkCYGnQRBU2KNsEnSCBbC4AOCOooJoKIKzWchFQFZIFHFkMctjEoBSUoaBQifCw1Tfe8sqZm43zIMDzdrF8i9ey5/7S8fY/+6frTLa93/+D3kQqmz7alAA1FMZD+nUPyGIklDHQQBZyVC6myEA39BeMjGpBWZT+YX1VhVzEiuhe9+kPAnhBHwuTFi3fi5muj03L8IK/+be77AEJpCEhRaIOt0lndikLrav9Qd+l2qR477VGMRRX9F0GQU0Xifg/0r4CTLLq6natfW5Vj8EAAwwkMAw+uDsE8jK487+45/1xd3ceyW/E3d39C1ECIYZbIBDcHQYdqbpnrwf33PNVF7dPd38vVcytpK36rt6+195HIkMdUulHJoGAQswG1Vg9dkWlPsjKNjr+oCeMwUFxassxNSjU9JXkSYHpVF7nTz/5i1xyZAmxuuU5B1BBjSIkgyomJcnjE0x4ZSuSogsSMBCUyURQRCUKoeXbAQjO9E00J1P4USnQTBMJjjGv2tWXBFIny52lq6HG4tNxQs6qr595LSIjHZIn1CJFsSIcYVSbmPRsYcgPog5t1K4UrnsLSVI4VTEIFC2GWNWVQACijJBRaKIOVarmbnb4gU+YpB/d+HTm5vf0rYeCfxlh/s9vnP2AIp3e4OCeGM5gP6VdpNuoyCdoEhyeZSXJhqWvBLO3TiAhIPujCnQKmDQcZEBFQ4DNmTN/r323faI41qMuGAx2Gw6dTjY1LSNCwlQa9esf/71uM11BqFt2CEMDRwvI5ts9YU6vD2AwXL3m3ituroGkNEiTJta6nrkbLl07hGZSIYY4ef4Ew97q/BHESbc2SPMMWGvDJbvl8nr3FruwlGWgkNB0Y3yf6ufd+a3HUn9IcDmAiGQs+mheYOI+O2y50fobYJemdLL6oXtuvPb8m1aykRaAYC4QY5ettthkg3UPHLdUxdZcuQ4sNpdp66dXXvPIXfGeJKi2YP5aG6617aKukEBF9FQoK/7lR2c3AjJWT3WGQHrDQz9q/62Wj/8yP7/y3D8/jHYoy2KrAnMP3n2vJVtPkmJOwz8VxOwdSz03lQpjZ912/V0PRx9oFA7OCWH++htttN0TOx0KTV1wFzWl8X3UpJ52e8YDUqsunEhZh9Y//oDtdsHjjNk/z/39mfeaZ1NLN3De4cv33rrYYcymsQBP0S90C0F/vPyqB1ZriJidPdqJvQnO7a+78ZbbLM2Qzkywm1JWHzWpD8JztQxUhIMT7djCCw9bkuAYJ1d976dnrMQkT2PzDj9i923GLBl03RZdGsMkeIp9xy7LKb/8/bLzVqwaRpQeYUFvw8W7brvuzP05OEuG59u/uFat/XCIjQXhHAqmcNDzngFMRVj9xlcvrNl+2AQdfvxzyilp+seCdxTYlY+pqhl/OvufD2tNiGNjZkA9uV2OiXnzt34UkZGSFOJ3dYzxSEBOjw6xtppQUxxy9g2ALXrDk3fBlIBc+sWf3S/mIA2bPHv5Xl1hSNfu/XUFumsHO/bjnLP+sfLx03ftu+fWZxaSdTffZdk6hSJZN2DvGNzvPCYgiEk2WIcI5xwYDCc+9VigICDf/avE/Dzm+cu7gtkl6JfsZVe1H8/XvvH359xfxywVwGSq9eMhCXFhRqQ8aeRdqcnae9OnLkg+1+GQxAj2Kw+yN57YsaX58c///P0DyI/eu/bbq5t9XpvHxTr2FCqQe4TM1R6/i5/94Y7VGQp467+ypIgYAdOCsnDxLvtvDEBFPFiwtY2AXNdA4YmUGUHOpbmte/LzgBIg//m125AfW7z936ar7XWyzNKl8D+vOO2Sh/NUrpu3sIQ4eiKAuamV7MnEOtvvs3SdLhKj38uLmeFVXz7LHY7UfpDknBNk2OslI2vaIe9+6cv/QPvgwS88tpuBdQuW5XEpjsvDeLj0+9/d0AjHoMmeaoTYglI9xi+qWwDQA0Aki1IBWHfxk5ZtjFI/G1JZwz//25uFHJQhmnMezcPyFxTNB/Dzj10sts8Tn7EcJf8GFfFgp3CXER3hQ/3wVytiUhVvJATN6zAPtedWXwUDAkBkQOZstNt+m5YKzJPeoPsX/OvXLquhRjAiHBDnEYZDx/EANI4HMiAnZDw0zn3M33P90kI4BjogsNxW1GfPXoEEgigMUVd1Di7zuoLgBoCshk2VPisOsO5BByZAOpcRDN2KCbX647+ovcFDiCBqzoeRu7/+2LL9+N4X/h4tgqGu6mOes7xrrMftR9eTlqzGeOnzYxc80MKRrkOKzmjwDDnV/Gcwgah6QwstXwBYf/cDty5UjHw6gT79O5fDEenuFJycbx6w2ZueVxQPfO7bl6UMFwh7vjTbj+lnQovjQJ2KX0vIveFz17aZUu29IYaEAy6wTqSEUFd1iIFCFYOCmwk9mKdeDlAt3OrQXaZMaCROUzK5+aMXrPHUxXUJzgUkWJ283y5FPN7y2+RfCGDjNz5n+qKeCmzzsniIAnDypQ+3shEwHIIOF0VEATF4U2KKoa4AgYm9RqCX1KXxNXP2OHyrqepj8OkCNnz+d7e5NwojQeL8AMCOeuHyEhzn/uf5K9E+gr/iyFH80bEfnSHjEV+uQCjOWP33eQ80fmRgjiEdacQrTTU5WvMFqM3FAy0GhKQqViXGwNyDDtzqcZmhMJLCzlunr/vzNy6LkuAuRESuBZNh01e8rKwuV5miAgDA9k4Od6qUVIUsPiNTzurwxT/eC4dikhBPpg2RQJrFr3vDihj2GvkIMQFSQW03B0lG1j1kv03QzRfGbr+j56v/79kPy3NQRi4wkKYjn3FsF4+U4J6/0hktxUNY8IJDx/OXoplQyRN34fjWr+8GoOgYgh5ZU6zhlt0uGIPTg1NM7VBa8iwKIFO/D1at/+S9NhnTyATDtJPN+PwvVkR3RItwONdOHLD1jjt8+VRwnPvNs+4GnU4AJLTL8YdsM3U2oFx/GY/WOWNd/JzP3uFAjTBsVIV1FVEzmlQDWePModwIrQgFhNivKzUEz9wi3+SEHRZ2+i/Tz+0+GoJc4UM4IiUH5weQRNjsmAO7gOD0P/z2jrpdMuIBFg17H7HvzmKBdtBcpwRExS78lZ+5dlhXdRjWTiE2TwdQM4ZICHCTWrJOEAiQoe6haXM1BrUBRAET2564ycLx0U3NQOHF6vdd8BAjYwNJTPJBQ2+7LY899vEB+zfOu+S2lZYbl4nOoP0O2P3AMQimMhr0jlAUZux46t8eaIQDQ8iFyChRihAEpWaztSWH1NOxHLQjtNwTpZ4wFjzpiI1mVz8dvX7q1/fFlMPAwbUIBqEym7fnsmWpZKhU+bjkuivPX+PK3U0HgsAet1u2/ZLlBaKTpl5iQBUZtb/8zr2xsRxCZI0ISopSFnbEVAUJ6RUilBvqFdl0dIKJVY8wbHTs3gvH7ccMDBHgz5++MUqS3EMjHyQNPQRfts6i9Td8bBkSANz10B233e5RgINK+79INbZ922WLFs0b1SHyMEezSKn9yJyJtbbXuNCIj/MyosDXPKotgNdCBDQIjogasobQ1KT6USF9JxGNaswqrWmBouVF94Re4h3tfOIOBf5pScPvOvnSWqkXU5PzA8zEEEgyVIvn9Ad9AMCDtzvQ+H+NCjKgDD0Frb1ovQaEBEB3yqXC+hsufuJeWf1y4tbVr0+feX90W0NHhCvCUdMFSEQdmk4fNl42b23MWV3fsfLSWkAVrV3lZKxABqVBggnvw+YfddBiAOUAtas2p5yxMkqKdDjXSkMb6AHWE2UiM5TKZRkwt6NanmkbJANUb7SrrhIzld8ALNpx52XLxOnICjrnC7cOmohUkY1XQRQlNNV8ivV6u2yz9QY9zAGwerDmoauvu+wej4FgI61EL/MWCc6NFWzp83fQOBNcwLSji9/50d11BoQL2uGvSgYSvZb7BVCoq5rRasstKRiERFuwTIBRGvfpAWCqYU3iqS86YqcmnO1QmfLltq//bbWa+HwQXC6phpTaQ26ujQ/c5wnzthlV1O6578F7Lr/g8pjCMZpgVE+92EcAG0B6JyUB6eT7JXuKv37yFo8pZvfGnqY2cyKrKBOenOIQlFOZimgxKMERVNWBQCWiqvtubb8yS4ilKme9YM9jdxVL41Di2Z+4u4YPqaiISFdsJxAQKaz3lOWLt3n83/be+2674IJrVtJSJ9kYYMmowipDhW2evcPoDUVNN7ycPO5bLh0iOpw1uYCtwoREuq7BMNoj5wCkFJu2EUiVO/UICgBIodfKAwKzhOSS3kkHLxvNV/JxqOjDf3sYjtojIobmXNNKeRTF3Z611bobTBXr/uP60/+yCqrqAPOgBpLQ2JBeL1ZJQLJ76prQ7ujRu89eCY9ClHNtAIZeHUKAUqZIgcoVKgKx+Q8IgAE0JX1NSw0IUEyFmdDUbLIN6TevC59x0tR/HgG47ZQr3TFkrYjGfsAJKeX4zzxib3HqNt4td/7y9PsyUzqoqifU/HnYQy/2lz5/+0k37tMz81LI/mDNoYRILiBIgoGqFJpkCRk+B5yINmoWAmgzBzLZkRhgEMXsfA3ApMoVdnjmnlOW8ijgW99bNcRQkTXcxUHKIQCLWO/4Q3dDuRh72Vm/uhEMdaBgMPRk6COgjx57T/tfa0PA7PIXAD/91p0xyuF0rgUwRSA0o0hCAAG3CLZUAGTJCq0cVCCofkxGlUw6koq9MalN9kBzXrzLJigQb990xaowrN3rMGi8S4o5GmV5557bTte91zUXff0WVzvjmSQWlSpWvVjt+oInTr77bidwXF1w+XvvHTTK4uJ8tpPWITZG1QPkBmSy1IjdQSGAsFZpejKE5mPBk5S0sy4AejHELCE48KnbAqK6ic7Zn7gdayAMFdGYEEZ4qEHxBcdvi6KaCQBu/f7PVijTtkgGVggI7KG/8A3bA+IYe708TAKsfv3lMTLSJS7AiHKNQJgg0/iGtzzz3lLzs4C6sYGGooBAmZPqIZvW1oZs9eKUBHTx+PJPH/YhFOEaooaaDqoA4Kkn7l7ilOWP4Iof/nIlqEBZa94TIHPB5zx57TFnWx71zQZ1UKeqEOeOVpxUsVLwUFdK+awAII4kizIxjxS2ppcIbgieiLjBDeZklo1GPha+YxdAVNdRvOmKRzCAxyYYkkNq3pVY8oF9MgTlPpYu+uwFqxsJjT1PY2uhUeUJ7PmowkAF0ejKBz5y2poYBYdzHgkTSYBVHZhMeshyEYO33VsnSMBiJVoCsVLwBAgVkB40U9sjyYCcnAxqZ5r2ipPvigMpuqKG7cQSYtMSPE7UTKQ64LTP3BIpMChP3/SpwJ5t/MYtJwPRhbPjYB6IyZRzjpFonjKDk1CTSUaLk0RUJoh5pZICG0/UxLNJcaDgQalD0gRIw14e7Ain7Cp692+E73/zwRpDxgaORjqqCAE86sXLpp2Pyrje+uVfptJu1aqMYULBKtgr9lk760m5FMWRg/nSg1lf5oEyBRmoPAxjjflsMyGx5ZQQVKsWVEURISalgUxkonwbkWvfIQaiXy96xy5Tp1MfPuMRyVFHxppwhyIFYL337LY4kyimZ13+6b9uiQRUoYmGQmiGozWBE47YcBR/cIZ4HTj9s3e7R0cEJ9jOwxEUQYw9xBEdnmi/Io0Ttsl2NAC9OlM22f6dkOua6G/16mVT19ffdOlgAI+119VQqYgMc3H5K5N4lDmE+briI79bpVgpEDAZKlaNBent/rINQY3wKLTekR3u++4ZwN0hzgXzMwOS7MV4SRQQZQJMBNsOSCMtJNCU7wCLaRy5EoKpzTfxtOVbaipxxbPuWIMakbVqOWPezxn+54huF6Vw/d0pK9S+oQf1YDT0YdXSdywu8j+65hR3vfLuJkp2sA8Y2e4GYibOZUGd1EKh8uwLCZhCUhwmmaIHNbkxidD00CpZ1YsVFr7iMFHdvzMueu+99Bijo4Y7WAcXIe5w8rLOoAcLtbcbTznPITR2iyR7ZLCAfvXB7cVR/4XqhMbjgPzvezwZVM71kX8BsmTk9x/XYoLtNU8DGZnkJu+dglFttkn0YJh74Hul7lAbgJ9/9n4hxsg1VS2nt2FO9dQXLhnrDRfNBwV8+GcrGzRSVKQKPYRgmnjdwZ3+S9m9AC/9J9yHaOSDgLWkyxx5U3BTggcSAIPoxlaGSNHcVIkKSGCkMaBq2FMK6C3Nyj3xJQcXQohvfHcFBqwxYITQSIcAhPen9HSm+aiExy9OGdQhElCgKagiq4BKL33yWpP1vczwSo9X/3NN7XLUnJApuVF6SGqRnGveje90pvlZb78mT/A3LpbWTrkAINATggKaBiKB/sbPOKk0H3vqaasiUinZIcHbIZxv7N71iSp53r+/9gFvK3IhGvtNFUQVTnyxJolRq/Kl8BR424WDJiwEQ+VMjCSBjYUQ6QDoRD4MIO/yMCStSv+PbDSXYgNPmoxiIAhUhmCau+GRB29Z4kt96PSHGFUrShJiGwJju48tmYUlzZcVz7/FRXMoKSuroD4Cj35ulo/0T0VWXQrYzxn4AIKzn4LwGPJwl5tM2cECyBMxgBtMlMGSTBGNVU8BEWiw2MABItBoXLrBUUcDKtze+84cRA7kqJ3ySABi4B7/sRhlfelcX3iJm6eev5rSUGNBePBbNRX/lJrafrzvrwP3KIk9OCwBkGflBAJCutU86OGGdp6WeXSdxvkL0T5GthgLHl4QEcL8RXscvGwa0vo7/7IquhwDRnPWSHaI+5zS4FFUeI2b2df9eZhnKwKMaQKrh0NenuXDR73EUr4PnHLmQHWDRyUDCGRlARhtRMjJD6YLs+0AwO2WzJs/pzfMmc74m6zd23bL7aBpFmK/80w15jRt9EFMahcO/R90XWN5Hug9p8EbvxRiMNL7sBBQHfxWjPE/yjM2KaH7VRzCawcrwWozirFyckQfbTM7ZDp/EAAjCMgIPHG37XdasuPs5j0odD/9zjNjHeG105U3+aLSMW8o6kuHZkPpzWdKkVDsu1Fm6KmHgKe8fG1l00Fo2lEKAB/7ZbKnYgDQgCvGSsxBBwHIPE/UWet7LUkHgQN2PeKAaaZ1qBmYycA7zoiRA9YSIhgFNj5i7y9h1tPHjb4kvojQDkankOyQxn5ohAcElP3Lf/6+VhwwkmxHiKUUS4FNTyzEZkK/TpX10RAmSJDkAce9uAv3dIQxdPB55xlDRQ0ZGRGTNAaYtv/E4jIeXS16+XnOiOQSAAT0SPbwlGxPNeLXF/BI/mWoIaM7mYxCGgoFY567D1BjPEXFkI0tEhjgHk97MSAWJ2ALS3LHIudTvwevpQiXA42XqAxc9IcOEEWTDPHIu1PVFaIRRFBlIeD4VzD3X8Sp1UWYjEctDd1BEyGwUY7cpm2dK0WNKuuEEAQagXVf+abifGeZmq3xzPtT36ijUMshucV2cpdzP75PZ9FWWeIueimiYlVTk+ogwcJTR/FY91fpbjd520UDDeHuNNABJK0BQIgxjFZfJFkBgKRWpgA7+s07qwMIqK6+lNtB+t6prKM0sNqGCA5LazSq13cpjFBJYn70PwMiyxdCgGnCK/Rfenxn/nbSpZPQvfmSGDHkUDSIyhmtyaJRTtDzBG7zNCalIT2Q/VOfI6rIH+vypCF28TvjbdEjh6hbYwqxIeYc8/7igofOmvcVn/p52gQUXERb/6+s6r/1SbmyVw4IOcLj328e+hDuIgASgEgHM/srAwRY8j9IOUyqlB54yk4o6UvHBxSLOVe8wGs0VSmrLYI5JdviQ8u6vatC72HFa66NyjOBIVm3Sn3M+8iWmIqfjKnj09UvvxUDDlCLrXvNFfT8zFGYkoS0uzsEIxFO+mLX7mf+evedS1pz25uuRORAolCDFsFAA+b8+4u78jH1ZhSe9qHVcAjRXBQt9kFWDEu+MklGu9F+B48TNFSMUc7HLZdqNEViQgMaLVBK2QsC0H/Ve4DuZjkVRukKdHrc+qnT12CISGBAEWi3VM3Z/TMlKninXviB8zSEM1IuIH1/xSoc8N6RERcolEZ20+OqNww1bAwqZ9yImzKXtuciGtF/85vHxHiqDXGUuk2Gcchu+8mX5LUQzRGJFI+RAeu8/pjp9wBnmFec/YmH1sDp8lBTwS21t7HOwW8E1Kl/FMsff/2A1z5ElGbCgzKAyvIRQA+9d72mdBBFuhQJ2uO29Yw3uwaMgLsCXKhkBvTD9l8uDiCOi8e7LxuqhhCB5l+wVE6e95rl6qz8pEr9bJx+aq2hatXgjDs+Q0xMYJAwgobeq95d3FBRLt502203vex2ryW3YWpvhDo0fSWu/bSXdu1HF/b7fv69h7xGhCNndGgIO7bJ+7fs0i3L/crVP/i21+51ZJwBDwLW5DYwAkwq0zvps933GJuyoKDu3XQU5vM/Y6zdksNNP53smSbWe/NBneVaXTN14aev1pCN/QAiFZiaDqj2/nD+TTRSagpCZ0K2weMzv68b+zGjfBBkCsoQ3GQIIMKun96mKx9QNx6bfiP2bX/+kGMoQd6CWCFQ6KO/7VtSex9C0aBe+OOzOFRNb3s3yvFpb+Fzntbha4/Et7tq5P7/OT/W7j6EOPOOz2RIjRTbgGetk5/NIh+3cxFL5wNd8cY7IgeMVA0wkWyNFQPW2fVlmwEoOicBV/zoL6sHdNRtuZHtb8qKm79ry+7+j7La4P433T7kGg5mIR95/UnI70ZzmzjslXtOycbqyEfBQ2Q8vvcTDhnpqIGQ4hyY+gxY2ABSEDHhMTguuN9jRM2hCTXFFN/KONGoC9RNKwv+5arXexykhtQs7AeQnC2snUti2PhFr+6s0i+xTAWqoDS3/fk/ajYGkXKLCCSJHgMDFu70tN3KsS0vOO2ChyLXQFgDJL+g9vv7a73m0DEfJ0zfz159/odjxFDDCM0i/jBHiJN28itgzq7PeXp538Uk3Z0+kteVH764ZoQjz+fJSFToK4R52x55eIn/ce+FZ17+kNeRjgEiPGT5gtHmbP+uXEFRafRmHI8ffHeIAb2Omk081rYUZApZPjBvv6P23rqUc4njRqzkb9FY1ERkiwIDRAY0Twucu+EBe+06ZZR69ZmX3LhKMSKqhsszn6unyq1ae1SqEqDOvEkHkPu/9tuo2qPXmtm/5ICdREASEKIK87c5bPNjBKBsIegQqHRB17RSjwnI+RBckUKsIFQgWRlCZeivvfTAE/U49yhefvEl994Aeerd1OZsph/YSJepv/mbt59cfpBm4lve9d6bhsz1j5nwMO/FANBkIBOJPqCveU/YZYeN191/2pPRysWcfL3tT/+5BpGRUaBFVCDaHgp6qKrFi5buctDk777nspsuu/fOVVAEB4iIivQYHFCV+i/rHPdijU/Cp5dywH7puzzGWh5rn4V/SQY1Lxg3ZPq/9TdZuvgJRB9Ae1gFsPC4qQudhQWuwpUfvgBRiG3vRgHZgiSu4PywYP3NNp+31aYAbr7x7rtuumd492AIIcYIr+neWOLUT0aQ9Xd40R6Pm5HX9Bs6Vv/6C1FYwwFjFGdxRCPM6K05ba4NC4d9tIMWPVjLFQubv62b8BfUSWgE5OwPqo6Ap4wuKDRAmCojQmIIzO1jbjNOEge8fxUwADyicbVyuhAJI0QiaLNnnDDVOvppNjXf/5Uz12CoGjE6Z7SnhEaMQhvJR+JqoZ2CtbaFve4b90XX3VPdDfv5A1d882fytJ2FdZqrbWugNIQ0K5h3+9cBaMbK4KjdU+0VNUAIAUDQhnu8bKOOj9O09uPmj//DY0y1OudM6kLQCGRnC9IYlI6w6MOQeB55SnrRCc+F2CF9Trfg98xTr4PDI6oICD0PCuqB6MfKCPSSBYsBEYDXkNrRoWEYgPCY11VTNmerZx/SPRRwev7YpSevHmDQKGDEDHiMbdQOAJuHKgT01PDDbAyQiT1fuDTfqjmyQaVKy4+p20//7wGc0XIOEnseiMQmbeEGesP2yHkohqFcjuSo28qaEBBitegZx47G52ayH1CKPn4QfQ1qpv7tbPLbBEfrYUAwoCImlPbx90T0Q3LNExu/dbvOgLqA6Yzald/7oUsWESnkLAQ9BfVjotWggQQYUkQtKg2HtjNvINTy6Ocvf84mEDrz2Z1+wyRjf/PnL8XAa4/RFTmjf2ltKklaDKQHMEB9mPUUVKlChWo40e7df0xhxk2pONPhPhd/5HzlHh0EBBJorJNC4rNSBimdPimX2xB1KhPmHUMVoNDb/dl7jyUIHfvRva6+6iP3DrhGEUPNLB/5sMrM+Ug2xNI8JioGBo0pzJz931HmBJdA+eOp10/q0dUVPSigyqMDoKUmWSSEyAjBERHR0iSoClSolp14VLduNMP87eqffD/6AEMMWMs5Czxy3unjp86FYKgUVGULEtgozJt3gB5fBKK6+EyyLHece8pDaQQZrCuB7fulIZ+YpiiAdsGBR6pGCvKZxK+Rot6yo/bbCF2nVp68VaMul8SopjoGV5wJDwNB+iQ4mn8VksHLMYhpIiBWaBRmannImHTjNeGG8//7kdqcERBoMbGfkaxCAwatabLDRbiiPLgaYwpAQAXatsuPW3u8Z5MwEafztxd88t7IAQfRG5BnIx8wIMQqhesg0jW0ShIM6I9Upr/fCzejqO5Nd6PDUeZ3w3n/83CEhygqceHTQCnRSErIFB0JqMEIutB25dSwEcKWTzlsU810nkVHX+7/xY+HGKDt7sNnxgNAzmDYigsTXTtYIsDCaDD0QwwB1eJX7yuqWzQs92haQB7JjUtRgYKRFJFOhGh5bGnQke1BFEKDfACJ7ZYfsimErhGXMM2e8qu+cali9Nrdo0vgLM8kBCpn8rcJFBMmZDQ1XgY9mJIN2eCIfx+/X3AsJCoC8vnbpDYGodoWqUBzAqyGvSGzBjioWNWZxxRI2/HgDIfYnfOYcokyBKw+/0v3xdprV40as5APA4jcoQsiE5eZ7bxaNqw5cOoRvR2ft3uX/FbeOZEvN178qdsdbWcbAAMottzWpBZVDdFBRCAiZBINAnc4Zr+NRnHp6E1n8rd3/fD3UQMM3L2GHLPwt4TQbuYnk+8FSaVBvuR0iRACYE3EukGyqAWjUT40+I7LfngWGM1br8FmttZBgsrtJHMIaKPZOhG8qv4+h++7sLjXbJrVmrzkK9c21iMqukuanf0YxaiAqWk8jGxIe1jjBBSIXg9ce8cPlSn4027JveB7pzmFCIAQEQQk1pIxf2UKzpNeUUCliQ32P+AAFi2Vj/Dp9Bvu/9UPmrR2ALUT/DPiQbS/FBAIEEaZYDQRbPPbPonAZEd63PR5hwudIKTARBxbPX/j+Z+7JXkNtbahPXiJSWagxIdNn0s9uXnLDtltpy7dZRbrUKBLv3FNjO5Db2f4zGeDh2XKFGhgIuaSIDIggVUO0TQR4qL9nrXZOH+qgIrYIcucfdrvHpJYg/m+KsUUnCUQkMUnQWJb7XrAkiVQ4ZwhQSX/BuhR8ZDHWkN3rwXHzPE6OHYKJRI6QZbgINCDkTT1UNFYqYf+pv/nyYBmFa/zcf4QV1z1q7OomMQDygFXo7BusaqTXLS/18L99ttsp2nSRU0jH+Il377aB6gx8JrRHXIQmFUGA8q8gkgwg9FmvEGoCKuCkqTMfVRA3j7m7Cixw5dWN/1vXu9c8ejRm1BMSgKLbbTuQnAFV/thBCzcYf/N9+3GeJrafnQaRivO+sW9jXdBTEsd4ZoZj0S4S9slrA5AMnOC0UMbiYQAVkp9E1jV3+KZhwF6vO+b6v7VpVLjzruu/t0lK0JMnyIsEmLrWdIFQu8Ju+68eMuNO8vfO5paokusuva7l9cYyusaXiu1PQnMzsO0LGZk9TGYN2E1SUvZjCZggQg9e8yClJu4VPEAyozIihsuufSCQKAmFNooDQGIBBDE/s6b77LR0nULmljYhzL+Vit+9ZfbGu8SozfeForgLA8mVIIhxSEwjUqIAEkGmAVVwRiMmL/p04/tbmYR2LVtpSbADffdcsUVV62wSOU4NP1X1b0Nlmy+y4INFq+Lrnp0e+Aq+Huc/93rPHrttZrGhUV044+yzzWAIMB8TgxaKUnWpFITpfYYAoy9eXs/d7vCDtACPb/TRcSdq1befdVNd6y8/gFQrAPrEOets9GiTTZZNHedxet1jUaX7zjdvpw7f/MTRMXYBusSovms8DAgcVOTc3Egy4ghB++mwApBPYYQTL2lRz+742VFUQU4CudZ3Lh6JR566IGVDw8AYN0F8xZgwdzFi8oMvu6BSipMrp7//Wvc6yaVi+0SSWh2eCQ42tcmcIfMg9ppKTZXY7CmLFSpQm9iz2ftBqjUzu5uJSv0mgXgbqzCSgCYiyXqCkVhORA13fEvuOm3vx2m4APtDA6ESGI2gOTemahmRgqtp7HkexFAEpV6tMo0ocDeBof8WxsmQbJCFNDJ9aZfNVsQh07+1jn+tpsqrPrjD+/ziEFDuIp5Px3L8tGFRITIsdU5shTBJzhACxYap2uav+RFhxSpdV1XU0ClWIftGJ+CJBbqH7z4d+c2NUKh4cAmZwvH7PHA2AlTIbacZSeMbaNKfRisVzWB+6I9n72dMLND7N5jWTLK2BTC35J83HTmWffKa29oMIhpxgLlfL8UhlBJS0DIwDxBxnai35quvAX1wd7SQ1/kVEHXCyT3EtGr8JFiNWXMkHe/bMVlv7ihIWhjgDqrC3z28pEmfnN8mCUlq01rPwxEn8YeA/rgxHZPW551G91wvXzvZTy6BqSkQNPGHyuv+tWFIzi8bq0HvJzfliABkEUkL1giyNblolJlrBIkEwt2elbi96gYfyinNgV16QDWNQ8seF2q2N+/8zdnPThUjBw0rMIoRzSHy62MR9n3tpqTUrxEkpRZJsMGCxXZY4XqiU85eFkSj/L5QFBXjcbKfh3b252CmfF4dY4pzX3n/OGGIYeRQw3SQKOU1kkX85fygxCy5sDa2jImde6CWQ8Vg1lVLT3xhBxjlFWhg0fHnMwsDgIljlumEh0X5/36UgxRY4iB6ghvD7Ogs5y/zAwL0sw+AVPSF3rPK4UQWKGvPkzrbP20g7ul0rK/LZ4LXLI75a8o18f+/sc/orEeXMMhBlB60CXU/794GAAIRsgMIIIHEmTT3lafVhl7tmiH5y7r3n7nBgo4FDLkcrmj+43devKNZ5718ADujXwwUSckl1NOEf/Cg0CAEvsw93ZJTKRGZgjs2Ub7HbVskmmb9mY6QLBU7BM1G/GAunSYO84+4441UGwSOQxZw/MZY+bCv4RH0hQgwNiyudX2YyqzRm2w5NCnbDJtSCVOHZmqMxhahqKIR2e19X2X/e4qHyqtcUKU11LKXBxO/xfxACkjvVKCwzy0PV2rAvpm6vW3PuKk7nhS10PM4rxoTe+GuwrT5Qc9cvmvL/Ma7rXHARyp6yK0JhX+r+KB1JiydAUTLKFChR4tGOb2tzv0GM18flTZzZSv5Zp11542L49cdcYlqxrL4bXXnmMPOtwaQMK/jAdSYbWBwo1Gkg0QE+qjZ8K8RwE5eqqhIGrSR8VyGFKsLqqMUlc+EhyXPexDRQzQtLDl3sKBNOXpxL8MiJFuBE0B5qlwmPPcAKtswU5HP2lKeZiJ6ja1NHUu1P8r7iyYK1d2LfwttXcOXGZmZmZm/s+PmecwMzMN2NJ6U3Y7O3XGu/IgmWtX7WHIV5J6qbslHXYd8N4f/+sv//0i4+hMRqaq7M5SVimB5Ax4KE6uMRIRtKZgiLkbKTOQzatklrWtT7e1/YFSy1NmivRvXr33L297lsu4prQnZx4vtVhFwv/fPsIyjQBJclsjCEfunVo07HTjDMTaVqbbPOTT628PB5eN9eW/ruJg9pbKnJiStI1JJX3+7ZnYB0EGbXabdnzu32KWZLQYYrjxS3/6wZbZX9OqBPA2jxN532bc2QLrPZL4jxnHVFxR9hiyzosuSlUIUvz/gRAyIYhe0BNoliGDjwg1HTFctZAfbRt7/8ac4i8GTpfn1/6lNoCu4nghi3kLiJyW6plSkdhQwFnYBwFGgYpG86JRI6wYFDt2bmoadtp98be/3Iqk8qFhh9fobm14jQ9381whF/DaHX9z27NtXK5lK/d76uGqDkM2CM6ACBLL6uLBgWge1GK+w9wUMQTDjZ/77a/rmmMBb3ZuPHU/eVuEbZc32rx24W/ufoGRkUk51dKkmGNdSiGXBaUzwQGqiKhwQ4qaP2MuHfccWDli2H3uZ1/66EkU19Y7bH2z7Rhyt4zTc1/7mdv+/o5XKFblYUYmTJ/Z0JKMUkahM7APEdSa0O0vZaqxI3ZiiFmFNPGhn//oo1sDFU86gjbtxAdt4lTlaz924V/uuTTBZdWqPCrbyCrFxAwEOo+ziSAGmlTNS+Kv6D2vY2CH5saz7//xT2764OvaxmyF081k57RIuj2+ydx61z8/PE59LEIVl6lMPD/ZZXpSLQGLMwJCi2wc3z6UaMR8Q3WOIuG5W+67PvXbD39g8wvd1h0bZ9+bqmzrjxoM/o9//9fnaqJGkolRcwxhnIEUBoqpJdjA2fCwcAAwuOEm96llDAotwl3cwMCNn/v55z6yOT/JwCES+MAxxWFXAWN4+sK/3v3iNK8s5ZrsK9gjVDG/KgqYoiDKZ8IDAQQQsZzrSg4FS2J3JLVG44hgID7w029+npMUTtfr27NrNwLMNX/k/n+98MClebIdron0yKRJ6VQZypAYm0JWnSWPajio1kWZFIjj0lF2gW/OgTj60h8++oFtibXFYfv43qcd6CLqlQv/ce/DTG0Ooc5ZjhVXWlVhXIWjqIqqUAqfkX0QFiZaRjUCEes605hT/2iNfj2VuOGDP/7eR/BWEDk9v/W213jjnPy+C//58It9DKQzyZqoStJ4cRSTsYRTsEWdEQ/Q/CLVWrzcleqS9LelL6nmoBr1li/9+sPv39woPmV7bDsD3Iiv4qUL/3HX8xcxsypltg4nSZXp53EtSQBEYRVnxiMA9TSG5t5tSCJiuXU474egXa+jes+vv/fhbUc5Zf8U/4+2yl565LZbH365mBcWJpI5gctUFpRNKakwE8iUoDg7HgQ+7lRGVEhh+irTYq3Rbcd1Mm/86Pe/+/7Xr6DbWA5COexQj972b489f7lw1thruZmqNKXK2OuA+RyqKkoG8FnyIFSEiDyu5nYIiUHzoS7RehXErldSfeVX73lfX3APgYDDI5YP83jywgN3P/MK3TqcJJMnTfO32D16VBQqqgDAnC0Ps/iLYq6zDrqdSN1hhghFE308a8V7v/WN7xo4jOMwhcP+8sQdtzz2xCsVhcel0r9ITVUk4wyhbBZdunyrjvtMeSCQWRxGhHsvTMQAg5ZaOzUG7wiagmF677e+/9WtsdOnqC1z8FTmkXseuOfxlykmYHYWrqicVE0kpfXqC9iYEtVxnDEP9nMJe4FqRfTjCBoDbbnBrEC7qD4d5p1f/tpPOC1+YDj96MHwyG0Xnn3+xWlxFUZVppKaiiRJl2wbkr7MxtSqozxzHoFR7+ZOLAsvAYuNtFhaJbmx5LvZa/7f9anv/AqwzMFvAHxqw9y777rvoWdfHmYcbZzwrElVXpwlMSlTLEm+av5MZHMOPCC87qbCgiQEwRJDGo1BGiKHkGYYMBcxv/fLP/rMpoEcdpJrCL14x333vPTMpYnCjEwUqcxkoqgsCjvDJRclmGIJqYDqfHgoKqheGNk1iJslIbXoy64abguQ3sB1uuHNn//iJz99+np7KJ6+cMejjz735EuXu20kV+zFRWrBgUaslL1AcCQuoJAx58SDqCgaDopllYlYe3L3slSijnw8CBwtNkJ72+c/dxXJYb3uQ5fxXnjg3kefe+aVV2YYLAJdkzXlMHrqYswGu7DKPXas1sG58SAsFf3iv6LCRFRjD6RpIBRqfVR8X3qZF+Q3feYTn/rSlm4/fN/hsXuffPClZ169ktOMwzknszjR2jKl74ap5O4qiaGAEhbFefFARMGMoFoOaIZxorxMwwylF5qFF73qxW2GNtz4jvd//KNfv/ae2FZAefChJ5986tKLFy8xLU6gqY2MdFehltY6StvGmKIoGUc5Y6ZRwPnxQLCuKTOOEBLhNai6BUGvt1MsNoIWIEBj0A1vev/VOobPvvtwbWrc+vQLT73w0iuXrhoG0+oo0HNZSKVniR5jh1AdRy91Dxt8/jyQLBMsT+twAtFq/uS4QxDsC5nzxBhh2iAdxdtufOdb33LDjW96z3G94MPPX3lmevXyM69cuTRdGi9fmlHQYYxRJ2zDzC7CRNrYlquiKEQVYXpljc+fBwTQiwBpWNpXytBaq/CRwm3mIYd3C4p1iHBHuUNHMSOD3YyKkSTrsi/DCiOKCRojo+yEpFws0cQkhbFZrESFnK1IYcCcMw8EMrSc9WmPIWEUx2EVGoqBqN1JGwHEvp5zgGlg85mgo6C7ywiYpEhSi5PMkQNjm8JRpKaWQLXFYTDnzgMkI/dVBoh9NSYBEagFYph2ah3IbCO1SximvevML0yv/94eBgBXhhHWuEGXYCS14CCjjAHKYO/HwnBdeAAy0PC+O5WhsRbcrdnvDghaRwK742GxyxN17QuANdtFFPSogSYSewImOROvORssykOl7CgF+DrxQABrVG2wr+hePk+EVRiiAW2hxYwEWu6t4wQaYLERZ3eYEVhwUKRrdh9nIndnwUqsAoqMAihA148H6t82V0RMLYcTnWX2SAYHUUfHNgINWXNzvt51jJYsobRpAjqG3ci4GwED5SQBM6oMpfR6Se44YwEgg9ICRRRwnXggZEA+0d9f0GoFEsgDbuus5UbAigSZHTAd1W6MmuNKYwyo+UcXB0aEDQlyKiMp1jZLaMLYkFFaYBSQzfY+clxHHhAY5HU/pAQEASEvrsPebSyGPZDe6xZkAfLcH2bCu8nI3dKzpbJNZFtQ0Pe8inTPVsLg8h5Gdxf5+vMgMDLNQHMYBXjfyQzCq2KF6OpjUSzL0/rExKgwsoVqHbeR6oEyFwWijMLOjsX9LWBxnP5HlESB6rrzIIy8rhHAUIEqJAhBtX1o3c/1z0Z0IQfD1JARGAGRLQFIREbiSCbEHsNJGFTFmt5PIMhQAhiuP4/9OkMI9yiCHIQlBFqdpLUSsKjTsJBbDgbUMrKP9coORH20dEF3FLlIwUSpZyWuSBVQMaNheerPyAPRY0jDEFHdWSoIxAJE6vILr9NEjBprbymzPjK9uhMxtTVmQAKJo2wZU2FnzGgMjio4oV04+Pw34IjbFQ7LLzcAAAAASUVORK5CYII="/>
                                                    </defs>
                                                    </svg>

                                                `;
                                            } else {
                                                previewHolder.innerHTML = `
                                                    <p>${getTextString("CARD_TYPE_EXTERNAL_SKU_ERROR")}</p>
                                                `;
                                            }
                                            
                                        } else if (product.type === 'plus_more') {
                                            card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                            card.querySelector("[data-product-card-name]").textContent = `${getTextString("CARD_TYPE_PLUS_MORE_TITLE")}`;
                                            card.querySelector("[data-product-card-summary]").textContent = `${getTextString("CARD_TYPE_PLUS_MORE_DESC")}`;

                                            card.querySelector("[data-shop-price-container]").innerHTML = ``;
                                            card.querySelector("[data-product-card-open-in-shop]").innerHTML = ``;
                                            card.querySelector("[data-share-product-card-button]").innerHTML = ``;

                                            const plusMoreQuestionMark = document.createElement("img");
                                            plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.png`;
                                            plusMoreQuestionMark.classList.add("plus-more-question-mark");
                                            card.querySelector("[data-shop-card-preview-holder]").appendChild(plusMoreQuestionMark);
                                
                                            // Hover effect for decoration image
                                            if (localStorage.reduced_motion != "true") {
                                                card.addEventListener("mouseenter", () => {
                                                    plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.gif`;
                                                });
                                                card.addEventListener("mouseleave", () => {
                                                    plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.png`;
                                                });
                                            }
                                        } else {
                                            card.classList.add('hidden')
                                        }
                                        
                                        
                                        const priceTextNitro = card.querySelector("[data-price-nitro]");
                                        const priceTextStandard = card.querySelector("[data-price-standard]");

                                        const priceContainerNitro = card.querySelector("[data-price-nitro-container]");
                                        const priceContainerStandard = card.querySelector("[data-price-standard-container]");

                                        const priceContainer = card.querySelector("[data-shop-price-container]");

                                        let priceStandard = "N/A";
                                        let priceNitro = "N/A";
                                        let priceOrb = "N/A";

                                        if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                            if (localStorage.is_nitro_user === "true") {
                                                if (product.prices && product.prices["4"] && product.prices["4"].country_prices && product.prices["4"].country_prices.prices) {
                                                    product.prices["4"].country_prices.prices.forEach(price => {
                                                        if (price.currency === "usd") {
                                                            priceStandard = price.amount;
                                                        }
                                                        if (price.currency === "discord_orb") {
                                                            priceOrb = price.amount;
                                                        }
                                                    });
    
                                                    if (priceStandard != "N/A" && priceOrb != "N/A") {
                                                        let orb_price = document.createElement("div");
                                                
                                                        orb_price.innerHTML = `
                                                            <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                            <div class="orb-icon" style="margin-left: -25px"></div>
                                                        `;
                                                        orb_price.style.position = `absolute`;
                                                        orb_price.style.right = `0px`;
                                                        
                                                        priceContainer.appendChild(orb_price);
    
                                                        standardPriceOutput = `US$${(priceStandard / 100).toFixed(2)}`;

                                                        priceContainerStandard.innerHTML = `
                                                            <a style="font-size: large; font-weight: 900; margin-left: 23px">${standardPriceOutput}</a>
                                                            <div class="nitro-icon" style="margin-left: -5px"></div>
                                                        `;
    
                                                    } else if (priceStandard != "N/A") {
    
                                                        standardPriceOutput = `US$${(priceStandard / 100).toFixed(2)}`;

                                                        priceContainerStandard.innerHTML = `
                                                            <a style="font-size: large; font-weight: 900; margin-left: 23px">${standardPriceOutput}</a>
                                                            <div class="nitro-icon" style="margin-left: -5px"></div>
                                                        `;
    
                                                    } else if (priceOrb != "N/A") {
    
                                                        let orb_price = document.createElement("div");
                                                
                                                        orb_price.innerHTML = `
                                                            <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                            <div class="orb-icon" style="margin-left: -25px"></div>
                                                        `;
                                                        orb_price.style.position = `absolute`;
                                                        orb_price.style.left = `23px`;
                                                        orb_price.style.bottom = `0px`;
                                                        
                                                        priceContainer.appendChild(orb_price);
    
                                                        card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="unplublished-tag">
                                                                <p class="unplublished-tag-text">${getTextString("CARD_ORB_EXCLUSIVE_TAG")}</p>
                                                            </div>
                                                        `;
                                                        
                                                    }
                                                }
                                            } else {
                                                if (product.prices && product.prices["0"] && product.prices["0"].country_prices && product.prices["0"].country_prices.prices) {
                                                    product.prices["0"].country_prices.prices.forEach(price => {
                                                        if (price.currency === "usd") {
                                                            priceStandard = price.amount;
                                                        }
                                                        if (price.currency === "discord_orb") {
                                                            priceOrb = price.amount;
                                                        }
                                                    });
    
                                                    if (priceStandard != "N/A" && priceOrb != "N/A") {
                                                        let orb_price = document.createElement("div");
                                                
                                                        orb_price.innerHTML = `
                                                            <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                            <div class="orb-icon" style="margin-left: -25px"></div>
                                                        `;
                                                        orb_price.style.position = `absolute`;
                                                        orb_price.style.right = `0px`;
                                                        
                                                        priceContainer.appendChild(orb_price);
    
                                                        priceTextStandard.textContent = `US$${(priceStandard / 100).toFixed(2)}`;
    
                                                    } else if (priceStandard != "N/A") {
    
                                                        priceTextStandard.textContent = `US$${(priceStandard / 100).toFixed(2)}`;
    
                                                    } else if (priceOrb != "N/A") {
    
                                                        let orb_price = document.createElement("div");
                                                
                                                        orb_price.innerHTML = `
                                                            <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                            <div class="orb-icon" style="margin-left: -25px"></div>
                                                        `;
                                                        orb_price.style.position = `absolute`;
                                                        orb_price.style.left = `23px`;
                                                        orb_price.style.bottom = `0px`;
                                                        
                                                        priceContainer.appendChild(orb_price);
    
                                                        card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="unplublished-tag">
                                                                <p class="unplublished-tag-text">${getTextString("CARD_ORB_EXCLUSIVE_TAG")}</p>
                                                            </div>
                                                        `;
                                                        
                                                    }
                                                }
                                            }

                                        } else {
                                            if (product.prices && product.prices["0"] && product.prices["0"].country_prices && product.prices["0"].country_prices.prices) {
                                                product.prices["0"].country_prices.prices.forEach(price => {
                                                    if (price.currency === "usd") {
                                                        priceStandard = price.amount;
                                                    }
                                                });
                                            }
                                    
                                            if (product.prices && product.prices["4"] && product.prices["4"].country_prices && product.prices["4"].country_prices.prices) {
                                                product.prices["4"].country_prices.prices.forEach(price => {
                                                    if (price.currency === "usd") {
                                                        priceNitro = price.amount;
                                                    }
                                                });
                                            }

                                            if (priceTextStandard) {
                                                priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "null";
                                            }
    
                                            if (priceTextNitro) {
                                                priceTextNitro.textContent = priceNitro !== "N/A" ? `US$${(priceNitro / 100).toFixed(2)} with Nitro` : "null";
                                            }
                                        }

                                        card.querySelector("[data-product-card-open-in-shop]").innerHTML = `
                                            <button class="card-button" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                        `;

                                        if (product.premium_type === 2) {
                                            card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                <div class="premiumWheelBadge_c23530 textBadge_df8943 base_df8943 eyebrow_df8943 baseShapeRound_df8943" aria-label="This bonus item is yours to keep and use anytime with an active Nitro subscription." style="background-color: var(--status-danger);"><svg class="premiumWheel_c23530" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M15 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" class=""></path><path fill="currentColor" fill-rule="evenodd" d="M7 4a1 1 0 0 0 0 2h3a1 1 0 1 1 0 2H5.5a1 1 0 0 0 0 2H8a1 1 0 1 1 0 2H6a1 1 0 1 0 0 2h1.25A8 8 0 1 0 15 4H7Zm8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" clip-rule="evenodd" class=""></path><path fill="currentColor" d="M2.5 10a1 1 0 0 0 0-2H2a1 1 0 0 0 0 2h.5Z" class=""></path></svg></div>
                                            `;
                                        }

                                        if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                            if (product.type === AVATAR_DECORATION || product.type === PROFILE_EFFECT || product.type === NAMEPLATE || product.type === BUNDLE || product.type === VARIANTS_GROUP || product.type === EXTERNAL_SKU) {
                                                card.classList.add('clickable');

                                                card.addEventListener("click", (event) => {
                                                    if (event.target.matches("[data-shop-card-var]")) {
                                                    } else {
                                                        openItemModal();
                                                    }
                                                });
                                                

                                                async function openItemModal() {
                                                    let modal = document.createElement("div");

                                                    modal.classList.add('modalv2');

                                                    if (apiCategory.pdp_bg != null) {
                                                        pdp = apiCategory.pdp_bg
                                                    } else {
                                                        pdp = apiCategory.banner
                                                    }

                                                    modal.innerHTML = `
                                                        <div class="modalv2-inner">
                                                            <div class="modalv2-inner-left">
                                                                <div data-modal-left-preview-holder></div>
                                                                <p data-product-modal-sku-id></p>
                                                                <p style="font-size: large; font-weight: 900;" data-product-modal-name></p>
                                                                <p style="color: var(--8)" data-product-modal-summary></p>
                                                                <div class="shop-modal-var-container-container" data-shop-modal-var-container-container>
                                                                    <div class="shop-modal-var-container" data-shop-modal-var-container></div>
                                                                    <a class="shop-modal-var-title" data-shop-modal-var-title></a>
                                                                </div>
                                                                <div class="modal-shop-price-container" data-shop-price-container>
                                                                    <div data-price-standard-container>
                                                                        <a style="font-size: large; font-weight: 900;" data-price-standard></a>
                                                                    </div>
                                                                    <div data-price-nitro-container>
                                                                        <a data-price-nitro></a>
                                                                    </div>
                                                                </div>
                                                                <div class="modal-left-bottom">
                                                                    <div class="modal-buttons" data-modal-buttons></div>
                                                                </div>
                                                            </div>
                                                            <img class="modalv2-inner-logo" src="https://cdn.yapper.shop/assets/31.png" data-modalv2-inner-logo></img>
                                                            <div class="shop-modal-tag-container" data-shop-card-tag-container></div>

                                                            <div data-modal-top-product-buttons>
                                                                <div title="Close" data-close-product-card-button>
                                                                    <svg class="closeIcon_modal" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M17.3 18.7a1 1 0 0 0 1.4-1.4L13.42 12l5.3-5.3a1 1 0 0 0-1.42-1.4L12 10.58l-5.3-5.3a1 1 0 0 0-1.4 1.42L10.58 12l-5.3 5.3a1 1 0 1 0 1.42 1.4L12 13.42l5.3 5.3Z" class=""></path></svg>
                                                                </div>
                                                                <div title="Copy Link" data-share-product-card-button></div>
                                                                <div title="Download Data" data-download-product-card-button></div>
                                                            </div>

                                                            <div id="modalv2-inner-right" class="modalv2-inner-right">
                                                                <img class="modalv2-inner-img" src="https://cdn.discordapp.com/app-assets/1096190356233670716/${pdp}.png?size=4096"></img>
                                                                <div data-modal-preview-holder></div>
                                                            </div>
                                                        </div>
                                                    `;

                                                    document.body.appendChild(modal);

                                                    setTimeout(() => {
                                                        modal.classList.add('show');
                                                    }, 1);

                                                    if (apiCategory.logo != null) {
                                                        modal.querySelector("[data-modalv2-inner-logo]").src = `https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.logo}.png?size=4096`;
                                                    }

                                                    if (product.type === AVATAR_DECORATION) {

                                                        modal.classList.add('modal-0');

                                                        product.items.forEach(item => {

                                                            const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                            const previewHolderLeft = modal.querySelector("[data-modal-left-preview-holder]");

                                                            modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                            modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                            modal.querySelector("[data-product-modal-summary]").textContent = product.summary;

                                                            if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {

                                                                previewHolder.classList.add('modal-preview-profile-container');
                                                                previewHolder.innerHTML = `
                                                                    <div class="modal-preview-profile1">
                                                                        <div class="options-preview-profile-banner-color"></div>
                                                                        <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                        <div class="profile-avatar-preview-bg"></div>
                                                                        <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                        <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                        <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                        <img id="profileAvatarDecoPreview" class="profile-avatar-deco-preview" src="https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true">
                                                                        <div class="options-preview-profile-status-bg"></div>
                                                                        <div class="options-preview-profile-status-color"></div>
                                                                    </div>
                                                                `;

                                                                document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();

                                                                previewHolderLeft.classList.add('modal-left-avatar-decoration-img');

                                                                const imgElement = document.createElement("img");
                                                                imgElement.id = "shop-card-deco-image";
                                                                imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;

                                                                previewHolderLeft.appendChild(imgElement);

                                                                if (localStorage.reduced_motion != "true") {
                                                                    imgElement.addEventListener("mouseenter", () => {
                                                                        imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                    });
                                                                
                                                                    imgElement.addEventListener("mouseleave", () => {
                                                                        imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                    });
                                                                }

                                                            } else {
                                                                
                                                                previewHolder.classList.add('modal-avatar-decoration-img');

                                                                const imgElement = document.createElement("img");
                                                                imgElement.id = "shop-card-deco-image";
                                                                imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;

                                                                previewHolder.appendChild(imgElement);

                                                                // Hover effect: Change the image src on mouse enter and leave
                                                                if (localStorage.reduced_motion != "true") {
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                        imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                    });
                                                                
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                        imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                    });
                                                                }
                                                            }

                                                        });
                                                    } else if (product.type === PROFILE_EFFECT) {
                                                        modal.classList.add('modal-1');
        
                                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                        modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                        modal.querySelector("[data-product-modal-summary]").textContent = product.summary;

                                                        // Ensure the item ID is accessible here
                                                        let itemId = undefined;
                                                        if (Array.isArray(product.items)) {
                                                            // If items is an array, find the item with type 1 and get its id
                                                            const item = product.items.find(item => item.type === 1);
                                                            if (item) {
                                                                itemId = item.id;
                                                            }
                                                        } else if (product.items && product.items.type === 1) {
                                                            // If items is an object and has type 1, get its id
                                                            itemId = product.items.id;
                                                        }
                                                    
                                                    
                                                        // Fetch profile effects API only if not already cached
                                                        if (!profileEffectsCache) {
                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                method: "GET",
                                                                headers: {
                                                                    "Password": api_password,
                                                                    "Token": api_token
                                                                }
                                                            });
                                                            const effectsData = await response.json();
                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                        }
                                                    
                                                        // Find matching profile effect
                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);

                                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                        const previewHolderLeft = modal.querySelector("[data-modal-left-preview-holder]");
                                                    
                                                        if (matchingEffect) {
                                                            if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                                                previewHolder.classList.add('modal-preview-profile-container');
                                                                previewHolder.innerHTML = `
                                                                    <div class="modal-preview-profile2">
                                                                        <div class="options-preview-profile-banner-color"></div>
                                                                        <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                        <div class="profile-avatar-preview-bg"></div>
                                                                        <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                        <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                        <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                        <div class="options-preview-profile-status-bg"></div>
                                                                        <div class="options-preview-profile-status-color"></div>
                                                                        <img id="profileProfileEffectPreview" class="profile-profile-effect-preview" src="${matchingEffect.effects[0]?.src}">
                                                                    </div>
                                                                `;

                                                                document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();

                                                                previewHolderLeft.classList.add('modal-left-profile-effect-img');
                                                            
                                                                const imgElement = document.createElement("img");
                                                                imgElement.src = matchingEffect.thumbnailPreviewSrc;

                                                                previewHolderLeft.appendChild(imgElement);
                                                            
                                                                if (localStorage.reduced_motion != "true") {
                                                                    imgElement.addEventListener("mouseenter", () => {
                                                                        if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                            const effectUrl = matchingEffect.effects[0]?.src;
                                                                            imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                        }
                                                                    });
                                                                
                                                                    imgElement.addEventListener("mouseleave", () => {
                                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                } else {
                                                                    imgElement.addEventListener("mouseenter", () => {
                                                                        imgElement.src = matchingEffect.reducedMotionSrc;
                                                                    });
                                                                
                                                                    imgElement.addEventListener("mouseleave", () => {
                                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                }
                                                            } else {
                                                                const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                                previewHolder.classList.add('modal-profile-effect-img');
                                                            
                                                                previewHolder.innerHTML = `
                                                                    <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                                `;
                                                            
                                                                // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                                const imgElement = previewHolder.querySelector("img");
                                                            
                                                                if (localStorage.reduced_motion != "true") {
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                        if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                            const effectUrl = matchingEffect.effects[0]?.src;
                                                                            imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                        }
                                                                    });
                                                                
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                } else {
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                        imgElement.src = matchingEffect.reducedMotionSrc;
                                                                    });
                                                                
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                }
                                                            }
                                                        }
                                                    } else if (product.type === NAMEPLATE) {
                                                        card.classList.add("modal-2");
            
                                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                        modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                        modal.querySelector("[data-product-modal-summary]").textContent = product.summary;
            
                                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                        previewHolder.classList.add('nameplate-modal-preview');
            
                                                        if (localStorage.discord_username && localStorage.discord_username != '') {
                                                            previewName = localStorage.discord_username;
                                                        } else {
                                                            previewName = 'Discord User'
                                                        }

                                                        if (localStorage.experiment_2025_03_early_nameplate_warning === "Treatment 1: Enabled") {
                                                            let nameplateWarning = document.createElement("div");

                                                            nameplateWarning.classList.add('nameplate-modal-early-warning-container');
                                                            nameplateWarning.innerHTML = `
                                                                <p>${getTextString("SHOP_NAMEPLATE_WARNING_NOTICE_1")}</p>
                                                                <a style="color: lightblue;" href="https://support.yapper.shop/?page=nameplates">${getTextString("SHOP_NAMEPLATE_WARNING_NOTICE_2")}</a>
                                                            `;


                                                            modal.querySelector(".modalv2-inner-left").appendChild(nameplateWarning);
                                                        }
            
                                                        previewHolder.innerHTML = `
                                                            <div class="nameplate-null-user">
                                                                <div class="nameplate-null-user-avatar"></div>
                                                                <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                            </div>
                                                            <div class="nameplate-null-user">
                                                                <div class="nameplate-null-user-avatar"></div>
                                                                <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                            </div>
                                                            <div class="nameplate-null-user" data-user-nameplate-preview>
                                                                <video muted loop class="nameplate-null-user" style="position: absolute;" data-user-nameplate-preview-img></video>
                                                                <div class="nameplate-user-avatar" data-nameplate-user-random-avatar></div>
                                                                <p class="nameplate-user-name">${previewName}</p>
                                                            </div>
                                                            <div class="nameplate-null-user">
                                                                <div class="nameplate-null-user-avatar"></div>
                                                                <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                            </div>
                                                            <div class="nameplate-null-user">
                                                                <div class="nameplate-null-user-avatar"></div>
                                                                <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                            </div>
                                                        `;
            
                                                        product.items.forEach(item => {
                                                            const nameplatePreview = previewHolder.querySelector("[data-user-nameplate-preview]");
                                                            const paletteName = item.palette;
                                                            const asset = `https://cdn.discordapp.com/assets/collectibles/${item.asset}asset.webm`;
                                                            const bgcolor = nameplate_palettes[paletteName].darkBackground;
            
                                                            const videoElement = previewHolder.querySelector("[data-user-nameplate-preview-img]");

                                                            videoElement.src = asset;
            
                                                            nameplatePreview.style.backgroundImage = `linear-gradient(10deg, #00000000 40%, ${bgcolor} 180%), linear-gradient(170deg, #00000000 40%, ${bgcolor} 180%)`;
                                                            // nameplatePreview.style.boxShadow = `0 0 0 1px #a10606`;
                                                            
                                                            const nullUserNameRandomWidth = previewHolder.querySelectorAll("[data-null-user-random-name]");
                                                            
                                                            nullUserNameRandomWidth.forEach(UserName => {
                                                                const randomWidth = Math.floor(Math.random() * (180 - 80 + 1)) + 80;
                                                                UserName.style.width = randomWidth + `px`;
                                                            });
                                                        
                                                            const nullUserAvatar = previewHolder.querySelectorAll("[data-nameplate-user-random-avatar]");
                                                        
                                                            nullUserAvatar.forEach(UserAvatar => {
                                                                UserAvatar.style.backgroundImage = `url(${localStorage.discord_avatar})`;
                                                            });

                                                            if (localStorage.reduced_motion != "true") {
                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                    videoElement.play();
                                                                });
                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                    videoElement.pause();
                                                                });
                                                            }
                                                        });
                                                        
                                                    } else if (product.type === BUNDLE) {
                                                        modal.classList.add('modal-1000');

                                                        const bundledProducts = product.bundled_products || [];

                                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                    
                                                        // Generate the bundle summary from the names of the bundled products
                                                        const type0Product = bundledProducts.find(item => item.type === 0);
                                                        const type1Product = bundledProducts.find(item => item.type === 1);
                                                    
                                                        let bundleSummary = `${getTextString("CARD_TYPE_BUNDLE_TITLE")}`;
                                                        if (type0Product) {
                                                            bundleSummary += `${type0Product.name}${getTextString("CARD_TYPE_BUNDLE_TITLE_DECO")}`;
                                                        }
                                                        if (type1Product) {
                                                            bundleSummary += `${type1Product.name}${getTextString("CARD_TYPE_BUNDLE_TITLE_EFFECT")}`;
                                                        }
                                                    
                                                        // Set the summary text
                                                        modal.querySelector("[data-product-modal-summary]").textContent = bundleSummary;
                                                    
                                                        // Set the basic card details
                                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                        modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                    
                                                        // Handle each item in the bundle
                                                        product.items.forEach(item => {
                                                            if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                                                
                                                                if (item.type === 0) {
                                                                    decosrc = item.asset
                                                                } else if (item.type === 1) {
                                                                    // Profile effect
                                                                    (async () => {
                                                                        // Fetch profile effects if not cached
                                                                        if (!profileEffectsCache) {
                                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                                method: "GET",
                                                                                headers: {
                                                                                    "Password": api_password,
                                                                                    "Token": api_token
                                                                                }
                                                                            });
                                                                            const effectsData = await response.json();
                                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                                        }
                                                    
                                                                        // Find the matching effect
                                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === item.id);
                                                    
                                                                        if (matchingEffect) {
                                                                            if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                const effectUrl = matchingEffect.effects[0]?.src;
                                                                                renderProfile(effectUrl)
                                                                            }
                                                                        }
                                                                    })();
                                                                }

                                                                function renderProfile(effectUrl) {
                                                                    previewHolder.classList.add('modal-preview-profile-container');
                                                                    previewHolder.innerHTML = `
                                                                        <div class="modal-preview-profile2">
                                                                            <div class="options-preview-profile-banner-color"></div>
                                                                            <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                            <div class="profile-avatar-preview-bg"></div>
                                                                            <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                            <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                            <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                            <img id="profileAvatarDecoPreview" class="profile-avatar-deco-preview" src="https://cdn.discordapp.com/avatar-decoration-presets/${decosrc}.png?size=4096&passthrough=true">
                                                                            <div class="options-preview-profile-status-bg"></div>
                                                                            <div class="options-preview-profile-status-color"></div>
                                                                            <img id="profileProfileEffectPreview" class="profile-profile-effect-preview" src="${effectUrl}">
                                                                        </div>
                                                                    `;
                                                                    document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();
                                                                }

                                                                
                                                            } else {
                                                                if (item.type === 0) {
                                                                    const decoImage = document.createElement("img");
                                                                    decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                    decoImage.alt = "Avatar Decoration";
                                                                    decoImage.classList.add("modal-avatar-decoration-img");
                                                                    modal.querySelector("[data-modal-preview-holder]").appendChild(decoImage);
                                                    
                                                                    // Hover effect for decoration image
                                                                    if (localStorage.reduced_motion != "true") {
                                                                        document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                            decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                        });

                                                                        document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                            decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                        });
                                                                    }
                                                                } else if (item.type === 1) {
                                                                    // Profile effect
                                                                    (async () => {
                                                                        // Fetch profile effects if not cached
                                                                        if (!profileEffectsCache) {
                                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                                method: "GET",
                                                                                headers: {
                                                                                    "Password": api_password,
                                                                                    "Token": api_token
                                                                                }
                                                                            });
                                                                            const effectsData = await response.json();
                                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                                        }
                                                    
                                                                        // Find the matching effect
                                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === item.id);
                                                    
                                                                        if (matchingEffect) {
                                                                            const effectImage = document.createElement("img");
                                                                            effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                            effectImage.alt = "Profile Effect";
                                                                            effectImage.classList.add("modal-profile-effect-img");
                                                                            modal.querySelector("[data-modal-preview-holder]").appendChild(effectImage);
                                                    
                                                                            // Hover effect for profile effect
                                                                            if (localStorage.reduced_motion != "true") {
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                    if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                        const effectUrl = matchingEffect.effects[0]?.src;
                                                                                        effectImage.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                                    }
                                                                                });
                                                                            
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                    effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                                });
                                                                            } else {
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                    effectImage.src = matchingEffect.reducedMotionSrc;
                                                                                });
                                                                            
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                    effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                                });
                                                                            }
                                                                        }
                                                                    })();
                                                                }
                                                            }
                                                        });
                                                    } else if (product.type === VARIANTS_GROUP) {
                                                        modal.querySelector("[data-shop-modal-var-container-container]").classList.add('show');
                                                        // Update SKU and summary
                                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                        modal.querySelector("[data-product-modal-summary]").textContent = product.summary;
                                                    
                                                        // Always display the base variant name
                                                        modal.querySelector("[data-product-modal-name]").textContent = product.variants[0]?.base_variant_name || "Product";
                                                    
                                                        // Render variant color blocks as interactive divs
                                                        const variantContainer = modal.querySelector("[data-shop-modal-var-container]");
                                                        variantContainer.innerHTML = ""; // Clear existing variant blocks
                                                        let currentSelectedVariant = null; // Track selected variant
                                                    
                                                        product.variants.forEach((variant, index) => {
                                                            // Create variant color block
                                                            const variantColorBlock = document.createElement("div");
                                                            variantColorBlock.classList.add("shop-card-var");
                                                            variantColorBlock.style.backgroundColor = `${variant.variant_value}`;
                                                    
                                                            // Add click event listener to switch variants
                                                            variantColorBlock.addEventListener("click", () => {
                                                                if (currentSelectedVariant) {
                                                                    currentSelectedVariant.classList.remove("shop-card-var-selected");
                                                                }
                                                                variantColorBlock.classList.add("shop-card-var-selected");
                                                                currentSelectedVariant = variantColorBlock;
                                                                applyVariant(variant);
                                                            });
                                                    
                                                            // Append the color block to the container
                                                            variantContainer.appendChild(variantColorBlock);
                                                    
                                                            // Set the first variant as the default selected
                                                            if (index === 0) {
                                                                currentSelectedVariant = variantColorBlock;
                                                                variantColorBlock.classList.add("shop-card-var-selected");
                                                            }
                                                        });
            
                                                        let isFirstTimeLoadingVariant = true;
                                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                        const previewHolderLeft = modal.querySelector("[data-modal-left-preview-holder]");
                                                    
                                                        // Function to apply the selected variant
                                                        function applyVariant(selectedVariant) {
                                                            modal.querySelector("[data-shop-modal-var-title]").textContent = `(${selectedVariant.variant_label})`;
                                                            modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${selectedVariant.sku_id}`;
                                                            modal.querySelector("[data-share-product-card-button]").innerHTML = `
                                                                <svg class="shareIcon_modal" onclick="copyEmoji('https://canary.discord.com/shop#itemSkuId=${selectedVariant.sku_id}');" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M16.32 14.72a1 1 0 0 1 0-1.41l2.51-2.51a3.98 3.98 0 0 0-5.62-5.63l-2.52 2.51a1 1 0 0 1-1.41-1.41l2.52-2.52a5.98 5.98 0 0 1 8.45 8.46l-2.52 2.51a1 1 0 0 1-1.41 0ZM7.68 9.29a1 1 0 0 1 0 1.41l-2.52 2.51a3.98 3.98 0 1 0 5.63 5.63l2.51-2.52a1 1 0 0 1 1.42 1.42l-2.52 2.51a5.98 5.98 0 0 1-8.45-8.45l2.51-2.51a1 1 0 0 1 1.42 0Z" class=""></path><path fill="currentColor" d="M14.7 10.7a1 1 0 0 0-1.4-1.4l-4 4a1 1 0 1 0 1.4 1.4l4-4Z" class=""></path></svg>
                                                            `;
                                                            if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                                modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                                    <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${selectedVariant.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                                `;
                                                            }
                                                            if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                                                
                                                                if (selectedVariant.type === 0) {
                                                                    selectedVariant.items?.forEach(item => {
                                                                        previewHolder.classList.add('modal-preview-profile-container');
                                                                        previewHolder.innerHTML = `
                                                                            <div class="modal-preview-profile1">
                                                                                <div class="options-preview-profile-banner-color"></div>
                                                                                <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                                <div class="profile-avatar-preview-bg"></div>
                                                                                <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                                <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                                <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                                <img id="profileAvatarDecoPreview" class="profile-avatar-deco-preview" src="https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true">
                                                                                <div class="options-preview-profile-status-bg"></div>
                                                                                <div class="options-preview-profile-status-color"></div>
                                                                            </div>
                                                                        `;
                                                                        document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();

                                                                        previewHolderLeft.classList.add('modal-left-avatar-decoration-img');

                                                                        previewHolderLeft.innerHTML = `
                                                                            <img id="shop-card-deco-image" src="https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&amp;passthrough=false" data-left-preview-deco-var>
                                                                        `;

                                                                        const imgElement = previewHolderLeft.querySelector("[data-left-preview-deco-var]");
                                                                        
                                                                        if (localStorage.reduced_motion != "true") {
                                                                            imgElement.addEventListener("mouseenter", () => {
                                                                                imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                            });
                                                                        
                                                                            imgElement.addEventListener("mouseleave", () => {
                                                                                imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                            });
                                                                        }
                                                                    });
                                                                } else if (selectedVariant.type === 1) {

                                                                    modal.classList.add("modal-2000-1");
                                                                    (async () => {
                                                                        // Ensure the item ID is accessible here
                                                                        let itemId = undefined;
                                                                        if (Array.isArray(selectedVariant.items)) {
                                                                            // If items is an array, find the item with type 1 and get its id
                                                                            const item = selectedVariant.items.find(item => item.type === 1);
                                                                            if (item) {
                                                                                itemId = item.id;
                                                                            }
                                                                        } else if (selectedVariant.items && selectedVariant.items.type === 1) {
                                                                            // If items is an object and has type 1, get its id
                                                                            itemId = selectedVariant.items.id;
                                                                        }
                                                                    
                                                                    
                                                                        // Fetch profile effects API only if not already cached
                                                                        if (!profileEffectsCache) {
                                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                                method: "GET",
                                                                                headers: {
                                                                                    "Password": api_password,
                                                                                    "Token": api_token
                                                                                }
                                                                            });
                                                                            const effectsData = await response.json();
                                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                                        }
                                                                    
                                                                        // Find matching profile effect
                                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                                                    
                                                                        if (matchingEffect) {
                                                                            if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                const effectUrl = matchingEffect.effects[0]?.src;
                                                                                previewHolder.classList.add('modal-preview-profile-container');
                                                                                previewHolder.innerHTML = `
                                                                                    <div class="modal-preview-profile2">
                                                                                        <div class="options-preview-profile-banner-color"></div>
                                                                                        <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                                        <div class="profile-avatar-preview-bg"></div>
                                                                                        <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                                        <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                                        <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                                        <div class="options-preview-profile-status-bg"></div>
                                                                                        <div class="options-preview-profile-status-color"></div>
                                                                                        <img id="profileProfileEffectPreview" class="profile-profile-effect-preview" src="${effectUrl}">
                                                                                    </div>
                                                                                `;
                                                                                document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();
                                                                            }
                                                                        }

                                                                        previewHolderLeft.classList.add('modal-left-profile-effect-img');

                                                                        previewHolderLeft.innerHTML = `
                                                                            <img src="${matchingEffect.thumbnailPreviewSrc}" data-left-preview-effect-var>
                                                                        `;

                                                                        const imgElement = previewHolderLeft.querySelector("[data-left-preview-effect-var]");
                                                                        
                                                                        if (localStorage.reduced_motion != "true") {
                                                                            imgElement.addEventListener("mouseenter", () => {
                                                                                if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                    const effectUrl = matchingEffect.effects[0]?.src;
                                                                                    imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                                }
                                                                            });
                                                                        
                                                                            imgElement.addEventListener("mouseleave", () => {
                                                                                // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                            });
                                                                        } else {
                                                                            imgElement.addEventListener("mouseenter", () => {
                                                                                imgElement.src = matchingEffect.reducedMotionSrc;
                                                                            });
                                                                        
                                                                            imgElement.addEventListener("mouseleave", () => {
                                                                                // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                            });
                                                                        }
                                                                    })();
                                                                }

                                                                
                                                            } else {
                                                                if (selectedVariant.type === 0) {
                                                                    modal.classList.add("modal-2000-0");
                                                                    previewHolder.innerHTML = ""; // Clear previous decorations
                                                                    previewHolder.classList.add('modal-avatar-decoration-img');
                                                                    
                                                                    // Add the avatar decoration based on the selected variant
                                                                    selectedVariant.items?.forEach(item => {
                                                                        const decoImage = document.createElement("img");
                                                                        decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                        decoImage.alt = "Avatar Decoration";
                                                                        decoImage.id = "shop-card-deco-image";
                                                                        previewHolder.appendChild(decoImage);
                                                                    
                                                                        // Hover effect for decoration image
                                                                        if (localStorage.reduced_motion !== "true") {
                                                                            document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                            });
                                                                            document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                            });
                                                                        }
                                                                    });
                                                                } else if (selectedVariant.type === 1) {
                                                                    modal.classList.add("modal-2000-1");
                                                                    (async () => {
                                                                        // Ensure the item ID is accessible here
                                                                        let itemId = undefined;
                                                                        if (Array.isArray(selectedVariant.items)) {
                                                                            // If items is an array, find the item with type 1 and get its id
                                                                            const item = selectedVariant.items.find(item => item.type === 1);
                                                                            if (item) {
                                                                                itemId = item.id;
                                                                            }
                                                                        } else if (selectedVariant.items && selectedVariant.items.type === 1) {
                                                                            // If items is an object and has type 1, get its id
                                                                            itemId = selectedVariant.items.id;
                                                                        }
                                                                    
                                                                    
                                                                        // Fetch profile effects API only if not already cached
                                                                        if (!profileEffectsCache) {
                                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                                method: "GET",
                                                                                headers: {
                                                                                    "Password": api_password,
                                                                                    "Token": api_token
                                                                                }
                                                                            });
                                                                            const effectsData = await response.json();
                                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                                        }
                                                                    
                                                                        // Find matching profile effect
                                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                                                    
                                                                        if (matchingEffect) {
                                                                            const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                                            previewHolder.classList.add('modal-profile-effect-img');
                                                                        
                                                                            previewHolder.innerHTML = `
                                                                                <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                                            `;
                                                                        
                                                                            // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                                            const imgElement = previewHolder.querySelector("img");
                                                                        
                                                                            if (localStorage.reduced_motion != "true") {
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                    if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                        const effectUrl = matchingEffect.effects[0]?.src;
                                                                                        imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                                    }
                                                                                });
                                                                            
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                                });
                                                                            } else {
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                    imgElement.src = matchingEffect.reducedMotionSrc;
                                                                                });
                                                                            
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                                });
                                                                            }
                                                                        }
                                                                    })();
                                                                }
                                                            }
                                                        }
                                                    
                                                        // Apply the default variant (first one) initially
                                                        if (product.variants.length > 0) {
                                                            applyVariant(product.variants[0]);
                                                        }
                                                    } else if (product.type === EXTERNAL_SKU) {
                                                        modal.classList.add('modal-3000');
            
                                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                        modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                        modal.querySelector("[data-product-modal-summary]").textContent = product.summary;
            
                                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
            
                                                        if (product.sku_id === "1342211853484429445") {
                                                            previewHolder.classList.add('modal-potion-img');
                                                                
                                                            previewHolder.innerHTML = `
                                                                <svg class="potion-card-preview profile-badge-orb-preview" width="187" height="187" viewBox="0 0 187 187" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                <g clip-path="url(#clip0_136_3)">
                                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M93.2014 34.4915L41.7391 64.2032V123.627L93.2014 153.338L144.664 123.627V64.2032L93.2014 34.4915ZM173.024 47.8295L93.2014 1.7439L13.3789 47.8295V140L93.2014 186.086L173.024 140V47.8295Z" fill="white"/>
                                                                <path d="M106.759 80.3577L98.3727 57.9977C96.5807 53.2198 89.8225 53.2198 88.0305 57.9977L79.6447 80.3577L57.2847 88.7437C52.5067 90.5355 52.5067 97.2939 57.2847 99.0857L79.6447 107.472L88.0305 129.832C89.8225 134.61 96.5807 134.61 98.3727 129.832L106.759 107.472L129.119 99.0857C133.896 97.2939 133.896 90.5355 129.119 88.7437L106.759 80.3577Z" fill="white"/>
                                                                </g>
                                                                <defs>
                                                                <clipPath id="clip0_136_3">
                                                                <rect width="160.82" height="187" fill="white" transform="translate(13.0908)"/>
                                                                </clipPath>
                                                                </defs>
                                                                </svg>
                                                            `;
                                                        } else if (product.sku_id === "1333912750274904064") {
                                                            previewHolder.classList.add('modal-potion-img');
                                                                
                                                            previewHolder.innerHTML = `
                                                                <svg class="potion-card-preview nitro-3-days-orb-preview" width="187" height="187" viewBox="0 0 187 187" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                                <rect y="16" width="187" height="140" fill="url(#pattern0_136_11)"/>
                                                                <defs>
                                                                <pattern id="pattern0_136_11" patternContentUnits="objectBoundingBox" width="1" height="1">
                                                                <use xlink:href="#image0_136_11" transform="matrix(0.00369004 0 0 0.00492884 0 -0.000276753)"/>
                                                                </pattern>
                                                                <image id="image0_136_11" width="271" height="203" preserveAspectRatio="none" xlink:href="data:image/png;base64,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"/>
                                                                </defs>
                                                                </svg>
            
                                                            `;
                                                        } else {
                                                            previewHolder.innerHTML = `
                                                                <p>${getTextString("CARD_TYPE_EXTERNAL_SKU_ERROR")}</p>
                                                            `;
                                                        }
                                                        
                                                    }


                                                    const button_container = document.querySelector("[data-modal-buttons]");
                                                    
                                                    if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads") {
                                                        button_container.innerHTML = `
                                                            <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                        `;
                                                        modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                            <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${product.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                        `;
                                                    } else if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+") {
                                                        if (typeof product.emojiCopy != 'undefined') {
                                                            button_container.innerHTML = `
                                                                <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                                <button class="card-button ${product.emojiCopy ? '' : 'card-button-no-emoji'}" onclick="${product.emojiCopy ? `copyEmoji('${product.emojiCopy}')` : `redirectToGoogle()`}" title="${product.emojiCopy ? `${getTextString("CARD_COPY_PPLUS_EMOJI_TITLE")}` : `${getTextString("CARD_REQUEST_PPLUS_EMOJI_TITLE")}`}">${product.emojiCopy ? `${getTextString("CARD_COPY_PPLUS_EMOJI")}` : `${getTextString("CARD_REQUEST_PPLUS_EMOJI")}`}</button>
                                                            `;
                                                        } else {
                                                            button_container.innerHTML = `
                                                                <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                                <button class="card-button card-button-no-emoji" title="${getTextString("CARD_PPLUS_ERROR_TITLE")}">${getTextString("CARD_PPLUS_ERROR")}</button>
                                                            `;
                                                        }
                                                    } else if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+") {
                                                        if (typeof product.emojiCopy != 'undefined') {
                                                            button_container.innerHTML = `
                                                                <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                                <button class="card-button ${product.emojiCopy ? '' : 'card-button-no-emoji'}" onclick="${product.emojiCopy ? `copyEmoji('${product.emojiCopy}')` : `redirectToGoogle()`}" title="${product.emojiCopy ? `${getTextString("CARD_COPY_PPLUS_EMOJI_TITLE")}` : `${getTextString("CARD_REQUEST_PPLUS_EMOJI_TITLE")}`}">${product.emojiCopy ? `${getTextString("CARD_COPY_PPLUS_EMOJI")}` : `${getTextString("CARD_REQUEST_PPLUS_EMOJI")}`}</button>
                                                            `;
                                                            modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                                <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${product.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                            `;
                                                        } else {
                                                            button_container.innerHTML = `
                                                                <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                                <button class="card-button card-button-no-emoji" title="${getTextString("CARD_PPLUS_ERROR_TITLE")}">${getTextString("CARD_PPLUS_ERROR")}</button>
                                                            `;
                                                            modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                                <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${product.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                            `;
                                                        }
                                                    } else if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                        button_container.innerHTML = `
                                                            <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                        `;
                                                        modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                            <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${product.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                        `;
                                                    } else {
                                                        button_container.innerHTML = `
                                                            <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                        `;
                                                    }


                                                    modal.querySelector("[data-share-product-card-button]").innerHTML = `
                                                        <svg class="shareIcon_modal" onclick="copyEmoji('https://canary.discord.com/shop#itemSkuId=${product.sku_id}');" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M16.32 14.72a1 1 0 0 1 0-1.41l2.51-2.51a3.98 3.98 0 0 0-5.62-5.63l-2.52 2.51a1 1 0 0 1-1.41-1.41l2.52-2.52a5.98 5.98 0 0 1 8.45 8.46l-2.52 2.51a1 1 0 0 1-1.41 0ZM7.68 9.29a1 1 0 0 1 0 1.41l-2.52 2.51a3.98 3.98 0 1 0 5.63 5.63l2.51-2.52a1 1 0 0 1 1.42 1.42l-2.52 2.51a5.98 5.98 0 0 1-8.45-8.45l2.51-2.51a1 1 0 0 1 1.42 0Z" class=""></path><path fill="currentColor" d="M14.7 10.7a1 1 0 0 0-1.4-1.4l-4 4a1 1 0 1 0 1.4 1.4l4-4Z" class=""></path></svg>
                                                    `;


                                                    const priceTextNitro = modal.querySelector("[data-price-nitro]");
                                                    const priceTextStandard = modal.querySelector("[data-price-standard]");

                                                    const priceContainerNitro = modal.querySelector("[data-price-nitro-container]");
                                                    const priceContainerStandard = modal.querySelector("[data-price-standard-container]");

                                                    const priceContainer = modal.querySelector("[data-shop-price-container]");

                                                    let priceStandard = "N/A";
                                                    let priceNitro = "N/A";
                                                    let priceOrb = "N/A";

                                                    if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                                        if (localStorage.is_nitro_user === "true") {
                                                            if (product.prices && product.prices["4"] && product.prices["4"].country_prices && product.prices["4"].country_prices.prices) {
                                                                product.prices["4"].country_prices.prices.forEach(price => {
                                                                    if (price.currency === "usd") {
                                                                        priceStandard = price.amount;
                                                                    }
                                                                    if (price.currency === "discord_orb") {
                                                                        priceOrb = price.amount;
                                                                    }
                                                                });
                
                                                                if (priceStandard != "N/A" && priceOrb != "N/A") {
                                                                    let orb_price = document.createElement("div");
                                                            
                                                                    orb_price.innerHTML = `
                                                                        <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                                        <div class="orb-icon" style="margin-left: -25px"></div>
                                                                    `;
                                                                    orb_price.style.position = `absolute`;
                                                                    orb_price.style.right = `0px`;
                                                                    
                                                                    priceContainer.appendChild(orb_price);
                
                                                                    standardPriceOutput = `US$${(priceStandard / 100).toFixed(2)}`;
            
                                                                    priceContainerStandard.innerHTML = `
                                                                        <a style="font-size: large; font-weight: 900; margin-left: 23px">${standardPriceOutput}</a>
                                                                        <div class="nitro-icon" style="margin-left: -5px"></div>
                                                                    `;
                
                                                                } else if (priceStandard != "N/A") {
                
                                                                    standardPriceOutput = `US$${(priceStandard / 100).toFixed(2)}`;
            
                                                                    priceContainerStandard.innerHTML = `
                                                                        <a style="font-size: large; font-weight: 900; margin-left: 23px">${standardPriceOutput}</a>
                                                                        <div class="nitro-icon" style="margin-left: -5px"></div>
                                                                    `;
                
                                                                } else if (priceOrb != "N/A") {
                
                                                                    let orb_price = document.createElement("div");
                                                            
                                                                    orb_price.innerHTML = `
                                                                        <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                                        <div class="orb-icon" style="margin-left: -25px"></div>
                                                                    `;
                                                                    orb_price.style.position = `absolute`;
                                                                    orb_price.style.left = `20px`;
                                                                    
                                                                    priceContainer.appendChild(orb_price);
                
                                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                        <div class="unplublished-tag">
                                                                            <p class="unplublished-tag-text">${getTextString("CARD_ORB_EXCLUSIVE_TAG")}</p>
                                                                        </div>
                                                                    `;
                                                                    
                                                                }
                                                            }
                                                        } else {
                                                            if (product.prices && product.prices["0"] && product.prices["0"].country_prices && product.prices["0"].country_prices.prices) {
                                                                product.prices["0"].country_prices.prices.forEach(price => {
                                                                    if (price.currency === "usd") {
                                                                        priceStandard = price.amount;
                                                                    }
                                                                    if (price.currency === "discord_orb") {
                                                                        priceOrb = price.amount;
                                                                    }
                                                                });
                
                                                                if (priceStandard != "N/A" && priceOrb != "N/A") {
                                                                    let orb_price = document.createElement("div");
                                                            
                                                                    orb_price.innerHTML = `
                                                                        <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                                        <div class="orb-icon" style="margin-left: -25px"></div>
                                                                    `;
                                                                    orb_price.style.position = `absolute`;
                                                                    orb_price.style.right = `0px`;
                                                                    
                                                                    priceContainer.appendChild(orb_price);
                
                                                                    priceTextStandard.textContent = `US$${(priceStandard / 100).toFixed(2)}`;
                
                                                                } else if (priceStandard != "N/A") {
                
                                                                    priceTextStandard.textContent = `US$${(priceStandard / 100).toFixed(2)}`;
                
                                                                } else if (priceOrb != "N/A") {
                
                                                                    let orb_price = document.createElement("div");
                                                            
                                                                    orb_price.innerHTML = `
                                                                        <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                                        <div class="orb-icon" style="margin-left: -25px"></div>
                                                                    `;
                                                                    orb_price.style.position = `absolute`;
                                                                    orb_price.style.left = `23px`;
                                                                    
                                                                    priceContainer.appendChild(orb_price);
                
                                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                        <div class="unplublished-tag">
                                                                            <p class="unplublished-tag-text">${getTextString("CARD_ORB_EXCLUSIVE_TAG")}</p>
                                                                        </div>
                                                                    `;
                                                                    
                                                                }
                                                            }
                                                        }
            
                                                    } else {
                                                        if (product.prices && product.prices["0"] && product.prices["0"].country_prices && product.prices["0"].country_prices.prices) {
                                                            product.prices["0"].country_prices.prices.forEach(price => {
                                                                if (price.currency === "usd") {
                                                                    priceStandard = price.amount;
                                                                }
                                                            });
                                                        }
                                                
                                                        if (product.prices && product.prices["4"] && product.prices["4"].country_prices && product.prices["4"].country_prices.prices) {
                                                            product.prices["4"].country_prices.prices.forEach(price => {
                                                                if (price.currency === "usd") {
                                                                    priceNitro = price.amount;
                                                                }
                                                            });
                                                        }
            
                                                        if (priceTextStandard) {
                                                            priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "null";
                                                        }
                
                                                        if (priceTextNitro) {
                                                            priceTextNitro.textContent = priceNitro !== "N/A" ? `US$${(priceNitro / 100).toFixed(2)} with Nitro` : "null";
                                                        }
                                                    }

                                                    if (priceTextStandard.textContent === "null" && priceTextNitro.textContent === "null") {
                                                        let error_warning = document.createElement("div");

                                                        error_warning.classList.add('invalid_currency_warning');
                                                        error_warning.innerHTML = `
                                                            <p>This item does not support this currency!</p>
                                                        `;
                                                                    
                                                        priceContainer.appendChild(error_warning);
                                                    } else if (priceTextStandard.textContent === "null" || priceTextNitro.textContent === "null") {
                                                        let error_warning = document.createElement("div");

                                                        error_warning.classList.add('invalid_currency_warning');
                                                        error_warning.innerHTML = `
                                                            <p>This item does not fully support this currency!</p>
                                                        `;
                                                                    
                                                        priceContainer.appendChild(error_warning);
                                                    }


                                                    const unpublishedAt = new Date(product.unpublished_at);
                            
                                                    if (product.unpublished_at && !isNaN(unpublishedAt.getTime())) {
                            
                                                        function updateTimer() {
                                                            const now = new Date();
                                                            const timeDiff = unpublishedAt - now;
                            
                                                            if (timeDiff <= 0) {
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${getTextString("CARD_UNPUBLISHED_TAG")}</p>
                                                                    </div>
                                                                `;
                                                                clearInterval(timerInterval);
                                                            } else {
                                                                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                            
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${days}${getTextString("CARD_UNPUBLISHED_COUNTDOWN_TAG")}</p>
                                                                    </div>
                                                                `;
                                                            }
                                                        }
                            
                                                        const timerInterval = setInterval(updateTimer, 1000);
                                                        updateTimer();
                                                    }

                                                    const ExpiredAt = new Date(product.expires_at);
                            
                                                    if (product.expires_at && !isNaN(ExpiredAt.getTime())) {
                            
                                                        function updateTimer() {
                                                            const now = new Date();
                                                            const timeDiff = ExpiredAt - now;
                            
                                                            if (timeDiff <= 0) {
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_TAG")}</p>
                                                                    </div>
                                                                `;
                                                                clearInterval(timerInterval);
                                                            } else {
                                                                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                            
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_COUNTDOWN_TAG")}${days}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_DAYS")}${hours}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_HOURS")}</p>
                                                                    </div>
                                                                `;
                                                            }
                                                        }
                            
                                                        const timerInterval = setInterval(updateTimer, 1000);
                                                        updateTimer();
                                                    }

                                                    if (product.premium_type === 2) {
                                                        modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="premiumWheelBadge_c23530 textBadge_df8943 base_df8943 eyebrow_df8943 baseShapeRound_df8943" aria-label="This bonus item is yours to keep and use anytime with an active Nitro subscription." style="background-color: var(--status-danger);"><svg class="premiumWheel_c23530" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M15 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" class=""></path><path fill="currentColor" fill-rule="evenodd" d="M7 4a1 1 0 0 0 0 2h3a1 1 0 1 1 0 2H5.5a1 1 0 0 0 0 2H8a1 1 0 1 1 0 2H6a1 1 0 1 0 0 2h1.25A8 8 0 1 0 15 4H7Zm8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" clip-rule="evenodd" class=""></path><path fill="currentColor" d="M2.5 10a1 1 0 0 0 0-2H2a1 1 0 0 0 0 2h.5Z" class=""></path></svg></div>
                                                        `;
                                                    }
                                                    


                                                    let modal_back = document.createElement("div");

                                                    modal_back.classList.add('modalv2-back');
                                                    modal_back.id = 'modalv2-back';

                                                    document.body.appendChild(modal_back);

                                                    setTimeout(() => {
                                                        modal_back.classList.add('show');
                                                    }, 1);


                                                    modal.addEventListener('click', (event) => {
                                                        if (event.target === modal) {
                                                            modal.classList.remove('show');
                                                            modal_back.classList.remove('show');
                                                            setTimeout(() => {
                                                                modal.remove();
                                                                modal_back.remove();
                                                            }, 300);
                                                        }
                                                    });

                                                    document.querySelector("[data-close-product-card-button]").addEventListener('click', () => {
                                                        modal.classList.remove('show');
                                                        modal_back.classList.remove('show');
                                                        setTimeout(() => {
                                                            modal.remove();
                                                            modal_back.remove();
                                                        }, 300);
                                                    });
                                                }
                                            }
                                        } else {
                                            card.querySelector("[data-share-product-card-button]").innerHTML = `
                                                <svg class="shareIcon_f4a996" onclick="copyEmoji('https://canary.discord.com/shop#itemSkuId=${product.sku_id}');" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M16.32 14.72a1 1 0 0 1 0-1.41l2.51-2.51a3.98 3.98 0 0 0-5.62-5.63l-2.52 2.51a1 1 0 0 1-1.41-1.41l2.52-2.52a5.98 5.98 0 0 1 8.45 8.46l-2.52 2.51a1 1 0 0 1-1.41 0ZM7.68 9.29a1 1 0 0 1 0 1.41l-2.52 2.51a3.98 3.98 0 1 0 5.63 5.63l2.51-2.52a1 1 0 0 1 1.42 1.42l-2.52 2.51a5.98 5.98 0 0 1-8.45-8.45l2.51-2.51a1 1 0 0 1 1.42 0Z" class=""></path><path fill="currentColor" d="M14.7 10.7a1 1 0 0 0-1.4-1.4l-4 4a1 1 0 1 0 1.4 1.4l4-4Z" class=""></path></svg>
                                            `;
                                        }


                                        function newItemCheck() {

                                            if (N > g) {
                                            } else {
                                                card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                    <div class="unplublished-tag">
                                                        <p class="unplublished-tag-text">${getTextString("CARD_NEW_TAG")}</p>
                                                    </div>
                                                `;
                                            }
                                        }
                                                                            
                                        if (m.includes(product.sku_id)) {
                                            newItemCheck();
                                        }

                                        function newColorItemCheck() {

                                            if (N > newColorsExpireDate) {
                                            } else {
                                                card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                    <div class="unplublished-tag">
                                                        <p class="unplublished-tag-text">${getTextString("CARD_NEW_COLORS_TAG")}</p>
                                                    </div>
                                                `;
                                            }
                                        }
                                                                            
                                        if (newColorsSKUIDS.includes(product.sku_id) && ANIME_V3 === apiCategory.sku_id) {
                                            newColorItemCheck();
                                        }

                                        function popularItemCheck() {
                                            card.classList.add('popular-item');
                                        }
                                                                            
                                        if (I.includes(product.sku_id)) {
                                            popularItemCheck();
                                        }


                                        const unpublishedAt = new Date(product.unpublished_at);
                            
                                        if (product.unpublished_at && !isNaN(unpublishedAt.getTime())) {
                            
                                            function updateTimer() {
                                                const now = new Date();
                                                const timeDiff = unpublishedAt - now;
                            
                                                if (timeDiff <= 0) {
                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${getTextString("CARD_UNPUBLISHED_TAG")}</p>
                                                        </div>
                                                    `;
                                                    clearInterval(timerInterval);
                                                } else {
                                                    const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                    const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                    const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                            
                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${days}${getTextString("CARD_UNPUBLISHED_COUNTDOWN_TAG")}</p>
                                                        </div>
                                                    `;
                                                }
                                            }
                            
                                            const timerInterval = setInterval(updateTimer, 1000);
                                            updateTimer();
                                        }

                                        const ExpiredAt = new Date(product.expires_at);
                            
                                        if (product.expires_at && !isNaN(ExpiredAt.getTime())) {
                            
                                            function updateTimer() {
                                                const now = new Date();
                                                const timeDiff = ExpiredAt - now;
                            
                                                if (timeDiff <= 0) {
                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_TAG")}</p>
                                                        </div>
                                                    `;
                                                    clearInterval(timerInterval);
                                                } else {
                                                    const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                    const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                    const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                            
                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_COUNTDOWN_TAG")}${days}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_DAYS")}${hours}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_HOURS")}</p>
                                                        </div>
                                                    `;
                                                }
                                            }
                            
                                            const timerInterval = setInterval(updateTimer, 1000);
                                            updateTimer();
                                        }

                                        // Append card to output
                                        cardOutput.append(card);
                                    }
                                }
            
                                categoryOutput.append(category);

                                const winter_wonderland_banner = document.getElementById(WINTER_WONDERLAND);
                                const lofi_girl_banner = document.getElementById(LOFI_GIRL);
                                const kawaii_mode_banner = document.getElementById(KAWAII_MODE);
                                const arcane_banner = document.getElementById(WARRIOR);
                                const mythical_creatures_banner = document.getElementById(MYTHICAL_CREATURES);
                                const dnd_banner = document.getElementById(CHANCE);
                                const spooky_night_banner = document.getElementById(SPOOKY_NIGHT);
                                const street_fighter_banner = document.getElementById(BAND);
                                const autumn_equinox_banner = document.getElementById(AUTUMN_EQUINOX);
                                const fall_banner = document.getElementById(FALL);
                                const the_vault_banner = document.getElementById(THE_VAULT);
                                const dojo_banner = document.getElementById(DOJO);
                                const valorant_champions_banner = document.getElementById(STORM);
                                const sponge_bob_banner = document.getElementById(ROBERT);
                                const dark_fantasy_banner = document.getElementById(DARK_FANTASY);
                                const palworld_banner = document.getElementById(TIDE);
                                const valorant_banner = document.getElementById(SHY);
                                const springtoons_banner = document.getElementById(SPRINGTOONS);
                                const anime_v2_banner = document.getElementById(ANIME_V2);

                                if (localStorage.disable_client_banner_overrides != "true") {
                                    if (palworld_banner) {
                                        document.getElementById(`${TIDE}-discord-watermark-container`).innerHTML = ``;
                                        document.getElementById(`${TIDE}-banner-banner-container`).innerHTML = `
                                            <img style="position: absolute; left: 0px; bottom: 0px; width: 1280px;" src="https://cdn.yapper.shop/discord-assets/15.jpg">
                                            <img style="position: absolute; right: 0px; bottom: 0px; width: 400px;" src="https://cdn.yapper.shop/discord-assets/13.png">
                                            <img style="position: absolute; left: 0px; bottom: 0px; width: 400px;" src="https://cdn.yapper.shop/discord-assets/12.png">
                                        `;
                                        document.getElementById(`${TIDE}-logo-container`).innerHTML = `
                                            <img class="shop-category-banner-logo" src="https://cdn.yapper.shop/discord-assets/9.png" id="shop-banner-logo">
                                        `;
                                    }
                                    
                                    if (valorant_banner) {
                                        document.getElementById(`${SHY}-discord-watermark-container`).innerHTML = ``;
                                        document.getElementById(`${SHY}-banner-banner-container`).innerHTML = `
                                            <div class="shop-category-banner-img" style="background: rgb(255, 70, 85); position: absolute; left: 0px; bottom: 0px; width: 1280px;"></div>
                                            <img style="position: absolute; left: 0px; bottom: 0px; width: 1280px;" src="https://cdn.yapper.shop/discord-assets/23.png">
                                            <img style="position: absolute; left: 0px; bottom: 0px; width: 1280px;" src="https://cdn.yapper.shop/discord-assets/20.png">
                                            <img style="position: absolute; right: 0px; bottom: 0px; width: 1280px;" src="https://cdn.yapper.shop/discord-assets/22.png">
                                        `;
                                        document.getElementById(`${SHY}-logo-container`).innerHTML = `
                                            <img class="shop-category-banner-logo" src="https://cdn.yapper.shop/discord-assets/21.png" id="shop-banner-logo">
                                        `;
                                    }

                                    if (localStorage.reduced_motion != "true") {
    
                                        if (arcane_banner) {
                                            document.getElementById(`${WARRIOR}-banner-banner-container`).innerHTML = `
                                                <img class="shop-category-banner-img" style="position: absolute; left: 0px; bottom: 0px; width: 1280px;" src="https://cdn.discordapp.com/app-assets/1096190356233670716/1303490165297123358.png?size=4096">
                                                <img class="shop-category-banner-img" style="position: absolute; left: 0px; bottom: 0px; width: 1280px;" src="https://cdn.yapper.shop/discord-assets/35.png">
                                            `;
                                        }
                                        
                                        if (dnd_banner) {
                                            document.getElementById(`${CHANCE}-banner-banner-container`).innerHTML = `
                                                <img class="shop-category-banner-img" style="position: absolute; left: 0px; bottom: 0px; width: 1280px;" src="https://cdn.yapper.shop/discord-assets/32.png">
                                                <img class="shop-category-banner-img" style="position: absolute; left: 0px; bottom: 0px; width: 1280px;" src="https://cdn.yapper.shop/discord-assets/31.png">
                                            `;
                                        }
                                        
                                        if (street_fighter_banner) {
                                            document.getElementById(`${BAND}-banner-banner-container`).innerHTML = `
                                                <img class="shop-category-banner-img" style="position: absolute; left: 0px; bottom: 0px; width: 1280px;" src="https://cdn.discordapp.com/app-assets/1096190356233670716/1285465421356732426.png?size=4096">
                                                <img class="shop-category-banner-img" style="position: absolute; left: 0px; bottom: 0px; width: 1280px;" src="https://cdn.yapper.shop/discord-assets/19.png">
                                            `;
                                        }
    
                                        if (palworld_banner) {
                                            document.getElementById(`${TIDE}-discord-watermark-container`).innerHTML = ``;
                                            document.getElementById(`${TIDE}-banner-banner-container`).innerHTML = `
                                                <img style="position: absolute; left: 0px; bottom: 0px; width: 1280px;" src="https://cdn.yapper.shop/discord-assets/15.jpg">
                                                <img style="position: absolute; right: 0px; bottom: 0px; width: 1280px;" src="https://cdn.yapper.shop/discord-assets/14.png">
                                                <img style="position: absolute; right: 0px; bottom: 0px; width: 400px;" src="https://cdn.yapper.shop/discord-assets/13.png">
                                                <img style="position: absolute; left: 0px; bottom: 0px; width: 400px;" src="https://cdn.yapper.shop/discord-assets/12.png">
                                            `;
                                            document.getElementById(`${TIDE}-logo-container`).innerHTML = `
                                                <img class="shop-category-banner-logo" src="https://cdn.yapper.shop/discord-assets/9.png" id="shop-banner-logo">
                                            `;
                                        }
    
                                        if (valorant_banner) {
                                            document.getElementById(`${SHY}-discord-watermark-container`).innerHTML = ``;
                                            document.getElementById(`${SHY}-banner-banner-container`).innerHTML = `
                                                <div class="shop-category-banner-img" style="background: rgb(255, 70, 85); position: absolute; left: 0px; bottom: 0px; width: 1280px;"></div>
                                                <img style="position: absolute; left: 0px; bottom: 0px; width: 1280px;" src="https://cdn.yapper.shop/discord-assets/24.png">
                                                <img style="position: absolute; right: 0px; bottom: 0px; width: 1280px;" src="https://cdn.yapper.shop/discord-assets/22.png">
                                                <img style="position: absolute; left: 0px; bottom: 0px; width: 1280px;" src="https://cdn.yapper.shop/discord-assets/20.png">
                                            `;
                                            document.getElementById(`${SHY}-logo-container`).innerHTML = `
                                                <img class="shop-category-banner-logo" src="https://cdn.yapper.shop/discord-assets/21.png" id="shop-banner-logo">
                                            `;
                                        }
                                        
                                    }
                                }

                                if (fall_banner) {
                                    document.getElementById(`${FALL}-discord-watermark-container`).innerHTML = ``;
                                    document.getElementById(`${FALL}-logo-container`).innerHTML = ``;
                                }
                            }
                        }
            
                        // Remove loading container
                        document.getElementById("shop-category-loading-container").innerHTML = ``;
                    }
                })
                .catch(error => {
                    console.error('Error fetching the API:', error);
                    document.getElementById("everything-housing-container").innerHTML = `
                        <div style="text-align: center; margin-top: 10px;" id="failed-to-load-shop">
                            <img style="width: 200px;" src="https://raw.githubusercontent.com/DTACat/Collectibles/main/Images/shopuhoh.png">
                            <h2>${getTextString("SHOP_NOT_LOAD_ERROR_1")}</h2>
                            <p>${getTextString("SHOP_NOT_LOAD_ERROR_2")}</p>
                            <p>${error}</p>
                            <button class="refresh-button" onclick="location.reload();">${getTextString("SHOP_NOT_LOAD_ERROR_RELOAD")}</button>
                        </div>
                    `;
                });

        } else if (params.get("page") === "home") {

            fetchFirstHomeData();

            function fetchFirstHomeData() {
                let profileEffectsCache = null;
            
                fetch(apiUrl, {
                    method: "GET",
                    headers: {
                        "Password": api_password,
                        "Token": api_token
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.message === "Missing Access") {
                        document.getElementById("everything-housing-container").innerHTML = `
                            <div style="text-align: center; margin-top: 10px;" id="failed-to-load-shop">
                                <img style="width: 200px;" src="https://raw.githubusercontent.com/DTACat/Collectibles/main/Images/shopuhoh.png">
                                <h2>${getTextString("SHOP_NOT_LOAD_ERROR_1")}</h2>
                                <p>${getTextString("SHOP_NOT_LOAD_ERROR_2")}</p>
                                <p>${getTextString("SHOP_NOT_LOAD_ERROR")}${data.message}</p>
                                <button class="refresh-button" onclick="location.reload();">${getTextString("SHOP_NOT_LOAD_ERROR_RELOAD")}</button>
                            </div>
                        `;
                    } else {
                        data.forEach(apiCategory => {
                            async function processCategories() {
                                const output = document.querySelector("[data-shop-output]");
                                const output0 = document.querySelector("[data-shop-0-output]");
                                if (apiCategory.type === HERO) {
                                    const template = document.querySelector("[data-shop-category-template]");
                                
                                    const category = template.content.cloneNode(true).children[0];
                                
                                    if (apiCategory.hero_banner_asset) {
                                        if (apiCategory.hero_banner_asset.animated != null) {
                                            if (apiCategory.hero_banner_asset.static != null) {
                                                category.querySelector("[data-shop-banner-banner-container]").innerHTML = `
                                                    <img class="home-page-preview-banner" src="${apiCategory.hero_banner_asset.static}">
                                                    <video autoplay muted class="home-page-preview-banner-video" style="position: absolute; left: 0px; bottom: 0px; z-index: 1;" src="${apiCategory.hero_banner_asset.animated}" loop></video>
                                                `;
                                            } else {
                                                category.querySelector("[data-shop-banner-banner-container]").innerHTML = `
                                                    <video autoplay muted class="home-page-preview-banner-video" style="position: absolute; left: 0px; bottom: 0px; width: 1280px; z-index: 1;" src="${apiCategory.hero_banner_asset.animated}" loop></video>
                                                `;
                                            }
                                        } else if (apiCategory.hero_banner_asset.static != null) {
                                            category.querySelector("[data-shop-category-banner-image]").src = `${apiCategory.hero_banner_asset.static}`;
                                        }
                                    } else if (apiCategory.hero_banner != null) {
                                        category.querySelector("[data-shop-category-banner-image]").src = `https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.hero_banner}.png?size=4096`;
                                        category.querySelector("[data-shop-category-banner-image]").alt = apiCategory.name;
                                    } else {
                                        category.querySelector("[data-shop-category-banner-image]").src = `https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.banner}.png?size=4096`;
                                        category.querySelector("[data-shop-category-banner-image]").alt = apiCategory.name;
                                    }
                                
        
                                    if (apiCategory.hero_logo != null) {
                                        category.querySelector("[data-shop-category-logo-image]").src = `https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.hero_logo}.png?size=4096`;
                                    } else if (apiCategory.logo != null) {
                                        category.querySelector("[data-shop-category-logo-image]").src = `https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.logo}.png?size=4096`;
                                    } else {
                                        category.querySelector("[data-shop-category-logo-image]").src = `https://cdn.yapper.shop/assets/31.png`;
                                    }
                                    category.querySelector("[data-shop-category-logo-image]").alt = apiCategory.name;
        
                                    category.querySelector("[data-shop-category-desc]").id = `${apiCategory.sku_id}-summary`;
                                    category.querySelector("[data-shop-category-desc]").textContent = apiCategory.summary;
        
                                    category.querySelector("[data-preview-banner-container]").id = apiCategory.sku_id;
                                    category.querySelector("[data-shop-banner-banner-container]").id = `${apiCategory.sku_id}-preview-banner-container`;
                                
                                    if (apiCategory.leaks_type) {
                                        category.querySelector("[data-preview-new-categoey-button]").innerHTML = `
                                            <button class="home-page-preview-button" onclick="setParams({page: 'leaks'}); location.reload();">Check out New ${apiCategory.name} Leaks</button>
                                        `;
                                    } else {
                                        category.querySelector("[data-preview-new-categoey-button]").innerHTML = `
                                            <button class="home-page-preview-button" onclick="setParams({page: 'shop'}); location.reload();">${getTextString("SHOP_CATEGORY_SHOP_THE_COLLECTION_1")}${apiCategory.name}${getTextString("SHOP_CATEGORY_SHOP_THE_COLLECTION_2")}</button>
                                        `;
                                    }
                                
                                    const cardOutput = category.querySelector("[data-shop-category-card-holder]");
                                    if (cardOutput) {
                                        for (const product of apiCategory.products) {
                                        const cardTemplate = document.querySelector("[data-shop-item-card-template]");
                                        const card = cardTemplate.content.cloneNode(true).children[0];

                                        if (product.type === NONE) {
                                            card.classList.add("type_100");
                                            card.classList.add('hidden')
                                        } else if (product.type === AVATAR_DECORATION) {
                                            product.items.forEach(item => {
                                                
                                                card.classList.add("type_0");
                                                // Set the innerHTML for the preview holder
                                                const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                                previewHolder.classList.add('avatar-decoration-image');
                                                
                                                // Set the initial image for the deco card
                                                const imgElement = document.createElement("img");
                                                imgElement.id = "shop-card-deco-image";
                                                imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                
                                                previewHolder.appendChild(imgElement);

                                                const bgimg = document.createElement("div");
                                                bgimg.id = "shop-card-deco-bg-image";
                                                
                                                previewHolder.appendChild(bgimg);
                                        
                                                // Set the product details
                                                if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                                } else {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                }
                                                card.querySelector("[data-product-card-name]").textContent = product.name;
                                                card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                        
                                                // Hover effect: Change the image src on mouse enter and leave
                                                if (localStorage.reduced_motion != "true") {
                                                    card.addEventListener("mouseenter", () => {
                                                        imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                        if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                            bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                        }
                                                    });
                                            
                                                    card.addEventListener("mouseleave", () => {
                                                        imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                        bgimg.style.backgroundImage = `url(data:image/png;base64,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)`;
                                                    });
                                                }
                                                
                                            });
                                        } else if (product.type === PROFILE_EFFECT) {
                                            card.classList.add("type_1");

                                            if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                            } else {
                                                card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                            }
                                            card.querySelector("[data-product-card-name]").textContent = product.name;
                                            card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                            
                                            // Ensure the item ID is accessible here
                                            let itemId = undefined;
                                            if (Array.isArray(product.items)) {
                                                // If items is an array, find the item with type 1 and get its id
                                                const item = product.items.find(item => item.type === 1);
                                                if (item) {
                                                    itemId = item.id;
                                                }
                                            } else if (product.items && product.items.type === 1) {
                                                // If items is an object and has type 1, get its id
                                                itemId = product.items.id;
                                            }
                                        
                                        
                                            // Fetch profile effects API only if not already cached
                                            if (!profileEffectsCache) {
                                                const response = await fetch(api + PROFILE_EFFECTS, {
                                                    method: "GET",
                                                    headers: {
                                                        "Password": api_password,
                                                        "Token": api_token
                                                    }
                                                });
                                                const effectsData = await response.json();
                                                profileEffectsCache = effectsData.profile_effect_configs;
                                            }
                                        
                                            // Find matching profile effect
                                            const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                        
                                            if (matchingEffect) {
                                                const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                                previewHolder.classList.add('profile-effect-image');
                                        
                                                previewHolder.innerHTML = `
                                                    <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                `;
                                        
                                                // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                const imgElement = card.querySelector("img");
                                        
                                                if (localStorage.reduced_motion != "true") {
                                                    card.addEventListener("mouseenter", () => {
                                                        if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                            const effectUrl = matchingEffect.effects[0]?.src;
                                                            imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                        }
                                                    });
                                            
                                                    card.addEventListener("mouseleave", () => {
                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                    });
                                                } else {
                                                    card.addEventListener("mouseenter", () => {
                                                        imgElement.src = matchingEffect.reducedMotionSrc;
                                                    });
                                            
                                                    card.addEventListener("mouseleave", () => {
                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                    });
                                                }
                                            }
                                        } else if (product.type === NAMEPLATE) {
                                            card.classList.add("type_2");

                                            if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                            } else {
                                                card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                            }
                                            card.querySelector("[data-product-card-name]").textContent = product.name;
                                            card.querySelector("[data-product-card-summary]").textContent = product.summary;

                                            const previewHolder = card.querySelector("[data-shop-card-preview-holder]");

                                            if (localStorage.discord_username && localStorage.discord_username != '') {
                                                previewName = localStorage.discord_username;
                                            } else {
                                                previewName = 'Discord User'
                                            }

                                            previewHolder.innerHTML = `
                                                <div class="nameplate-null-user">
                                                    <div class="nameplate-null-user-avatar"></div>
                                                    <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                </div>
                                                <div class="nameplate-null-user">
                                                    <div class="nameplate-null-user-avatar"></div>
                                                    <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                </div>
                                                <div class="nameplate-null-user" data-user-nameplate-preview>
                                                    <video muted loop class="nameplate-null-user" style="position: absolute;" data-user-nameplate-preview-img></video>
                                                    <div class="nameplate-user-avatar" data-nameplate-user-random-avatar></div>
                                                    <p class="nameplate-user-name">${previewName}</p>
                                                </div>
                                                <div class="nameplate-null-user">
                                                    <div class="nameplate-null-user-avatar"></div>
                                                    <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                </div>
                                                <div class="nameplate-null-user">
                                                    <div class="nameplate-null-user-avatar"></div>
                                                    <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                </div>
                                            `;

                                            product.items.forEach(item => {
                                                const nameplatePreview = previewHolder.querySelector("[data-user-nameplate-preview]");
                                                const paletteName = item.palette;
                                                const asset = `https://cdn.discordapp.com/assets/collectibles/${item.asset}asset.webm`;
                                                const bgcolor = nameplate_palettes[paletteName].darkBackground;

                                                const videoElement = previewHolder.querySelector("[data-user-nameplate-preview-img]");

                                                videoElement.src = asset;

                                                nameplatePreview.style.backgroundImage = `linear-gradient(10deg, #00000000 40%, ${bgcolor} 180%), linear-gradient(170deg, #00000000 40%, ${bgcolor} 180%)`;
                                                // nameplatePreview.style.boxShadow = `0 0 0 1px #a10606`;
                                                
                                                const nullUserNameRandomWidth = previewHolder.querySelectorAll("[data-null-user-random-name]");
                                                
                                                nullUserNameRandomWidth.forEach(UserName => {
                                                    const randomWidth = Math.floor(Math.random() * (180 - 80 + 1)) + 80;
                                                    UserName.style.width = randomWidth + `px`;
                                                });
                                            
                                                const nullUserAvatar = previewHolder.querySelectorAll("[data-nameplate-user-random-avatar]");
                                            
                                                nullUserAvatar.forEach(UserAvatar => {
                                                    UserAvatar.style.backgroundImage = `url(${localStorage.discord_avatar})`;
                                                });

                                                if (localStorage.reduced_motion != "true") {
                                                    card.addEventListener("mouseenter", () => {
                                                        videoElement.play();
                                                    });
                                                    card.addEventListener("mouseleave", () => {
                                                        videoElement.pause();
                                                    });
                                                }
                                            });
                                            
                                        } else if (product.type === BUNDLE) {
                                            card.classList.add("type_1000");
                                            // Fetch the bundled products for the bundle summary
                                            const bundledProducts = product.bundled_products || [];
                                        
                                            // Generate the bundle summary from the names of the bundled products
                                            const type0Product = bundledProducts.find(item => item.type === 0);
                                            const type1Product = bundledProducts.find(item => item.type === 1);
                                        
                                            let bundleSummary = `${getTextString("CARD_TYPE_BUNDLE_TITLE")}`;
                                            if (type0Product) {
                                                bundleSummary += `${type0Product.name}${getTextString("CARD_TYPE_BUNDLE_TITLE_DECO")}`;
                                            }
                                            if (type1Product) {
                                                bundleSummary += `${type1Product.name}${getTextString("CARD_TYPE_BUNDLE_TITLE_EFFECT")}`;
                                            }
                                        
                                            // Set the summary text
                                            card.querySelector("[data-product-card-summary]").textContent = bundleSummary;
                                        
                                            // Set the basic card details
                                            if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                            } else {
                                                card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                            }
                                            card.querySelector("[data-product-card-name]").textContent = product.name;
                                        
                                            // Handle each item in the bundle
                                            product.items.forEach(item => {
                                                if (item.type === 0) {
                                                    // Avatar decoration
                                                    const decoImage = document.createElement("img");
                                                    decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                    decoImage.alt = "Avatar Decoration";
                                                    decoImage.classList.add("avatar-decoration-image");
                                                    card.querySelector("[data-shop-card-preview-holder]").appendChild(decoImage);

                                                    const bgimg = document.createElement("div");
                                                    bgimg.classList.add("avatar-decoration-bg-image");
                                                    
                                                    card.querySelector("[data-shop-card-preview-holder]").appendChild(bgimg);
                                        
                                                    // Hover effect for decoration image
                                                    if (localStorage.reduced_motion != "true") {
                                                        card.addEventListener("mouseenter", () => {
                                                            decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                            if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                            }
                                                        });
                                                        card.addEventListener("mouseleave", () => {
                                                            decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                            bgimg.style.backgroundImage = `url(data:image/png;base64,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)`;
                                                        });
                                                    }
                                                } else if (item.type === 1) {
                                                    // Profile effect
                                                    (async () => {
                                                        // Fetch profile effects if not cached
                                                        if (!profileEffectsCache) {
                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                method: "GET",
                                                                headers: {
                                                                    "Password": api_password,
                                                                    "Token": api_token
                                                                }
                                                            });
                                                            const effectsData = await response.json();
                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                        }
                                        
                                                        // Find the matching effect
                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === item.id);
                                        
                                                        if (matchingEffect) {
                                                            const effectImage = document.createElement("img");
                                                            effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                            effectImage.alt = "Profile Effect";
                                                            effectImage.classList.add("profile-effect-image");
                                                            card.querySelector("[data-shop-card-preview-holder]").appendChild(effectImage);
                                        
                                                            // Hover effect for profile effect
                                                            if (localStorage.reduced_motion != "true") {
                                                                card.addEventListener("mouseenter", () => {
                                                                    if (matchingEffect.effects && matchingEffect.effects[0] && matchingEffect.effects[0].src) {
                                                                        effectImage.src = matchingEffect.effects[0].src;
                                                                    }
                                                                });
                                                                card.addEventListener("mouseleave", () => {
                                                                    effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                });
                                                            } else {
                                                                card.addEventListener("mouseenter", () => {
                                                                    effectImage.src = matchingEffect.reducedMotionSrc;
                                                                });
                                                                card.addEventListener("mouseleave", () => {
                                                                    effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                });
                                                            }
                                                        }
                                                    })();
                                                }
                                            });
                                        } else if (product.type === VARIANTS_GROUP) {
                                            // Update SKU and summary
                                            if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                            } else {
                                                card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                            }
                                            card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                        
                                            // Always display the base variant name
                                            card.querySelector("[data-product-card-name]").textContent = product.variants[0]?.base_variant_name || "Product";
                                        
                                            // Render variant color blocks as interactive divs
                                            const variantContainer = card.querySelector("[data-shop-card-var-container]");
                                            variantContainer.innerHTML = ""; // Clear existing variant blocks
                                            let currentSelectedVariant = null; // Track selected variant
                                        
                                            product.variants.forEach((variant, index) => {
                                                // Create variant color block
                                                const variantColorBlockTmp = document.querySelector("[data-shop-varcolorblock-template]");
                                                const variantColorBlock = variantColorBlockTmp.content.cloneNode(true).children[0];
                                                variantColorBlock.classList.add("shop-card-var");
                                                variantColorBlock.id = "shop-card-var";
                                                variantColorBlock.style.backgroundColor = `${variant.variant_value}`;
                                        
                                                // Add click event listener to switch variants
                                                variantColorBlock.addEventListener("click", () => {
                                                    if (currentSelectedVariant) {
                                                        currentSelectedVariant.classList.remove("shop-card-var-selected");
                                                    }
                                                    variantColorBlock.classList.add("shop-card-var-selected");
                                                    currentSelectedVariant = variantColorBlock;
                                                    applyVariant(variant);
                                                });
                                        
                                                // Append the color block to the container
                                                variantContainer.appendChild(variantColorBlock);
                                        
                                                // Set the first variant as the default selected
                                                if (index === 0) {
                                                    currentSelectedVariant = variantColorBlock;
                                                    variantColorBlock.classList.add("shop-card-var-selected");
                                                }
                                            });

                                            let isFirstTimeLoadingVariant = true;
                                            const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                        
                                            // Function to apply the selected variant
                                            function applyVariant(selectedVariant) {
                                                card.querySelector("[data-shop-card-var-title]").textContent = `(${selectedVariant.variant_label})`;

                                                if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                                } else {
                                                    card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${selectedVariant.sku_id}`;
                                                }

                                                if (localStorage.experiment_2025_02_shop_card_modals != "Treatment 1: Enable modals" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 2: Enable modals w/ data downloads" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 3: Enable modals w/ p+" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 4: Enable modals w/ p+ on p+ page" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 5: Enable modals w/ data downloads and p+" && localStorage.experiment_2025_02_shop_card_modals != "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                    card.querySelector("[data-share-product-card-button]").innerHTML = `
                                                        <svg class="shareIcon_f4a996" onclick="copyEmoji('https://canary.discord.com/shop#itemSkuId=${selectedVariant.sku_id}');" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M16.32 14.72a1 1 0 0 1 0-1.41l2.51-2.51a3.98 3.98 0 0 0-5.62-5.63l-2.52 2.51a1 1 0 0 1-1.41-1.41l2.52-2.52a5.98 5.98 0 0 1 8.45 8.46l-2.52 2.51a1 1 0 0 1-1.41 0ZM7.68 9.29a1 1 0 0 1 0 1.41l-2.52 2.51a3.98 3.98 0 1 0 5.63 5.63l2.51-2.52a1 1 0 0 1 1.42 1.42l-2.52 2.51a5.98 5.98 0 0 1-8.45-8.45l2.51-2.51a1 1 0 0 1 1.42 0Z" class=""></path><path fill="currentColor" d="M14.7 10.7a1 1 0 0 0-1.4-1.4l-4 4a1 1 0 1 0 1.4 1.4l4-4Z" class=""></path></svg>
                                                    `;
                                                }

                                                if (selectedVariant.type === 0) {
                                                    card.classList.add("type_2000-0");
                                                    previewHolder.innerHTML = ""; // Clear previous decorations
                                                    previewHolder.classList.add('avatar-decoration-image');
                                                    
                                                    // Add the avatar decoration based on the selected variant
                                                    selectedVariant.items?.forEach(item => {
                                                        const decoImage = document.createElement("img");
                                                        const bgimg = document.createElement("div");
                                                        if (isFirstTimeLoadingVariant == true) {
                                                            decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                            isFirstTimeLoadingVariant = false;
                                                        } else {
                                                            decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                            if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                            }
                                                        }
                                                        decoImage.alt = "Avatar Decoration";
                                                        decoImage.id = "shop-card-deco-image";
                                                        previewHolder.appendChild(decoImage);

                                                        bgimg.id = "shop-card-deco-bg-image";

                                                        previewHolder.appendChild(bgimg);
                                                    
                                                        // Hover effect for decoration image
                                                        if (localStorage.reduced_motion !== "true") {
                                                            card.addEventListener("mouseenter", () => {
                                                                decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                    bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                                }
                                                            });
                                                            card.addEventListener("mouseleave", () => {
                                                                decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                bgimg.style.backgroundImage = `url(data:image/png;base64,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)`;
                                                            });
                                                        }
                                                    });
                                                } else if (selectedVariant.type === 1) {
                                                    card.classList.add("type_2000-1");
                                                    (async () => {
                                                        // Ensure the item ID is accessible here
                                                        let itemId = undefined;
                                                        if (Array.isArray(selectedVariant.items)) {
                                                            // If items is an array, find the item with type 1 and get its id
                                                            const item = selectedVariant.items.find(item => item.type === 1);
                                                            if (item) {
                                                                itemId = item.id;
                                                            }
                                                        } else if (selectedVariant.items && selectedVariant.items.type === 1) {
                                                            // If items is an object and has type 1, get its id
                                                            itemId = selectedVariant.items.id;
                                                        }
                                                    
                                                    
                                                        // Fetch profile effects API only if not already cached
                                                        if (!profileEffectsCache) {
                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                method: "GET",
                                                                headers: {
                                                                    "Password": api_password,
                                                                    "Token": api_token
                                                                }
                                                            });
                                                            const effectsData = await response.json();
                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                        }
                                                    
                                                        // Find matching profile effect
                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                                    
                                                        if (matchingEffect) {
                                                            const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                                            previewHolder.classList.add('profile-effect-image');
                                                        
                                                            if (isFirstTimeLoadingVariant == true) {
                                                                previewHolder.innerHTML = `
                                                                    <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                                `;
                                                                isFirstTimeLoadingVariant = false;
                                                            } else {
                                                                previewHolder.innerHTML = `
                                                                    <img class="thumbnail-preview" src="${matchingEffect.effects[0]?.src}">
                                                                `;
                                                            }
                                                        
                                                            // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                            const imgElement = card.querySelector("img");
                                                        
                                                            if (localStorage.reduced_motion != "true") {
                                                                card.addEventListener("mouseenter", () => {
                                                                    if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                        const effectUrl = matchingEffect.effects[0]?.src;
                                                                        imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                    }
                                                                });
                                                            
                                                                card.addEventListener("mouseleave", () => {
                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                });
                                                            } else {
                                                                card.addEventListener("mouseenter", () => {
                                                                    imgElement.src = matchingEffect.reducedMotionSrc;
                                                                });
                                                            
                                                                card.addEventListener("mouseleave", () => {
                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                });
                                                            }
                                                        }
                                                    })();
                                                }
                                            }
                                        
                                            // Apply the default variant (first one) initially
                                            if (product.variants.length > 0) {
                                                applyVariant(product.variants[0]);
                                            }
                                        } else if (product.type === EXTERNAL_SKU) {
                                            card.classList.add("type_3000");

                                            if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                            } else {
                                                card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                            }
                                            card.querySelector("[data-product-card-name]").textContent = product.name;
                                            card.querySelector("[data-product-card-summary]").textContent = product.summary;

                                            const previewHolder = card.querySelector("[data-shop-card-preview-holder]");

                                            if (product.sku_id === "1342211853484429445") {
                                                previewHolder.classList.add('potion-card-preview-holder');
                                                    
                                                previewHolder.innerHTML = `
                                                    <svg class="potion-card-preview profile-badge-orb-preview" width="187" height="187" viewBox="0 0 187 187" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <g clip-path="url(#clip0_136_3)">
                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M93.2014 34.4915L41.7391 64.2032V123.627L93.2014 153.338L144.664 123.627V64.2032L93.2014 34.4915ZM173.024 47.8295L93.2014 1.7439L13.3789 47.8295V140L93.2014 186.086L173.024 140V47.8295Z" fill="white"/>
                                                    <path d="M106.759 80.3577L98.3727 57.9977C96.5807 53.2198 89.8225 53.2198 88.0305 57.9977L79.6447 80.3577L57.2847 88.7437C52.5067 90.5355 52.5067 97.2939 57.2847 99.0857L79.6447 107.472L88.0305 129.832C89.8225 134.61 96.5807 134.61 98.3727 129.832L106.759 107.472L129.119 99.0857C133.896 97.2939 133.896 90.5355 129.119 88.7437L106.759 80.3577Z" fill="white"/>
                                                    </g>
                                                    <defs>
                                                    <clipPath id="clip0_136_3">
                                                    <rect width="160.82" height="187" fill="white" transform="translate(13.0908)"/>
                                                    </clipPath>
                                                    </defs>
                                                    </svg>
                                                `;
                                            } else if (product.sku_id === "1333912750274904064") {
                                                previewHolder.classList.add('potion-card-preview-holder');
                                                    
                                                previewHolder.innerHTML = `
                                                    <svg class="potion-card-preview nitro-3-days-orb-preview" width="187" height="187" viewBox="0 0 187 187" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                    <rect y="16" width="187" height="140" fill="url(#pattern0_136_11)"/>
                                                    <defs>
                                                    <pattern id="pattern0_136_11" patternContentUnits="objectBoundingBox" width="1" height="1">
                                                    <use xlink:href="#image0_136_11" transform="matrix(0.00369004 0 0 0.00492884 0 -0.000276753)"/>
                                                    </pattern>
                                                    <image id="image0_136_11" width="271" height="203" preserveAspectRatio="none" xlink:href="data:image/png;base64,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"/>
                                                    </defs>
                                                    </svg>

                                                `;
                                            } else {
                                                previewHolder.innerHTML = `
                                                    <p>${getTextString("CARD_TYPE_EXTERNAL_SKU_ERROR")}</p>
                                                `;
                                            }
                                            
                                        } else if (product.type === 'plus_more') {
                                            card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                            card.querySelector("[data-product-card-name]").textContent = `${getTextString("CARD_TYPE_PLUS_MORE_TITLE")}`;
                                            card.querySelector("[data-product-card-summary]").textContent = `${getTextString("CARD_TYPE_PLUS_MORE_DESC")}`;

                                            card.querySelector("[data-shop-price-container]").innerHTML = ``;
                                            card.querySelector("[data-product-card-open-in-shop]").innerHTML = ``;
                                            card.querySelector("[data-share-product-card-button]").innerHTML = ``;

                                            const plusMoreQuestionMark = document.createElement("img");
                                            plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.png`;
                                            plusMoreQuestionMark.classList.add("plus-more-question-mark");
                                            card.querySelector("[data-shop-card-preview-holder]").appendChild(plusMoreQuestionMark);
                                
                                            // Hover effect for decoration image
                                            if (localStorage.reduced_motion != "true") {
                                                card.addEventListener("mouseenter", () => {
                                                    plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.gif`;
                                                });
                                                card.addEventListener("mouseleave", () => {
                                                    plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.png`;
                                                });
                                            }
                                        } else {
                                            card.classList.add('hidden')
                                        }
                                        
                                        
                                        const priceTextNitro = card.querySelector("[data-price-nitro]");
                                        const priceTextStandard = card.querySelector("[data-price-standard]");

                                        const priceContainerNitro = card.querySelector("[data-price-nitro-container]");
                                        const priceContainerStandard = card.querySelector("[data-price-standard-container]");

                                        const priceContainer = card.querySelector("[data-shop-price-container]");

                                        let priceStandard = "N/A";
                                        let priceNitro = "N/A";
                                        let priceOrb = "N/A";

                                        if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                            if (localStorage.is_nitro_user === "true") {
                                                if (product.prices && product.prices["4"] && product.prices["4"].country_prices && product.prices["4"].country_prices.prices) {
                                                    product.prices["4"].country_prices.prices.forEach(price => {
                                                        if (price.currency === "usd") {
                                                            priceStandard = price.amount;
                                                        }
                                                        if (price.currency === "discord_orb") {
                                                            priceOrb = price.amount;
                                                        }
                                                    });
    
                                                    if (priceStandard != "N/A" && priceOrb != "N/A") {
                                                        let orb_price = document.createElement("div");
                                                
                                                        orb_price.innerHTML = `
                                                            <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                            <div class="orb-icon" style="margin-left: -25px"></div>
                                                        `;
                                                        orb_price.style.position = `absolute`;
                                                        orb_price.style.right = `0px`;
                                                        
                                                        priceContainer.appendChild(orb_price);
    
                                                        standardPriceOutput = `US$${(priceStandard / 100).toFixed(2)}`;

                                                        priceContainerStandard.innerHTML = `
                                                            <a style="font-size: large; font-weight: 900; margin-left: 23px">${standardPriceOutput}</a>
                                                            <div class="nitro-icon" style="margin-left: -5px"></div>
                                                        `;
    
                                                    } else if (priceStandard != "N/A") {
    
                                                        standardPriceOutput = `US$${(priceStandard / 100).toFixed(2)}`;

                                                        priceContainerStandard.innerHTML = `
                                                            <a style="font-size: large; font-weight: 900; margin-left: 23px">${standardPriceOutput}</a>
                                                            <div class="nitro-icon" style="margin-left: -5px"></div>
                                                        `;
    
                                                    } else if (priceOrb != "N/A") {
    
                                                        let orb_price = document.createElement("div");
                                                
                                                        orb_price.innerHTML = `
                                                            <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                            <div class="orb-icon" style="margin-left: -25px"></div>
                                                        `;
                                                        orb_price.style.position = `absolute`;
                                                        orb_price.style.left = `23px`;
                                                        orb_price.style.bottom = `0px`;
                                                        
                                                        priceContainer.appendChild(orb_price);
    
                                                        card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="unplublished-tag">
                                                                <p class="unplublished-tag-text">${getTextString("CARD_ORB_EXCLUSIVE_TAG")}</p>
                                                            </div>
                                                        `;
                                                        
                                                    }
                                                }
                                            } else {
                                                if (product.prices && product.prices["0"] && product.prices["0"].country_prices && product.prices["0"].country_prices.prices) {
                                                    product.prices["0"].country_prices.prices.forEach(price => {
                                                        if (price.currency === "usd") {
                                                            priceStandard = price.amount;
                                                        }
                                                        if (price.currency === "discord_orb") {
                                                            priceOrb = price.amount;
                                                        }
                                                    });
    
                                                    if (priceStandard != "N/A" && priceOrb != "N/A") {
                                                        let orb_price = document.createElement("div");
                                                
                                                        orb_price.innerHTML = `
                                                            <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                            <div class="orb-icon" style="margin-left: -25px"></div>
                                                        `;
                                                        orb_price.style.position = `absolute`;
                                                        orb_price.style.right = `0px`;
                                                        
                                                        priceContainer.appendChild(orb_price);
    
                                                        priceTextStandard.textContent = `US$${(priceStandard / 100).toFixed(2)}`;
    
                                                    } else if (priceStandard != "N/A") {
    
                                                        priceTextStandard.textContent = `US$${(priceStandard / 100).toFixed(2)}`;
    
                                                    } else if (priceOrb != "N/A") {
    
                                                        let orb_price = document.createElement("div");
                                                
                                                        orb_price.innerHTML = `
                                                            <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                            <div class="orb-icon" style="margin-left: -25px"></div>
                                                        `;
                                                        orb_price.style.position = `absolute`;
                                                        orb_price.style.left = `23px`;
                                                        orb_price.style.bottom = `0px`;
                                                        
                                                        priceContainer.appendChild(orb_price);
    
                                                        card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="unplublished-tag">
                                                                <p class="unplublished-tag-text">${getTextString("CARD_ORB_EXCLUSIVE_TAG")}</p>
                                                            </div>
                                                        `;
                                                        
                                                    }
                                                }
                                            }

                                        } else {
                                            if (product.prices && product.prices["0"] && product.prices["0"].country_prices && product.prices["0"].country_prices.prices) {
                                                product.prices["0"].country_prices.prices.forEach(price => {
                                                    if (price.currency === "usd") {
                                                        priceStandard = price.amount;
                                                    }
                                                });
                                            }
                                    
                                            if (product.prices && product.prices["4"] && product.prices["4"].country_prices && product.prices["4"].country_prices.prices) {
                                                product.prices["4"].country_prices.prices.forEach(price => {
                                                    if (price.currency === "usd") {
                                                        priceNitro = price.amount;
                                                    }
                                                });
                                            }

                                            if (priceTextStandard) {
                                                priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "null";
                                            }
    
                                            if (priceTextNitro) {
                                                priceTextNitro.textContent = priceNitro !== "N/A" ? `US$${(priceNitro / 100).toFixed(2)} with Nitro` : "null";
                                            }
                                        }

                                        card.querySelector("[data-product-card-open-in-shop]").innerHTML = `
                                            <button class="card-button" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                        `;

                                        if (product.premium_type === 2) {
                                            card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                <div class="premiumWheelBadge_c23530 textBadge_df8943 base_df8943 eyebrow_df8943 baseShapeRound_df8943" aria-label="This bonus item is yours to keep and use anytime with an active Nitro subscription." style="background-color: var(--status-danger);"><svg class="premiumWheel_c23530" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M15 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" class=""></path><path fill="currentColor" fill-rule="evenodd" d="M7 4a1 1 0 0 0 0 2h3a1 1 0 1 1 0 2H5.5a1 1 0 0 0 0 2H8a1 1 0 1 1 0 2H6a1 1 0 1 0 0 2h1.25A8 8 0 1 0 15 4H7Zm8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" clip-rule="evenodd" class=""></path><path fill="currentColor" d="M2.5 10a1 1 0 0 0 0-2H2a1 1 0 0 0 0 2h.5Z" class=""></path></svg></div>
                                            `;
                                        }

                                        if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                            if (product.type === AVATAR_DECORATION || product.type === PROFILE_EFFECT || product.type === NAMEPLATE || product.type === BUNDLE || product.type === VARIANTS_GROUP || product.type === EXTERNAL_SKU) {
                                                card.classList.add('clickable');

                                                card.addEventListener("click", (event) => {
                                                    if (event.target.matches("[data-shop-card-var]")) {
                                                    } else {
                                                        openItemModal();
                                                    }
                                                });
                                                

                                                async function openItemModal() {
                                                    let modal = document.createElement("div");

                                                    modal.classList.add('modalv2');

                                                    if (apiCategory.pdp_bg != null) {
                                                        pdp = apiCategory.pdp_bg
                                                    } else {
                                                        pdp = apiCategory.banner
                                                    }

                                                    modal.innerHTML = `
                                                        <div class="modalv2-inner">
                                                            <div class="modalv2-inner-left">
                                                                <div data-modal-left-preview-holder></div>
                                                                <p data-product-modal-sku-id></p>
                                                                <p style="font-size: large; font-weight: 900;" data-product-modal-name></p>
                                                                <p style="color: var(--8)" data-product-modal-summary></p>
                                                                <div class="shop-modal-var-container-container" data-shop-modal-var-container-container>
                                                                    <div class="shop-modal-var-container" data-shop-modal-var-container></div>
                                                                    <a class="shop-modal-var-title" data-shop-modal-var-title></a>
                                                                </div>
                                                                <div class="modal-shop-price-container" data-shop-price-container>
                                                                    <div data-price-standard-container>
                                                                        <a style="font-size: large; font-weight: 900;" data-price-standard></a>
                                                                    </div>
                                                                    <div data-price-nitro-container>
                                                                        <a data-price-nitro></a>
                                                                    </div>
                                                                </div>
                                                                <div class="modal-left-bottom">
                                                                    <div class="modal-buttons" data-modal-buttons></div>
                                                                </div>
                                                            </div>
                                                            <img class="modalv2-inner-logo" src="https://cdn.yapper.shop/assets/31.png" data-modalv2-inner-logo></img>
                                                            <div class="shop-modal-tag-container" data-shop-card-tag-container></div>

                                                            <div data-modal-top-product-buttons>
                                                                <div title="Close" data-close-product-card-button>
                                                                    <svg class="closeIcon_modal" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M17.3 18.7a1 1 0 0 0 1.4-1.4L13.42 12l5.3-5.3a1 1 0 0 0-1.42-1.4L12 10.58l-5.3-5.3a1 1 0 0 0-1.4 1.42L10.58 12l-5.3 5.3a1 1 0 1 0 1.42 1.4L12 13.42l5.3 5.3Z" class=""></path></svg>
                                                                </div>
                                                                <div title="Copy Link" data-share-product-card-button></div>
                                                                <div title="Download Data" data-download-product-card-button></div>
                                                            </div>

                                                            <div id="modalv2-inner-right" class="modalv2-inner-right">
                                                                <img class="modalv2-inner-img" src="https://cdn.discordapp.com/app-assets/1096190356233670716/${pdp}.png?size=4096"></img>
                                                                <div data-modal-preview-holder></div>
                                                            </div>
                                                        </div>
                                                    `;

                                                    document.body.appendChild(modal);

                                                    setTimeout(() => {
                                                        modal.classList.add('show');
                                                    }, 1);

                                                    if (apiCategory.logo != null) {
                                                        modal.querySelector("[data-modalv2-inner-logo]").src = `https://cdn.discordapp.com/app-assets/1096190356233670716/${apiCategory.logo}.png?size=4096`;
                                                    }

                                                    if (product.type === AVATAR_DECORATION) {

                                                        modal.classList.add('modal-0');

                                                        product.items.forEach(item => {

                                                            const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                            const previewHolderLeft = modal.querySelector("[data-modal-left-preview-holder]");

                                                            modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                            modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                            modal.querySelector("[data-product-modal-summary]").textContent = product.summary;

                                                            if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {

                                                                previewHolder.classList.add('modal-preview-profile-container');
                                                                previewHolder.innerHTML = `
                                                                    <div class="modal-preview-profile1">
                                                                        <div class="options-preview-profile-banner-color"></div>
                                                                        <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                        <div class="profile-avatar-preview-bg"></div>
                                                                        <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                        <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                        <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                        <img id="profileAvatarDecoPreview" class="profile-avatar-deco-preview" src="https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true">
                                                                        <div class="options-preview-profile-status-bg"></div>
                                                                        <div class="options-preview-profile-status-color"></div>
                                                                    </div>
                                                                `;

                                                                document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();

                                                                previewHolderLeft.classList.add('modal-left-avatar-decoration-img');

                                                                const imgElement = document.createElement("img");
                                                                imgElement.id = "shop-card-deco-image";
                                                                imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;

                                                                previewHolderLeft.appendChild(imgElement);

                                                                if (localStorage.reduced_motion != "true") {
                                                                    imgElement.addEventListener("mouseenter", () => {
                                                                        imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                    });
                                                                
                                                                    imgElement.addEventListener("mouseleave", () => {
                                                                        imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                    });
                                                                }

                                                            } else {
                                                                
                                                                previewHolder.classList.add('modal-avatar-decoration-img');

                                                                const imgElement = document.createElement("img");
                                                                imgElement.id = "shop-card-deco-image";
                                                                imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;

                                                                previewHolder.appendChild(imgElement);

                                                                // Hover effect: Change the image src on mouse enter and leave
                                                                if (localStorage.reduced_motion != "true") {
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                        imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                    });
                                                                
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                        imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                    });
                                                                }
                                                            }

                                                        });
                                                    } else if (product.type === PROFILE_EFFECT) {
                                                        modal.classList.add('modal-1');
        
                                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                        modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                        modal.querySelector("[data-product-modal-summary]").textContent = product.summary;

                                                        // Ensure the item ID is accessible here
                                                        let itemId = undefined;
                                                        if (Array.isArray(product.items)) {
                                                            // If items is an array, find the item with type 1 and get its id
                                                            const item = product.items.find(item => item.type === 1);
                                                            if (item) {
                                                                itemId = item.id;
                                                            }
                                                        } else if (product.items && product.items.type === 1) {
                                                            // If items is an object and has type 1, get its id
                                                            itemId = product.items.id;
                                                        }
                                                    
                                                    
                                                        // Fetch profile effects API only if not already cached
                                                        if (!profileEffectsCache) {
                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                method: "GET",
                                                                headers: {
                                                                    "Password": api_password,
                                                                    "Token": api_token
                                                                }
                                                            });
                                                            const effectsData = await response.json();
                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                        }
                                                    
                                                        // Find matching profile effect
                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);

                                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                        const previewHolderLeft = modal.querySelector("[data-modal-left-preview-holder]");
                                                    
                                                        if (matchingEffect) {
                                                            if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                                                previewHolder.classList.add('modal-preview-profile-container');
                                                                previewHolder.innerHTML = `
                                                                    <div class="modal-preview-profile2">
                                                                        <div class="options-preview-profile-banner-color"></div>
                                                                        <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                        <div class="profile-avatar-preview-bg"></div>
                                                                        <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                        <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                        <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                        <div class="options-preview-profile-status-bg"></div>
                                                                        <div class="options-preview-profile-status-color"></div>
                                                                        <img id="profileProfileEffectPreview" class="profile-profile-effect-preview" src="${matchingEffect.effects[0]?.src}">
                                                                    </div>
                                                                `;

                                                                document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();

                                                                previewHolderLeft.classList.add('modal-left-profile-effect-img');
                                                            
                                                                const imgElement = document.createElement("img");
                                                                imgElement.src = matchingEffect.thumbnailPreviewSrc;

                                                                previewHolderLeft.appendChild(imgElement);
                                                            
                                                                if (localStorage.reduced_motion != "true") {
                                                                    imgElement.addEventListener("mouseenter", () => {
                                                                        if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                            const effectUrl = matchingEffect.effects[0]?.src;
                                                                            imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                        }
                                                                    });
                                                                
                                                                    imgElement.addEventListener("mouseleave", () => {
                                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                } else {
                                                                    imgElement.addEventListener("mouseenter", () => {
                                                                        imgElement.src = matchingEffect.reducedMotionSrc;
                                                                    });
                                                                
                                                                    imgElement.addEventListener("mouseleave", () => {
                                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                }
                                                            } else {
                                                                const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                                previewHolder.classList.add('modal-profile-effect-img');
                                                            
                                                                previewHolder.innerHTML = `
                                                                    <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                                `;
                                                            
                                                                // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                                const imgElement = previewHolder.querySelector("img");
                                                            
                                                                if (localStorage.reduced_motion != "true") {
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                        if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                            const effectUrl = matchingEffect.effects[0]?.src;
                                                                            imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                        }
                                                                    });
                                                                
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                } else {
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                        imgElement.src = matchingEffect.reducedMotionSrc;
                                                                    });
                                                                
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                }
                                                            }
                                                        }
                                                    } else if (product.type === NAMEPLATE) {
                                                        card.classList.add("modal-2");
            
                                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                        modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                        modal.querySelector("[data-product-modal-summary]").textContent = product.summary;
            
                                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                        previewHolder.classList.add('nameplate-modal-preview');
            
                                                        if (localStorage.discord_username && localStorage.discord_username != '') {
                                                            previewName = localStorage.discord_username;
                                                        } else {
                                                            previewName = 'Discord User'
                                                        }

                                                        if (localStorage.experiment_2025_03_early_nameplate_warning === "Treatment 1: Enabled") {
                                                            let nameplateWarning = document.createElement("div");

                                                            nameplateWarning.classList.add('nameplate-modal-early-warning-container');
                                                            nameplateWarning.innerHTML = `
                                                                <p>${getTextString("SHOP_NAMEPLATE_WARNING_NOTICE_1")}</p>
                                                                <a style="color: lightblue;" href="https://support.yapper.shop/?page=nameplates">${getTextString("SHOP_NAMEPLATE_WARNING_NOTICE_2")}</a>
                                                            `;


                                                            modal.querySelector(".modalv2-inner-left").appendChild(nameplateWarning);
                                                        }
            
                                                        previewHolder.innerHTML = `
                                                            <div class="nameplate-null-user">
                                                                <div class="nameplate-null-user-avatar"></div>
                                                                <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                            </div>
                                                            <div class="nameplate-null-user">
                                                                <div class="nameplate-null-user-avatar"></div>
                                                                <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                            </div>
                                                            <div class="nameplate-null-user" data-user-nameplate-preview>
                                                                <video muted loop class="nameplate-null-user" style="position: absolute;" data-user-nameplate-preview-img></video>
                                                                <div class="nameplate-user-avatar" data-nameplate-user-random-avatar></div>
                                                                <p class="nameplate-user-name">${previewName}</p>
                                                            </div>
                                                            <div class="nameplate-null-user">
                                                                <div class="nameplate-null-user-avatar"></div>
                                                                <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                            </div>
                                                            <div class="nameplate-null-user">
                                                                <div class="nameplate-null-user-avatar"></div>
                                                                <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                            </div>
                                                        `;
            
                                                        product.items.forEach(item => {
                                                            const nameplatePreview = previewHolder.querySelector("[data-user-nameplate-preview]");
                                                            const paletteName = item.palette;
                                                            const asset = `https://cdn.discordapp.com/assets/collectibles/${item.asset}asset.webm`;
                                                            const bgcolor = nameplate_palettes[paletteName].darkBackground;
            
                                                            const videoElement = previewHolder.querySelector("[data-user-nameplate-preview-img]");

                                                            videoElement.src = asset;
            
                                                            nameplatePreview.style.backgroundImage = `linear-gradient(10deg, #00000000 40%, ${bgcolor} 180%), linear-gradient(170deg, #00000000 40%, ${bgcolor} 180%)`;
                                                            // nameplatePreview.style.boxShadow = `0 0 0 1px #a10606`;
                                                            
                                                            const nullUserNameRandomWidth = previewHolder.querySelectorAll("[data-null-user-random-name]");
                                                            
                                                            nullUserNameRandomWidth.forEach(UserName => {
                                                                const randomWidth = Math.floor(Math.random() * (180 - 80 + 1)) + 80;
                                                                UserName.style.width = randomWidth + `px`;
                                                            });
                                                        
                                                            const nullUserAvatar = previewHolder.querySelectorAll("[data-nameplate-user-random-avatar]");
                                                        
                                                            nullUserAvatar.forEach(UserAvatar => {
                                                                UserAvatar.style.backgroundImage = `url(${localStorage.discord_avatar})`;
                                                            });

                                                            if (localStorage.reduced_motion != "true") {
                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                    videoElement.play();
                                                                });
                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                    videoElement.pause();
                                                                });
                                                            }
                                                        });
                                                        
                                                    } else if (product.type === BUNDLE) {
                                                        modal.classList.add('modal-1000');

                                                        const bundledProducts = product.bundled_products || [];

                                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                    
                                                        // Generate the bundle summary from the names of the bundled products
                                                        const type0Product = bundledProducts.find(item => item.type === 0);
                                                        const type1Product = bundledProducts.find(item => item.type === 1);
                                                    
                                                        let bundleSummary = `${getTextString("CARD_TYPE_BUNDLE_TITLE")}`;
                                                        if (type0Product) {
                                                            bundleSummary += `${type0Product.name}${getTextString("CARD_TYPE_BUNDLE_TITLE_DECO")}`;
                                                        }
                                                        if (type1Product) {
                                                            bundleSummary += `${type1Product.name}${getTextString("CARD_TYPE_BUNDLE_TITLE_EFFECT")}`;
                                                        }
                                                    
                                                        // Set the summary text
                                                        modal.querySelector("[data-product-modal-summary]").textContent = bundleSummary;
                                                    
                                                        // Set the basic card details
                                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                        modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                    
                                                        // Handle each item in the bundle
                                                        product.items.forEach(item => {
                                                            if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                                                
                                                                if (item.type === 0) {
                                                                    decosrc = item.asset
                                                                } else if (item.type === 1) {
                                                                    // Profile effect
                                                                    (async () => {
                                                                        // Fetch profile effects if not cached
                                                                        if (!profileEffectsCache) {
                                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                                method: "GET",
                                                                                headers: {
                                                                                    "Password": api_password,
                                                                                    "Token": api_token
                                                                                }
                                                                            });
                                                                            const effectsData = await response.json();
                                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                                        }
                                                    
                                                                        // Find the matching effect
                                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === item.id);
                                                    
                                                                        if (matchingEffect) {
                                                                            if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                const effectUrl = matchingEffect.effects[0]?.src;
                                                                                renderProfile(effectUrl)
                                                                            }
                                                                        }
                                                                    })();
                                                                }

                                                                function renderProfile(effectUrl) {
                                                                    previewHolder.classList.add('modal-preview-profile-container');
                                                                    previewHolder.innerHTML = `
                                                                        <div class="modal-preview-profile2">
                                                                            <div class="options-preview-profile-banner-color"></div>
                                                                            <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                            <div class="profile-avatar-preview-bg"></div>
                                                                            <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                            <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                            <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                            <img id="profileAvatarDecoPreview" class="profile-avatar-deco-preview" src="https://cdn.discordapp.com/avatar-decoration-presets/${decosrc}.png?size=4096&passthrough=true">
                                                                            <div class="options-preview-profile-status-bg"></div>
                                                                            <div class="options-preview-profile-status-color"></div>
                                                                            <img id="profileProfileEffectPreview" class="profile-profile-effect-preview" src="${effectUrl}">
                                                                        </div>
                                                                    `;
                                                                    document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();
                                                                }

                                                                
                                                            } else {
                                                                if (item.type === 0) {
                                                                    const decoImage = document.createElement("img");
                                                                    decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                    decoImage.alt = "Avatar Decoration";
                                                                    decoImage.classList.add("modal-avatar-decoration-img");
                                                                    modal.querySelector("[data-modal-preview-holder]").appendChild(decoImage);
                                                    
                                                                    // Hover effect for decoration image
                                                                    if (localStorage.reduced_motion != "true") {
                                                                        document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                            decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                        });

                                                                        document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                            decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                        });
                                                                    }
                                                                } else if (item.type === 1) {
                                                                    // Profile effect
                                                                    (async () => {
                                                                        // Fetch profile effects if not cached
                                                                        if (!profileEffectsCache) {
                                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                                method: "GET",
                                                                                headers: {
                                                                                    "Password": api_password,
                                                                                    "Token": api_token
                                                                                }
                                                                            });
                                                                            const effectsData = await response.json();
                                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                                        }
                                                    
                                                                        // Find the matching effect
                                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === item.id);
                                                    
                                                                        if (matchingEffect) {
                                                                            const effectImage = document.createElement("img");
                                                                            effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                            effectImage.alt = "Profile Effect";
                                                                            effectImage.classList.add("modal-profile-effect-img");
                                                                            modal.querySelector("[data-modal-preview-holder]").appendChild(effectImage);
                                                    
                                                                            // Hover effect for profile effect
                                                                            if (localStorage.reduced_motion != "true") {
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                    if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                        const effectUrl = matchingEffect.effects[0]?.src;
                                                                                        effectImage.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                                    }
                                                                                });
                                                                            
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                    effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                                });
                                                                            } else {
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                    effectImage.src = matchingEffect.reducedMotionSrc;
                                                                                });
                                                                            
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                    effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                                });
                                                                            }
                                                                        }
                                                                    })();
                                                                }
                                                            }
                                                        });
                                                    } else if (product.type === VARIANTS_GROUP) {
                                                        modal.querySelector("[data-shop-modal-var-container-container]").classList.add('show');
                                                        // Update SKU and summary
                                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                        modal.querySelector("[data-product-modal-summary]").textContent = product.summary;
                                                    
                                                        // Always display the base variant name
                                                        modal.querySelector("[data-product-modal-name]").textContent = product.variants[0]?.base_variant_name || "Product";
                                                    
                                                        // Render variant color blocks as interactive divs
                                                        const variantContainer = modal.querySelector("[data-shop-modal-var-container]");
                                                        variantContainer.innerHTML = ""; // Clear existing variant blocks
                                                        let currentSelectedVariant = null; // Track selected variant
                                                    
                                                        product.variants.forEach((variant, index) => {
                                                            // Create variant color block
                                                            const variantColorBlock = document.createElement("div");
                                                            variantColorBlock.classList.add("shop-card-var");
                                                            variantColorBlock.style.backgroundColor = `${variant.variant_value}`;
                                                    
                                                            // Add click event listener to switch variants
                                                            variantColorBlock.addEventListener("click", () => {
                                                                if (currentSelectedVariant) {
                                                                    currentSelectedVariant.classList.remove("shop-card-var-selected");
                                                                }
                                                                variantColorBlock.classList.add("shop-card-var-selected");
                                                                currentSelectedVariant = variantColorBlock;
                                                                applyVariant(variant);
                                                            });
                                                    
                                                            // Append the color block to the container
                                                            variantContainer.appendChild(variantColorBlock);
                                                    
                                                            // Set the first variant as the default selected
                                                            if (index === 0) {
                                                                currentSelectedVariant = variantColorBlock;
                                                                variantColorBlock.classList.add("shop-card-var-selected");
                                                            }
                                                        });
            
                                                        let isFirstTimeLoadingVariant = true;
                                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                        const previewHolderLeft = modal.querySelector("[data-modal-left-preview-holder]");
                                                    
                                                        // Function to apply the selected variant
                                                        function applyVariant(selectedVariant) {
                                                            modal.querySelector("[data-shop-modal-var-title]").textContent = `(${selectedVariant.variant_label})`;
                                                            modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${selectedVariant.sku_id}`;
                                                            modal.querySelector("[data-share-product-card-button]").innerHTML = `
                                                                <svg class="shareIcon_modal" onclick="copyEmoji('https://canary.discord.com/shop#itemSkuId=${selectedVariant.sku_id}');" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M16.32 14.72a1 1 0 0 1 0-1.41l2.51-2.51a3.98 3.98 0 0 0-5.62-5.63l-2.52 2.51a1 1 0 0 1-1.41-1.41l2.52-2.52a5.98 5.98 0 0 1 8.45 8.46l-2.52 2.51a1 1 0 0 1-1.41 0ZM7.68 9.29a1 1 0 0 1 0 1.41l-2.52 2.51a3.98 3.98 0 1 0 5.63 5.63l2.51-2.52a1 1 0 0 1 1.42 1.42l-2.52 2.51a5.98 5.98 0 0 1-8.45-8.45l2.51-2.51a1 1 0 0 1 1.42 0Z" class=""></path><path fill="currentColor" d="M14.7 10.7a1 1 0 0 0-1.4-1.4l-4 4a1 1 0 1 0 1.4 1.4l4-4Z" class=""></path></svg>
                                                            `;
                                                            if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                                modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                                    <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${selectedVariant.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                                `;
                                                            }
                                                            if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                                                
                                                                if (selectedVariant.type === 0) {
                                                                    selectedVariant.items?.forEach(item => {
                                                                        previewHolder.classList.add('modal-preview-profile-container');
                                                                        previewHolder.innerHTML = `
                                                                            <div class="modal-preview-profile1">
                                                                                <div class="options-preview-profile-banner-color"></div>
                                                                                <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                                <div class="profile-avatar-preview-bg"></div>
                                                                                <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                                <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                                <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                                <img id="profileAvatarDecoPreview" class="profile-avatar-deco-preview" src="https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true">
                                                                                <div class="options-preview-profile-status-bg"></div>
                                                                                <div class="options-preview-profile-status-color"></div>
                                                                            </div>
                                                                        `;
                                                                        document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();

                                                                        previewHolderLeft.classList.add('modal-left-avatar-decoration-img');

                                                                        previewHolderLeft.innerHTML = `
                                                                            <img id="shop-card-deco-image" src="https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&amp;passthrough=false" data-left-preview-deco-var>
                                                                        `;

                                                                        const imgElement = previewHolderLeft.querySelector("[data-left-preview-deco-var]");
                                                                        
                                                                        if (localStorage.reduced_motion != "true") {
                                                                            imgElement.addEventListener("mouseenter", () => {
                                                                                imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                            });
                                                                        
                                                                            imgElement.addEventListener("mouseleave", () => {
                                                                                imgElement.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                            });
                                                                        }
                                                                    });
                                                                } else if (selectedVariant.type === 1) {

                                                                    modal.classList.add("modal-2000-1");
                                                                    (async () => {
                                                                        // Ensure the item ID is accessible here
                                                                        let itemId = undefined;
                                                                        if (Array.isArray(selectedVariant.items)) {
                                                                            // If items is an array, find the item with type 1 and get its id
                                                                            const item = selectedVariant.items.find(item => item.type === 1);
                                                                            if (item) {
                                                                                itemId = item.id;
                                                                            }
                                                                        } else if (selectedVariant.items && selectedVariant.items.type === 1) {
                                                                            // If items is an object and has type 1, get its id
                                                                            itemId = selectedVariant.items.id;
                                                                        }
                                                                    
                                                                    
                                                                        // Fetch profile effects API only if not already cached
                                                                        if (!profileEffectsCache) {
                                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                                method: "GET",
                                                                                headers: {
                                                                                    "Password": api_password,
                                                                                    "Token": api_token
                                                                                }
                                                                            });
                                                                            const effectsData = await response.json();
                                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                                        }
                                                                    
                                                                        // Find matching profile effect
                                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                                                    
                                                                        if (matchingEffect) {
                                                                            if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                const effectUrl = matchingEffect.effects[0]?.src;
                                                                                previewHolder.classList.add('modal-preview-profile-container');
                                                                                previewHolder.innerHTML = `
                                                                                    <div class="modal-preview-profile2">
                                                                                        <div class="options-preview-profile-banner-color"></div>
                                                                                        <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                                        <div class="profile-avatar-preview-bg"></div>
                                                                                        <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                                        <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                                        <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                                        <div class="options-preview-profile-status-bg"></div>
                                                                                        <div class="options-preview-profile-status-color"></div>
                                                                                        <img id="profileProfileEffectPreview" class="profile-profile-effect-preview" src="${effectUrl}">
                                                                                    </div>
                                                                                `;
                                                                                document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();
                                                                            }
                                                                        }

                                                                        previewHolderLeft.classList.add('modal-left-profile-effect-img');

                                                                        previewHolderLeft.innerHTML = `
                                                                            <img src="${matchingEffect.thumbnailPreviewSrc}" data-left-preview-effect-var>
                                                                        `;

                                                                        const imgElement = previewHolderLeft.querySelector("[data-left-preview-effect-var]");
                                                                        
                                                                        if (localStorage.reduced_motion != "true") {
                                                                            imgElement.addEventListener("mouseenter", () => {
                                                                                if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                    const effectUrl = matchingEffect.effects[0]?.src;
                                                                                    imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                                }
                                                                            });
                                                                        
                                                                            imgElement.addEventListener("mouseleave", () => {
                                                                                // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                            });
                                                                        } else {
                                                                            imgElement.addEventListener("mouseenter", () => {
                                                                                imgElement.src = matchingEffect.reducedMotionSrc;
                                                                            });
                                                                        
                                                                            imgElement.addEventListener("mouseleave", () => {
                                                                                // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                            });
                                                                        }
                                                                    })();
                                                                }

                                                                
                                                            } else {
                                                                if (selectedVariant.type === 0) {
                                                                    modal.classList.add("modal-2000-0");
                                                                    previewHolder.innerHTML = ""; // Clear previous decorations
                                                                    previewHolder.classList.add('modal-avatar-decoration-img');
                                                                    
                                                                    // Add the avatar decoration based on the selected variant
                                                                    selectedVariant.items?.forEach(item => {
                                                                        const decoImage = document.createElement("img");
                                                                        decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                        decoImage.alt = "Avatar Decoration";
                                                                        decoImage.id = "shop-card-deco-image";
                                                                        previewHolder.appendChild(decoImage);
                                                                    
                                                                        // Hover effect for decoration image
                                                                        if (localStorage.reduced_motion !== "true") {
                                                                            document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                            });
                                                                            document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                            });
                                                                        }
                                                                    });
                                                                } else if (selectedVariant.type === 1) {
                                                                    modal.classList.add("modal-2000-1");
                                                                    (async () => {
                                                                        // Ensure the item ID is accessible here
                                                                        let itemId = undefined;
                                                                        if (Array.isArray(selectedVariant.items)) {
                                                                            // If items is an array, find the item with type 1 and get its id
                                                                            const item = selectedVariant.items.find(item => item.type === 1);
                                                                            if (item) {
                                                                                itemId = item.id;
                                                                            }
                                                                        } else if (selectedVariant.items && selectedVariant.items.type === 1) {
                                                                            // If items is an object and has type 1, get its id
                                                                            itemId = selectedVariant.items.id;
                                                                        }
                                                                    
                                                                    
                                                                        // Fetch profile effects API only if not already cached
                                                                        if (!profileEffectsCache) {
                                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                                method: "GET",
                                                                                headers: {
                                                                                    "Password": api_password,
                                                                                    "Token": api_token
                                                                                }
                                                                            });
                                                                            const effectsData = await response.json();
                                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                                        }
                                                                    
                                                                        // Find matching profile effect
                                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                                                    
                                                                        if (matchingEffect) {
                                                                            const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                                            previewHolder.classList.add('modal-profile-effect-img');
                                                                        
                                                                            previewHolder.innerHTML = `
                                                                                <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                                            `;
                                                                        
                                                                            // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                                            const imgElement = previewHolder.querySelector("img");
                                                                        
                                                                            if (localStorage.reduced_motion != "true") {
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                    if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                        const effectUrl = matchingEffect.effects[0]?.src;
                                                                                        imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                                    }
                                                                                });
                                                                            
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                                });
                                                                            } else {
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                    imgElement.src = matchingEffect.reducedMotionSrc;
                                                                                });
                                                                            
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                                });
                                                                            }
                                                                        }
                                                                    })();
                                                                }
                                                            }
                                                        }
                                                    
                                                        // Apply the default variant (first one) initially
                                                        if (product.variants.length > 0) {
                                                            applyVariant(product.variants[0]);
                                                        }
                                                    } else if (product.type === EXTERNAL_SKU) {
                                                        modal.classList.add('modal-3000');
            
                                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                        modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                        modal.querySelector("[data-product-modal-summary]").textContent = product.summary;
            
                                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
            
                                                        if (product.sku_id === "1342211853484429445") {
                                                            previewHolder.classList.add('modal-potion-img');
                                                                
                                                            previewHolder.innerHTML = `
                                                                <svg class="potion-card-preview profile-badge-orb-preview" width="187" height="187" viewBox="0 0 187 187" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                <g clip-path="url(#clip0_136_3)">
                                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M93.2014 34.4915L41.7391 64.2032V123.627L93.2014 153.338L144.664 123.627V64.2032L93.2014 34.4915ZM173.024 47.8295L93.2014 1.7439L13.3789 47.8295V140L93.2014 186.086L173.024 140V47.8295Z" fill="white"/>
                                                                <path d="M106.759 80.3577L98.3727 57.9977C96.5807 53.2198 89.8225 53.2198 88.0305 57.9977L79.6447 80.3577L57.2847 88.7437C52.5067 90.5355 52.5067 97.2939 57.2847 99.0857L79.6447 107.472L88.0305 129.832C89.8225 134.61 96.5807 134.61 98.3727 129.832L106.759 107.472L129.119 99.0857C133.896 97.2939 133.896 90.5355 129.119 88.7437L106.759 80.3577Z" fill="white"/>
                                                                </g>
                                                                <defs>
                                                                <clipPath id="clip0_136_3">
                                                                <rect width="160.82" height="187" fill="white" transform="translate(13.0908)"/>
                                                                </clipPath>
                                                                </defs>
                                                                </svg>
                                                            `;
                                                        } else if (product.sku_id === "1333912750274904064") {
                                                            previewHolder.classList.add('modal-potion-img');
                                                                
                                                            previewHolder.innerHTML = `
                                                                <svg class="potion-card-preview nitro-3-days-orb-preview" width="187" height="187" viewBox="0 0 187 187" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                                <rect y="16" width="187" height="140" fill="url(#pattern0_136_11)"/>
                                                                <defs>
                                                                <pattern id="pattern0_136_11" patternContentUnits="objectBoundingBox" width="1" height="1">
                                                                <use xlink:href="#image0_136_11" transform="matrix(0.00369004 0 0 0.00492884 0 -0.000276753)"/>
                                                                </pattern>
                                                                <image id="image0_136_11" width="271" height="203" preserveAspectRatio="none" xlink:href="data:image/png;base64,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"/>
                                                                </defs>
                                                                </svg>
            
                                                            `;
                                                        } else {
                                                            previewHolder.innerHTML = `
                                                                <p>${getTextString("CARD_TYPE_EXTERNAL_SKU_ERROR")}</p>
                                                            `;
                                                        }
                                                        
                                                    }


                                                    const button_container = document.querySelector("[data-modal-buttons]");
                                                    
                                                    if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads") {
                                                        button_container.innerHTML = `
                                                            <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                        `;
                                                        modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                            <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${product.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                        `;
                                                    } else if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+") {
                                                        if (typeof product.emojiCopy != 'undefined') {
                                                            button_container.innerHTML = `
                                                                <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                                <button class="card-button ${product.emojiCopy ? '' : 'card-button-no-emoji'}" onclick="${product.emojiCopy ? `copyEmoji('${product.emojiCopy}')` : `redirectToGoogle()`}" title="${product.emojiCopy ? `${getTextString("CARD_COPY_PPLUS_EMOJI_TITLE")}` : `${getTextString("CARD_REQUEST_PPLUS_EMOJI_TITLE")}`}">${product.emojiCopy ? `${getTextString("CARD_COPY_PPLUS_EMOJI")}` : `${getTextString("CARD_REQUEST_PPLUS_EMOJI")}`}</button>
                                                            `;
                                                        } else {
                                                            button_container.innerHTML = `
                                                                <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                                <button class="card-button card-button-no-emoji" title="${getTextString("CARD_PPLUS_ERROR_TITLE")}">${getTextString("CARD_PPLUS_ERROR")}</button>
                                                            `;
                                                        }
                                                    } else if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+") {
                                                        if (typeof product.emojiCopy != 'undefined') {
                                                            button_container.innerHTML = `
                                                                <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                                <button class="card-button ${product.emojiCopy ? '' : 'card-button-no-emoji'}" onclick="${product.emojiCopy ? `copyEmoji('${product.emojiCopy}')` : `redirectToGoogle()`}" title="${product.emojiCopy ? `${getTextString("CARD_COPY_PPLUS_EMOJI_TITLE")}` : `${getTextString("CARD_REQUEST_PPLUS_EMOJI_TITLE")}`}">${product.emojiCopy ? `${getTextString("CARD_COPY_PPLUS_EMOJI")}` : `${getTextString("CARD_REQUEST_PPLUS_EMOJI")}`}</button>
                                                            `;
                                                            modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                                <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${product.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                            `;
                                                        } else {
                                                            button_container.innerHTML = `
                                                                <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                                <button class="card-button card-button-no-emoji" title="${getTextString("CARD_PPLUS_ERROR_TITLE")}">${getTextString("CARD_PPLUS_ERROR")}</button>
                                                            `;
                                                            modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                                <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${product.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                            `;
                                                        }
                                                    } else if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                        button_container.innerHTML = `
                                                            <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                        `;
                                                        modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                            <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${product.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                        `;
                                                    } else {
                                                        button_container.innerHTML = `
                                                            <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}" onclick="location.href='https://discord.com/shop#itemSkuId=${product.sku_id}';">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                                                        `;
                                                    }


                                                    modal.querySelector("[data-share-product-card-button]").innerHTML = `
                                                        <svg class="shareIcon_modal" onclick="copyEmoji('https://canary.discord.com/shop#itemSkuId=${product.sku_id}');" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M16.32 14.72a1 1 0 0 1 0-1.41l2.51-2.51a3.98 3.98 0 0 0-5.62-5.63l-2.52 2.51a1 1 0 0 1-1.41-1.41l2.52-2.52a5.98 5.98 0 0 1 8.45 8.46l-2.52 2.51a1 1 0 0 1-1.41 0ZM7.68 9.29a1 1 0 0 1 0 1.41l-2.52 2.51a3.98 3.98 0 1 0 5.63 5.63l2.51-2.52a1 1 0 0 1 1.42 1.42l-2.52 2.51a5.98 5.98 0 0 1-8.45-8.45l2.51-2.51a1 1 0 0 1 1.42 0Z" class=""></path><path fill="currentColor" d="M14.7 10.7a1 1 0 0 0-1.4-1.4l-4 4a1 1 0 1 0 1.4 1.4l4-4Z" class=""></path></svg>
                                                    `;


                                                    const priceTextNitro = modal.querySelector("[data-price-nitro]");
                                                    const priceTextStandard = modal.querySelector("[data-price-standard]");

                                                    const priceContainerNitro = modal.querySelector("[data-price-nitro-container]");
                                                    const priceContainerStandard = modal.querySelector("[data-price-standard-container]");

                                                    const priceContainer = modal.querySelector("[data-shop-price-container]");

                                                    let priceStandard = "N/A";
                                                    let priceNitro = "N/A";
                                                    let priceOrb = "N/A";

                                                    if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                                        if (localStorage.is_nitro_user === "true") {
                                                            if (product.prices && product.prices["4"] && product.prices["4"].country_prices && product.prices["4"].country_prices.prices) {
                                                                product.prices["4"].country_prices.prices.forEach(price => {
                                                                    if (price.currency === "usd") {
                                                                        priceStandard = price.amount;
                                                                    }
                                                                    if (price.currency === "discord_orb") {
                                                                        priceOrb = price.amount;
                                                                    }
                                                                });
                
                                                                if (priceStandard != "N/A" && priceOrb != "N/A") {
                                                                    let orb_price = document.createElement("div");
                                                            
                                                                    orb_price.innerHTML = `
                                                                        <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                                        <div class="orb-icon" style="margin-left: -25px"></div>
                                                                    `;
                                                                    orb_price.style.position = `absolute`;
                                                                    orb_price.style.right = `0px`;
                                                                    
                                                                    priceContainer.appendChild(orb_price);
                
                                                                    standardPriceOutput = `US$${(priceStandard / 100).toFixed(2)}`;
            
                                                                    priceContainerStandard.innerHTML = `
                                                                        <a style="font-size: large; font-weight: 900; margin-left: 23px">${standardPriceOutput}</a>
                                                                        <div class="nitro-icon" style="margin-left: -5px"></div>
                                                                    `;
                
                                                                } else if (priceStandard != "N/A") {
                
                                                                    standardPriceOutput = `US$${(priceStandard / 100).toFixed(2)}`;
            
                                                                    priceContainerStandard.innerHTML = `
                                                                        <a style="font-size: large; font-weight: 900; margin-left: 23px">${standardPriceOutput}</a>
                                                                        <div class="nitro-icon" style="margin-left: -5px"></div>
                                                                    `;
                
                                                                } else if (priceOrb != "N/A") {
                
                                                                    let orb_price = document.createElement("div");
                                                            
                                                                    orb_price.innerHTML = `
                                                                        <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                                        <div class="orb-icon" style="margin-left: -25px"></div>
                                                                    `;
                                                                    orb_price.style.position = `absolute`;
                                                                    orb_price.style.left = `20px`;
                                                                    
                                                                    priceContainer.appendChild(orb_price);
                
                                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                        <div class="unplublished-tag">
                                                                            <p class="unplublished-tag-text">${getTextString("CARD_ORB_EXCLUSIVE_TAG")}</p>
                                                                        </div>
                                                                    `;
                                                                    
                                                                }
                                                            }
                                                        } else {
                                                            if (product.prices && product.prices["0"] && product.prices["0"].country_prices && product.prices["0"].country_prices.prices) {
                                                                product.prices["0"].country_prices.prices.forEach(price => {
                                                                    if (price.currency === "usd") {
                                                                        priceStandard = price.amount;
                                                                    }
                                                                    if (price.currency === "discord_orb") {
                                                                        priceOrb = price.amount;
                                                                    }
                                                                });
                
                                                                if (priceStandard != "N/A" && priceOrb != "N/A") {
                                                                    let orb_price = document.createElement("div");
                                                            
                                                                    orb_price.innerHTML = `
                                                                        <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                                        <div class="orb-icon" style="margin-left: -25px"></div>
                                                                    `;
                                                                    orb_price.style.position = `absolute`;
                                                                    orb_price.style.right = `0px`;
                                                                    
                                                                    priceContainer.appendChild(orb_price);
                
                                                                    priceTextStandard.textContent = `US$${(priceStandard / 100).toFixed(2)}`;
                
                                                                } else if (priceStandard != "N/A") {
                
                                                                    priceTextStandard.textContent = `US$${(priceStandard / 100).toFixed(2)}`;
                
                                                                } else if (priceOrb != "N/A") {
                
                                                                    let orb_price = document.createElement("div");
                                                            
                                                                    orb_price.innerHTML = `
                                                                        <a style="font-size: large; font-weight: 900;">${priceOrb}</a>
                                                                        <div class="orb-icon" style="margin-left: -25px"></div>
                                                                    `;
                                                                    orb_price.style.position = `absolute`;
                                                                    orb_price.style.left = `23px`;
                                                                    
                                                                    priceContainer.appendChild(orb_price);
                
                                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                        <div class="unplublished-tag">
                                                                            <p class="unplublished-tag-text">${getTextString("CARD_ORB_EXCLUSIVE_TAG")}</p>
                                                                        </div>
                                                                    `;
                                                                    
                                                                }
                                                            }
                                                        }
            
                                                    } else {
                                                        if (product.prices && product.prices["0"] && product.prices["0"].country_prices && product.prices["0"].country_prices.prices) {
                                                            product.prices["0"].country_prices.prices.forEach(price => {
                                                                if (price.currency === "usd") {
                                                                    priceStandard = price.amount;
                                                                }
                                                            });
                                                        }
                                                
                                                        if (product.prices && product.prices["4"] && product.prices["4"].country_prices && product.prices["4"].country_prices.prices) {
                                                            product.prices["4"].country_prices.prices.forEach(price => {
                                                                if (price.currency === "usd") {
                                                                    priceNitro = price.amount;
                                                                }
                                                            });
                                                        }
            
                                                        if (priceTextStandard) {
                                                            priceTextStandard.textContent = priceStandard !== "N/A" ? `US$${(priceStandard / 100).toFixed(2)}` : "null";
                                                        }
                
                                                        if (priceTextNitro) {
                                                            priceTextNitro.textContent = priceNitro !== "N/A" ? `US$${(priceNitro / 100).toFixed(2)} with Nitro` : "null";
                                                        }
                                                    }

                                                    if (priceTextStandard.textContent === "null" && priceTextNitro.textContent === "null") {
                                                        let error_warning = document.createElement("div");

                                                        error_warning.classList.add('invalid_currency_warning');
                                                        error_warning.innerHTML = `
                                                            <p>This item does not support this currency!</p>
                                                        `;
                                                                    
                                                        priceContainer.appendChild(error_warning);
                                                    } else if (priceTextStandard.textContent === "null" || priceTextNitro.textContent === "null") {
                                                        let error_warning = document.createElement("div");

                                                        error_warning.classList.add('invalid_currency_warning');
                                                        error_warning.innerHTML = `
                                                            <p>This item does not fully support this currency!</p>
                                                        `;
                                                                    
                                                        priceContainer.appendChild(error_warning);
                                                    }


                                                    const unpublishedAt = new Date(product.unpublished_at);
                            
                                                    if (product.unpublished_at && !isNaN(unpublishedAt.getTime())) {
                            
                                                        function updateTimer() {
                                                            const now = new Date();
                                                            const timeDiff = unpublishedAt - now;
                            
                                                            if (timeDiff <= 0) {
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${getTextString("CARD_UNPUBLISHED_TAG")}</p>
                                                                    </div>
                                                                `;
                                                                clearInterval(timerInterval);
                                                            } else {
                                                                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                            
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${days}${getTextString("CARD_UNPUBLISHED_COUNTDOWN_TAG")}</p>
                                                                    </div>
                                                                `;
                                                            }
                                                        }
                            
                                                        const timerInterval = setInterval(updateTimer, 1000);
                                                        updateTimer();
                                                    }

                                                    const ExpiredAt = new Date(product.expires_at);
                            
                                                    if (product.expires_at && !isNaN(ExpiredAt.getTime())) {
                            
                                                        function updateTimer() {
                                                            const now = new Date();
                                                            const timeDiff = ExpiredAt - now;
                            
                                                            if (timeDiff <= 0) {
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_TAG")}</p>
                                                                    </div>
                                                                `;
                                                                clearInterval(timerInterval);
                                                            } else {
                                                                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                            
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_COUNTDOWN_TAG")}${days}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_DAYS")}${hours}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_HOURS")}</p>
                                                                    </div>
                                                                `;
                                                            }
                                                        }
                            
                                                        const timerInterval = setInterval(updateTimer, 1000);
                                                        updateTimer();
                                                    }

                                                    if (product.premium_type === 2) {
                                                        modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="premiumWheelBadge_c23530 textBadge_df8943 base_df8943 eyebrow_df8943 baseShapeRound_df8943" aria-label="This bonus item is yours to keep and use anytime with an active Nitro subscription." style="background-color: var(--status-danger);"><svg class="premiumWheel_c23530" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M15 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" class=""></path><path fill="currentColor" fill-rule="evenodd" d="M7 4a1 1 0 0 0 0 2h3a1 1 0 1 1 0 2H5.5a1 1 0 0 0 0 2H8a1 1 0 1 1 0 2H6a1 1 0 1 0 0 2h1.25A8 8 0 1 0 15 4H7Zm8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" clip-rule="evenodd" class=""></path><path fill="currentColor" d="M2.5 10a1 1 0 0 0 0-2H2a1 1 0 0 0 0 2h.5Z" class=""></path></svg></div>
                                                        `;
                                                    }
                                                    


                                                    let modal_back = document.createElement("div");

                                                    modal_back.classList.add('modalv2-back');
                                                    modal_back.id = 'modalv2-back';

                                                    document.body.appendChild(modal_back);

                                                    setTimeout(() => {
                                                        modal_back.classList.add('show');
                                                    }, 1);


                                                    modal.addEventListener('click', (event) => {
                                                        if (event.target === modal) {
                                                            modal.classList.remove('show');
                                                            modal_back.classList.remove('show');
                                                            setTimeout(() => {
                                                                modal.remove();
                                                                modal_back.remove();
                                                            }, 300);
                                                        }
                                                    });

                                                    document.querySelector("[data-close-product-card-button]").addEventListener('click', () => {
                                                        modal.classList.remove('show');
                                                        modal_back.classList.remove('show');
                                                        setTimeout(() => {
                                                            modal.remove();
                                                            modal_back.remove();
                                                        }, 300);
                                                    });
                                                }
                                            }
                                        } else {
                                            card.querySelector("[data-share-product-card-button]").innerHTML = `
                                                <svg class="shareIcon_f4a996" onclick="copyEmoji('https://canary.discord.com/shop#itemSkuId=${product.sku_id}');" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M16.32 14.72a1 1 0 0 1 0-1.41l2.51-2.51a3.98 3.98 0 0 0-5.62-5.63l-2.52 2.51a1 1 0 0 1-1.41-1.41l2.52-2.52a5.98 5.98 0 0 1 8.45 8.46l-2.52 2.51a1 1 0 0 1-1.41 0ZM7.68 9.29a1 1 0 0 1 0 1.41l-2.52 2.51a3.98 3.98 0 1 0 5.63 5.63l2.51-2.52a1 1 0 0 1 1.42 1.42l-2.52 2.51a5.98 5.98 0 0 1-8.45-8.45l2.51-2.51a1 1 0 0 1 1.42 0Z" class=""></path><path fill="currentColor" d="M14.7 10.7a1 1 0 0 0-1.4-1.4l-4 4a1 1 0 1 0 1.4 1.4l4-4Z" class=""></path></svg>
                                            `;
                                        }


                                        function newItemCheck() {

                                            if (N > g) {
                                            } else {
                                                card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                    <div class="unplublished-tag">
                                                        <p class="unplublished-tag-text">${getTextString("CARD_NEW_TAG")}</p>
                                                    </div>
                                                `;
                                            }
                                        }
                                                                            
                                        if (m.includes(product.sku_id)) {
                                            newItemCheck();
                                        }

                                        function newColorItemCheck() {

                                            if (N > newColorsExpireDate) {
                                            } else {
                                                card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                    <div class="unplublished-tag">
                                                        <p class="unplublished-tag-text">${getTextString("CARD_NEW_COLORS_TAG")}</p>
                                                    </div>
                                                `;
                                            }
                                        }
                                                                            
                                        if (newColorsSKUIDS.includes(product.sku_id) && ANIME_V3 === apiCategory.sku_id) {
                                            newColorItemCheck();
                                        }

                                        function popularItemCheck() {
                                            card.classList.add('popular-item');
                                        }
                                                                            
                                        if (I.includes(product.sku_id)) {
                                            popularItemCheck();
                                        }


                                        const unpublishedAt = new Date(product.unpublished_at);
                            
                                        if (product.unpublished_at && !isNaN(unpublishedAt.getTime())) {
                            
                                            function updateTimer() {
                                                const now = new Date();
                                                const timeDiff = unpublishedAt - now;
                            
                                                if (timeDiff <= 0) {
                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${getTextString("CARD_UNPUBLISHED_TAG")}</p>
                                                        </div>
                                                    `;
                                                    clearInterval(timerInterval);
                                                } else {
                                                    const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                    const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                    const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                            
                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${days}${getTextString("CARD_UNPUBLISHED_COUNTDOWN_TAG")}</p>
                                                        </div>
                                                    `;
                                                }
                                            }
                            
                                            const timerInterval = setInterval(updateTimer, 1000);
                                            updateTimer();
                                        }

                                        const ExpiredAt = new Date(product.expires_at);
                            
                                        if (product.expires_at && !isNaN(ExpiredAt.getTime())) {
                            
                                            function updateTimer() {
                                                const now = new Date();
                                                const timeDiff = ExpiredAt - now;
                            
                                                if (timeDiff <= 0) {
                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_TAG")}</p>
                                                        </div>
                                                    `;
                                                    clearInterval(timerInterval);
                                                } else {
                                                    const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                    const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                    const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                            
                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_COUNTDOWN_TAG")}${days}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_DAYS")}${hours}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_HOURS")}</p>
                                                        </div>
                                                    `;
                                                }
                                            }
                            
                                            const timerInterval = setInterval(updateTimer, 1000);
                                            updateTimer();
                                        }

                                        // Append card to output
                                        cardOutput.append(card);
                                        }
                                    }
                                    output0.append(category);
        
                                    document.getElementById("shop-category-loading-container").innerHTML = ``;
                                    document.getElementById("shop-category-loading-container").style.display = 'none';
    
        
                                    const lofi_girl_banner = document.getElementById(LOFI_GIRL);
                                    const kawaii_mode_banner = document.getElementById(KAWAII_MODE);
        
                                    if (localStorage.reduced_motion != "true") {
        
                                        if (lofi_girl_banner) {  // Check if element exists
                                            document.getElementById(`${LOFI_GIRL}-preview-banner-container`).innerHTML = `
                                                <video autoplay muted class="home-page-preview-banner" src="https://cdn.discordapp.com/assets/collectibles/drops/lofi_girl/hero_banner.webm" loop></video>
                                            `;
                                        }
        
                                        if (kawaii_mode_banner) {  // Check if element exists
                                            document.getElementById('1306330663213072494-preview-banner-container').innerHTML = `
                                                <video autoplay muted class="home-page-preview-banner" src="https://cdn.discordapp.com/assets/collectibles/drops/kawaii_mode/hero_banner.webm" loop></video>
                                            `;
                                        }
                                    }
                                    if (kawaii_mode_banner) {  // Check if element exists
                                        document.getElementById('1306330663213072494-summary').style.color = 'black';
                                    }
                                } else if (apiCategory.type === FEATURED) {
    
                                    const featureContainerTemplate = document.querySelector("[data-shop-subblock-container-template]");
                
                                    const featureBlockContainer = featureContainerTemplate.content.cloneNode(true).children[0];
    
                                    apiCategory.subblocks.forEach(subblock => {
    
                                        const template = document.querySelector("[data-shop-category-template-sub]");
                
                                        const featureblock = template.content.cloneNode(true).children[0];
                
                                        const oneImage = featureblock.querySelector("[data-shop-preview-image-sub]");
                                        oneImage.src = subblock.banner_url;
                                        oneImage.alt = subblock.name;
    
                                        featureblock.setAttribute("onclick",`setParams({page: '${subblock.page}'}); location.reload();`);
    
                                        featureBlockContainer.append(featureblock);
    
                                    });
    
                                output.append(featureBlockContainer);
                                
                                } else if (apiCategory.type === WIDE_BANNER) {
    
                                    const template = document.querySelector("[data-shop-category-template-wide]");
                
                                    const category = template.content.cloneNode(true).children[0];
                
                                    const oneImage = category.querySelector("[data-shop-preview-image-wide]");
                                    oneImage.src = apiCategory.banner_url;
                                    oneImage.alt = apiCategory.name;
    
                                    const title = category.querySelector("[data-shop-output-wide-title]");
                                    title.textContent = apiCategory.title;
                                    title.style.color = apiCategory.banner_text_color;
    
                                    const desc = category.querySelector("[data-shop-output-wide-desc]");
                                    desc.textContent = apiCategory.body;
                                    desc.style.color = apiCategory.banner_text_color;
    
                                    if (apiCategory.disable_cta != true) {
                                        category.classList.add('clickable');
                                    }
    
                                    category.setAttribute("onclick",`setParams({page: '${apiCategory.page}'}); location.reload();`);
    
                                    output.append(category);
                                }
                            }
    
                            processCategories()
                        });
                    }
                })
                .catch(error => {
                    console.error('Error fetching the API:', error);
                });
            }
        } else if (params.get("page") === "pplus-home") {

            fetchFirstHomeData();

            function fetchFirstHomeData() {
                let profileEffectsCache = null;
            
                fetch(apiUrl, {
                    method: "GET",
                    headers: {
                        "Password": api_password,
                        "Token": api_token
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.message === "Missing Access") {
                        document.getElementById("everything-housing-container").innerHTML = `
                            <div style="text-align: center; margin-top: 10px;" id="failed-to-load-shop">
                                <img style="width: 200px;" src="https://raw.githubusercontent.com/DTACat/Collectibles/main/Images/shopuhoh.png">
                                <h2>${getTextString("SHOP_NOT_LOAD_ERROR_1")}</h2>
                                <p>${getTextString("SHOP_NOT_LOAD_ERROR_2")}</p>
                                <p>${getTextString("SHOP_NOT_LOAD_ERROR")}${data.message}</p>
                                <button class="refresh-button" onclick="location.reload();">${getTextString("SHOP_NOT_LOAD_ERROR_RELOAD")}</button>
                            </div>
                        `;
                    } else {
                        data.forEach(apiCategory => {
                        async function processCategories() {
                            const output = document.querySelector("[data-shop-output]");
                            const output0 = document.querySelector("[data-shop-0-output]");
                            if (apiCategory.type === HERO) {
                                const template = document.querySelector("[data-shop-category-template]");
                            
                                const category = template.content.cloneNode(true).children[0];
                            
                                if (apiCategory.hero_banner_asset) {
                                    if (apiCategory.hero_banner_asset.animated != null) {
                                        if (apiCategory.hero_banner_asset.static != null) {
                                            category.querySelector("[data-shop-banner-banner-container]").innerHTML = `
                                                <img class="home-page-preview-banner" src="${apiCategory.hero_banner_asset.static}">
                                                <video autoplay muted class="home-page-preview-banner-video" style="position: absolute; left: 0px; bottom: 0px; z-index: 1;" src="${apiCategory.hero_banner_asset.animated}" loop></video>
                                            `;
                                        } else {
                                            category.querySelector("[data-shop-banner-banner-container]").innerHTML = `
                                                <video autoplay muted class="home-page-preview-banner-video" style="position: absolute; left: 0px; bottom: 0px; width: 1280px; z-index: 1;" src="${apiCategory.hero_banner_asset.animated}" loop></video>
                                            `;
                                        }
                                    } else if (apiCategory.hero_banner_asset.static != null) {
                                        category.querySelector("[data-shop-category-banner-image]").src = `${apiCategory.hero_banner_asset.static}`;
                                    }
                                } else if (apiCategory.hero_banner != null) {
                                    category.querySelector("[data-shop-category-banner-image]").src = `https://cdn.yapper.shop/assets/${apiCategory.hero_banner}.png`;
                                    category.querySelector("[data-shop-category-banner-image]").alt = apiCategory.name;
                                } else {
                                    category.querySelector("[data-shop-category-banner-image]").src = `https://cdn.yapper.shop/assets/${apiCategory.banner}.png`;
                                    category.querySelector("[data-shop-category-banner-image]").alt = apiCategory.name;
                                }
                            
    
                                if (apiCategory.hero_logo != null) {
                                    category.querySelector("[data-shop-category-logo-image]").src = `https://cdn.yapper.shop/assets/${apiCategory.hero_logo}.png`;
                                } else if (apiCategory.logo != null) {
                                    category.querySelector("[data-shop-category-logo-image]").src = `https://cdn.yapper.shop/assets/${apiCategory.logo}.png`;
                                } else {
                                    category.querySelector("[data-shop-category-logo-image]").src = `https://cdn.yapper.shop/assets/31.png`;
                                }
                                category.querySelector("[data-shop-category-logo-image]").alt = apiCategory.name;
    
                                category.querySelector("[data-shop-category-desc]").id = `${apiCategory.sku_id}-summary`;
                                category.querySelector("[data-shop-category-desc]").textContent = apiCategory.summary;
    
                                category.querySelector("[data-preview-banner-container]").id = apiCategory.sku_id;
                                category.querySelector("[data-shop-banner-banner-container]").id = `${apiCategory.sku_id}-preview-banner-container`;
                            
                                if (apiCategory.leaks_type) {
                                    category.querySelector("[data-preview-new-categoey-button]").innerHTML = `
                                        <button class="home-page-preview-button" onclick="setParams({page: 'leaks'}); location.reload();">Check out New ${apiCategory.name} Leaks</button>
                                    `;
                                } else {
                                    category.querySelector("[data-preview-new-categoey-button]").innerHTML = `
                                        <button class="home-page-preview-button" onclick="setParams({page: 'pplus'}); location.reload();">${getTextString("SHOP_CATEGORY_BROWSE_THE_COLLECTION_1")}${apiCategory.name}${getTextString("SHOP_CATEGORY_BROWSE_THE_COLLECTION_2")}</button>
                                    `;
                                }
                            
                                const cardOutput = category.querySelector("[data-shop-category-card-holder]");
                                if (cardOutput) {
                                    for (const product of apiCategory.products) {
                                        const cardTemplate = document.querySelector("[data-shop-item-card-template]");
                                        const card = cardTemplate.content.cloneNode(true).children[0];

                                        if (product.type === NONE) {
                                            card.classList.add("type_100");
                                            card.classList.add('hidden')
                                        } else if (product.type === AVATAR_DECORATION) {
                                            product.items.forEach(item => {
                                                card.classList.add("type_0");
                                                // Set the innerHTML for the preview holder
                                                const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                                previewHolder.classList.add('avatar-decoration-image');
                                                
                                                // Set the initial image for the deco card
                                                const imgElement = document.createElement("img");
                                                imgElement.id = "shop-card-deco-image";
                                                imgElement.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;
                                                
                                                previewHolder.appendChild(imgElement);

                                                const bgimg = document.createElement("div");
                                                bgimg.id = "shop-card-deco-bg-image";
                                                
                                                previewHolder.appendChild(bgimg);
                                        
                                                // Set the product details
                                                card.querySelector("[data-product-card-sku-id]").textContent = `${getTextString("CARD_PPLUS_MADE_BY")}${product.credits}`;
                                                card.querySelector("[data-product-card-name]").textContent = product.name;
                                                card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                        
                                                // Hover effect: Change the image src on mouse enter and leave
                                                if (localStorage.reduced_motion != "true") {
                                                    card.addEventListener("mouseenter", () => {
                                                        imgElement.src = `https://cdn.yapper.shop/custom-collectibles/${item.animated}.png`;
                                                        if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                            bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                        }
                                                    });
                                            
                                                    card.addEventListener("mouseleave", () => {
                                                        imgElement.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;
                                                        bgimg.style.backgroundImage = `url(data:image/png;base64,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)`;
                                                    });
                                                }
                                            });
                                        } else if (product.type === PROFILE_EFFECT) {
                                            card.classList.add("type_1");

                                            card.querySelector("[data-product-card-sku-id]").textContent = `${getTextString("CARD_PPLUS_MADE_BY")}${product.credits}`;
                                            card.querySelector("[data-product-card-name]").textContent = product.name;
                                            card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                            
                                            // Ensure the item ID is accessible here
                                            let itemId = undefined;
                                            if (Array.isArray(product.items)) {
                                                // If items is an array, find the item with type 1 and get its id
                                                const item = product.items.find(item => item.type === 1);
                                                if (item) {
                                                    itemId = item.id;
                                                }
                                            } else if (product.items && product.items.type === 1) {
                                                // If items is an object and has type 1, get its id
                                                itemId = product.items.id;
                                            }
                                        
                                        
                                            // Fetch profile effects API only if not already cached
                                            if (!profileEffectsCache) {
                                                const response = await fetch(api + PROFILES_PLUS_EFFECTS, {
                                                    method: "GET",
                                                    headers: {
                                                        "Password": api_password,
                                                        "Token": api_token
                                                    }
                                                });
                                                const effectsData = await response.json();
                                                profileEffectsCache = effectsData.profile_effect_configs;
                                            }
                                        
                                            // Find matching profile effect
                                            const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                        
                                            if (matchingEffect) {
                                                const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                                previewHolder.classList.add('profile-effect-image');
                                        
                                                previewHolder.innerHTML = `
                                                    <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                `;
                                        
                                                // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                const imgElement = card.querySelector("img");
                                        
                                                if (localStorage.reduced_motion != "true") {
                                                    card.addEventListener("mouseenter", () => {
                                                        if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                            const effectUrl = matchingEffect.effects[0]?.src;
                                                            imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                        }
                                                    });
                                            
                                                    card.addEventListener("mouseleave", () => {
                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                    });
                                                } else {
                                                    card.addEventListener("mouseenter", () => {
                                                        imgElement.src = matchingEffect.reducedMotionSrc;
                                                    });
                                            
                                                    card.addEventListener("mouseleave", () => {
                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                    });
                                                }
                                            }
                                        } else if (product.type === NAMEPLATE) {
                                            card.classList.add("type_2");

                                            card.querySelector("[data-product-card-sku-id]").textContent = `${getTextString("CARD_PPLUS_MADE_BY")}${product.credits}`;
                                            card.querySelector("[data-product-card-name]").textContent = product.name;
                                            card.querySelector("[data-product-card-summary]").textContent = product.summary;

                                            const previewHolder = card.querySelector("[data-shop-card-preview-holder]");

                                            if (localStorage.discord_username && localStorage.discord_username != '') {
                                                previewName = localStorage.discord_username;
                                            } else {
                                                previewName = 'Discord User'
                                            }

                                            previewHolder.innerHTML = `
                                                <div class="nameplate-null-user">
                                                    <div class="nameplate-null-user-avatar"></div>
                                                    <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                </div>
                                                <div class="nameplate-null-user">
                                                    <div class="nameplate-null-user-avatar"></div>
                                                    <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                </div>
                                                <div class="nameplate-null-user" data-user-nameplate-preview>
                                                    <img class="nameplate-null-user" style="position: absolute;" data-user-nameplate-preview-img></img>
                                                    <div class="nameplate-user-avatar" data-nameplate-user-random-avatar></div>
                                                    <p class="nameplate-user-name">${previewName}</p>
                                                </div>
                                                <div class="nameplate-null-user">
                                                    <div class="nameplate-null-user-avatar"></div>
                                                    <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                </div>
                                                <div class="nameplate-null-user">
                                                    <div class="nameplate-null-user-avatar"></div>
                                                    <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                </div>
                                            `;

                                            product.items.forEach(item => {
                                                const nameplatePreview = previewHolder.querySelector("[data-user-nameplate-preview]");
                                                const paletteName = item.palette;
                                                const asset = `https://cdn.yapper.shop/custom-collectibles/${item.asset}.png`;
                                                const bgcolor = nameplate_palettes[paletteName].darkBackground;

                                                previewHolder.querySelector("[data-user-nameplate-preview-img]").src = asset;

                                                nameplatePreview.style.backgroundImage = `linear-gradient(10deg, #00000000 40%, ${bgcolor} 180%), linear-gradient(170deg, #00000000 40%, ${bgcolor} 180%)`;
                                                // nameplatePreview.style.boxShadow = `0 0 0 1px #a10606`;
                                                
                                                const nullUserNameRandomWidth = previewHolder.querySelectorAll("[data-null-user-random-name]");
                                                
                                                nullUserNameRandomWidth.forEach(UserName => {
                                                    const randomWidth = Math.floor(Math.random() * (180 - 80 + 1)) + 80;
                                                    UserName.style.width = randomWidth + `px`;
                                                });
                                            
                                                const nullUserAvatar = previewHolder.querySelectorAll("[data-nameplate-user-random-avatar]");
                                            
                                                nullUserAvatar.forEach(UserAvatar => {
                                                    UserAvatar.style.backgroundImage = `url(${localStorage.discord_avatar})`;
                                                });
                                            });
                                            
                                        } else if (product.type === BUNDLE) {
                                            card.classList.add("type_1000");
                                            // Fetch the bundled products for the bundle summary
                                            const bundledProducts = product.bundled_products || [];
                                        
                                            // Generate the bundle summary from the names of the bundled products
                                            const type0Product = bundledProducts.find(item => item.type === 0);
                                            const type1Product = bundledProducts.find(item => item.type === 1);
                                        
                                            let bundleSummary = `${getTextString("CARD_TYPE_BUNDLE_TITLE")}`;
                                            if (type0Product) {
                                                bundleSummary += `${type0Product.name}${getTextString("CARD_TYPE_BUNDLE_TITLE_DECO")}`;
                                            }
                                            if (type1Product) {
                                                bundleSummary += `${type1Product.name}${getTextString("CARD_TYPE_BUNDLE_TITLE_EFFECT")}`;
                                            }
                                        
                                            // Set the summary text
                                            card.querySelector("[data-product-card-summary]").textContent = bundleSummary;
                                        
                                            // Set the basic card details
                                            card.querySelector("[data-product-card-sku-id]").textContent = `${getTextString("CARD_PPLUS_MADE_BY")}${product.credits}`;
                                            card.querySelector("[data-product-card-name]").textContent = product.name;
                                        
                                            // Handle each item in the bundle
                                            product.items.forEach(item => {
                                                if (item.type === 0) {
                                                    // Avatar decoration
                                                    const decoImage = document.createElement("img");
                                                    decoImage.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;
                                                    decoImage.alt = "Avatar Decoration";
                                                    decoImage.classList.add("avatar-decoration-image");
                                                    card.querySelector("[data-shop-card-preview-holder]").appendChild(decoImage);

                                                    const bgimg = document.createElement("div");
                                                    bgimg.classList.add("avatar-decoration-bg-image");
                                                    
                                                    card.querySelector("[data-shop-card-preview-holder]").appendChild(bgimg);
                                        
                                                    // Hover effect for decoration image
                                                    if (localStorage.reduced_motion != "true") {
                                                        card.addEventListener("mouseenter", () => {
                                                            decoImage.src = `https://cdn.yapper.shop/custom-collectibles/${item.animated}.png`;
                                                            if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                            }
                                                        });
                                                        card.addEventListener("mouseleave", () => {
                                                            decoImage.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;
                                                            bgimg.style.backgroundImage = `url(data:image/png;base64,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)`;
                                                        });
                                                    }
                                                } else if (item.type === 1) {
                                                    // Profile effect
                                                    let profileEffectsCache = null; // Cache profile effects to avoid multiple fetches
                                        
                                                    (async () => {
                                                        if (!profileEffectsCache) {
                                                            const response = await fetch(api + PROFILES_PLUS_EFFECTS, {
                                                                method: "GET",
                                                                headers: {
                                                                    "Password": api_password,
                                                                    "Token": api_token
                                                                }
                                                            });
                                                            const effectsData = await response.json();
                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                        }
                                        
                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === item.id);
                                        
                                                        if (matchingEffect) {
                                                            const effectImage = document.createElement("img");
                                                            effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                            effectImage.alt = "Profile Effect";
                                                            effectImage.classList.add("profile-effect-image");
                                                            card.querySelector("[data-shop-card-preview-holder]").appendChild(effectImage);
                                        
                                                            // Hover effect for profile effect
                                                            if (localStorage.reduced_motion != "true") {
                                                                card.addEventListener("mouseenter", () => {
                                                                    if (matchingEffect.effects && matchingEffect.effects[0] && matchingEffect.effects[0].src) {
                                                                        effectImage.src = matchingEffect.effects[0].src;
                                                                    }
                                                                });
                                                                card.addEventListener("mouseleave", () => {
                                                                    effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                });
                                                            } else {
                                                                card.addEventListener("mouseenter", () => {
                                                                    effectImage.src = matchingEffect.reducedMotionSrc;
                                                                });
                                                                card.addEventListener("mouseleave", () => {
                                                                    effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                });
                                                            }
                                                        }
                                                    })();
                                                }
                                            });
                                        } else if (product.type === VARIANTS_GROUP) {
                                            // Update SKU and summary
                                            card.querySelector("[data-product-card-sku-id]").textContent = `${getTextString("CARD_PPLUS_MADE_BY")}${product.credits}`;
                                            card.querySelector("[data-product-card-summary]").textContent = product.summary;
                                        
                                            // Always display the base variant name
                                            card.querySelector("[data-product-card-name]").textContent = product.variants[0]?.base_variant_name || "Product";
                                        
                                            // Render variant color blocks as interactive divs
                                            const variantContainer = card.querySelector("[data-shop-card-var-container]");
                                            variantContainer.innerHTML = ""; // Clear existing variant blocks
                                            let currentSelectedVariant = null; // Track selected variant
                                        
                                            product.variants.forEach((variant, index) => {
                                                // Create variant color block
                                                const variantColorBlockTmp = document.querySelector("[data-shop-varcolorblock-template]");
                                                const variantColorBlock = variantColorBlockTmp.content.cloneNode(true).children[0];
                                                variantColorBlock.classList.add("shop-card-var");
                                                variantColorBlock.id = "shop-card-var";
                                                variantColorBlock.style.backgroundColor = `${variant.variant_value}`;
                                        
                                                // Add click event listener to switch variants
                                                variantColorBlock.addEventListener("click", () => {
                                                    if (currentSelectedVariant) {
                                                        currentSelectedVariant.classList.remove("shop-card-var-selected");
                                                    }
                                                    variantColorBlock.classList.add("shop-card-var-selected");
                                                    currentSelectedVariant = variantColorBlock;
                                                    applyVariant(variant);
                                                });
                                        
                                                // Append the color block to the container
                                                variantContainer.appendChild(variantColorBlock);
                                        
                                                // Set the first variant as the default selected
                                                if (index === 0) {
                                                    currentSelectedVariant = variantColorBlock;
                                                    variantColorBlock.classList.add("shop-card-var-selected");
                                                }
                                            });

                                            let isFirstTimeLoadingVariant = true;
                                            const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                        
                                            // Function to apply the selected variant
                                            function applyVariant(selectedVariant) {
                                                card.querySelector("[data-shop-card-var-title]").textContent = `(${selectedVariant.variant_label})`;
                                                if (selectedVariant.type === 0) {
                                                    card.classList.add("type_2000-0");
                                                    previewHolder.innerHTML = ""; // Clear previous decorations
                                                    previewHolder.classList.add('avatar-decoration-image');
                                                    
                                                    // Add the avatar decoration based on the selected variant
                                                    selectedVariant.items?.forEach(item => {
                                                        const decoImage = document.createElement("img");
                                                        const bgimg = document.createElement("div");
                                                        if (isFirstTimeLoadingVariant == true) {
                                                            decoImage.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;
                                                            isFirstTimeLoadingVariant = false;
                                                        } else {
                                                            decoImage.src = `https://cdn.yapper.shop/custom-collectibles/${item.animated}.png`;
                                                            if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                            }
                                                        }
                                                        decoImage.alt = "Avatar Decoration";
                                                        decoImage.id = "shop-card-deco-image";
                                                        previewHolder.appendChild(decoImage);

                                                        bgimg.id = "shop-card-deco-bg-image";

                                                        previewHolder.appendChild(bgimg);
                                                    
                                                        // Hover effect for decoration image
                                                        if (localStorage.reduced_motion !== "true") {
                                                            card.addEventListener("mouseenter", () => {
                                                                decoImage.src = `https://cdn.yapper.shop/custom-collectibles/${item.animated}.png`;
                                                                if (localStorage.discord_avatar != defaultAvatar1 && localStorage.discord_avatar != defaultAvatar2 && localStorage.discord_avatar != defaultAvatar3 && localStorage.discord_avatar != defaultAvatar4 && localStorage.discord_avatar != defaultAvatar5 && localStorage.discord_avatar != defaultAvatar6) {
                                                                    bgimg.style.backgroundImage = `url(${localStorage.discord_avatar})`
                                                                }
                                                            });
                                                            card.addEventListener("mouseleave", () => {
                                                                decoImage.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;
                                                                bgimg.style.backgroundImage = `url(data:image/png;base64,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)`;
                                                            });
                                                        }
                                                    });
                                                } else if (selectedVariant.type === 1) {
                                                    card.classList.add("type_2000-1");
                                                    (async () => {
                                                        // Ensure the item ID is accessible here
                                                        let itemId = undefined;
                                                        if (Array.isArray(selectedVariant.items)) {
                                                            // If items is an array, find the item with type 1 and get its id
                                                            const item = selectedVariant.items.find(item => item.type === 1);
                                                            if (item) {
                                                                itemId = item.id;
                                                            }
                                                        } else if (selectedVariant.items && selectedVariant.items.type === 1) {
                                                            // If items is an object and has type 1, get its id
                                                            itemId = selectedVariant.items.id;
                                                        }
                                                    
                                                    
                                                        // Fetch profile effects API only if not already cached
                                                        if (!profileEffectsCache) {
                                                            const response = await fetch(api + PROFILES_PLUS_EFFECTS, {
                                                                method: "GET",
                                                                headers: {
                                                                    "Password": api_password,
                                                                    "Token": api_token
                                                                }
                                                            });
                                                            const effectsData = await response.json();
                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                        }
                                                    
                                                        // Find matching profile effect
                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                                    
                                                        if (matchingEffect) {
                                                            const previewHolder = card.querySelector("[data-shop-card-preview-holder]");
                                                            previewHolder.classList.add('profile-effect-image');
                                                        
                                                            if (isFirstTimeLoadingVariant == true) {
                                                                previewHolder.innerHTML = `
                                                                    <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                                `;
                                                                isFirstTimeLoadingVariant = false;
                                                            } else {
                                                                previewHolder.innerHTML = `
                                                                    <img class="thumbnail-preview" src="${matchingEffect.effects[0]?.src}">
                                                                `;
                                                            }
                                                        
                                                            // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                            const imgElement = card.querySelector("img");
                                                        
                                                            if (localStorage.reduced_motion != "true") {
                                                                card.addEventListener("mouseenter", () => {
                                                                    if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                        const effectUrl = matchingEffect.effects[0]?.src;
                                                                        imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                    }
                                                                });
                                                            
                                                                card.addEventListener("mouseleave", () => {
                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                });
                                                            } else {
                                                                card.addEventListener("mouseenter", () => {
                                                                    imgElement.src = matchingEffect.reducedMotionSrc;
                                                                });
                                                            
                                                                card.addEventListener("mouseleave", () => {
                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                });
                                                            }
                                                        }
                                                    })();
                                                }
                                            }
                                        
                                            // Apply the default variant (first one) initially
                                            if (product.variants.length > 0) {
                                                applyVariant(product.variants[0]);
                                            }
                                        } else if (product.type === EXTERNAL_SKU) {
                                            card.classList.add("type_3000");

                                            if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                            } else {
                                                card.querySelector("[data-product-card-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                            }
                                            card.querySelector("[data-product-card-name]").textContent = product.name;
                                            card.querySelector("[data-product-card-summary]").textContent = product.summary;

                                            const previewHolder = card.querySelector("[data-shop-card-preview-holder]");

                                            previewHolder.innerHTML = `
                                                <p>${getTextString("CARD_TYPE_EXTERNAL_SKU_ERROR")}</p>
                                            `;
                                            
                                        } else if (product.type === 'plus_more') {
                                            card.querySelector("[data-product-card-sku-id]").textContent = ``;
                                            card.querySelector("[data-product-card-name]").textContent = `${getTextString("CARD_TYPE_PLUS_MORE_TITLE")}`;
                                            card.querySelector("[data-product-card-summary]").textContent = `${getTextString("CARD_TYPE_PLUS_MORE_DESC")}`;

                                            card.querySelector("[data-shop-price-container]").innerHTML = ``;
                                            card.querySelector("[data-product-card-open-in-shop]").innerHTML = ``;
                                            card.querySelector("[data-share-product-card-button]").innerHTML = ``;

                                            const plusMoreQuestionMark = document.createElement("img");
                                            plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.png`;
                                            plusMoreQuestionMark.classList.add("plus-more-question-mark");
                                            card.querySelector("[data-shop-card-preview-holder]").appendChild(plusMoreQuestionMark);
                                
                                            // Hover effect for decoration image
                                            if (localStorage.reduced_motion != "true") {
                                                card.addEventListener("mouseenter", () => {
                                                    plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.gif`;
                                                });
                                                card.addEventListener("mouseleave", () => {
                                                    plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.png`;
                                                });
                                            }
                                        } else {
                                            card.classList.add('hidden')
                                        }



                                        if (product.emojiCopy === null && product.type != 'plus_more') {
                                            card.querySelector("[data-product-card-open-in-shop]").innerHTML = `
                                                <button class="card-button" onclick="location.href='https://discord.gg/Mcwh7hGcWb';" title="${getTextString("CARD_REQUEST_PPLUS_EMOJI_TITLE")}">${getTextString("CARD_REQUEST_PPLUS_EMOJI")}</button>
                                            `;
                                        } else if (product.type != 'plus_more') {
                                            card.querySelector("[data-product-card-open-in-shop]").innerHTML = `
                                                <button class="card-button" onclick="copyEmoji('${product.emojiCopy}');" title="${getTextString("CARD_COPY_PPLUS_EMOJI_TITLE")}">${getTextString("CARD_COPY_PPLUS_EMOJI")}</button>
                                            `;
                                        }

                                        if (product.premium_type === 2) {
                                            card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                <div class="premiumWheelBadge_c23530 textBadge_df8943 base_df8943 eyebrow_df8943 baseShapeRound_df8943" aria-label="This bonus item is yours to keep and use anytime with an active Nitro subscription." style="background-color: var(--status-danger);"><svg class="premiumWheel_c23530" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M15 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" class=""></path><path fill="currentColor" fill-rule="evenodd" d="M7 4a1 1 0 0 0 0 2h3a1 1 0 1 1 0 2H5.5a1 1 0 0 0 0 2H8a1 1 0 1 1 0 2H6a1 1 0 1 0 0 2h1.25A8 8 0 1 0 15 4H7Zm8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" clip-rule="evenodd" class=""></path><path fill="currentColor" d="M2.5 10a1 1 0 0 0 0-2H2a1 1 0 0 0 0 2h.5Z" class=""></path></svg></div>
                                            `;
                                        }


                                        if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 1: Enable modals" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                            if (product.type === AVATAR_DECORATION || product.type === PROFILE_EFFECT || product.type === NAMEPLATE || product.type === BUNDLE || product.type === VARIANTS_GROUP) {
                                                card.classList.add('clickable');

                                                card.addEventListener("click", (event) => {
                                                    if (event.target.matches("[data-shop-card-var]")) {
                                                    } else {
                                                        openItemModal();
                                                    }
                                                });

                                                async function openItemModal() {
                                                    let modal = document.createElement("div");

                                                    modal.classList.add('modalv2');

                                                    if (apiCategory.pdp_bg != null) {
                                                        pdp = apiCategory.pdp_bg
                                                    } else {
                                                        pdp = apiCategory.banner
                                                    }

                                                    modal.innerHTML = `
                                                        <div class="modalv2-inner">
                                                            <div class="modalv2-inner-left">
                                                                <div data-modal-left-preview-holder></div>
                                                                <p data-product-modal-sku-id></p>
                                                                <p data-product-modal-credits></p>
                                                                <p style="font-size: large; font-weight: 900;" data-product-modal-name></p>
                                                                <p style="color: var(--8)" data-product-modal-summary></p>
                                                                <div class="shop-modal-var-container-container" data-shop-modal-var-container-container>
                                                                    <div class="shop-modal-var-container" data-shop-modal-var-container></div>
                                                                    <a class="shop-modal-var-title" data-shop-modal-var-title></a>
                                                                </div>
                                                                <div class="modal-shop-price-container" data-shop-price-container>
                                                                    <div data-price-standard-container>
                                                                        <a style="font-size: large; font-weight: 900;" data-price-standard></a>
                                                                    </div>
                                                                    <div data-price-nitro-container>
                                                                        <a data-price-nitro></a>
                                                                    </div>
                                                                </div>
                                                                <div class="modal-left-bottom">
                                                                    <div class="modal-buttons" data-modal-buttons></div>
                                                                </div>
                                                            </div>
                                                            <img class="modalv2-inner-logo" src="https://cdn.yapper.shop/assets/${apiCategory.logo}.png"></img>
                                                            <div class="shop-modal-tag-container" data-shop-card-tag-container></div>

                                                            <div data-modal-top-product-buttons>
                                                                <div title="Close" data-close-product-card-button>
                                                                    <svg class="closeIcon_modal" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M17.3 18.7a1 1 0 0 0 1.4-1.4L13.42 12l5.3-5.3a1 1 0 0 0-1.42-1.4L12 10.58l-5.3-5.3a1 1 0 0 0-1.4 1.42L10.58 12l-5.3 5.3a1 1 0 1 0 1.42 1.4L12 13.42l5.3 5.3Z" class=""></path></svg>
                                                                </div>
                                                                <div title="Download Data" data-download-product-card-button></div>
                                                            </div>

                                                            <div id="modalv2-inner-right" class="modalv2-inner-right">
                                                                <img class="modalv2-inner-img" src="https://cdn.yapper.shop/assets/${pdp}.png"></img>
                                                                <div data-modal-preview-holder></div>
                                                            </div>
                                                        </div>
                                                    `;

                                                    document.body.appendChild(modal);

                                                    setTimeout(() => {
                                                        modal.classList.add('show');
                                                    }, 1);

                                                    if (product.type === AVATAR_DECORATION) {

                                                        modal.classList.add('modal-0');

                                                        product.items.forEach(item => {

                                                            const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                            const previewHolderLeft = modal.querySelector("[data-modal-left-preview-holder]");

                                                            modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                            modal.querySelector("[data-product-modal-credits]").textContent = `Made By: ${product.credits}`;
                                                            modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                            modal.querySelector("[data-product-modal-summary]").textContent = product.summary;

                                                            if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {

                                                                previewHolder.classList.add('modal-preview-profile-container');
                                                                previewHolder.innerHTML = `
                                                                    <div class="modal-preview-profile1">
                                                                        <div class="options-preview-profile-banner-color"></div>
                                                                        <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                        <div class="profile-avatar-preview-bg"></div>
                                                                        <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                        <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                        <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                        <img id="profileAvatarDecoPreview" class="profile-avatar-deco-preview" src="https://cdn.yapper.shop/custom-collectibles/${item.animated}.png">
                                                                        <div class="options-preview-profile-status-bg"></div>
                                                                        <div class="options-preview-profile-status-color"></div>
                                                                    </div>
                                                                `;

                                                                document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();

                                                                previewHolderLeft.classList.add('modal-left-avatar-decoration-img');

                                                                const imgElement = document.createElement("img");
                                                                imgElement.id = "shop-card-deco-image";
                                                                imgElement.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;

                                                                previewHolderLeft.appendChild(imgElement);

                                                                if (localStorage.reduced_motion != "true") {
                                                                    imgElement.addEventListener("mouseenter", () => {
                                                                        imgElement.src = `https://cdn.yapper.shop/custom-collectibles/${item.animated}.png`;
                                                                    });
                                                                
                                                                    imgElement.addEventListener("mouseleave", () => {
                                                                        imgElement.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;
                                                                    });
                                                                }

                                                            } else {
                                                                
                                                                previewHolder.classList.add('modal-avatar-decoration-img');

                                                                const imgElement = document.createElement("img");
                                                                imgElement.id = "shop-card-deco-image";
                                                                imgElement.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;

                                                                previewHolder.appendChild(imgElement);

                                                                // Hover effect: Change the image src on mouse enter and leave
                                                                if (localStorage.reduced_motion != "true") {
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                        imgElement.src = `https://cdn.yapper.shop/custom-collectibles/${item.animated}.png`;
                                                                    });
                                                                
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                        imgElement.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;
                                                                    });
                                                                }
                                                            }

                                                        });
                                                    } else if (product.type === PROFILE_EFFECT) {
                                                        modal.classList.add('modal-1');
        
                                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                        modal.querySelector("[data-product-modal-credits]").textContent = `Made By: ${product.credits}`;
                                                        modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                        modal.querySelector("[data-product-modal-summary]").textContent = product.summary;

                                                        // Ensure the item ID is accessible here
                                                        let itemId = undefined;
                                                        if (Array.isArray(product.items)) {
                                                            // If items is an array, find the item with type 1 and get its id
                                                            const item = product.items.find(item => item.type === 1);
                                                            if (item) {
                                                                itemId = item.id;
                                                            }
                                                        } else if (product.items && product.items.type === 1) {
                                                            // If items is an object and has type 1, get its id
                                                            itemId = product.items.id;
                                                        }
                                                    
                                                    
                                                        // Fetch profile effects API only if not already cached
                                                        if (!profileEffectsCache) {
                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                method: "GET",
                                                                headers: {
                                                                    "Password": api_password,
                                                                    "Token": api_token
                                                                }
                                                            });
                                                            const effectsData = await response.json();
                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                        }
                                                    
                                                        // Find matching profile effect
                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);

                                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                        const previewHolderLeft = modal.querySelector("[data-modal-left-preview-holder]");
                                                    
                                                        if (matchingEffect) {
                                                            if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                                                previewHolder.classList.add('modal-preview-profile-container');
                                                                previewHolder.innerHTML = `
                                                                    <div class="modal-preview-profile2">
                                                                        <div class="options-preview-profile-banner-color"></div>
                                                                        <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                        <div class="profile-avatar-preview-bg"></div>
                                                                        <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                        <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                        <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                        <div class="options-preview-profile-status-bg"></div>
                                                                        <div class="options-preview-profile-status-color"></div>
                                                                        <img id="profileProfileEffectPreview" class="profile-profile-effect-preview" src="${matchingEffect.effects[0]?.src}">
                                                                    </div>
                                                                `;

                                                                document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();

                                                                previewHolderLeft.classList.add('modal-left-profile-effect-img');
                                                            
                                                                const imgElement = document.createElement("img");
                                                                imgElement.src = matchingEffect.thumbnailPreviewSrc;

                                                                previewHolderLeft.appendChild(imgElement);
                                                            
                                                                if (localStorage.reduced_motion != "true") {
                                                                    imgElement.addEventListener("mouseenter", () => {
                                                                        if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                            const effectUrl = matchingEffect.effects[0]?.src;
                                                                            imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                        }
                                                                    });
                                                                
                                                                    imgElement.addEventListener("mouseleave", () => {
                                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                } else {
                                                                    imgElement.addEventListener("mouseenter", () => {
                                                                        imgElement.src = matchingEffect.reducedMotionSrc;
                                                                    });
                                                                
                                                                    imgElement.addEventListener("mouseleave", () => {
                                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                }
                                                            } else {
                                                                const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                                previewHolder.classList.add('modal-profile-effect-img');
                                                            
                                                                previewHolder.innerHTML = `
                                                                    <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                                `;
                                                            
                                                                // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                                const imgElement = previewHolder.querySelector("img");
                                                            
                                                                if (localStorage.reduced_motion != "true") {
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                        if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                            const effectUrl = matchingEffect.effects[0]?.src;
                                                                            imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                        }
                                                                    });
                                                                
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                } else {
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                        imgElement.src = matchingEffect.reducedMotionSrc;
                                                                    });
                                                                
                                                                    document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                        // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                        imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                    });
                                                                }
                                                            }
                                                        }
                                                    } else if (product.type === NAMEPLATE) {
                                                        card.classList.add("modal-2");
            
                                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                        modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                        modal.querySelector("[data-product-modal-summary]").textContent = product.summary;
            
                                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                        previewHolder.classList.add('nameplate-modal-preview');
            
                                                        if (localStorage.discord_username && localStorage.discord_username != '') {
                                                            previewName = localStorage.discord_username;
                                                        } else {
                                                            previewName = 'Discord User'
                                                        }

                                                        if (localStorage.experiment_2025_03_early_nameplate_warning === "Treatment 1: Enabled") {
                                                            let nameplateWarning = document.createElement("div");

                                                            nameplateWarning.classList.add('nameplate-modal-early-warning-container');
                                                            nameplateWarning.innerHTML = `
                                                                <p>${getTextString("SHOP_NAMEPLATE_WARNING_NOTICE_1")}</p>
                                                                <a style="color: lightblue;" href="https://support.yapper.shop/?page=nameplates">${getTextString("SHOP_NAMEPLATE_WARNING_NOTICE_2")}</a>
                                                            `;


                                                            modal.querySelector(".modalv2-inner-left").appendChild(nameplateWarning);
                                                        }
            
                                                        previewHolder.innerHTML = `
                                                            <div class="nameplate-null-user">
                                                                <div class="nameplate-null-user-avatar"></div>
                                                                <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                            </div>
                                                            <div class="nameplate-null-user">
                                                                <div class="nameplate-null-user-avatar"></div>
                                                                <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                            </div>
                                                            <div class="nameplate-null-user" data-user-nameplate-preview>
                                                                <img class="nameplate-null-user" style="position: absolute;" data-user-nameplate-preview-img></img>
                                                                <div class="nameplate-user-avatar" data-nameplate-user-random-avatar></div>
                                                                <p class="nameplate-user-name">${previewName}</p>
                                                            </div>
                                                            <div class="nameplate-null-user">
                                                                <div class="nameplate-null-user-avatar"></div>
                                                                <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                            </div>
                                                            <div class="nameplate-null-user">
                                                                <div class="nameplate-null-user-avatar"></div>
                                                                <div class="nameplate-null-user-name" data-null-user-random-name></div>
                                                            </div>
                                                        `;
            
                                                        product.items.forEach(item => {
                                                            const nameplatePreview = previewHolder.querySelector("[data-user-nameplate-preview]");
                                                            const paletteName = item.palette;
                                                            const asset = `https://cdn.discordapp.com/assets/collectibles/${item.asset}img.png`;
                                                            const bgcolor = nameplate_palettes[paletteName].darkBackground;
            
                                                            previewHolder.querySelector("[data-user-nameplate-preview-img]").src = asset;
            
                                                            nameplatePreview.style.backgroundImage = `linear-gradient(10deg, #00000000 40%, ${bgcolor} 180%), linear-gradient(170deg, #00000000 40%, ${bgcolor} 180%)`;
                                                            // nameplatePreview.style.boxShadow = `0 0 0 1px #a10606`;
                                                            
                                                            const nullUserNameRandomWidth = previewHolder.querySelectorAll("[data-null-user-random-name]");
                                                            
                                                            nullUserNameRandomWidth.forEach(UserName => {
                                                                const randomWidth = Math.floor(Math.random() * (180 - 80 + 1)) + 80;
                                                                UserName.style.width = randomWidth + `px`;
                                                            });
                                                        
                                                            const nullUserAvatar = previewHolder.querySelectorAll("[data-nameplate-user-random-avatar]");
                                                        
                                                            nullUserAvatar.forEach(UserAvatar => {
                                                                UserAvatar.style.backgroundImage = `url(${localStorage.discord_avatar})`;
                                                            });
                                                        });
                                                        
                                                    } else if (product.type === BUNDLE) {
                                                        modal.classList.add('modal-1000');

                                                        const bundledProducts = product.bundled_products || [];

                                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                    
                                                        // Generate the bundle summary from the names of the bundled products
                                                        const type0Product = bundledProducts.find(item => item.type === 0);
                                                        const type1Product = bundledProducts.find(item => item.type === 1);
                                                    
                                                        let bundleSummary = "Bundle Includes: ";
                                                        if (type0Product) {
                                                            bundleSummary += `${type0Product.name} Decoration`;
                                                        }
                                                        if (type1Product) {
                                                            bundleSummary += ` & ${type1Product.name} Profile Effect`;
                                                        }
                                                    
                                                        // Set the summary text
                                                        modal.querySelector("[data-product-modal-summary]").textContent = bundleSummary;
                                                    
                                                        // Set the basic card details
                                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                        modal.querySelector("[data-product-modal-credits]").textContent = `Made By: ${product.credits}`;
                                                        modal.querySelector("[data-product-modal-name]").textContent = product.name;
                                                    
                                                        // Handle each item in the bundle
                                                        product.items.forEach(item => {
                                                            if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                                                
                                                                if (item.type === 0) {
                                                                    decosrc = item.animated
                                                                } else if (item.type === 1) {
                                                                    // Profile effect
                                                                    (async () => {
                                                                        // Fetch profile effects if not cached
                                                                        if (!profileEffectsCache) {
                                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                                method: "GET",
                                                                                headers: {
                                                                                    "Password": api_password,
                                                                                    "Token": api_token
                                                                                }
                                                                            });
                                                                            const effectsData = await response.json();
                                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                                        }
                                                    
                                                                        // Find the matching effect
                                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === item.id);
                                                    
                                                                        if (matchingEffect) {
                                                                            if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                const effectUrl = matchingEffect.effects[0]?.src;
                                                                                renderProfile(effectUrl)
                                                                            }
                                                                        }
                                                                    })();
                                                                }

                                                                function renderProfile(effectUrl) {
                                                                    previewHolder.classList.add('modal-preview-profile-container');
                                                                    previewHolder.innerHTML = `
                                                                        <div class="modal-preview-profile2">
                                                                            <div class="options-preview-profile-banner-color"></div>
                                                                            <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                            <div class="profile-avatar-preview-bg"></div>
                                                                            <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                            <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                            <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                            <img id="profileAvatarDecoPreview" class="profile-avatar-deco-preview" src="https://cdn.yapper.shop/custom-collectibles/${decosrc}.png">
                                                                            <div class="options-preview-profile-status-bg"></div>
                                                                            <div class="options-preview-profile-status-color"></div>
                                                                            <img id="profileProfileEffectPreview" class="profile-profile-effect-preview" src="${effectUrl}">
                                                                        </div>
                                                                    `;
                                                                    document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();
                                                                }

                                                                
                                                            } else {
                                                                if (item.type === 0) {
                                                                    const decoImage = document.createElement("img");
                                                                    decoImage.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;
                                                                    decoImage.alt = "Avatar Decoration";
                                                                    decoImage.classList.add("modal-avatar-decoration-img");
                                                                    modal.querySelector("[data-modal-preview-holder]").appendChild(decoImage);
                                                    
                                                                    // Hover effect for decoration image
                                                                    if (localStorage.reduced_motion != "true") {
                                                                        document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                            decoImage.src = `https://cdn.yapper.shop/custom-collectibles/${item.animated}.png`;
                                                                        });

                                                                        document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                            decoImage.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;
                                                                        });
                                                                    }
                                                                } else if (item.type === 1) {
                                                                    // Profile effect
                                                                    (async () => {
                                                                        // Fetch profile effects if not cached
                                                                        if (!profileEffectsCache) {
                                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                                method: "GET",
                                                                                headers: {
                                                                                    "Password": api_password,
                                                                                    "Token": api_token
                                                                                }
                                                                            });
                                                                            const effectsData = await response.json();
                                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                                        }
                                                    
                                                                        // Find the matching effect
                                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === item.id);
                                                    
                                                                        if (matchingEffect) {
                                                                            const effectImage = document.createElement("img");
                                                                            effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                            effectImage.alt = "Profile Effect";
                                                                            effectImage.classList.add("modal-profile-effect-img");
                                                                            modal.querySelector("[data-modal-preview-holder]").appendChild(effectImage);
                                                    
                                                                            // Hover effect for profile effect
                                                                            if (localStorage.reduced_motion != "true") {
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                    if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                        const effectUrl = matchingEffect.effects[0]?.src;
                                                                                        effectImage.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                                    }
                                                                                });
                                                                            
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                    effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                                });
                                                                            } else {
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                    effectImage.src = matchingEffect.reducedMotionSrc;
                                                                                });
                                                                            
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                    effectImage.src = matchingEffect.thumbnailPreviewSrc;
                                                                                });
                                                                            }
                                                                        }
                                                                    })();
                                                                }
                                                            }
                                                        });
                                                    } else if (product.type === VARIANTS_GROUP) {
                                                        modal.querySelector("[data-shop-modal-var-container-container]").classList.add('show');
                                                        // Update SKU and summary
                                                        modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${product.sku_id}`;
                                                        modal.querySelector("[data-product-modal-credits]").textContent = `Made By: ${product.credits}`;
                                                        modal.querySelector("[data-product-modal-summary]").textContent = product.summary;
                                                    
                                                        // Always display the base variant name
                                                        modal.querySelector("[data-product-modal-name]").textContent = product.variants[0]?.base_variant_name || "Product";
                                                    
                                                        // Render variant color blocks as interactive divs
                                                        const variantContainer = modal.querySelector("[data-shop-modal-var-container]");
                                                        variantContainer.innerHTML = ""; // Clear existing variant blocks
                                                        let currentSelectedVariant = null; // Track selected variant
                                                    
                                                        product.variants.forEach((variant, index) => {
                                                            // Create variant color block
                                                            const variantColorBlock = document.createElement("div");
                                                            variantColorBlock.classList.add("shop-card-var");
                                                            variantColorBlock.style.backgroundColor = `${variant.variant_value}`;
                                                    
                                                            // Add click event listener to switch variants
                                                            variantColorBlock.addEventListener("click", () => {
                                                                if (currentSelectedVariant) {
                                                                    currentSelectedVariant.classList.remove("shop-card-var-selected");
                                                                }
                                                                variantColorBlock.classList.add("shop-card-var-selected");
                                                                currentSelectedVariant = variantColorBlock;
                                                                applyVariant(variant);
                                                            });
                                                    
                                                            // Append the color block to the container
                                                            variantContainer.appendChild(variantColorBlock);
                                                    
                                                            // Set the first variant as the default selected
                                                            if (index === 0) {
                                                                currentSelectedVariant = variantColorBlock;
                                                                variantColorBlock.classList.add("shop-card-var-selected");
                                                            }
                                                        });
            
                                                        let isFirstTimeLoadingVariant = true;
                                                        const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                        const previewHolderLeft = modal.querySelector("[data-modal-left-preview-holder]");
                                                    
                                                        // Function to apply the selected variant
                                                        function applyVariant(selectedVariant) {
                                                            modal.querySelector("[data-shop-modal-var-title]").textContent = `(${selectedVariant.variant_label})`;
                                                            modal.querySelector("[data-product-modal-sku-id]").textContent = `SKU ID: ${selectedVariant.sku_id}`;
                                                            modal.querySelector("[data-product-modal-credits]").textContent = `Made By: ${selectedVariant.credits}`;
                                                            if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                                modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                                    <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${selectedVariant.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                                `;
                                                            }
                                                            if (localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                                                                
                                                                if (selectedVariant.type === 0) {
                                                                    selectedVariant.items?.forEach(item => {
                                                                        previewHolder.classList.add('modal-preview-profile-container');
                                                                        previewHolder.innerHTML = `
                                                                            <div class="modal-preview-profile1">
                                                                                <div class="options-preview-profile-banner-color"></div>
                                                                                <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                                <div class="profile-avatar-preview-bg"></div>
                                                                                <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                                <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                                <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                                <img id="profileAvatarDecoPreview" class="profile-avatar-deco-preview" src="https://cdn.yapper.shop/custom-collectibles/${item.animated}.png">
                                                                                <div class="options-preview-profile-status-bg"></div>
                                                                                <div class="options-preview-profile-status-color"></div>
                                                                            </div>
                                                                        `;
                                                                        document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();

                                                                        previewHolderLeft.classList.add('modal-left-avatar-decoration-img');

                                                                        previewHolderLeft.innerHTML = `
                                                                            <img id="shop-card-deco-image" src="https://cdn.yapper.shop/custom-collectibles/${item.static}.png" data-left-preview-deco-var>
                                                                        `;

                                                                        const imgElement = previewHolderLeft.querySelector("[data-left-preview-deco-var]");
                                                                        
                                                                        if (localStorage.reduced_motion != "true") {
                                                                            imgElement.addEventListener("mouseenter", () => {
                                                                                imgElement.src = `https://cdn.yapper.shop/custom-collectibles/${item.animated}.png`;
                                                                            });
                                                                        
                                                                            imgElement.addEventListener("mouseleave", () => {
                                                                                imgElement.src = `https://cdn.yapper.shop/custom-collectibles/${item.static}.png`;
                                                                            });
                                                                        }
                                                                    });
                                                                } else if (selectedVariant.type === 1) {

                                                                    modal.classList.add("modal-2000-1");
                                                                    (async () => {
                                                                        // Ensure the item ID is accessible here
                                                                        let itemId = undefined;
                                                                        if (Array.isArray(selectedVariant.items)) {
                                                                            // If items is an array, find the item with type 1 and get its id
                                                                            const item = selectedVariant.items.find(item => item.type === 1);
                                                                            if (item) {
                                                                                itemId = item.id;
                                                                            }
                                                                        } else if (selectedVariant.items && selectedVariant.items.type === 1) {
                                                                            // If items is an object and has type 1, get its id
                                                                            itemId = selectedVariant.items.id;
                                                                        }
                                                                    
                                                                    
                                                                        // Fetch profile effects API only if not already cached
                                                                        if (!profileEffectsCache) {
                                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                                method: "GET",
                                                                                headers: {
                                                                                    "Password": api_password,
                                                                                    "Token": api_token
                                                                                }
                                                                            });
                                                                            const effectsData = await response.json();
                                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                                        }
                                                                    
                                                                        // Find matching profile effect
                                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                                                    
                                                                        if (matchingEffect) {
                                                                            if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                const effectUrl = matchingEffect.effects[0]?.src;
                                                                                previewHolder.classList.add('modal-preview-profile-container');
                                                                                previewHolder.innerHTML = `
                                                                                    <div class="modal-preview-profile2">
                                                                                        <div class="options-preview-profile-banner-color"></div>
                                                                                        <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                                                                                        <div class="profile-avatar-preview-bg"></div>
                                                                                        <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                                                                                        <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                                                                                        <p class="options-preview-profile-username" id="modal-username-preview"></p>
                                                                                        <div class="options-preview-profile-status-bg"></div>
                                                                                        <div class="options-preview-profile-status-color"></div>
                                                                                        <img id="profileProfileEffectPreview" class="profile-profile-effect-preview" src="${effectUrl}">
                                                                                    </div>
                                                                                `;
                                                                                document.getElementById("modal-username-preview").textContent = localStorage.discord_username.toLowerCase();
                                                                            }
                                                                        }

                                                                        previewHolderLeft.classList.add('modal-left-profile-effect-img');

                                                                        previewHolderLeft.innerHTML = `
                                                                            <img src="${matchingEffect.thumbnailPreviewSrc}" data-left-preview-effect-var>
                                                                        `;

                                                                        const imgElement = previewHolderLeft.querySelector("[data-left-preview-effect-var]");
                                                                        
                                                                        if (localStorage.reduced_motion != "true") {
                                                                            imgElement.addEventListener("mouseenter", () => {
                                                                                if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                    const effectUrl = matchingEffect.effects[0]?.src;
                                                                                    imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                                }
                                                                            });
                                                                        
                                                                            imgElement.addEventListener("mouseleave", () => {
                                                                                // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                            });
                                                                        } else {
                                                                            imgElement.addEventListener("mouseenter", () => {
                                                                                imgElement.src = matchingEffect.reducedMotionSrc;
                                                                            });
                                                                        
                                                                            imgElement.addEventListener("mouseleave", () => {
                                                                                // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                            });
                                                                        }
                                                                    })();
                                                                }

                                                                
                                                            } else {
                                                                if (selectedVariant.type === 0) {
                                                                    modal.classList.add("modal-2000-0");
                                                                    previewHolder.innerHTML = ""; // Clear previous decorations
                                                                    previewHolder.classList.add('modal-avatar-decoration-img');
                                                                    
                                                                    // Add the avatar decoration based on the selected variant
                                                                    selectedVariant.items?.forEach(item => {
                                                                        const decoImage = document.createElement("img");
                                                                        decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                        decoImage.alt = "Avatar Decoration";
                                                                        decoImage.id = "shop-card-deco-image";
                                                                        previewHolder.appendChild(decoImage);
                                                                    
                                                                        // Hover effect for decoration image
                                                                        if (localStorage.reduced_motion !== "true") {
                                                                            document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=true`;
                                                                            });
                                                                            document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                decoImage.src = `https://cdn.discordapp.com/avatar-decoration-presets/${item.asset}.png?size=4096&passthrough=false`;
                                                                            });
                                                                        }
                                                                    });
                                                                } else if (selectedVariant.type === 1) {
                                                                    modal.classList.add("modal-2000-1");
                                                                    (async () => {
                                                                        // Ensure the item ID is accessible here
                                                                        let itemId = undefined;
                                                                        if (Array.isArray(selectedVariant.items)) {
                                                                            // If items is an array, find the item with type 1 and get its id
                                                                            const item = selectedVariant.items.find(item => item.type === 1);
                                                                            if (item) {
                                                                                itemId = item.id;
                                                                            }
                                                                        } else if (selectedVariant.items && selectedVariant.items.type === 1) {
                                                                            // If items is an object and has type 1, get its id
                                                                            itemId = selectedVariant.items.id;
                                                                        }
                                                                    
                                                                    
                                                                        // Fetch profile effects API only if not already cached
                                                                        if (!profileEffectsCache) {
                                                                            const response = await fetch(api + PROFILE_EFFECTS, {
                                                                                method: "GET",
                                                                                headers: {
                                                                                    "Password": api_password,
                                                                                    "Token": api_token
                                                                                }
                                                                            });
                                                                            const effectsData = await response.json();
                                                                            profileEffectsCache = effectsData.profile_effect_configs;
                                                                        }
                                                                    
                                                                        // Find matching profile effect
                                                                        const matchingEffect = profileEffectsCache.find(effect => effect.id === itemId);
                                                                    
                                                                        if (matchingEffect) {
                                                                            const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                                            previewHolder.classList.add('modal-profile-effect-img');
                                                                        
                                                                            previewHolder.innerHTML = `
                                                                                <img class="thumbnail-preview" src="${matchingEffect.thumbnailPreviewSrc}">
                                                                            `;
                                                                        
                                                                            // Hover effect: change to the first effect URL (use 'src' from the 'effects' array)
                                                                            const imgElement = previewHolder.querySelector("img");
                                                                        
                                                                            if (localStorage.reduced_motion != "true") {
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                    if (matchingEffect.effects && matchingEffect.effects.length > 0) {
                                                                                        const effectUrl = matchingEffect.effects[0]?.src;
                                                                                        imgElement.src = effectUrl || matchingEffect.thumbnailPreviewSrc;
                                                                                    }
                                                                                });
                                                                            
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                                });
                                                                            } else {
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                                                    imgElement.src = matchingEffect.reducedMotionSrc;
                                                                                });
                                                                            
                                                                                document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                                                    // Revert back to the original thumbnailPreviewSrc when hover ends
                                                                                    imgElement.src = matchingEffect.thumbnailPreviewSrc;
                                                                                });
                                                                            }
                                                                        }
                                                                    })();
                                                                }
                                                            }
                                                        }
                                                    
                                                        // Apply the default variant (first one) initially
                                                        if (product.variants.length > 0) {
                                                            applyVariant(product.variants[0]);
                                                        }
                                                    }


                                                    const button_container = document.querySelector("[data-modal-buttons]");
                                                    
                                                    if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 2: Enable modals w/ data downloads") {
                                                        modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                            <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${product.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                        `;
                                                    } else if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 3: Enable modals w/ p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 4: Enable modals w/ p+ on p+ page") {
                                                        if (typeof product.emojiCopy != 'undefined') {
                                                            button_container.innerHTML = `
                                                                <button class="card-button ${product.emojiCopy ? '' : 'card-button-no-emoji'}" onclick="${product.emojiCopy ? `copyEmoji('${product.emojiCopy}')` : `redirectToGoogle()`}" title="${product.emojiCopy ? `${getTextString("CARD_COPY_PPLUS_EMOJI_TITLE")}` : `${getTextString("CARD_REQUEST_PPLUS_EMOJI_TITLE")}`}">${product.emojiCopy ? `${getTextString("CARD_COPY_PPLUS_EMOJI")}` : `${getTextString("CARD_REQUEST_PPLUS_EMOJI")}`}</button>
                                                            `;
                                                        } else {
                                                            button_container.innerHTML = `
                                                                <button class="card-button card-button-no-emoji" title="${getTextString("CARD_PPLUS_ERROR_TITLE")}">${getTextString("CARD_PPLUS_ERROR")}</button>
                                                            `;
                                                        }
                                                    } else if (localStorage.experiment_2025_02_shop_card_modals === "Treatment 5: Enable modals w/ data downloads and p+" || localStorage.experiment_2025_02_shop_card_modals === "Treatment 6: Enable modals w/ data downloads and p+ on p+ page") {
                                                        if (typeof product.emojiCopy != 'undefined') {
                                                            button_container.innerHTML = `
                                                                <button class="card-button ${product.emojiCopy ? '' : 'card-button-no-emoji'}" onclick="${product.emojiCopy ? `copyEmoji('${product.emojiCopy}')` : `redirectToGoogle()`}" title="${product.emojiCopy ? `${getTextString("CARD_COPY_PPLUS_EMOJI_TITLE")}` : `${getTextString("CARD_REQUEST_PPLUS_EMOJI_TITLE")}`}">${product.emojiCopy ? `${getTextString("CARD_COPY_PPLUS_EMOJI")}` : `${getTextString("CARD_REQUEST_PPLUS_EMOJI")}`}</button>
                                                            `;
                                                            modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                                <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${product.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                            `;
                                                        } else {
                                                            button_container.innerHTML = `
                                                                <button class="card-button card-button-no-emoji" title="${getTextString("CARD_PPLUS_ERROR_TITLE")}">${getTextString("CARD_PPLUS_ERROR")}</button>
                                                            `;
                                                            modal.querySelector("[data-download-product-card-button]").innerHTML = `
                                                                <svg class="downloadIcon_modal" onclick="window.open('https://item.yapper.shop/sku/${product.sku_id}/data.zip');" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0547 0.999993L11.0547 11.59L7.7547 8.28999C7.66429 8.186 7.55337 8.10181 7.4289 8.04271C7.30442 7.98361 7.16907 7.95088 7.03134 7.94656C6.89362 7.94224 6.75648 7.96643 6.62855 8.01761C6.50061 8.0688 6.38464 8.14587 6.28789 8.24399C6.19115 8.34212 6.11573 8.45917 6.06637 8.58782C6.01701 8.71647 5.99476 8.85393 6.00104 8.99159C6.00731 9.12924 6.04196 9.26411 6.10282 9.38773C6.16368 9.51136 6.24943 9.62107 6.3547 9.70999L11.3547 14.71C11.5416 14.8932 11.7929 14.9959 12.0547 14.9959C12.3164 14.9959 12.5678 14.8932 12.7547 14.71L17.7547 9.70999C17.92 9.51987 18.0074 9.27437 17.9995 9.02257C17.9916 8.77078 17.889 8.53124 17.7121 8.35185C17.5352 8.17245 17.2972 8.06642 17.0455 8.05496C16.7939 8.04349 16.5471 8.12743 16.3547 8.28999L13.0547 11.6L13.0547 0.999993C13.0547 0.734776 12.9493 0.480422 12.7618 0.292885C12.5743 0.105349 12.3199 -7.13283e-06 12.0547 -7.10964e-06C11.7895 -7.08645e-06 11.5351 0.105349 11.3476 0.292885C11.1601 0.480422 11.0547 0.734776 11.0547 0.999993Z" fill="currentColor"/><path d="M4 15C4 14.7348 4.10536 14.4804 4.29289 14.2929C4.48043 14.1054 4.73478 14 5 14H7C7.26522 14 7.51957 13.8946 7.70711 13.7071C7.89464 13.5196 8 13.2652 8 13C8 12.7348 7.89464 12.4804 7.70711 12.2929C7.51957 12.1054 7.26522 12 7 12H5C4.20435 12 3.44129 12.3161 2.87868 12.8787C2.31607 13.4413 2 14.2044 2 15V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V15C22 14.2044 21.6839 13.4413 21.1213 12.8787C20.5587 12.3161 19.7956 12 19 12H17C16.7348 12 16.4804 12.1054 16.2929 12.2929C16.1054 12.4804 16 12.7348 16 13C16 13.2652 16.1054 13.5196 16.2929 13.7071C16.4804 13.8946 16.7348 14 17 14H19C19.2652 14 19.5196 14.1054 19.7071 14.2929C19.8946 14.4804 20 14.7348 20 15V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V15Z" fill="currentColor"/></svg>
                                                            `;
                                                        }
                                                    } else {
                                                        button_container.innerHTML = ``;
                                                    }


                                                    const unpublishedAt = new Date(product.unpublished_at);
                            
                                                    if (product.unpublished_at && !isNaN(unpublishedAt.getTime())) {
                            
                                                        function updateTimer() {
                                                            const now = new Date();
                                                            const timeDiff = unpublishedAt - now;
                            
                                                            if (timeDiff <= 0) {
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${getTextString("CARD_UNPUBLISHED_TAG")}</p>
                                                                    </div>
                                                                `;
                                                                clearInterval(timerInterval);
                                                            } else {
                                                                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                            
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${days}${getTextString("CARD_LEFT_TO_REQUEST_COUNTDOWN_TAG")}</p>
                                                                    </div>
                                                                `;
                                                            }
                                                        }
                            
                                                        const timerInterval = setInterval(updateTimer, 1000);
                                                        updateTimer();
                                                    }


                                                    const expiresAt = new Date(product.expires_at);

                                                    if (product.expires_at && !isNaN(expiresAt.getTime())) {
                            
                                                        function updateTimer() {
                                                            const now = new Date();
                                                            const timeDiff = expiresAt - now;
                            
                                                            if (timeDiff <= 0) {
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_TAG")}</p>
                                                                    </div>
                                                                `;
                                                                clearInterval(timerInterval);
                                                            } else {
                                                                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                            
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_COUNTDOWN_TAG")}${days}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_DAYS")}${hours}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_HOURS")}</p>
                                                                    </div>
                                                                `;
                                                            }
                                                        }
                            
                                                        const timerInterval = setInterval(updateTimer, 1000);
                                                        updateTimer();
                                                    }

                                                    const ReleasesAt = new Date(product.releases_at);
                            
                                                    if (product.releases_at && !isNaN(ReleasesAt.getTime())) {
                            
                                                        function updateTimer() {
                                                            const now = new Date();
                                                            const timeDiff = ReleasesAt - now;
                            
                                                            if (timeDiff <= 0) {
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${getTextString("CARD_PUBLISHING_TAG")}</p>
                                                                    </div>
                                                                `;
                                                                clearInterval(timerInterval);
                                                            } else {
                                                                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                            
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${days}${getTextString("CARD_PUBLISHING_COUNTDOWN_TAG_DAYS")}${hours}${getTextString("CARD_PUBLISHING_COUNTDOWN_TAG_HOURS")}</p>
                                                                    </div>
                                                                `;
                                                            }
                                                        }
                            
                                                        const timerInterval = setInterval(updateTimer, 1000);
                                                        updateTimer();
                                                    }

                                                    if (product.premium_type === 2) {
                                                        modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="premiumWheelBadge_c23530 textBadge_df8943 base_df8943 eyebrow_df8943 baseShapeRound_df8943" aria-label="This bonus item is yours to keep and use anytime with an active Nitro subscription." style="background-color: var(--status-danger);"><svg class="premiumWheel_c23530" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M15 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" class=""></path><path fill="currentColor" fill-rule="evenodd" d="M7 4a1 1 0 0 0 0 2h3a1 1 0 1 1 0 2H5.5a1 1 0 0 0 0 2H8a1 1 0 1 1 0 2H6a1 1 0 1 0 0 2h1.25A8 8 0 1 0 15 4H7Zm8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" clip-rule="evenodd" class=""></path><path fill="currentColor" d="M2.5 10a1 1 0 0 0 0-2H2a1 1 0 0 0 0 2h.5Z" class=""></path></svg></div>
                                                        `;
                                                    }
                                                    


                                                    let modal_back = document.createElement("div");

                                                    modal_back.classList.add('modalv2-back');
                                                    modal_back.id = 'modalv2-back';

                                                    document.body.appendChild(modal_back);

                                                    setTimeout(() => {
                                                        modal_back.classList.add('show');
                                                    }, 1);


                                                    modal.addEventListener('click', (event) => {
                                                        if (event.target === modal) {
                                                            modal.classList.remove('show');
                                                            modal_back.classList.remove('show');
                                                            setTimeout(() => {
                                                                modal.remove();
                                                                modal_back.remove();
                                                            }, 300);
                                                        }
                                                    });

                                                    document.querySelector("[data-close-product-card-button]").addEventListener('click', () => {
                                                        modal.classList.remove('show');
                                                        modal_back.classList.remove('show');
                                                        setTimeout(() => {
                                                            modal.remove();
                                                            modal_back.remove();
                                                        }, 300);
                                                    });
                                                }
                                            } else if (product.type === "plus_more") {
                                                card.classList.add('clickable');

                                                card.addEventListener("click", (event) => {
                                                    if (event.target.matches("[data-shop-card-var]")) {
                                                    } else {
                                                        openItemModal();
                                                    }
                                                });

                                                async function openItemModal() {
                                                    let modal = document.createElement("div");

                                                    modal.classList.add('modalv2');

                                                    if (apiCategory.pdp_bg != null) {
                                                        pdp = apiCategory.pdp_bg
                                                    } else {
                                                        pdp = apiCategory.banner
                                                    }

                                                    modal.innerHTML = `
                                                        <div class="modalv2-inner">
                                                            <div class="modalv2-inner-left">
                                                                <div data-modal-left-preview-holder></div>
                                                                <p data-product-modal-sku-id></p>
                                                                <p data-product-modal-credits></p>
                                                                <p style="font-size: large; font-weight: 900;" data-product-modal-name></p>
                                                                <p style="color: var(--8)" data-product-modal-summary></p>
                                                                <div class="shop-modal-var-container-container" data-shop-modal-var-container-container>
                                                                    <div class="shop-modal-var-container" data-shop-modal-var-container></div>
                                                                    <a class="shop-modal-var-title" data-shop-modal-var-title></a>
                                                                </div>
                                                                <div class="modal-shop-price-container" data-shop-price-container>
                                                                    <div data-price-standard-container>
                                                                        <a style="font-size: large; font-weight: 900;" data-price-standard></a>
                                                                    </div>
                                                                    <div data-price-nitro-container>
                                                                        <a data-price-nitro></a>
                                                                    </div>
                                                                </div>
                                                                <div class="modal-left-bottom">
                                                                    <div class="modal-buttons" data-modal-buttons></div>
                                                                </div>
                                                            </div>
                                                            <img class="modalv2-inner-logo" src="https://cdn.yapper.shop/assets/${apiCategory.logo}.png"></img>
                                                            <div class="shop-modal-tag-container" data-shop-card-tag-container></div>

                                                            <div data-modal-top-product-buttons>
                                                                <div title="Close" data-close-product-card-button>
                                                                    <svg class="closeIcon_modal" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M17.3 18.7a1 1 0 0 0 1.4-1.4L13.42 12l5.3-5.3a1 1 0 0 0-1.42-1.4L12 10.58l-5.3-5.3a1 1 0 0 0-1.4 1.42L10.58 12l-5.3 5.3a1 1 0 1 0 1.42 1.4L12 13.42l5.3 5.3Z" class=""></path></svg>
                                                                </div>
                                                                <div title="Download Data" data-download-product-card-button></div>
                                                            </div>

                                                            <div id="modalv2-inner-right" class="modalv2-inner-right">
                                                                <img class="modalv2-inner-img" src="https://cdn.yapper.shop/assets/${pdp}.png"></img>
                                                                <div data-modal-preview-holder></div>
                                                            </div>
                                                        </div>
                                                    `;

                                                    document.body.appendChild(modal);

                                                    setTimeout(() => {
                                                        modal.classList.add('show');
                                                    }, 1);

                                                    modal.querySelector("[data-product-modal-name]").textContent = `${getTextString("CARD_TYPE_PLUS_MORE_TITLE")}`;
                                                    modal.querySelector("[data-product-modal-summary]").textContent = `${getTextString("CARD_TYPE_PLUS_MORE_DESC")}`;

                                                    const previewHolder = modal.querySelector("[data-modal-preview-holder]");
                                                    previewHolder.classList.add('modal-plus-more-question-mark-img');

                                                    const plusMoreQuestionMark = document.createElement("img");
                                                    plusMoreQuestionMark.classList.add("plus-more-question-mark");
                                                    plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.png`;

                                                    previewHolder.appendChild(plusMoreQuestionMark);

                                                    if (localStorage.reduced_motion != "true") {
                                                        document.getElementById('modalv2-inner-right').addEventListener("mouseenter", () => {
                                                            plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.gif`;
                                                        });
                                                        document.getElementById('modalv2-inner-right').addEventListener("mouseleave", () => {
                                                            plusMoreQuestionMark.src = `https://cdn.discordapp.com/assets/server_products/storefront/question-mark.png`;
                                                        });
                                                    }


                                                    const button_container = document.querySelector("[data-modal-buttons]");

                                                    button_container.innerHTML = ``;


                                                    const unpublishedAt = new Date(product.unpublished_at);
                            
                                                    if (product.unpublished_at && !isNaN(unpublishedAt.getTime())) {
                            
                                                        function updateTimer() {
                                                            const now = new Date();
                                                            const timeDiff = unpublishedAt - now;
                            
                                                            if (timeDiff <= 0) {
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${getTextString("CARD_UNPUBLISHED_TAG")}</p>
                                                                    </div>
                                                                `;
                                                                clearInterval(timerInterval);
                                                            } else {
                                                                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                            
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${days}${getTextString("CARD_LEFT_TO_REQUEST_COUNTDOWN_TAG")}</p>
                                                                    </div>
                                                                `;
                                                            }
                                                        }
                            
                                                        const timerInterval = setInterval(updateTimer, 1000);
                                                        updateTimer();
                                                    }


                                                    const expiresAt = new Date(product.expires_at);

                                                    if (product.expires_at && !isNaN(expiresAt.getTime())) {
                            
                                                        function updateTimer() {
                                                            const now = new Date();
                                                            const timeDiff = expiresAt - now;
                            
                                                            if (timeDiff <= 0) {
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_TAG")}</p>
                                                                    </div>
                                                                `;
                                                                clearInterval(timerInterval);
                                                            } else {
                                                                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                            
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_COUNTDOWN_TAG")}${days}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_DAYS")}${hours}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_HOURS")}</p>
                                                                    </div>
                                                                `;
                                                            }
                                                        }
                            
                                                        const timerInterval = setInterval(updateTimer, 1000);
                                                        updateTimer();
                                                    }

                                                    const ReleasesAt = new Date(product.releases_at);
                            
                                                    if (product.releases_at && !isNaN(ReleasesAt.getTime())) {
                            
                                                        function updateTimer() {
                                                            const now = new Date();
                                                            const timeDiff = ReleasesAt - now;
                            
                                                            if (timeDiff <= 0) {
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${getTextString("CARD_PUBLISHING_TAG")}</p>
                                                                    </div>
                                                                `;
                                                                clearInterval(timerInterval);
                                                            } else {
                                                                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                            
                                                                modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                                    <div class="unplublished-tag">
                                                                        <p class="unplublished-tag-text">${days}${getTextString("CARD_PUBLISHING_COUNTDOWN_TAG_DAYS")}${hours}${getTextString("CARD_PUBLISHING_COUNTDOWN_TAG_HOURS")}</p>
                                                                    </div>
                                                                `;
                                                            }
                                                        }
                            
                                                        const timerInterval = setInterval(updateTimer, 1000);
                                                        updateTimer();
                                                    }

                                                    if (product.premium_type === 2) {
                                                        modal.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                            <div class="premiumWheelBadge_c23530 textBadge_df8943 base_df8943 eyebrow_df8943 baseShapeRound_df8943" aria-label="This bonus item is yours to keep and use anytime with an active Nitro subscription." style="background-color: var(--status-danger);"><svg class="premiumWheel_c23530" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M15 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" class=""></path><path fill="currentColor" fill-rule="evenodd" d="M7 4a1 1 0 0 0 0 2h3a1 1 0 1 1 0 2H5.5a1 1 0 0 0 0 2H8a1 1 0 1 1 0 2H6a1 1 0 1 0 0 2h1.25A8 8 0 1 0 15 4H7Zm8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" clip-rule="evenodd" class=""></path><path fill="currentColor" d="M2.5 10a1 1 0 0 0 0-2H2a1 1 0 0 0 0 2h.5Z" class=""></path></svg></div>
                                                        `;
                                                    }
                                                    


                                                    let modal_back = document.createElement("div");

                                                    modal_back.classList.add('modalv2-back');
                                                    modal_back.id = 'modalv2-back';

                                                    document.body.appendChild(modal_back);

                                                    setTimeout(() => {
                                                        modal_back.classList.add('show');
                                                    }, 1);


                                                    modal.addEventListener('click', (event) => {
                                                        if (event.target === modal) {
                                                            modal.classList.remove('show');
                                                            modal_back.classList.remove('show');
                                                            setTimeout(() => {
                                                                modal.remove();
                                                                modal_back.remove();
                                                            }, 300);
                                                        }
                                                    });

                                                    document.querySelector("[data-close-product-card-button]").addEventListener('click', () => {
                                                        modal.classList.remove('show');
                                                        modal_back.classList.remove('show');
                                                        setTimeout(() => {
                                                            modal.remove();
                                                            modal_back.remove();
                                                        }, 300);
                                                    });
                                                }
                                            }
                                        }


                                        const unpublishedAt = new Date(product.unpublished_at);
                            
                                        if (product.unpublished_at && !isNaN(unpublishedAt.getTime())) {
                            
                                            function updateTimer() {
                                                const now = new Date();
                                                const timeDiff = unpublishedAt - now;
                            
                                                if (timeDiff <= 0) {
                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${getTextString("CARD_UNPUBLISHED_TAG")}</p>
                                                        </div>
                                                    `;
                                                    clearInterval(timerInterval);
                                                } else {
                                                    const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                    const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                    const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                            
                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${days}${getTextString("CARD_LEFT_TO_REQUEST_COUNTDOWN_TAG")}</p>
                                                        </div>
                                                    `;
                                                }
                                            }
                            
                                            const timerInterval = setInterval(updateTimer, 1000);
                                            updateTimer();
                                        }


                                        const ExpiredAt = new Date(product.expires_at);
                            
                                        if (product.expires_at && !isNaN(ExpiredAt.getTime())) {
                            
                                            function updateTimer() {
                                                const now = new Date();
                                                const timeDiff = ExpiredAt - now;
                            
                                                if (timeDiff <= 0) {
                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_TAG")}</p>
                                                        </div>
                                                    `;
                                                    clearInterval(timerInterval);
                                                } else {
                                                    const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                    const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                    const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                            
                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${getTextString("CARD_EXPIRED_COUNTDOWN_TAG")}${days}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_DAYS")}${hours}${getTextString("CARD_EXPIRED_COUNTDOWN_TAG_HOURS")}</p>
                                                        </div>
                                                    `;
                                                }
                                            }
                            
                                            const timerInterval = setInterval(updateTimer, 1000);
                                            updateTimer();
                                        }

                                        const ReleasesAt = new Date(product.releases_at);
                            
                                        if (product.releases_at && !isNaN(ReleasesAt.getTime())) {
                            
                                            function updateTimer() {
                                                const now = new Date();
                                                const timeDiff = ReleasesAt - now;
                            
                                                if (timeDiff <= 0) {
                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${getTextString("CARD_PUBLISHING_TAG")}</p>
                                                        </div>
                                                    `;
                                                    clearInterval(timerInterval);
                                                } else {
                                                    const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                                                    const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                    const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / 1000);
                            
                                                    card.querySelector("[data-shop-card-tag-container]").innerHTML = `
                                                        <div class="unplublished-tag">
                                                            <p class="unplublished-tag-text">${days}${getTextString("CARD_PUBLISHING_COUNTDOWN_TAG_DAYS")}${hours}${getTextString("CARD_PUBLISHING_COUNTDOWN_TAG_HOURS")}</p>
                                                        </div>
                                                    `;
                                                }
                                            }
                            
                                            const timerInterval = setInterval(updateTimer, 1000);
                                            updateTimer();
                                        }

                                        // Append card to output
                                        card.classList.add('shop-category-card-transparent')
                                        cardOutput.append(card);
                                    }
                                }
                                
                                output0.append(category);
    
                                document.getElementById("shop-category-loading-container").innerHTML = ``;
                                document.getElementById("shop-category-loading-container").style.display = 'none';
                            } else if (apiCategory.type === FEATURED) {

                                const featureContainerTemplate = document.querySelector("[data-shop-subblock-container-template]");
            
                                const featureBlockContainer = featureContainerTemplate.content.cloneNode(true).children[0];

                                apiCategory.subblocks.forEach(subblock => {

                                    const template = document.querySelector("[data-shop-category-template-sub]");
            
                                    const featureblock = template.content.cloneNode(true).children[0];
            
                                    const oneImage = featureblock.querySelector("[data-shop-preview-image-sub]");
                                    oneImage.src = subblock.banner_url;
                                    oneImage.alt = subblock.name;

                                    featureblock.setAttribute("onclick",`setParams({page: '${subblock.page}'}); location.reload();`);

                                    featureBlockContainer.append(featureblock);

                                });

                                output.append(featureBlockContainer);
                            
                            } else if (apiCategory.type === WIDE_BANNER) {

                                const template = document.querySelector("[data-shop-category-template-wide]");
            
                                const wide_banner = template.content.cloneNode(true).children[0];
            
                                const oneImage = wide_banner.querySelector("[data-shop-preview-image-wide]");
                                oneImage.src = apiCategory.banner_url;
                                oneImage.alt = apiCategory.name;

                                const title = wide_banner.querySelector("[data-shop-output-wide-title]");
                                title.textContent = apiCategory.title;
                                title.style.color = apiCategory.banner_text_color;

                                const desc = wide_banner.querySelector("[data-shop-output-wide-desc]");
                                desc.textContent = apiCategory.body;
                                desc.style.color = apiCategory.banner_text_color;

                                if (apiCategory.disable_cta != true) {
                                    wide_banner.classList.add('clickable');
                                }

                                wide_banner.setAttribute("onclick",`setParams({page: '${apiCategory.page}'}); location.reload();`);

                                output.append(wide_banner);
                            }
                        }

                        processCategories()
                    });
                    }
                })
                .catch(error => {
                    console.error('Error fetching the API:', error);
                });
            }
        } else if (params.get("page") === "year_recap") {
            createRecap2024Element()
        }
    }
    
    // Function to copy the emoji to clipboard
    function copyEmoji(emoji) {
        navigator.clipboard.writeText(emoji)
    }
    
    // Redirect to Google if emojiCopy is null
    function redirectToGoogle() {
        window.location.href = 'https://discord.gg/Mcwh7hGcWb';
    }
    

    if (params.get("page") != "item_tool" && params.get("page") != "published_listings" && params.get("page") != "orb_converter") {
        window.onload = fetchData;
    }

    const clickable_side_tabs_container = document.getElementById('clickable-side-tabs-container');
    if (clickable_side_tabs_container) {  // Check if element exists
        document.getElementById('clickable-side-tabs-container').innerHTML = `
            <p class="center-text" style="font-size: 10px; display: flex; color: var(--white); opacity: 0;">${getTextString("DISCORD_DISCLAIMER")}</p>
            <p class="center-text" style="font-size: 12px; display: flex; color: var(--white);">${getTextString("DISCORD_DISCLAIMER")}</p>
            <div id="home-section">
                <button class="dm-button" id="home-tab" onclick="setParams({page: 'home'}); location.reload();">
                    <p class="dm-button-text">${getTextString("FEATURED_TAB_TITLE")}</p>
                </button>
                <div id="recap-2024-tab-loading">
                </div>
            </div>
            <div class="dm-divider">${getTextString("SHOP_DM_DEVIDER")}</div>
            <div id="collectibles-section">
                <button class="dm-button" id="shop-tab" onclick="setParams({page: 'shop'}); location.reload();">
                    <p class="dm-button-text">${getTextString("SHOP_TAB_TITLE")}</p>
                </button>
                <div id="orbs-shop-tab-loading">
                </div>
                <div id="leaks-tab-loading">
                </div>
                <button class="dm-button" id="potions-tab" onclick="setParams({page: 'consumables'}); location.reload();">
                    <p class="dm-button-text">${getTextString("POTIONS_TAB_TITLE")}</p>
                </button>
                <button class="dm-button" id="miscellaneous-tab" onclick="setParams({page: 'miscellaneous'}); location.reload();">
                    <p class="dm-button-text">${getTextString("MISCELLANEOUS_TAB_TITLE")}</p>
                </button>
                <div id="old-pplus-tab">
                    <button class="dm-button" id="pplus-tab" onclick="setParams({page: 'pplus'}); location.reload();">
                        <p class="dm-button-text">${getTextString("PROFILES_PLUS_TAB_TITLE")}</p>
                    </button>
                </div>
            </div>
            <div id="new-profiles-plus-tab-container">
            </div>
            <div class="dm-divider">${getTextString("TOOLS_DM_DEVIDER")}</div>
            <div id="tools">
                <button class="dm-button" id="published-listings-tab" onclick="setParams({page: 'published_listings'}); location.reload();">
                    <p class="dm-button-text">${getTextString("PUBLISHED_LISTINGS_TAB_TITLE")}</p>
                </button>
                <div id="orb-converter">
                </div>
                <div id="secret-tools">
                </div>
            </div>
        `;

        if (localStorage.experiment_2025_02_profiles_plus_home === "Treatment 2: Enabled") {
            document.getElementById('old-pplus-tab').innerHTML = ``;
            document.getElementById('new-profiles-plus-tab-container').innerHTML = `
                <div class="dm-divider">${getTextString("PROFILES_PLUS_DM_DEVIDER")}</div>
                <div id="collectibles-section">
                    <button class="dm-button" id="pplus-home-tab" onclick="setParams({page: 'pplus-home'}); location.reload();">
                        <p class="dm-button-text">${getTextString("PROFILES_PLUS_FEATURED_TAB_TITLE")}</p>
                    </button>
                    <button class="dm-button" id="pplus-tab" onclick="setParams({page: 'pplus'}); location.reload();">
                        <p class="dm-button-text">${getTextString("PROFILES_PLUS_BROWSE_ALL_TAB_TITLE")}</p>
                    </button>
                </div>
            `;
        }

        if (localStorage.experiment_2025_02_profiles_plus_home === "Treatment 3: Hide All Profiles Plus Tabs") {
            document.getElementById('old-pplus-tab').innerHTML = ``;
            document.getElementById('new-profiles-plus-tab-container').innerHTML = ``;
        }

        if (localStorage.experiment_2025_01_orb_testing === "Treatment 4: Orb Converter") {
            document.getElementById('orb-converter').innerHTML = `
                <button class="dm-button" id="orb-converter-tab" onclick="setParams({page: 'orb_converter'}); location.reload();">
                    <p class="dm-button-text">${getTextString("ORB_CONVERTER_TAB_TITLE")}</p>
                </button>
            `;
        }

        if (localStorage.dev === "true") {
            document.getElementById('secret-tools').innerHTML = `
                <button class="dm-button" id="avatar-decorations-debug-tab" onclick="setParams({page: 'item_tool'}); location.reload();">
                    <p class="dm-button-text">${getTextString("ITEM_DEBUG_TAB_TITLE")}</p>
                </button>
            `;
        }
    }

    if (localStorage.experiment_2024_11_recap === "Treatment 1: Enabled") {
        document.getElementById('recap-2024-tab-loading').innerHTML = `
            <img class="recap-2024-tab-decoration" src="https://cdn.yapper.shop/assets/157.png">
            <button class="dm-button" id="recap-2024-tab" onclick="setParams({page: 'year_recap'}); location.reload();">
                <p class="dm-button-text">${getTextString("RECAP_2024_TAB_TITLE")}</p>
            </button>

        `;
        document.getElementById('recap-2024-tab').style.backgroundImage = "linear-gradient(90deg, rgba(200, 91, 241, 0.00) 18.75%, #C85BF1 108.26%)";
    }

    function pageCheck() {
        privateAPICheck()
        if (params.get("page") === "home") {
            document.title = `${getTextString("FEATURED_TAB_DOCUMENT_TITLE")}${getTextString("DOCUMENT_TITLE_SITE_NAME")}`;
            if (localStorage.experiment_2025_02_fetch_from_vercel_endpoits === "Treatment 1: Enabled") {
                if (localStorage.unreleased_discord_collectibles == "true") {
                    url = api + HOME_PAGE_ALL;
                    apiUrl = new URL(url);
                    apiUrl.searchParams.set("include-unpublished", "true");
                } else {
                    apiUrl = api + HOME_PAGE_ALL;
                }
            } else {
                apiUrl = api + HOME_PAGE_ALL;
            }
            createHomePageElement()
            document.getElementById("home-tab").classList.add('dm-button-selected');
            document.getElementById("top-bar-container").innerHTML = `
                <h2 style="margin-left: 260px; margin-top: 10px;">${getTextString("FEATURED_TAB_PAGE_TITLE")}</h2>
                <div id="open-help-modals-buttons-holder"></div>
            `;
        } else if (params.get("page") === "year_recap") {
            document.title = `${getTextString("RECAP_2024_TAB_DOCUMENT_TITLE")}${getTextString("DOCUMENT_TITLE_SITE_NAME")}`;
            document.getElementById("recap-2024-tab").classList.add('dm-button-selected');
            localStorage.dismissible_recap_2024 = "Treatment 1: Seen";
            document.getElementById("top-bar-container").innerHTML = `
                <h2 style="margin-left: 260px; margin-top: 10px;">${getTextString("RECAP_2024_TAB_PAGE_TITLE")}</h2>
                <div id="open-help-modals-buttons-holder"></div>
            `;
        } else if (params.get("page") === "shop") {
            document.title = `${getTextString("SHOP_TAB_DOCUMENT_TITLE")}${getTextString("DOCUMENT_TITLE_SITE_NAME")}`;
            if (localStorage.experiment_2025_02_fetch_from_vercel_endpoits === "Treatment 1: Enabled") {
                if (localStorage.unreleased_discord_collectibles == "true") {
                    url = api + COLLECTIBLES;
                    apiUrl = new URL(url);
                    apiUrl.searchParams.set("include-unpublished", "true");
                } else {
                    apiUrl = api + COLLECTIBLES;
                }
            } else {
                apiUrl = api + COLLECTIBLES_VARIANTS;
            }
            createMainShopElement()
            document.getElementById("shop-tab").classList.add('dm-button-selected');
            document.getElementById("top-bar-container").innerHTML = `
                <h2 style="margin-left: 260px; margin-top: 10px;">${getTextString("SHOP_TAB_PAGE_TITLE")}</h2>
                <div id="open-help-modals-buttons-holder"></div>
            `;
        } else if (params.get("page") === "orbs") {
            document.title = `${getTextString("ORB_SHOP_TAB_DOCUMENT_TITLE")}${getTextString("DOCUMENT_TITLE_SITE_NAME")}`;
            if (localStorage.experiment_2025_02_orbs_shop === "Treatment 2: Orb Shop done like default" || localStorage.experiment_2025_02_orbs_shop === "Treatment 3: Default + New tag") {
                if (localStorage.unreleased_discord_collectibles == "true") {
                    url = api + ORBS_SHOP_DEFAULT;
                    apiUrl = new URL(url);
                    apiUrl.searchParams.set("include-unpublished", "true");
                } else {
                    apiUrl = api + ORBS_SHOP_DEFAULT;
                }
                if (localStorage.experiment_2025_02_orbs_shop === "Treatment 3: Default + New tag") {
                    localStorage.dismissible_orbs_shop_new_tag = "Treatment 1: Seen"
                }
            } else {
                apiUrl = api + ORBS_SHOP;
            }
            createMainPotionsElement()
            document.getElementById("top-bar-container").innerHTML = `
                <h2 style="margin-left: 260px; margin-top: 10px;">${getTextString("ORB_SHOP_TAB_PAGE_TITLE")}</h2>
                <div id="open-help-modals-buttons-holder"></div>
            `;
        } else if (params.get("page") === "leaks") {
            document.title = `${getTextString("LEAKS_TAB_DOCUMENT_TITLE")}${getTextString("DOCUMENT_TITLE_SITE_NAME")}`;
            if (localStorage.experiment_2025_02_fetch_from_vercel_endpoits === "Treatment 1: Enabled") {
                if (localStorage.unreleased_discord_collectibles == "true") {
                    url = api + LEAKS;
                    apiUrl = new URL(url);
                    apiUrl.searchParams.set("include-unpublished", "true");
                } else {
                    apiUrl = api + LEAKS;
                }
            } else {
                apiUrl = api + LEAKS;
            }
            createMainShopElement()
            document.getElementById("top-bar-container").innerHTML = `
                <h2 style="margin-left: 260px; margin-top: 10px;">${getTextString("LEAKS_TAB_PAGE_TITLE")}</h2>
                <div id="open-help-modals-buttons-holder"></div>
            `;
        } else if (params.get("page") === "consumables") {
            document.title = `${getTextString("POTIONS_TAB_DOCUMENT_TITLE")}${getTextString("DOCUMENT_TITLE_SITE_NAME")}`;
            if (localStorage.experiment_2025_02_fetch_from_vercel_endpoits === "Treatment 1: Enabled") {
                if (localStorage.unreleased_discord_collectibles == "true") {
                    url = api + CONSUMABLES;
                    apiUrl = new URL(url);
                    apiUrl.searchParams.set("include-unpublished", "true");
                } else {
                    apiUrl = api + CONSUMABLES;
                }
            } else {
                apiUrl = api + CONSUMABLES;
            }
            createMainPotionsElement()
            document.getElementById("potions-tab").classList.add('dm-button-selected');
            document.getElementById("top-bar-container").innerHTML = `
                <h2 style="margin-left: 260px; margin-top: 10px;">${getTextString("POTIONS_TAB_PAGE_TITLE")}</h2>
                <div id="open-help-modals-buttons-holder"></div>
            `;
        } else if (params.get("page") === "miscellaneous") {
            document.title = `${getTextString("MISCELLANEOUS_TAB_DOCUMENT_TITLE")}${getTextString("DOCUMENT_TITLE_SITE_NAME")}`;
            if (localStorage.experiment_2025_02_fetch_from_vercel_endpoits === "Treatment 1: Enabled") {
                if (localStorage.unreleased_discord_collectibles == "true") {
                    url = api + MISCELLANEOUS;
                    apiUrl = new URL(url);
                    apiUrl.searchParams.set("include-unpublished", "true");
                } else {
                    apiUrl = api + MISCELLANEOUS;
                }
            } else {
                apiUrl = api + MISCELLANEOUS;
            }
            createMainShopElement()
            document.getElementById("miscellaneous-tab").classList.add('dm-button-selected');
            document.getElementById("top-bar-container").innerHTML = `
                <h2 style="margin-left: 260px; margin-top: 10px;">${getTextString("MISCELLANEOUS_TAB_PAGE_TITLE")}</h2>
                <div id="open-help-modals-buttons-holder"></div>
            `;
        } else if (params.get("page") === "pplus-home") {
            document.title = `${getTextString("PROFILES_PLUS_FEATURED_TAB_DOCUMENT_TITLE")}${getTextString("DOCUMENT_TITLE_SITE_NAME")}`;
            if (localStorage.experiment_2025_02_fetch_from_vercel_endpoits === "Treatment 1: Enabled") {
                if (localStorage.unreleased_profiles_plus == "true") {
                    url = api + HOME_PAGE_PPLUS;
                    apiUrl = new URL(url);
                    apiUrl.searchParams.set("include-unpublished", "true");
                } else {
                    apiUrl = api + HOME_PAGE_PPLUS;
                }
            } else {
                apiUrl = api + HOME_PAGE_PPLUS;
            }
            createHomePageElement()
            document.getElementById("pplus-home-tab").classList.add('dm-button-selected');
            document.getElementById("top-bar-container").innerHTML = `
                <h2 style="margin-left: 260px; margin-top: 10px;">${getTextString("PROFILES_PLUS_FEATURED_TAB_PAGE_TITLE")}</h2>
                <div id="open-help-modals-buttons-holder"></div>
            `;
        } else if (params.get("page") === "pplus") {
            document.title = `${getTextString("PROFILES_PLUS_BROWSE_ALL_TAB_DOCUMENT_TITLE")}${getTextString("DOCUMENT_TITLE_SITE_NAME")}`;
            if (localStorage.experiment_2025_02_fetch_from_vercel_endpoits === "Treatment 1: Enabled") {
                if (localStorage.unreleased_profiles_plus == "true") {
                    url = api + PROFILES_PLUS;
                    apiUrl = new URL(url);
                    apiUrl.searchParams.set("include-unpublished", "true");
                } else {
                    apiUrl = api + PROFILES_PLUS;
                }
            } else {
                apiUrl = api + PROFILES_PLUS;
            }
            if (localStorage.experiment_2024_12_profiles_plus_marketing_variants == "Treatment 1: Paper Beach V2") {
                localStorage.dismissible_paper_beach_v2_marketing = "Treatment 1: Seen";
            } else if (localStorage.experiment_2024_12_profiles_plus_marketing_variants == "Treatment 2: Roblox Doors") {
                localStorage.dismissible_roblox_doors_marketing = "Treatment 1: Seen";
            }
            createMainShopElement()
            document.getElementById("pplus-tab").classList.add('dm-button-selected');
            document.getElementById("top-bar-container").innerHTML = `
                <h2 style="margin-left: 260px; margin-top: 10px;">${getTextString("PROFILES_PLUS_BROWSE_ALL_TAB_PAGE_TITLE")}</h2>
                <div id="open-help-modals-buttons-holder"></div>
            `;
        } else if (params.get("page") === "published_listings") {
            document.title = `${getTextString("PUBLISHED_LISTINGS_TAB_DOCUMENT_TITLE")}${getTextString("DOCUMENT_TITLE_SITE_NAME")}`;
            createPublishedListingsPageElement()
            document.getElementById("published-listings-tab").classList.add('dm-button-selected');
            document.getElementById("top-bar-container").innerHTML = `
                <h2 style="margin-left: 260px; margin-top: 10px;">${getTextString("PUBLISHED_LISTINGS_TAB_PAGE_TITLE")}</h2>
                <div id="open-help-modals-buttons-holder"></div>
            `;
        } else if (params.get("page") === "orb_converter") {
            document.title = `${getTextString("ORB_CONVERTER_TAB_DOCUMENT_TITLE")}${getTextString("DOCUMENT_TITLE_SITE_NAME")}`;
            createOrbConverterPageElement()
            document.getElementById("orb-converter-tab").classList.add('dm-button-selected');
            document.getElementById("top-bar-container").innerHTML = `
                <h2 style="margin-left: 260px; margin-top: 10px;">${getTextString("ORB_CONVERTER_TAB_PAGE_TITLE")}</h2>
                <div id="open-help-modals-buttons-holder"></div>
            `;
        } else if (params.get("page") === "item_tool") {
            document.title = `${getTextString("ITEM_DEBUG_TAB_DOCUMENT_TITLE")}${getTextString("DOCUMENT_TITLE_SITE_NAME")}`;
            createItemToolPageElement()
            document.getElementById("avatar-decorations-debug-tab").classList.add('dm-button-selected');
            document.getElementById("top-bar-container").innerHTML = `
                <h2 style="margin-left: 260px; margin-top: 10px;">${getTextString("ITEM_DEBUG_TAB_PAGE_TITLE")}</h2>
                <div id="open-help-modals-buttons-holder"></div>
            `;
        } else {
            setParams({page: 'home',err: '404'});
            document.title = "Home | Shop Archives";
            location.reload();
        }

        const open_help_modals_buttons_holder = document.getElementById('open-help-modals-buttons-holder');
        open_help_modals_buttons_holder.innerHTML = `
            <svg title="Dev Tools" x="0" y="0" onclick="openDevModal()" style="display: none;" id="open-dev-tools-button-1" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M2 20.59V19.4a1 1 0 0 1 .3-.7l2.4-2.42a1 1 0 0 1 .71-.29H6l9-9-.85-.85a1 1 0 0 1-.23-.34l-1.49-3.73a.5.5 0 0 1 .65-.65l3.73 1.5a1 1 0 0 1 .34.22l.64.64a1 1 0 0 1 1.42 0l1 1a1 1 0 0 1 0 1.42l1.58 1.58a1 1 0 0 1 0 1.42l-1.58 1.58a1 1 0 0 1-1.42 0L17 9l-9 9v.59a1 1 0 0 1-.3.7l-2.4 2.42a1 1 0 0 1-.71.29H3.4a1 1 0 0 1-.7-.3l-.42-.4a1 1 0 0 1-.29-.71Z" class=""></path><path fill="currentColor" d="M8.23 10.23c.2.2.51.2.7 0l1.3-1.3a.5.5 0 0 0 0-.7L6.5 4.5l.3-.3a1 1 0 0 0 0-1.4l-.5-.5c-.2-.2-.45-.3-.7-.22-.43.14-1.17.49-2.1 1.42a5.37 5.37 0 0 0-1.42 2.1c-.08.25.03.5.21.7l.5.5a1 1 0 0 0 1.42 0l.29-.3 3.73 3.73ZM13.77 15.06a.5.5 0 0 0 0 .7l1.73 1.74 1.44 2.4a1 1 0 0 0 .15.19l1.73 1.73c.1.1.26.1.36 0l2.64-2.64c.1-.1.1-.26 0-.36L20.1 17.1a1 1 0 0 0-.2-.15L17.5 15.5l-1.73-1.73a.5.5 0 0 0-.7 0l-1.3 1.3Z" class=""></path></svg>
            <svg title="Options" x="0" y="0" onclick="optionsSidebarToggle()" id="open-options-tools-button-1" aria-hidden="true" role="img" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M16.4483 8.3333H18.3333V11.6667H16.4492C16.2483 12.4425 15.9167 13.165 15.4708 13.8033L16.6667 15 15 16.6667 13.8042 15.47C13.1642 15.9158 12.4433 16.2483 11.6667 16.4483V18.3333H8.3333V16.4483C7.5575 16.2483 6.8358 15.9158 6.1967 15.47L5 16.6667 3.3333 15 4.53 13.8033C4.0842 13.1658 3.7517 12.4433 3.5517 11.6667H1.6667V8.3333H3.5517C3.7517 7.5567 4.0833 6.835 4.53 6.1967L3.3333 5 5 3.3333 6.1967 4.53C6.835 4.0833 7.5567 3.7517 8.3333 3.5517V1.6667H11.6667V3.5508C12.4433 3.7517 13.1642 4.0833 13.8042 4.5292L15 3.3325 16.6667 4.9992 15.47 6.1967C15.9158 6.835 16.2483 7.5575 16.4483 8.3333ZM10 13.3333C11.8409 13.3333 13.3333 11.8409 13.3333 10 13.3333 8.159 11.8409 6.6667 10 6.6667 8.159 6.6667 6.6667 8.159 6.6667 10 6.6667 11.8409 8.159 13.3333 10 13.3333Z")></path></svg>
        `;
        if (localStorage.dev == "true") {
            const dev_tool_button = document.querySelector("#open-dev-tools-button-1");
            dev_tool_button.style.display = 'block';
        }
    }

    pageCheck();


    
    function leaksCheck() {
        if (localStorage.override_leaks_button === "true") {
            console.log(`Valid Leaks Check: Overridden`);
            document.getElementById('leaks-tab-loading').innerHTML = `
                <button class="dm-button" id="leaks-tab" onclick="setParams({page: 'leaks'}); location.reload();" title="New {apiCategory.name} Leaks">
                    <p class="dm-button-text">${getTextString("LEAKS_TAB_TITLE")}</p>
                    <div class="dm-new-icon">${getTextString("DM_NEW")}</div>
                </button>
            `;
            if (params.get("page") === "leaks") {
                document.getElementById("leaks-tab").classList.add('dm-button-selected');
            }
        } else {
            if (localStorage.experiment_2025_02_fetch_from_vercel_endpoits === "Treatment 1: Enabled") {
                if (localStorage.unreleased_discord_collectibles == "true") {
                    url = api + LEAKS;
                    apiLeaks = new URL(url);
                    apiLeaks.searchParams.set("include-unpublished", "true");
                } else {
                    apiLeaks = api + LEAKS;
                }
            } else {
                apiLeaks = api + LEAKS;
            }
            fetch(apiLeaks, {
                method: "GET",
                headers: {
                    "Password": api_password,
                    "Token": api_token
                }
            })
            .then(response => response.json())
            .then((data) => {
                data.forEach(apiCategory => {
                    console.log(`Valid Leaks Check: True`);
                    document.getElementById('leaks-tab-loading').innerHTML = `
                        <button class="dm-button" id="leaks-tab" onclick="setParams({page: 'leaks'}); location.reload();" title="New ${apiCategory.name} Leaks">
                            <p class="dm-button-text">${getTextString("LEAKS_TAB_TITLE")}</p>
                            <div class="dm-new-icon">${getTextString("DM_NEW")}</div>
                        </button>
                    `;
                    if (params.get("page") === "leaks") {
                        document.getElementById("leaks-tab").classList.add('dm-button-selected');
                    }
                });
            })
            .catch(error => {
                console.log(`Valid Leaks Check: False`);
                document.getElementById('leaks-tab-loading').innerHTML = ``;
            });
        }
    }



    leaksCheck();


    if (localStorage.experiment_2025_02_orbs_shop === "Treatment 1: Orb Shop done like Potions" || localStorage.experiment_2025_02_orbs_shop === "Treatment 2: Orb Shop done like default" || localStorage.experiment_2025_02_orbs_shop === "Treatment 3: Default + New tag") {
        if (localStorage.experiment_2025_02_orbs_shop === "Treatment 3: Default + New tag" && localStorage.dismissible_orbs_shop_new_tag != "Treatment 1: Seen") {
            document.getElementById('orbs-shop-tab-loading').innerHTML = `
                <button class="dm-button" id="orbs-shop-tab" onclick="setParams({page: 'orbs'}); location.reload();">
                    <p class="dm-button-text">${getTextString("ORB_SHOP_TAB_TITLE")}</p>
                    <div class="dm-new-icon">${getTextString("DM_NEW")}</div>
                </button>
            `;
        } else {
            document.getElementById('orbs-shop-tab-loading').innerHTML = `
                <button class="dm-button" id="orbs-shop-tab" onclick="setParams({page: 'orbs'}); location.reload();">
                    <p class="dm-button-text">${getTextString("ORB_SHOP_TAB_TITLE")}</p>
                </button>
            `;
        }
        if (params.get("page") === "orbs") {
            document.getElementById("orbs-shop-tab").classList.add('dm-button-selected');
        }
    }



    function createHomePageElement() {
        document.getElementById("everything-housing-container").innerHTML = `
            <div id="home-page-warning-container">
            </div>
            <div id="home-page-dismissible-content-container">
            </div>
            <template data-shop-category-template>
                <div>
                    <div data-preview-banner-container>
                        <div id="home-page-preview-banner-container" data-shop-banner-banner-container>
                            <img class="home-page-preview-banner" src="" data-shop-category-banner-image>
                        </div>
                        <div style="margin-top: -250px; margin-bottom: 50px; position: relative; z-index: 1;">
                            <div id="home-page-preview-logo-container">
                                <img src="" style="height: 130px; width: auto; max-width: 700px; max-height: 160px;" data-shop-category-logo-image>
                                <div id="home-page-preview-desc-container" data-shop-category-desc-container>
                                    <p style="font-size: 18px; margin-left: 20px; margin-top: -10px;" data-shop-category-desc></p>
                                </div>
                            </div>
                            <div id="home-page-preview-button-container" data-preview-new-categoey-button>
                            </div>
                        </div>
                        <!-- Timer Display -->
                        <div class="shop-expiry-timer" style="display: none;">
                            <p class="shop-expiry-timer-timer" id="shop-expiry-timer"></p>
                        </div>
                    </div>
                    <div style="max-height: 440px; overflow: hidden;" class="shop-category-card-holder" id="shop-category-card-holder" data-shop-category-card-holder>
                    </div>
                </div>
            </template>
            <template data-shop-item-card-template>
                <div class="shop-category-card">
                    <div data-shop-card-preview-holder>
                    </div>
                    <div class="card-bottom">
                        <div title="Copy Link" data-share-product-card-button></div>
                        <a class="item-credits" data-product-card-sku-id>${getTextString("FAILED_TO_LOAD_ITEM_CARD_ERROR")}</a>
                        <h3 data-product-card-name>${getTextString("FAILED_TO_LOAD_ITEM_CARD_ERROR")}</h3>
                        <p class="shop-card-summary" data-product-card-summary>${getTextString("FAILED_TO_LOAD_ITEM_CARD_ERROR")}</p>
                        <div class="shop-price-container" data-shop-price-container>
                            <div data-price-standard-container>
                                <a style="font-size: large; font-weight: 900;" data-price-standard></a>
                            </div>
                            <div data-price-nitro-container>
                                <a data-price-nitro></a>
                            </div>
                        </div>
                        <div class="shop-card-var-container" data-shop-card-var-container>
                        </div>
                        <a class="shop-card-var-title" data-shop-card-var-title></a>
                    </div>
                    <div class="card-button-container"data-product-card-open-in-shop>
                        <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                    </div>
                    <div class="shop-card-tag-container" data-shop-card-tag-container>
                    </div>
                </div>
            </template>
            <template data-shop-varcolorblock-template>
                <div data-shop-card-var></div>
            </template>
            <div style="margin-top: 50px;" id="shop-category-loading-container">
                <div class="shop-category-loading" id="shop-category-loading">
                    <div>
                        <div class="shop-category-banner-loading">
                        </div>
                        <div class="shop-category-card-holder-loading">
                            <div class="shop-category-card-loading">
                            </div>
                            <div class="shop-category-card-loading">
                            </div>
                            <div class="shop-category-card-loading">
                            </div>
                            <div class="shop-category-card-loading">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div data-shop-0-output>
            </div>
            <div data-shop-output>
            </div>


            <template data-shop-category-template-wide>
                <div class="shop-wide-banner">
                    <img src="" data-shop-preview-image-wide>
                    <p style="font-size: 24px; margin-top: 20px;" data-shop-output-wide-title></p>
                    <p style="margin-top: 60px; font-size: 18px;" data-shop-output-wide-desc></p>
                </div>
            </template>

            <template data-shop-subblock-container-template>
                <div class="shop-feature-block-container" data-shop-output-sub></div>
            </template>

            <template data-shop-category-template-sub>
                <div class="shop-feature-block">
                    <img src="" data-shop-preview-image-sub>
                </div>
            </template>

            <div id="recap-support-articles">
            </div>
        `;
        if (params.get("err") === "404") {
            document.getElementById("home-page-warning-container").innerHTML = `
                <div class="shop-warning home-page-temporary-warning">
                    <p class="shop-notice-text">${getTextString("HOME_PAGE_404_ERROR")}</p>
                </div>
            `;
        }
        if (params.get("err") === "403") {
            document.getElementById("home-page-warning-container").innerHTML = `
                <div class="shop-warning home-page-temporary-warning">
                    <p class="shop-notice-text">${getTextString("HOME_PAGE_403_ERROR")}</p>
                </div>
            `;
        }
        if (localStorage.experiment_2024_11_recap === "Treatment 1: Enabled") {
            if (localStorage.dismissible_recap_2024 != "Treatment 1: Seen") {
                document.getElementById("home-page-dismissible-content-container").innerHTML = `
                    <img class="home-page-dismissible-content-2024-recap" onclick="dismissibleContentRecap2024()" src="${cdn}${DISMISSIBLE_2025_RECAP}" title="${getTextString("DISMISSIBLE_CONTENT_2024_RECAP_TITLE")}">
                `;
            }
        }
    }

    function dismissibleContentRecap2024() {
        setParams({page: 'year_recap'}); location.reload();
        localStorage.dismissible_recap_2024 = "Treatment 1: Seen";
    }

    function createRecap2024Element() {
        document.getElementById("everything-housing-container").innerHTML = `
            <div class="thy-shop-category-idk" style="height: auto;">
                <img class="shop-category-marketing-bg" style="height: 100%; position: absolute; filter: blur(3px);" src="${cdn}assets/110.svg">

                <div style="height: 60px; padding-top: 30px;">
                </div>
                
                <div class="a2024-recap-text-card-1">
                    <h1 class="center-text abcgintonord" style="font-size: 44px; margin-top: 0px; margin-bottom: 0px;">2025 Recap</h1>

                    <p class="center-text" style="font-size: 18px;">Things such as Splash Potions and randomness added to Profile Effects and much more were all nice gifts given to us in 2025!</p>
                    <p class="center-text" style="font-size: 18px;">The Shop Archives teams has made this article that covers everything that was added to Discord in 2025!</p>
                    <p class="center-text" style="font-size: 18px;">why are you here? this page should only be public from 10/12/2025 to 10/01/2026</p>
                    <p class="center-text" style="font-size: 18px;">(remove these notes before the rollout)</p>
                </div>

                <hr style="opacity: 0; height: 30px;">

                <div class="a2024-recap-text-card-1">
                    <h1 class="center-text abcgintonord" style="font-size: 44px; margin-top: 0px; margin-bottom: 0px;">Nameplates</h1>

                    <img class="a2024-recap-img-1" src="${cdn}assets/170.png">

                    <p class="center-text" style="font-size: 18px;">[replace with something from support article, if they release this year]</p>
                </div>

                <hr style="opacity: 0; height: 30px;">

                <div class="a2024-recap-text-card-1">
                    <h1 class="center-text abcgintonord" style="font-size: 44px; margin-top: 0px; margin-bottom: 0px;">Spring Nitro Promotion</h1>

                    <img class="a2024-recap-img-1" src="${cdn}assets/169.png">

                    <p class="center-text" style="font-size: 18px;">During Spring, if you were a first time Nitro subscriber, you can choose 1 of 3 Avatar Decorations of your own to collect and keep with an active Nitro subscription!</p>
                </div>

                <hr style="opacity: 0; height: 30px;">

                <div class="a2024-recap-text-card-1">
                    <h1 class="center-text abcgintonord" style="font-size: 44px; margin-top: 0px; margin-bottom: 0px;">Valentine's Nitro Promotion</h1>

                    <img class="a2024-recap-img-1" src="${cdn}assets/158.png">

                    <p class="center-text" style="font-size: 18px;">This Valentine's day, up until February 18th, 2025, when you purchase a Nitro gift you would receive the 'Heart-to-Heart' Avatar Decoration of your own to collect and keep!</p>
                </div>

                <hr style="opacity: 0; height: 30px;">

                <div class="a2024-recap-text-card-1">
                    <h1 class="center-text abcgintonord" style="font-size: 44px; margin-top: 0px; margin-bottom: 0px;">Emoji Confetti Potions</h1>

                    <img class="a2024-recap-img-1" src="${cdn}assets/159.gif">

                    <p class="center-text" style="font-size: 18px;">Emoji Confetti turns ordinary messages into extraordinary ones, going beyond standard emoji reactions to create more fun moments and interactions in your conversations. For only US$0.99.</p>
                </div>

                <hr style="opacity: 0; height: 30px;">

                <div class="a2024-recap-text-card-1">
                    <h1 class="center-text abcgintonord" style="font-size: 44px; margin-top: 0px; margin-bottom: 0px;">See what items you got during 2025</h1>

                    <p class="experiment-subtext" style="font-size: 18px;">This will only display items you currently have, it does not have access to expired/removed items</p>

                    <details>
                        <summary>How do I find my collectibles-purchases?</summary>
                        <p>Open discord.com/app on a browser of your choice and make sure you're signed in.</p>
                        <p>Open Dev Tools by pressing CTRL + SHIFT + I (CMD + OPTION + I on mac) on your keyboard.</p>
                        <p>At the top of Dev Tools you should see the "Network" tab, if you don't see it click the two right poiting arrows for a dropdown, then click "Network".</p>
                        <p>On discord.com open your profile tab in user settings.</p>
                        <p>In the "Network" tab press CTRL + F (CMD + F on mac) on your keyboard and search "collectibles-purchases".</p>
                        <p>Go to the "Response" tab of the file, copy the contents and paste it below.</p>
                    </details>

                    <div class="input-field">
                        <p>Paste Raw collectibles-purchases Text</p>
                        <textarea style="width: 100%; height: 200px; resize: none;" id="load-raw-collectibles-purchases-by-text-input" placeholder="Paste raw collectibles-purchases text here..."></textarea>
                        <button id="load-raw-collectibles-purchases-by-text-button">Load Raw Text</button>
                        <p>Upload collectibles-purchases JSON File</p>
                        <input type="file" id="load-raw-collectibles-purchases-by-file-input" accept=".json">
                    </div>

                    <p class="experiment-subtext" style="font-size: 18px;">The file you upload will not be stored in any online servers, once the page is refreshed all data is deleted.</p>
                    <div id="collectibles-purchases-output-div"></div>
                </div>

                <hr style="opacity: 0; height: 30px;">

                <div class="a2024-recap-text-card-1" style="padding: 0px;">
                    <p class="link-text" style="font-size: 18px;" onclick="window.open('${discordsupport}${HELP_PROFILE_EFFECTS}');">Profile Effects</p>
                    <p class="link-text" style="font-size: 18px;" onclick="window.open('${discordsupport}${HELP_AVATAR_DECORATIONS}');">Avatar Decorations</p>
                    <p class="link-text" style="font-size: 18px;" onclick="window.open('${discordsupport}${HELP_SHOP}');">Shop</p>
                    <p class="center-text" style="font-size: 18px;" title="DD/MM/YYYY">This page will be visible until 10/01/2026</p>
                </div>

                <hr style="opacity: 0; height: 30px;">
            </div>
        `;


        function processJsonData(data) {
            try {
                const parsedData = JSON.parse(data);
                console.log("Parsed Data:", parsedData);
        
                const totalItems2024 = parsedData.filter(item => new Date(item.purchased_at).getFullYear() === 2025);
                const totalDecorations = totalItems2024.filter(item => item.type === 0).length;
                const totalEffects = totalItems2024.filter(item => item.type === 1).length;
                const totalNameplates = totalItems2024.filter(item => item.type === 2).length;
                const totalBundles = totalItems2024.filter(item => item.type === 1000).length;
        
                const purchaseTypes = {
                    1: "Items purchased",
                    5: "Items claimed for free",
                    6: "Items claimed from gifts",
                    7: "Items claimed with Nitro",
                    9: "Items claimed free with Staff",
                    10: "Items claimed in Quests",
                    12: "Items claimed with Orbs"
                };
        
                const purchaseTypeCounts = {};
                Object.keys(purchaseTypes).forEach(key => {
                    const type = parseInt(key, 10);
                    purchaseTypeCounts[type] = totalItems2024.filter(item => item.purchase_type === type).length;
                });
        
                // Generate HTML content with all boxes already included
                const outputDiv = document.getElementById("collectibles-purchases-output-div");
                outputDiv.innerHTML = `
                    <div class="output-box">
                        <div class="box-header">
                            <span>Total items:</span><span>${totalItems2024.length}</span>
                        </div>
                        <div class="subtext">All items you obtained in 2025.</div>
                        <div class="box-expandable-content">
                            <ul>
                                ${totalItems2024.map(item => `<li>${item.name} (${item.sku_id})</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    <div class="output-box">
                        <div class="box-header">
                            <span>Total Decorations:</span><span>${totalDecorations}</span>
                        </div>
                        <div class="subtext">All Avatar Decorations you obtained in 2025.</div>
                        <div class="box-expandable-content">
                            <ul>
                                ${totalItems2024.filter(item => item.type === 0).map(item => `<li>${item.name} (${item.sku_id})</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    <div class="output-box">
                        <div class="box-header">
                            <span>Total Effects:</span><span>${totalEffects}</span>
                        </div>
                        <div class="subtext">All Profile Effects you obtained in 2025.</div>
                        <div class="box-expandable-content">
                            <ul>
                                ${totalItems2024.filter(item => item.type === 1).map(item => `<li>${item.name} (${item.sku_id})</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    <div class="output-box">
                        <div class="box-header">
                            <span>Total Nameplates:</span><span>${totalNameplates}</span>
                        </div>
                        <div class="subtext">All Profile Nameplates you obtained in 2025.</div>
                        <div class="box-expandable-content">
                            <ul>
                                ${totalItems2024.filter(item => item.type ===2).map(item => `<li>${item.name} (${item.sku_id})</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    <div class="output-box">
                        <div class="box-header">
                            <span>Total Bundles:</span><span>${totalBundles}</span>
                        </div>
                        <div class="subtext">All Bundles you obtained in 2025.</div>
                        <div class="box-expandable-content">
                            <ul>
                                ${totalItems2024.filter(item => item.type === 1000).map(item => `<li>${item.name} (${item.sku_id})</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    <div class="output-box">
                        <div class="box-header">
                            <span>Items purchased:</span><span>${purchaseTypeCounts[1] || 0}</span>
                        </div>
                        <div class="subtext">All items purchased with real money in 2025.</div>
                        <div class="box-expandable-content">
                            <ul>
                                ${totalItems2024.filter(item => item.purchase_type === 1).map(item => `<li>${item.name} (${item.sku_id})</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    <div class="output-box">
                        <div class="box-header">
                            <span>Items claimed for free:</span><span>${purchaseTypeCounts[5] || 0}</span>
                        </div>
                        <div class="subtext">All items claimed with Nitro (Such as DISXCORE items) or when gifting Nitro in 2025.</div>
                        <div class="box-expandable-content">
                            <ul>
                                ${totalItems2024.filter(item => item.purchase_type === 5).map(item => `<li>${item.name} (${item.sku_id})</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    <div class="output-box">
                        <div class="box-header">
                            <span>Items claimed from gifts:</span><span>${purchaseTypeCounts[6] || 0}</span>
                        </div>
                        <div class="subtext">All items claimed from a gift sent by a friend in 2025.</div>
                        <div class="box-expandable-content">
                            <ul>
                                ${totalItems2024.filter(item => item.purchase_type === 6).map(item => `<li>${item.name} (${item.sku_id})</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    <div class="output-box">
                        <div class="box-header">
                            <span>Items claimed with Nitro:</span><span>${purchaseTypeCounts[7] || 0}</span>
                        </div>
                        <div class="subtext">All items claimed when purchasing a Nitro Subscription (Such as Gyoiko Sakura) in 2025.</div>
                        <div class="box-expandable-content">
                            <ul>
                                ${totalItems2024.filter(item => item.purchase_type === 7).map(item => `<li>${item.name} (${item.sku_id})</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    <div class="output-box">
                        <div class="box-header">
                            <span>Items claimed free with Staff:</span><span>${purchaseTypeCounts[9] || 0}</span>
                        </div>
                        <div class="subtext">All items claimed with Staff Pannel (Or however staff claim their free collectibles) in 2025.</div>
                        <div class="box-expandable-content">
                            <ul>
                                ${totalItems2024.filter(item => item.purchase_type === 9).map(item => `<li>${item.name} (${item.sku_id})</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    <div class="output-box">
                        <div class="box-header">
                            <span>Items claimed in Quests:</span><span>${purchaseTypeCounts[10] || 0}</span>
                        </div>
                        <div class="subtext">All items claimed when completing a Quest in 2025.</div>
                        <div class="box-expandable-content">
                            <ul>
                                ${totalItems2024.filter(item => item.purchase_type === 10).map(item => `<li>${item.name} (${item.sku_id})</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    <div class="output-box">
                        <div class="box-header">
                            <span>Items claimed with Orbs:</span><span>${purchaseTypeCounts[12] || 0}</span>
                        </div>
                        <div class="subtext">All items purchased with Discord Orbs in 2025.</div>
                        <div class="box-expandable-content">
                            <ul>
                                ${totalItems2024.filter(item => item.purchase_type === 12).map(item => `<li>${item.name} (${item.sku_id})</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
        
                // Expandable functionality for each box
                const boxes = document.querySelectorAll('.output-box .box-header');
                boxes.forEach(box => {
                    box.addEventListener('click', () => {
                        const expandableContent = box.nextElementSibling.nextElementSibling; // Grabbing the expandable content
                        if (expandableContent.classList.contains('a2024-output-box-expanded')) {
                            expandableContent.classList.remove('a2024-output-box-expanded');
                        } else {
                            expandableContent.classList.add('a2024-output-box-expanded');
                        }
                    });
                });
        
                // Log results for debugging
                console.log(`Total items purchased in 2025: ${totalItems2024.length}`);
                console.log(`Total Decorations: ${totalDecorations}`);
                console.log(`Total Effects: ${totalEffects}`);
                console.log(`Total Bundles: ${totalBundles}`);
                Object.entries(purchaseTypeCounts).forEach(([type, count]) => {
                    console.log(`${purchaseTypes[type]}: ${count}`);
                });
            } catch (error) {
                console.error("Invalid JSON format:", error.message);
            }
        }
        
        // Handle JSON from textarea
        document.getElementById('load-raw-collectibles-purchases-by-text-button').addEventListener('click', () => {
            const textareaValue = document.getElementById('load-raw-collectibles-purchases-by-text-input').value.trim();
            if (textareaValue) {
                processJsonData(textareaValue);
            } else {
                console.warn("Textarea is empty.");
            }
        });
        
        // Handle JSON file upload
        document.getElementById('load-raw-collectibles-purchases-by-file-input').addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const fileContent = e.target.result;
                    processJsonData(fileContent);
                };
                reader.readAsText(file);
            } else {
                console.warn("No file selected.");
            }
        });

    }


    function createMainShopElement() {
        document.getElementById("everything-housing-container").innerHTML = `
            <div class="shop-container" style="overflow-y: auto;">
                <div class="shop-category" style="margin-top: 50px;">
                    <template data-shop-category-template>
                        <div class="thy-shop-category-idk">
                            <img class="shop-category-marketing-bg" src="https://cdn.yapper.shop/assets/31.png" data-shop-category-marketing-bg>
                            <div class="shop-category-banner" data-shop-category-banner>
                                <div class="discordLogo_be5025" style="display: none;" data-shop-discord-watermark-container>
                                    <div><svg class="discordIcon_be5025" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M19.73 4.87a18.2 18.2 0 0 0-4.6-1.44c-.21.4-.4.8-.58 1.21-1.69-.25-3.4-.25-5.1 0-.18-.41-.37-.82-.59-1.2-1.6.27-3.14.75-4.6 1.43A19.04 19.04 0 0 0 .96 17.7a18.43 18.43 0 0 0 5.63 2.87c.46-.62.86-1.28 1.2-1.98-.65-.25-1.29-.55-1.9-.92.17-.12.32-.24.47-.37 3.58 1.7 7.7 1.7 11.28 0l.46.37c-.6.36-1.25.67-1.9.92.35.7.75 1.35 1.2 1.98 2.03-.63 3.94-1.6 5.64-2.87.47-4.87-.78-9.09-3.3-12.83ZM8.3 15.12c-1.1 0-2-1.02-2-2.27 0-1.24.88-2.26 2-2.26s2.02 1.02 2 2.26c0 1.25-.89 2.27-2 2.27Zm7.4 0c-1.1 0-2-1.02-2-2.27 0-1.24.88-2.26 2-2.26s2.02 1.02 2 2.26c0 1.25-.88 2.27-2 2.27Z" class=""></path></svg><svg class="discordWordmark_be5025" aria-hidden="true" role="img" width="55" height="16" viewBox="0 0 55 16"><g fill="currentColor"><path d="M3 4.78717H6.89554C7.83025 4.78717 8.62749 4.93379 9.27812 5.22703C9.92875 5.52027 10.4144 5.92348 10.7352 6.44582C11.0559 6.96815 11.2208 7.5638 11.2208 8.24192C11.2208 8.90171 11.0559 9.49736 10.7168 10.038C10.3778 10.5695 9.8646 11.0002 9.17732 11.3118C8.49003 11.6234 7.6378 11.7791 6.6197 11.7791H3V4.78717ZM6.57388 10.0014C7.2071 10.0014 7.69278 9.84559 8.03184 9.52485C8.3709 9.21328 8.54501 8.77343 8.54501 8.23276C8.54501 7.72875 8.38923 7.32555 8.08682 7.02314C7.78442 6.72073 7.32623 6.56495 6.71225 6.56495H5.49255V10.0014H6.57388Z"></path><path d="M17.2882 11.7709C16.7475 11.6335 16.2618 11.4319 15.8311 11.1569V9.4983C16.161 9.75489 16.5917 9.95649 17.1416 10.1214C17.6914 10.2864 18.2229 10.3689 18.7361 10.3689C18.9743 10.3689 19.1576 10.3414 19.2767 10.2772C19.3959 10.2131 19.46 10.1398 19.46 10.0481C19.46 9.94733 19.4233 9.86485 19.3592 9.80071C19.2951 9.73656 19.1668 9.68158 18.9743 9.62659L17.7739 9.36084C17.0866 9.20506 16.6009 8.97596 16.3077 8.70105C16.0144 8.42613 15.877 8.05042 15.877 7.59223C15.877 7.20735 16.0053 6.86829 16.2527 6.58421C16.5093 6.30013 16.8667 6.0802 17.334 5.92442C17.8014 5.76863 18.342 5.68616 18.9743 5.68616C19.5333 5.68616 20.0465 5.74114 20.5138 5.86944C20.9812 5.98857 21.3661 6.14435 21.6685 6.32763V7.89464C21.3569 7.71136 20.9904 7.56474 20.5871 7.45477C20.1748 7.34481 19.7533 7.28982 19.3226 7.28982C18.6994 7.28982 18.3878 7.39979 18.3878 7.61056C18.3878 7.71136 18.4337 7.78467 18.5345 7.83966C18.6353 7.89464 18.8094 7.94046 19.066 7.99544L20.0648 8.17871C20.7155 8.28868 21.2011 8.49028 21.5219 8.77436C21.8426 9.05844 21.9984 9.47081 21.9984 10.0298C21.9984 10.6346 21.7326 11.1203 21.2011 11.4685C20.6696 11.8259 19.9182 12 18.9468 12C18.3787 11.9817 17.8289 11.9084 17.2882 11.7709Z"></path><path d="M24.4735 11.5602C23.9054 11.2761 23.4655 10.9004 23.1814 10.4239C22.8882 9.94733 22.7507 9.40666 22.7507 8.80185C22.7507 8.20621 22.8974 7.66554 23.1998 7.19819C23.5022 6.72167 23.942 6.35512 24.5194 6.0802C25.0967 5.81445 25.7931 5.677 26.5995 5.677C27.5984 5.677 28.4231 5.88776 29.0829 6.3093V8.1329C28.8538 7.97712 28.5789 7.83965 28.2673 7.74802C27.9558 7.64721 27.6259 7.6014 27.2777 7.6014C26.6545 7.6014 26.178 7.71137 25.8206 7.94046C25.4724 8.16956 25.2983 8.46279 25.2983 8.82934C25.2983 9.18673 25.4632 9.47998 25.8115 9.70907C26.1505 9.93817 26.6453 10.0573 27.2868 10.0573C27.6167 10.0573 27.9466 10.0115 28.2673 9.91067C28.5881 9.80987 28.8722 9.69991 29.1013 9.55329V11.3219C28.3681 11.7618 27.5159 11.9817 26.5537 11.9817C25.7381 11.9817 25.0509 11.8351 24.4735 11.5602Z"></path><path d="M31.6955 11.5602C31.1182 11.2761 30.6783 10.9004 30.3759 10.4147C30.0735 9.929 29.9177 9.38834 29.9177 8.78353C29.9177 8.18788 30.0735 7.64722 30.3759 7.17986C30.6783 6.71251 31.1182 6.34595 31.6863 6.0802C32.2545 5.81445 32.9418 5.677 33.7299 5.677C34.518 5.677 35.2053 5.80529 35.7743 6.0802C36.3425 6.34595 36.7824 6.71251 37.0848 7.17986C37.3872 7.64722 37.5338 8.17872 37.5338 8.78353C37.5338 9.37918 37.3872 9.929 37.0848 10.4147C36.7824 10.9004 36.3517 11.2852 35.7743 11.5602C35.1961 11.8351 34.518 11.9817 33.7299 11.9817C32.951 11.9817 32.2728 11.8351 31.6955 11.5602ZM34.7287 9.79155C34.967 9.55329 35.0953 9.22339 35.0953 8.82934C35.0953 8.42614 34.9762 8.11457 34.7287 7.87632C34.4813 7.63806 34.1514 7.51892 33.7391 7.51892C33.3084 7.51892 32.9785 7.63806 32.731 7.87632C32.4928 8.11457 32.3645 8.42614 32.3645 8.82934C32.3645 9.23255 32.4836 9.55329 32.731 9.79155C32.9785 10.039 33.3084 10.1581 33.7391 10.1581C34.1514 10.1489 34.4905 10.0298 34.7287 9.79155Z"></path><path d="M43.6644 6.0435V8.19699C43.4078 8.03204 43.0779 7.94956 42.6747 7.94956C42.1432 7.94956 41.7308 8.11451 41.4467 8.43524C41.1626 8.75598 41.016 9.25999 41.016 9.93811V11.7709H38.5693V5.9427H40.9702V7.80295C41.0985 7.12482 41.3184 6.62082 41.6117 6.30008C41.9049 5.97935 42.2898 5.80524 42.7572 5.80524C43.1054 5.80524 43.4078 5.88771 43.6644 6.0435Z"></path><path d="M51.9136 4.58649V11.7801H49.4659V10.4696C49.2552 10.9645 48.9436 11.3402 48.5221 11.5968C48.1005 11.8534 47.5782 11.9817 46.9551 11.9817C46.4052 11.9817 45.9195 11.8442 45.5072 11.5785C45.0948 11.3127 44.7741 10.937 44.5542 10.4696C44.3342 9.99313 44.2242 9.46163 44.2242 8.87514C44.2151 8.26117 44.3342 7.71134 44.5816 7.22566C44.8199 6.73998 45.1681 6.36426 45.608 6.08935C46.0479 5.81444 46.5519 5.67698 47.12 5.67698C48.2838 5.67698 49.0627 6.18099 49.4659 7.19817V4.58649H51.9136ZM49.0994 9.7457C49.3468 9.50744 49.4751 9.18671 49.4751 8.80183C49.4751 8.42612 49.356 8.12371 49.1086 7.89462C48.8611 7.66552 48.5312 7.5464 48.1189 7.5464C47.7065 7.5464 47.3766 7.66553 47.1292 7.90378C46.8818 8.14204 46.7626 8.44444 46.7626 8.82932C46.7626 9.2142 46.8818 9.51661 47.1292 9.75487C47.3766 9.99313 47.6973 10.1123 48.1097 10.1123C48.5221 10.1123 48.852 9.99313 49.0994 9.7457Z"></path><path d="M13.4751 6.29095C14.1789 6.29095 14.7489 5.77778 14.7489 5.14547C14.7489 4.51317 14.1789 4 13.4751 4C12.7723 4 12.2014 4.51317 12.2014 5.14547C12.2014 5.77778 12.7723 6.29095 13.4751 6.29095Z"></path><path d="M14.7489 7.07812C13.97 7.41719 12.9986 7.42635 12.2014 7.07812V11.7792H14.7489V7.07812Z"></path></g></svg></div>
                                </div>
                                <div id="home-page-preview-banner-container" data-shop-banner-banner-container>
                                    <img class="shop-category-banner-img" src="" data-shop-category-banner-image>
                                </div>
                                <div class="shop-category-logo-holder" style="display: none;" data-shop-category-logo-holder>
                                    <img class="shop-category-banner-logo" src="" id="shop-banner-logo" data-shop-category-logo-image>
                                </div>
                                <div class="shop-category-text-holder">
                                    <p style="font-size: 18px;" data-shop-category-desc></p>
                                </div>
                                <!-- Timer Display -->
                                <div class="shop-expiry-timer" style="display: none;">
                                    <p class="shop-expiry-timer-timer" id="shop-expiry-timer"></p>
                                </div>
                                <div class="shop-card-tag-container" data-shop-card-tag-container>
                                </div>
                            </div>
                            <div class="shop-category-card-holder" id="shop-category-card-holder" data-shop-category-card-holder>
                            </div>
                        </div>
                    </template>
                    <template data-shop-item-card-template>
                        <div class="shop-category-card">
                            <div data-shop-card-preview-holder>
                            </div>
                            <div class="card-bottom">
                                <div title="Copy Link" data-share-product-card-button></div>
                                <a class="item-credits" data-product-card-sku-id>${getTextString("FAILED_TO_LOAD_ITEM_CARD_ERROR")}</a>
                                <h3 data-product-card-name>${getTextString("FAILED_TO_LOAD_ITEM_CARD_ERROR")}</h3>
                                <p class="shop-card-summary" data-product-card-summary>${getTextString("FAILED_TO_LOAD_ITEM_CARD_ERROR")}</p>
                                <div class="shop-price-container" data-shop-price-container>
                                    <div data-price-standard-container>
                                        <a style="font-size: large; font-weight: 900;" data-price-standard></a>
                                    </div>
                                    <div data-price-nitro-container>
                                        <a data-price-nitro></a>
                                    </div>
                                </div>
                                <div class="shop-card-var-container" data-shop-card-var-container>
                                </div>
                                <a class="shop-card-var-title" data-shop-card-var-title></a>
                            </div>
                            <div class="card-button-container"data-product-card-open-in-shop>
                                <button class="card-button" title="${getTextString("CARD_OPEN_IN_SHOP_TITLE")}">${getTextString("CARD_OPEN_IN_SHOP")}</button>
                            </div>
                            <div class="shop-card-tag-container" data-shop-card-tag-container>
                            </div>
                        </div>
                    </template>
                    <template data-shop-varcolorblock-template>
                        <div data-shop-card-var></div>
                    </template>
                    <div data-shop-output>
                    </div>
                    <div id="shop-category-loading-container">
                    </div>
                </div>
            </div>
        `;
    }

    function createShopCategoryLoadingElement() {
        document.getElementById("shop-category-loading-container").innerHTML = `
            <div class="shop-category-loading" id="shop-category-loading">
                <div>
                    <div class="shop-category-banner-loading">
                    </div>
                    <div class="shop-category-card-holder-loading">
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                    </div>
                </div>
                <div>
                    <div class="shop-category-banner-loading">
                    </div>
                    <div class="shop-category-card-holder-loading">
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                    </div>
                </div>
            </div>
        `;
    }


    function createMainPotionsElement() {
        document.getElementById("everything-housing-container").innerHTML = `
            <div class="shop-container" style="overflow-y: auto;">
                <div class="shop-category" style="margin-top: 50px;">
                    <template data-potion-card-template>
                        <div>
                            <div class="shop-category-card" data-potion-card-holder>
                                <div class="potion-card-preview-holder">
                                    <img class="potion-card-preview" src="" id="potion-card-preview" data-potion-card-preview-image>
                                </div>
                                <div class="card-bottom">
                                    <div title="Copy Link" data-share-product-card-button></div>
                                    <a class="item-credits" data-product-card-sku-id>${getTextString("FAILED_TO_LOAD_ITEM_CARD_ERROR")}</a>
                                    <h3 data-product-card-name>${getTextString("FAILED_TO_LOAD_ITEM_CARD_ERROR")}</h3>
                                    <p class="shop-card-summary" data-product-card-summary>${getTextString("FAILED_TO_LOAD_ITEM_CARD_ERROR")}</p>
                                    <div class="shop-price-container" data-shop-price-container>
                                        <div data-price-standard-container>
                                            <a style="font-size: large; font-weight: 900;" data-price-standard></a>
                                        </div>
                                        <div data-price-nitro-container>
                                            <a data-price-nitro></a>
                                        </div>
                                    </div>
                                    <div class="shop-card-var-container" data-shop-card-var-container>
                                    </div>
                                    <a class="shop-card-var-title" data-shop-card-var-title></a>
                                </div>
                                <div class="card-button-container"data-product-card-open-in-shop>
                                    <button class="card-button" title="${getTextString("CARD_OPEN_SUPPORT_ARTICLE_TITLE")}">${getTextString("CARD_OPEN_SUPPORT_ARTICLE")}</button>
                                </div>
                                <div class="shop-card-tag-container" data-shop-card-tag-container>
                            </div>
                        </div>
                        </div>
                    </template>
                    <div data-shop-output class="shop-category-card-holder">
                    </div>
                    <div id="shop-category-loading-container">
                    </div>
                </div>
            </div>
        `;
    }

    function createPotionsCategoryLoadingElement() {
        document.getElementById("shop-category-loading-container").innerHTML = `
            <div class="shop-category-loading" id="shop-category-loading">
                <div>
                    <div class="shop-category-card-holder-loading">
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                        <div class="shop-category-card-loading">
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    function createItemToolPageElement() {
        document.getElementById("everything-housing-container").innerHTML = `
            <div style="display: flex; margin-top: 70px;">
                <div class="item-tool-card-big">
                    <h1>Avatar Decoration</h1>
        
                    <div class="shop-category-card deco-card" id="deco-preview-card" style="width: 280px;">
                        <img class="deco-preview-tool-deco" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUGFdjYAACAAAFAAGq1chRAAAAAElFTkSuQmCC" id="customDecorationPreview" alt="Deco Preview" />
                        <div class="card-bottom">
                            <a class="item-credits" id="deco-skuid-output-text">SKU ID: SKU ID</a>
                            <h3 id="deco-name-output-text">Decoration Name</h3>
                            <p class="shop-card-summary" id="deco-desc-output-text">Decoration Description</p>
                            <div class="shop-price-container">
                                <a id="deco-price-output-text" style="font-size: large; font-weight: 900;">Price Standard</a>
                                <a id="deco-price2-output-text">Price Nitro</a>
                            </div>
                        </div>
                        <div class="card-button-container">
                            <button class="card-button" title="Open item in the Discord shop">Open In Shop</button>
                        </div>
                    </div>
                    <hr style="opacity: 0;">
        
                    <div class="input-field">
                        <input type="text" id="deco-name-intput-box" placeholder="Name">
                    </div>
                    
                    <div class="input-field">
                        <input type="text" id="deco-desc-intput-box" placeholder="Description">
                    </div>
                
                    <div class="input-field">
                        <input type="text" id="deco-skuid-input-box" placeholder="SKU ID">
                    </div>
                
                    <div class="input-field">
                        <input type="text" id="deco-animated-link-input-box" placeholder="Animated Link">
                    </div>
                    <p style="display: none;" id="deco-animated-link-output-text"></p>
                
                    <div class="input-field">
                        <input type="text" id="deco-static-link-input-box" placeholder="Static Link">
                    </div>
                    <p style="display: none;" id="deco-static-link-output-text"></p>
                
                    <div class="input-field">
                        <input type="text" id="deco-price-input-box" placeholder="Price">
                    </div>
                
                    <div class="input-field">
                        <input type="text" id="deco-price2-input-box" placeholder="Nitro Price">
                    </div>
                
                    <button id="custom-deco-copy-button">Copy for API</button>

                    <div class="customDecorationDataURLContainer">
                        <div class="input-field">
                            <p>Upload Item Asset</p>
                            <input type="file" id="customDecorationInput" accept="image/*">
                        </div>
                        <div class="input-field" style="display: none;">
                            <input type="text" id="customDecorationUrlInput" placeholder="Enter custom decoration URL">
                            <button id="loadCustomDecorationUrl">Load Decoration from URL</button>
                        </div>
                        <div class="input-field json-input-field" style="display: none;">
                            <div class="output-section">
                                <textarea style="width: 100%; height: 200px;" id="deco-dataUrlOutput" readonly placeholder="Data URL will appear here..."></textarea>
                            </div>
                        </div>
                    </div>
        
                    <div class="input-field json-input-field">
                        <p>Load item from JSON</p>
                        <textarea style="width: 100%; height: 200px;" id="deco-json-input" placeholder='Paste Shop Archives item API here'></textarea>
                        <button id="deco-load-json-button">Load JSON</button>
                    </div>
                </div>
    
                <div class="item-tool-card-big">
                    <h1>Profile Effect</h1>
    
                    <div class="shop-category-card effect-card" id="effect-preview-card" style="width: 280px;">
                        <img class="effect-preview-tool-effect" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUGFdjYAACAAAFAAGq1chRAAAAAElFTkSuQmCC" id="customEffectPreview" alt="Effect Preview" />
                        <div class="card-bottom">
                            <a class="item-credits" id="effect-skuid-output-text">SKU ID: SKU ID</a>
                            <h3 id="effect-name-output-text">Effect Name</h3>
                            <p class="shop-card-summary" id="effect-desc-output-text">Effect Description</p>
                            <div class="shop-price-container">
                                <a id="effect-price-output-text" style="font-size: large; font-weight: 900;">Price Standard</a>
                                <a id="effect-price2-output-text">Price Nitro</a>
                            </div>
                        </div>
                        <div class="card-button-container">
                            <button class="card-button" title="Open item in the Discord shop">Open In Shop</button>
                        </div>
                    </div>
                    <hr style="opacity: 0;">
        
                    <div class="input-field">
                        <input type="text" id="effect-name-intput-box" placeholder="Name">
                    </div>
                    
                    <div class="input-field">
                        <input type="text" id="effect-desc-intput-box" placeholder="Description">
                    </div>
                
                    <div class="input-field">
                        <input type="text" id="effect-skuid-input-box" placeholder="SKU ID">
                    </div>
                
                    <div class="input-field">
                        <input type="text" id="effect-animated-link-input-box" placeholder="Animated Link">
                    </div>
                    <p style="display: none;" id="effect-animated-link-output-text"></p>
                
                    <div class="input-field">
                        <input type="text" id="effect-static-link-input-box" placeholder="Static Link">
                    </div>
                    <p style="display: none;" id="effect-static-link-output-text"></p>
                
                    <div class="input-field">
                        <input type="text" id="effect-price-input-box" placeholder="Price">
                    </div>
                
                    <div class="input-field">
                        <input type="text" id="effect-price2-input-box" placeholder="Nitro Price">
                    </div>
                
                    <button id="custom-effect-copy-button">Copy for API</button>

                    <div class="customEffectsDataURLContainer">
                        <div class="input-field">
                            <p>Upload Item Asset</p>
                            <input type="file" id="customEffectInput" accept="image/*">
                        </div>
                        <div class="input-field" style="display: none;">
                            <input type="text" id="customEffectUrlInput" placeholder="Enter custom effect URL">
                            <button id="loadCustomEffectUrl">Load Effect from URL</button>
                        </div>
                        <div class="input-field json-input-field" style="display: none;">
                            <div class="output-section">
                                <textarea style="width: 700px; height: 200px;" id="effect-dataUrlOutput" readonly placeholder="Data URL will appear here..."></textarea>
                            </div>
                        </div>
                    </div>
    
                    <div class="input-field json-input-field">
                        <p>Load item from JSON</p>
                        <textarea style="width: 100%; height: 200px;" id="effect-json-input" placeholder='Paste Shop Archives item API here'></textarea>
                        <button id="effect-load-json-button">Load JSON</button>
                    </div>
                </div>

            </div>
        `;

        
        const customDecorationInput = document.getElementById('customDecorationInput');
        const customDecorationUrlInput = document.getElementById('customDecorationUrlInput');
        const loadCustomDecorationUrlButton = document.getElementById('loadCustomDecorationUrl');
        const customDecorationPreview = document.getElementById('customDecorationPreview');
        const decoDataUrlOutput = document.getElementById('deco-dataUrlOutput');
        
        // Function to handle file upload
        customDecorationInput.addEventListener('change', function(event) {
          const file = event.target.files[0];
          if (file) {
            const reader = new FileReader();
            
            reader.onload = function(e) {
              const dataUrl = e.target.result;
              
              // Display custom decoration preview
              customDecorationPreview.src = dataUrl;
              customDecorationPreview.style.display = 'block';
        
              // Display Data URL
              decoDataUrlOutput.textContent = dataUrl;
            };
            
            reader.readAsDataURL(file);
          }
        });
        
        // Function to handle custom decoration URL input
        loadCustomDecorationUrlButton.addEventListener('click', function() {
          const customDecorationUrl = customDecorationUrlInput.value;
          
          if (customDecorationUrl) {
            const img = new Image();
            img.crossOrigin = 'Anonymous'; // This is needed to avoid CORS issues
        
            img.onload = function() {
              const canvas = document.createElement('canvas');
              canvas.width = img.width;
              canvas.height = img.height;
              const ctx = canvas.getContext('2d');
              
              ctx.drawImage(img, 0, 0);
        
              // Convert custom decoration to Data URL
              const dataUrl = canvas.toDataURL('image/png');
        
              // Display custom decoration preview
              customDecorationPreview.src = dataUrl;
              customDecorationPreview.style.display = 'block';
        
              // Display Data URL
              decoDataUrlOutput.textContent = dataUrl;
            };
        
            img.src = customDecorationUrl;
          }
        });
        
        
        
        
        
        
        const inputs = {
          name: document.getElementById('deco-name-intput-box'),
          description: document.getElementById('deco-desc-intput-box'),
          id: document.getElementById('deco-skuid-input-box'),
          animatedLink: document.getElementById('deco-animated-link-input-box'),
          staticLink: document.getElementById('deco-static-link-input-box'),
          price: document.getElementById('deco-price-input-box'),
          price2: document.getElementById('deco-price2-input-box')
        };
        
        // Define output elements
        const outputs = {
          name: document.getElementById('deco-name-output-text'),
          description: document.getElementById('deco-desc-output-text'),
          id: document.getElementById('deco-skuid-output-text'),
          animatedLink: document.getElementById('deco-animated-link-output-text'),
          staticLink: document.getElementById('deco-static-link-output-text'),
          price: document.getElementById('deco-price-output-text'),
          price2: document.getElementById('deco-price2-output-text')
        };
        
        const decoImagePreview = document.getElementById('customDecorationPreview');
        const decoPreviewCard = document.getElementById('deco-preview-card');
        let DecoStaticLink = '';
        let DecoAnimatedLink = '';
        
        // Add event listeners to update text live
        for (const key in inputs) {
          inputs[key].addEventListener('input', function() {
              outputs[key].textContent = `${inputs[key].value}`;
        
              if (key === 'staticLink') {
                DecoStaticLink = inputs.staticLink.value;
                decoImagePreview.src = DecoStaticLink;
            } else if (key === 'animatedLink') {
              DecoAnimatedLink = inputs.animatedLink.value;
            }
          });
        }
        
        decoPreviewCard.addEventListener('mouseenter', function() {
          if (DecoAnimatedLink) {
            decoImagePreview.src = DecoAnimatedLink;
          }
        });
        
        // Reset image source to static link on mouse leave
        decoPreviewCard.addEventListener('mouseleave', function() {
          if (DecoStaticLink) {
            decoImagePreview.src = DecoStaticLink;
          }
        });
        
        // Load JSON from textarea into inputs
        document.getElementById('deco-load-json-button').addEventListener('click', function() {
          try {
              const jsonData = JSON.parse(document.getElementById('deco-json-input').value);
              
              // Populate the input fields with the JSON data
              inputs.name.value = jsonData.name || "";
              inputs.description.value = jsonData.summary || "";
              inputs.id.value = jsonData.sku_id || "";
              inputs.price.value = jsonData.price || "";
              inputs.price2.value = jsonData.price_nitro || "";
              inputs.staticLink.value = jsonData.items[0].static || "";
              inputs.animatedLink.value = jsonData.items[0].animated || "";
        
              // Trigger input events to update the live preview
              for (const key in inputs) {
                  inputs[key].dispatchEvent(new Event('input'));
              }
          } catch (e) {
              alert("Invalid JSON! Please check the format.");
          }
        });
        
        // Copy button functionality
        document.getElementById('custom-deco-copy-button').addEventListener('click', function() {
          // Create JSON string for API use
          const jsonData = {
              name: inputs.name.value,
              summary: inputs.description.value,
              sku_id: inputs.id.value,
              price: inputs.price.value,
              price_nitro: inputs.price2.value,
              unpublished_at: null,
              isNew: "false",
              emojiCopy: null,
              items: [
                  {
                      item_type: "deco",
                      name: inputs.name.value,
                      static: inputs.staticLink.value,
                      animated: inputs.animatedLink.value,
                      summary: inputs.description.value
                  }
              ]
          };
        
          // Stringify JSON data with indentation for better formatting
          const jsonString = JSON.stringify(jsonData, null, 4);
        
          // Create a temporary textarea to hold the text
          const tempTextarea = document.createElement('textarea');
          tempTextarea.value = jsonString;
          document.body.appendChild(tempTextarea);
          tempTextarea.select();
          document.execCommand('copy');
          document.body.removeChild(tempTextarea);
        });
        
        
        
        
        
        const customEffectInput = document.getElementById('customEffectInput');
        const customEffectUrlInput = document.getElementById('customEffectUrlInput');
        const loadCustomEffectUrlButton = document.getElementById('loadCustomEffectUrl');
        const customEffectPreview = document.getElementById('customEffectPreview');
        const effectDataUrlOutput = document.getElementById('effect-dataUrlOutput');
        
        // Function to handle file upload
        customEffectInput.addEventListener('change', function(event) {
          const file = event.target.files[0];
          if (file) {
            const reader = new FileReader();
            
            reader.onload = function(e) {
              const dataUrl = e.target.result;
              
              // Display custom Effect preview
              customEffectPreview.src = dataUrl;
              customEffectPreview.style.display = 'block';
        
              // Display Data URL
              effectDataUrlOutput.textContent = dataUrl;
            };
            
            reader.readAsDataURL(file);
          }
        });
        
        // Function to handle custom Effect URL input
        loadCustomEffectUrlButton.addEventListener('click', function() {
          const customEffectUrl = customEffectUrlInput.value;
          
          if (customEffectUrl) {
            const img = new Image();
            img.crossOrigin = 'Anonymous'; // This is needed to avoid CORS issues
        
            img.onload = function() {
              const canvas = document.createElement('canvas');
              canvas.width = img.width;
              canvas.height = img.height;
              const ctx = canvas.getContext('2d');
              
              ctx.drawImage(img, 0, 0);
        
              // Convert custom Effect to Data URL
              const dataUrl = canvas.toDataURL('image/png');
        
              // Display custom Effect preview
              customEffectPreview.src = dataUrl;
              customEffectPreview.style.display = 'block';
        
              // Display Data URL
              effectDataUrlOutput.textContent = dataUrl;
            };
        
            img.src = customEffectUrl;
          }
        });
        
        
        
        
        
        
        const effectinputs = {
          name: document.getElementById('effect-name-intput-box'),
          description: document.getElementById('effect-desc-intput-box'),
          id: document.getElementById('effect-skuid-input-box'),
          animatedLink: document.getElementById('effect-animated-link-input-box'),
          staticLink: document.getElementById('effect-static-link-input-box'),
          price: document.getElementById('effect-price-input-box'),
          price2: document.getElementById('effect-price2-input-box')
        };
        
        // Define output elements
        const effectoutputs = {
          name: document.getElementById('effect-name-output-text'),
          description: document.getElementById('effect-desc-output-text'),
          id: document.getElementById('effect-skuid-output-text'),
          animatedLink: document.getElementById('effect-animated-link-output-text'),
          staticLink: document.getElementById('effect-static-link-output-text'),
          price: document.getElementById('effect-price-output-text'),
          price2: document.getElementById('effect-price2-output-text')
        };
        
        const effectImagePreview = document.getElementById('customEffectPreview');
        const effectPreviewCard = document.getElementById('effect-preview-card');
        let effectStaticLink = '';
        let effectAnimatedLink = '';
        
        // Add event listeners to update text live
        for (const key in effectinputs) {
          effectinputs[key].addEventListener('input', function() {
            effectoutputs[key].textContent = `${effectinputs[key].value}`;
        
              if (key === 'staticLink') {
                effectStaticLink = effectinputs.staticLink.value;
                effectImagePreview.src = effectStaticLink;
            } else if (key === 'animatedLink') {
              effectAnimatedLink = effectinputs.animatedLink.value;
            }
          });
        }
        
        effectPreviewCard.addEventListener('mouseenter', function() {
          if (effectAnimatedLink) {
            effectImagePreview.src = effectAnimatedLink;
          }
        });
        
        // Reset image source to static link on mouse leave
        effectPreviewCard.addEventListener('mouseleave', function() {
          if (effectStaticLink) {
            effectImagePreview.src = effectStaticLink;
          }
        });
        
        // Load JSON from textarea into inputs
        document.getElementById('effect-load-json-button').addEventListener('click', function() {
          try {
              const jsonData = JSON.parse(document.getElementById('effect-json-input').value);
              
              // Populate the input fields with the JSON data
              effectinputs.name.value = jsonData.name || "";
              effectinputs.description.value = jsonData.summary || "";
              effectinputs.id.value = jsonData.sku_id || "";
              effectinputs.price.value = jsonData.price || "";
              effectinputs.price2.value = jsonData.price_nitro || "";
              effectinputs.staticLink.value = jsonData.items[0].static || "";
              effectinputs.animatedLink.value = jsonData.items[0].animated || "";
        
              // Trigger input events to update the live preview
              for (const key in effectinputs) {
                effectinputs[key].dispatchEvent(new Event('input'));
              }
          } catch (e) {
              alert("Invalid JSON! Please check the format.");
          }
        });
        
        // Copy button functionality
        document.getElementById('custom-effect-copy-button').addEventListener('click', function() {
          // Create JSON string for API use
          const jsonData = {
              name: effectinputs.name.value,
              summary: effectinputs.description.value,
              sku_id: effectinputs.id.value,
              price: effectinputs.price.value,
              price_nitro: effectinputs.price2.value,
              unpublished_at: null,
              isNew: "false",
              emojiCopy: null,
              items: [
                  {
                      item_type: "effect",
                      name: effectinputs.name.value,
                      static: effectinputs.staticLink.value,
                      animated: effectinputs.animatedLink.value,
                      summary: effectinputs.description.value
                  }
              ]
          };
        
          // Stringify JSON data with indentation for better formatting
          const jsonString = JSON.stringify(jsonData, null, 4);
        
          // Create a temporary textarea to hold the text
          const tempTextarea = document.createElement('textarea');
          tempTextarea.value = jsonString;
          document.body.appendChild(tempTextarea);
          tempTextarea.select();
          document.execCommand('copy');
          document.body.removeChild(tempTextarea);
        });
    }



    function createOrbConverterPageElement() {
        document.getElementById("everything-housing-container").innerHTML = `
            <div style="margin-top: 70px; text-align: center;">
                <div class="orb-converter-container">
                    <span>USD</span>
                    <input type="text" id="usdAmount" value="1" oninput="convertToOrbs()">
                    <input type="text" id="orbsAmount" value="0" oninput="convertToUSD()">
                    <span>Orbs</span>
                </div>
            </div>
        `;
    }



    function createPublishedListingsPageElement() {
        document.getElementById("everything-housing-container").innerHTML = `
            <div style="margin-top: 100px;">
                <div class="published-listings-tester-card">

                    <h1>Check Published Listing by SKU ID</h1>

                    <div class="sku-is-valid-or-not-container" id="sku-is-valid-or-not-container"></div>

                    <input type="text" id="sku-id-input" placeholder="Please Input SKU ID">

                    <button onclick="checkValidSKUID()">Check</button>

                    <div class="sku-check-info-container" id="sku-check-info-container">
                        <p class="shop-notice-text">SKU ID:</p>
                        <p class="shop-notice-text">Name:</p>
                        <p class="shop-notice-text">Summary:</p>
                        <p class="shop-notice-text">Type:</p>
                        <p class="shop-notice-text">Slug:</p>
                        <p class="shop-notice-text">Application ID:</p>
                        <p class="shop-notice-text">Application Name:</p>
                        <p class="shop-notice-text">Standard Price:</p>
                        <p class="shop-notice-text">Nitro Price:</p>
                    </div>

                </div>
                <div id="secret-published-listings-testers">
                </div>
            </div>
        `;
        if (localStorage.dev === "true") {
            document.getElementById("secret-published-listings-testers").innerHTML = `
                <div class="published-listings-tester-card">

                    <h1>Category Items List | Staff Only</h1>

                    <div class="sku-is-valid-or-not-container" id="category-sku-is-valid-or-not-container"></div>

                    <input type="text" id="category-sku-id-input" placeholder="Please Input SKU ID">

                    <button onclick="categoryCheckValidSKUID()">Check</button>

                    <div class="sku-check-info-container" id="category-sku-check-info-container">
                        <p class="shop-notice-text">SKU ID:</p>
                        <p class="shop-notice-text">Name:</p>
                        <p class="shop-notice-text">Summary:</p>
                        <p class="shop-notice-text">Slug:</p>
                        <p class="shop-notice-text">Application ID:</p>
                        <p class="shop-notice-text">Application Name:</p>
                    </div>

                </div>
            `;
        }
    }

    function checkValidSKUID() {
        const SKUinput = document.getElementById('sku-id-input').value;

        document.getElementById('sku-is-valid-or-not-container').innerHTML = ``;

        fetch(`https://canary.discord.com/api/v9/store/published-listings/skus/${SKUinput}`)
            .then(response => response.json())
            .then((data) => {

                itemType = data.sku.type;
        
                if (data.sku.price != null) {
                    priceStandard = data.sku.price.amount;
                    priceStandardOutput = `US$${(priceStandard / 100).toFixed(2)}`;
                } else {
                    priceStandard = 'N/A';
                    priceStandardOutput = 'N/A';
                }
        
                if (data.sku.price != null) {
                    if (data.sku.price.premium != null) {
                        priceNitro = data.sku.price.premium["2"].amount;
                        priceNitroOutput = `US$${(priceNitro / 100).toFixed(2)}`;
                    } else {
                        priceNitroOutput = 'N/A';
                        priceNitro = 'N/A';
                    }
                } else {
                    priceNitro = 'N/A';
                    priceNitroOutput = 'N/A';
                }

                if (itemType === 2) {
                    itemTypeOutput = `Collectible/Category`;
                } else if (itemType === 3) {
                    itemTypeOutput = `Consumable`;
                } else if (itemType === 4) {
                    itemTypeOutput = `Bundle of Collectibles`;
                }

                document.getElementById('sku-check-info-container').innerHTML = `
                    <p class="shop-notice-text">SKU ID: ${data.sku.id}</p>
                    <p class="shop-notice-text">Name: ${data.sku.name}</p>
                    <p class="shop-notice-text">Summary: ${data.summary}</p>
                    <p class="shop-notice-text">Type: ${itemTypeOutput} (${itemType})</p>
                    <p class="shop-notice-text">Slug: ${data.sku.slug}</p>
                    <p class="shop-notice-text">Application ID: ${data.sku.application.id}</p>
                    <p class="shop-notice-text">Application Name: ${data.sku.application.name}</p>
                    <p class="shop-notice-text">Standard Price: ${priceStandardOutput} (${priceStandard})</p>
                    <p class="shop-notice-text">Nitro Price: ${priceNitroOutput} (${priceNitro})</p>
                `;
            })
            .catch(error => {
                if (SKUinput != '') {
                    document.getElementById('sku-is-valid-or-not-container').innerHTML = `
                        <div class="shop-warning">
                            <p class="shop-notice-text">The SKU ID '${SKUinput}' is either invalid or unpublished!</p>
                        </div>
                    `;
                    document.getElementById('sku-check-info-container').innerHTML = `
                        <p class="shop-notice-text">SKU ID:</p>
                        <p class="shop-notice-text">Name:</p>
                        <p class="shop-notice-text">Summary:</p>
                        <p class="shop-notice-text">Type:</p>
                        <p class="shop-notice-text">Slug:</p>
                        <p class="shop-notice-text">Application ID:</p>
                        <p class="shop-notice-text">Application Name:</p>
                        <p class="shop-notice-text">Standard Price:</p>
                        <p class="shop-notice-text">Nitro Price:</p>
                    `;
                } else {
                    document.getElementById('sku-is-valid-or-not-container').innerHTML = `
                        <div class="shop-warning">
                            <p class="shop-notice-text">Please input an SKU ID below!</p>
                        </div>
                    `;
                    document.getElementById('sku-check-info-container').innerHTML = `
                        <p class="shop-notice-text">SKU ID:</p>
                        <p class="shop-notice-text">Name:</p>
                        <p class="shop-notice-text">Summary:</p>
                        <p class="shop-notice-text">Type:</p>
                        <p class="shop-notice-text">Slug:</p>
                        <p class="shop-notice-text">Application ID:</p>
                        <p class="shop-notice-text">Application Name:</p>
                        <p class="shop-notice-text">Standard Price:</p>
                        <p class="shop-notice-text">Nitro Price:</p>
                    `;
                }
                console.error(error);
            });
    }

    function categoryCheckValidSKUID() {
        const SKUinput = document.getElementById('category-sku-id-input').value;

        document.getElementById('category-sku-is-valid-or-not-container').innerHTML = ``;

        fetch(`https://canary.discord.com/api/v9/store/published-listings/skus/${SKUinput}`)
            .then(response => response.json())
            .then((data) => {
                
                if (data.child_skus == null) {
                    if (SKUinput != '') {
                        document.getElementById('category-sku-is-valid-or-not-container').innerHTML = `
                            <div class="shop-warning">
                                <p class="shop-notice-text">The SKU ID '${SKUinput}' has no child SKUs or is unpublished!</p>
                            </div>
                        `;
                        document.getElementById('category-sku-check-info-container').innerHTML = `
                            <p class="shop-notice-text">SKU ID:</p>
                            <p class="shop-notice-text">Name:</p>
                            <p class="shop-notice-text">Summary:</p>
                            <p class="shop-notice-text">Slug:</p>
                            <p class="shop-notice-text">Application ID:</p>
                            <p class="shop-notice-text">Application Name:</p>
                        `;
                    } else {
                        document.getElementById('category-sku-is-valid-or-not-container').innerHTML = `
                            <div class="shop-warning">
                                <p class="shop-notice-text">Please input an SKU ID below!</p>
                            </div>
                        `;
                        document.getElementById('category-sku-check-info-container').innerHTML = `
                            <p class="shop-notice-text">SKU ID:</p>
                            <p class="shop-notice-text">Name:</p>
                            <p class="shop-notice-text">Summary:</p>
                            <p class="shop-notice-text">Slug:</p>
                            <p class="shop-notice-text">Application ID:</p>
                            <p class="shop-notice-text">Application Name:</p>
                        `;
                    }
                    document.getElementById('category-sku-check-info-container').innerHTML = `
                        <p class="shop-notice-text">SKU ID:</p>
                        <p class="shop-notice-text">Name:</p>
                        <p class="shop-notice-text">Summary:</p>
                        <p class="shop-notice-text">Slug:</p>
                        <p class="shop-notice-text">Application ID:</p>
                        <p class="shop-notice-text">Application Name:</p>
                    `;
                } else {
                    document.getElementById('category-sku-check-info-container').innerHTML = `
                        <p class="shop-notice-text">SKU ID: ${data.sku.id}</p>
                        <p class="shop-notice-text">Name: ${data.sku.name}</p>
                        <p class="shop-notice-text">Summary: ${data.summary}</p>
                        <p class="shop-notice-text">Slug: ${data.sku.slug}</p>
                        <p class="shop-notice-text">Application ID: ${data.sku.application.id}</p>
                        <p class="shop-notice-text">Application Name: ${data.sku.application.name}</p>
                        <div data-category-child-sku-output-container></div>
                    `;

                    const childContainer = document.querySelector("[data-category-child-sku-output-container]");

                    data.child_skus.forEach(item => {
                        const childBlock = document.createElement("div");
                        childBlock.classList.add('category-child-sku-output')
                        itemType = item.type;

                        fetch(`https://canary.discord.com/api/v9/store/published-listings/skus/${item.id}`)
                        .then(response => response.json())
                        .then((itemItself) => {

                            itemType = itemItself.sku.type;
        
                            if (itemItself.sku.price != null) {
                                priceStandard = itemItself.sku.price.amount;
                                priceStandardOutput = `US$${(priceStandard / 100).toFixed(2)}`;
                            } else {
                                priceStandard = 'N/A';
                                priceStandardOutput = 'N/A';
                            }
                        
                            if (itemItself.sku.price != null) {
                                if (itemItself.sku.price.premium != null) {
                                    priceNitro = itemItself.sku.price.premium["2"].amount;
                                    priceNitroOutput = `US$${(priceNitro / 100).toFixed(2)}`;
                                } else {
                                    priceNitroOutput = 'N/A';
                                    priceNitro = 'N/A';
                                }
                            } else {
                                priceNitro = 'N/A';
                                priceNitroOutput = 'N/A';
                            }
                        
                            if (itemType === 2) {
                                itemTypeOutput = `Collectible/Category`;
                            } else if (itemType === 3) {
                                itemTypeOutput = `Consumable`;
                            } else if (itemType === 4) {
                                itemTypeOutput = `Bundle of Collectibles`;
                            }
                        
                            childBlock.innerHTML = `
                                <p class="shop-notice-text">SKU ID: ${itemItself.sku.id}</p>
                                <p class="shop-notice-text">Name: ${itemItself.sku.name}</p>
                                <p class="shop-notice-text">Summary: ${itemItself.summary}</p>
                                <p class="shop-notice-text">Type: ${itemTypeOutput} (${itemType})</p>
                                <p class="shop-notice-text">Slug: ${itemItself.sku.slug}</p>
                                <p class="shop-notice-text">Application ID: ${itemItself.sku.application.id}</p>
                                <p class="shop-notice-text">Application Name: ${itemItself.sku.application.name}</p>
                                <p class="shop-notice-text">Standard Price: ${priceStandardOutput} (${priceStandard})</p>
                                <p class="shop-notice-text">Nitro Price: ${priceNitroOutput} (${priceNitro})</p>
                            `;
                        })
                        .catch(error => {
                            if (item.price != null) {
                                priceStandard = item.price.amount;
                                priceStandardOutput = `US$${(priceStandard / 100).toFixed(2)}`;
                            } else {
                                priceStandard = 'N/A';
                                priceStandardOutput = 'N/A';
                            }
                        
                            if (item.price != null) {
                                if (item.price.premium != null) {
                                    priceNitro = item.price.premium["2"].amount;
                                    priceNitroOutput = `US$${(priceNitro / 100).toFixed(2)}`;
                                } else {
                                    priceNitroOutput = 'N/A';
                                    priceNitro = 'N/A';
                                }
                            } else {
                                priceNitro = 'N/A';
                                priceNitroOutput = 'N/A';
                            }
                        
                        
                            if (itemType === 2) {
                                itemTypeOutput = `Collectible/Category`;
                            } else if (itemType === 3) {
                                itemTypeOutput = `Consumable`;
                            } else if (itemType === 4) {
                                itemTypeOutput = `Bundle of Collectibles`;
                            }
                        
                            childBlock.innerHTML = `
                                <div>
                                    <div class="shop-warning">
                                        <p class="shop-notice-text">This item is not Published!</p>
                                    </div>
                                    <p class="shop-notice-text">SKU ID: ${item.id}</p>
                                    <p class="shop-notice-text">Name: ${item.name}</p>
                                    <p class="shop-notice-text">Summary: ${item.summary}</p>
                                    <p class="shop-notice-text">Type: ${itemTypeOutput} (${itemType})</p>
                                    <p class="shop-notice-text">Slug: ${item.slug}</p>
                                    <p class="shop-notice-text">Standard Price: ${priceStandardOutput} (${priceStandard})</p>
                                    <p class="shop-notice-text">Nitro Price: ${priceNitroOutput} (${priceNitro})</p>
                                </div>
                            `;
                            console.error(error);
                        });

                        childContainer.appendChild(childBlock); 
                    }); 
                }
            })
            .catch(error => {
                if (SKUinput != '') {
                    document.getElementById('category-sku-is-valid-or-not-container').innerHTML = `
                        <div class="shop-warning">
                            <p class="shop-notice-text">The SKU ID '${SKUinput}' is either invalid or unpublished!</p>
                        </div>
                    `;
                    document.getElementById('category-sku-check-info-container').innerHTML = `
                        <p class="shop-notice-text">SKU ID:</p>
                        <p class="shop-notice-text">Name:</p>
                        <p class="shop-notice-text">Summary:</p>
                        <p class="shop-notice-text">Slug:</p>
                    `;
                } else {
                    document.getElementById('category-sku-is-valid-or-not-container').innerHTML = `
                        <div class="shop-warning">
                            <p class="shop-notice-text">Please input an SKU ID below!</p>
                        </div>
                    `;
                    document.getElementById('category-sku-check-info-container').innerHTML = `
                        <p class="shop-notice-text">SKU ID:</p>
                        <p class="shop-notice-text">Name:</p>
                        <p class="shop-notice-text">Summary:</p>
                        <p class="shop-notice-text">Slug:</p>
                    `;
                }
                console.error(error);
            });
    }


    if (localStorage.experiment_2025_02_extra_options === "Treatment 6: Settings like discord") {
        const dm_container = document.querySelector(".dm-list");
        let u_bar = document.createElement("div");

        u_bar.classList.add("ubar-profile-and-settings")
        u_bar.innerHTML = `
            <img id="ubar-avatar" class="ubar-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
            <div class="ubar-status-bg"></div>
            <div class="ubar-status-color"></div>
            <p class="ubar-displayname" id="ubar-displayname">${localStorage.discord_username}</p>
            <svg title="Options" x="0" y="0" onclick="optionsSidebarToggle()" id="ubar-options-cog" aria-hidden="true" role="img" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M16.4483 8.3333H18.3333V11.6667H16.4492C16.2483 12.4425 15.9167 13.165 15.4708 13.8033L16.6667 15 15 16.6667 13.8042 15.47C13.1642 15.9158 12.4433 16.2483 11.6667 16.4483V18.3333H8.3333V16.4483C7.5575 16.2483 6.8358 15.9158 6.1967 15.47L5 16.6667 3.3333 15 4.53 13.8033C4.0842 13.1658 3.7517 12.4433 3.5517 11.6667H1.6667V8.3333H3.5517C3.7517 7.5567 4.0833 6.835 4.53 6.1967L3.3333 5 5 3.3333 6.1967 4.53C6.835 4.0833 7.5567 3.7517 8.3333 3.5517V1.6667H11.6667V3.5508C12.4433 3.7517 13.1642 4.0833 13.8042 4.5292L15 3.3325 16.6667 4.9992 15.47 6.1967C15.9158 6.835 16.2483 7.5575 16.4483 8.3333ZM10 13.3333C11.8409 13.3333 13.3333 11.8409 13.3333 10 13.3333 8.159 11.8409 6.6667 10 6.6667 8.159 6.6667 6.6667 8.159 6.6667 10 6.6667 11.8409 8.159 13.3333 10 13.3333Z" )=""></path></svg>
        `;

        dm_container.appendChild(u_bar);
    }

    function optionsSidebarToggle() {
        if (document.getElementById('options-sidebar-container').classList.contains('options-sidebar-container-expanded')) {
            document.getElementById('options-sidebar-container').classList.remove("options-sidebar-container-expanded");
        } else {
            document.getElementById('options-sidebar-container').classList.add("options-sidebar-container-expanded");
            document.getElementById('options-sidebar-container').innerHTML = `
                <h1 class="center-text" style="font-size: 30px; margin-top: 20px; margin-bottom: 0px; color: var(--white);">${getTextString("OPTIONS_SIDEBAR_TITLE")}</h1>
                <div class="options-option-card-holder">

                    <div id="old-options-container-dev">
                        <div id="currency-picker-container-dev">
                            <div class="options-option-card">
                                <p class="option-card-title" style="color: var(--white);">${getTextString("OPTIONS_SIDEBAR_CURRENCY_PICKER")}</p>
                                <select id="currency_picker_container" class="options-dropdown" title="${getTextString("OPTIONS_SIDEBAR_CURRENCY_PICKER_MORE")}" disabled>
                                </select>
                            </div>
                        </div>

                        <div class="options-option-card" id="reduced-motion-box-option">
                            <p class="option-card-title" style="color: var(--white);">${getTextString("OPTIONS_SIDEBAR_REDUCED_MOTION")}</p>
                            <input class="options-toggle-box" onclick="reducedMotionChecked();" style="cursor: pointer; scale: 2; posision: center;" id="reduced-motion-box" type="checkbox">
                        </div>

                        <div class="options-option-card" id="disable-banner-overrides-box-option">
                            <p class="option-card-title" style="color: var(--white);">${getTextString("OPTIONS_SIDEBAR_REDUCED_MOTION_BANNERS")}</p>
                            <input class="options-toggle-box" onclick="disableBannerOverridesChecked();" style="cursor: pointer; scale: 2; posision: center;" id="disable-banner-overrides-box" type="checkbox">
                        </div>
                    </div>

                    <div class="username-picker-container" id="username-picker-container-dev"></div>

                </div>
                <div id="theme-picker-container"></div>
                <div id="accessibility-options-container"></div>
                <div id="new-options-experiments-container"></div>
                <div id="new-options-dismissible-content-container"></div>
                <h1 class="center-text" style="font-size: 30px; margin-top: 20px; margin-bottom: 0px; color: var(--white);">${getTextString("OPTIONS_SIDEBAR_DOWNLOADS")}</h1>
                <div>
                    <div class="experiment-card-holder" style="width: 300px; margin-left: auto; margin-right: auto;">
                    <template id="downloadables-api-template">
                        <div class="item experiment-card">
                            <p class="name"></p>
                            <p class="summary experiment-subtext"></p>
                            <div class="downloadables"></div>
                        </div>
                    </template>
                    <div class="experiment-card-holder" id="downloadables-output"></div>
                </div>
                <p class="center-text" style="font-size: 30px; margin-top: 20px; margin-bottom: 0px; color: var(--white);">${getTextString("OPTIONS_SIDEBAR_DISCORD_HELP")}</p>
                <div id="discord-help-articles-output">
                    <div class="experiment-card-holder" style="width: 300px; margin-left: auto; margin-right: auto;">
                        <button class="card-button" onclick="window.open('${discordsupport}${HELP_SHOP}');">${getTextString("OPTIONS_SIDEBAR_DISCORD_HELP_SHOP")}</button>
                        <button class="card-button" onclick="window.open('${discordsupport}${HELP_AVATAR_DECORATIONS}');">${getTextString("OPTIONS_SIDEBAR_DISCORD_HELP_AVATAR_DECORATIONS")}</button>
                        <button class="card-button" onclick="window.open('${discordsupport}${HELP_PROFILE_EFFECTS}');">${getTextString("OPTIONS_SIDEBAR_DISCORD_HELP_PROFILE_EFFECTS")}</button>
                        <button class="card-button" onclick="window.open('${discordsupport}${HELP_HD_STREAMING_POTION}');">${getTextString("OPTIONS_SIDEBAR_DISCORD_HELP_HD_STREAMING_POTION")}</button>
                        <button class="card-button" onclick="window.open('${discordsupport}${HELP_CONFETTI_POTION}');">${getTextString("OPTIONS_SIDEBAR_DISCORD_HELP_HD_CONFETTI_POTION")}</button>
                    </div>
                </div>
                <p class="center-text" style="font-size: 30px; margin-top: 20px; margin-bottom: 0px; color: var(--white);">${getTextString("OPTIONS_SIDEBAR_YAPPER_HELP")}</p>
                <div class="experiment-card-holder" style="width: 300px; margin-left: auto; margin-right: auto;">
                    <button class="card-button" onclick="window.open('https://discord.gg/Mcwh7hGcWb/');">${getTextString("OPTIONS_SIDEBAR_YAPPER_DISCORD_SERVER")}</button>
                    <button class="card-button" onclick="window.open('https://github.com/Yappering/');">${getTextString("OPTIONS_SIDEBAR_YAPPER_GITHUB")}</button>
                    <button class="card-button" onclick="window.open('https://www.youtube.com/@DTACat');">${getTextString("OPTIONS_SIDEBAR_YAPPER_YOUTUBE_1")}</button>
                </div>
                ${getTextString("APP_VERSION")}${tcbx926n29}
            `;

            if (localStorage.experiment_2025_02_extra_options === "Treatment 4: Enabled" || localStorage.experiment_2025_02_extra_options === "Treatment 5: Enabled w/o currency picker" || localStorage.experiment_2025_02_extra_options === "Treatment 6: Settings like discord") {
                document.getElementById("username-picker-container-dev").innerHTML = `
                    <div id="staff-todo-list"></div>
                    <p class="center-text" style="font-size: 20px; margin-top: 20px; margin-bottom: 0px; color: var(--white);">${getTextString("OPTIONS_EXTRA_PROFILE")}</p>
                    <p class="center-text" style="font-size: 15px; margin-top: 0px; margin-bottom: 0px; color: var(--white);">${getTextString("OPTIONS_EXTRA_PROFILE_DESC")}</p>
                    <div class="options-option-card" id="options-text-input-option">
                        <p class="option-card-title" style="color: var(--white);">${getTextString("OPTIONS_EXTRA_PROFILE_CHANGE_USERNAME")}</p>
                        <input class="options-text-input" autocomplete="off" oninput="changeUsernameFromInput();" style="posision: center;" id="profile-username-text-input" value="${localStorage.discord_username}" type="text">
                    </div>
                    <div class="options-option-card" id="options-img-input-option">
                        <label for="profileAvatarInput" class="profile-avatar-upload-label">${getTextString("OPTIONS_EXTRA_PROFILE_CHANGE_AVATAR")}</label>
                        <input type="file" id="profileAvatarInput" class="profile-avatar-file-input" accept="image/*">
                        <button id="removeProfileAvatarButton" class="profile-avatar-remove-button">${getTextString("OPTIONS_EXTRA_PROFILE_REMOVE_AVATAR")}</button>
                    </div>
                    <div id="options-avatar-img-input-option-error"></div>
                    <div class="options-option-card" id="options-img-input-option">
                        <label for="profileBannerInput" class="profile-avatar-upload-label">${getTextString("OPTIONS_EXTRA_PROFILE_CHANGE_BANNER")}</label>
                        <input type="file" id="profileBannerInput" class="profile-avatar-file-input" accept="image/*">
                        <button id="removeProfileBannerButton" class="profile-avatar-remove-button">${getTextString("OPTIONS_EXTRA_PROFILE_REMOVE_BANNER")}</button>
                    </div>
                    <div id="options-banner-img-input-option-error"></div>
                    <div class="options-preview-profile">
                        <div class="options-preview-profile-banner-color"></div>
                        <div id="profileBannerPreview" class="options-preview-profile-banner" style="background-image: url(${localStorage.discord_banner});"></div>
                        <div class="profile-avatar-preview-bg"></div>
                        <img id="profileAvatarPreview" class="profile-avatar-preview" src="${localStorage.discord_avatar}" alt="No image uploaded">
                        <div class="options-preview-profile-status-bg"></div>
                        <div class="options-preview-profile-status-color"></div>
                        <p class="options-preview-profile-displayname" id="options-preview-profile-displayname">${localStorage.discord_username}</p>
                        <p class="options-preview-profile-username" id="options-username-preview"></p>
                    </div>
                `;

                if (localStorage.dev === "true") {
                    document.getElementById("staff-todo-list").innerHTML = `
                        <p class="center-text" style="font-size: 20px; margin-top: 20px; margin-bottom: 0px; color: var(--white);">${getTextString("OPTIONS_EXTRA_STAFF_TODO_LIST")}</p>
                        <p class="center-text" style="font-size: 15px; margin-top: 0px; margin-bottom: 0px; color: var(--white);">${getTextString("OPTIONS_EXTRA_STAFF_TODO_LIST_1")}</p>
                        <p class="center-text" style="font-size: 15px; margin-top: 0px; margin-bottom: 0px; color: var(--white);">${getTextString("OPTIONS_EXTRA_STAFF_TODO_LIST_2")}</p>
                        <p class="center-text" style="font-size: 15px; margin-top: 0px; margin-bottom: 0px; color: var(--white);">${getTextString("OPTIONS_EXTRA_STAFF_TODO_LIST_3")}</p>
                        <p class="center-text" style="font-size: 15px; margin-top: 0px; margin-bottom: 0px; color: var(--white);">${getTextString("OPTIONS_EXTRA_STAFF_TODO_LIST_4")}</p>
                        <p class="center-text" style="font-size: 15px; margin-top: 0px; margin-bottom: 0px; color: var(--white);">${getTextString("OPTIONS_EXTRA_STAFF_TODO_LIST_5")}</p>
                    `;
                }

                if (localStorage.experiment_2025_03_item_reviews === "Treatment 3: Simulate logged in") {
                    let cantChangeProfileWhenLoggedIn = document.createElement("div");

                    cantChangeProfileWhenLoggedIn.classList.add('cant-change-profile-when-logged-in-container');
                    cantChangeProfileWhenLoggedIn.innerHTML = `
                        <div class="profile-no-text-container">
                            <p class="center-text" style="font-size: 20px; margin-top: 20px; margin-bottom: 0px; color: white;">${getTextString("OPTIONS_EXTRA_PROFILE_ERROR_1")}</p>
                            <p class="center-text" style="font-size: 15px; margin-top: 0px; margin-bottom: 0px; color: white;">${getTextString("OPTIONS_EXTRA_PROFILE_ERROR_2")}</p>
                        </div>
                    `;


                    document.getElementById("username-picker-container-dev").appendChild(cantChangeProfileWhenLoggedIn);
                }

                
                
                document.getElementById("accessibility-options-container").innerHTML = `
                    <p class="center-text" style="font-size: 20px; margin-top: 20px; margin-bottom: 0px; color: var(--white);">${getTextString("OPTIONS_SIDEBAR_ACCESSIBILITY")}</p>
                    <div id="currency-picker-experiment-container"></div>
                    <div class="options-option-card" id="reduced-motion-box-option">
                        <p class="option-card-title" style="color: var(--white);">${getTextString("OPTIONS_SIDEBAR_REDUCED_MOTION")}</p>
                        <input class="options-toggle-box" onclick="reducedMotionChecked();" style="cursor: pointer; scale: 2; posision: center;" id="reduced-motion-box" type="checkbox">
                    </div>
                `; 
                document.getElementById("old-options-container-dev").innerHTML = ``;

                document.getElementById("options-username-preview").textContent = localStorage.discord_username.toLowerCase();

                if (localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker") {
                    document.getElementById("currency-picker-experiment-container").innerHTML = `
                        <div class="options-option-card" id="has-nitro-box-option">
                            <p class="option-card-title" style="color: var(--white);">${getTextString("OPTIONS_SIDEBAR_NITRO_DISCOUNT")}</p>
                            <input class="options-toggle-box" onclick="optionsHasNitroChecked();" style="cursor: pointer; scale: 2; posision: center;" id="options-has-nitro-box" type="checkbox">
                        </div>
                    `;
                    // <div class="options-option-card">
                    //     <p class="option-card-title" style="color: var(--white);">Currency</p>
                    //     <select id="currency_picker_container" class="options-dropdown">
                    //     </select>
                    // </div>
                }


                const avatarImageInput = document.getElementById("profileAvatarInput");
                const avatarImagePreview = document.getElementById("profileAvatarPreview");
                const removeAvatarImageButton = document.getElementById("removeProfileAvatarButton");

                // Load saved image from localStorage on page load
                document.addEventListener("DOMContentLoaded", () => {
                    const savedImage = localStorage.getItem("discord_avatar");
                    if (savedImage) {
                        avatarImagePreview.src = savedImage;
                    }
                });

                // Handle image upload
                avatarImageInput.addEventListener("change", function () {
                    document.getElementById("options-avatar-img-input-option-error").classList.remove('options-img-input-option-error')
                    document.getElementById("options-avatar-img-input-option-error").innerHTML = ``;
                    const file = this.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function (event) {
                            const dataUrl = event.target.result;
                            try {
                                localStorage.setItem("discord_avatar", dataUrl);
                                avatarImagePreview.src = dataUrl;
                            } catch(error) {
                                document.getElementById("options-avatar-img-input-option-error").classList.add('options-img-input-option-error')
                                document.getElementById("options-avatar-img-input-option-error").innerHTML = `
                                    <p>${getTextString("OPTIONS_EXTRA_PROFILE_FILE_TOO_BIG")}</p>
                                `;
                            }
                        };
                        reader.readAsDataURL(file);
                    }
                });

                // Handle image removal
                removeAvatarImageButton.addEventListener("click", function () {
                    setRandomDiscordAvatar()
                    avatarImagePreview.src = localStorage.discord_avatar;
                });


                const bannerImageInput = document.getElementById("profileBannerInput");
                const bannerImagePreview = document.getElementById("profileBannerPreview");
                const removeBannerImageButton = document.getElementById("removeProfileBannerButton");


                if (localStorage.discord_banner === ``) {
                    removeBannerImageButton.style.display = 'none';
                }

                // Load saved image from localStorage on page load
                document.addEventListener("DOMContentLoaded", () => {
                    const savedImage = localStorage.getItem("discord_banner");
                    if (savedImage) {
                        bannerImagePreview.style.backgroundImage = `url(${savedImage})`;
                    }
                });

                // Handle image upload
                bannerImageInput.addEventListener("change", function () {
                    document.getElementById("options-banner-img-input-option-error").classList.remove('options-img-input-option-error')
                    document.getElementById("options-banner-img-input-option-error").innerHTML = ``;
                    removeBannerImageButton.style.display = 'block';
                    const file = this.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function (event) {
                            const dataUrl = event.target.result;
                            try {
                                localStorage.setItem("discord_banner", dataUrl);
                                bannerImagePreview.style.backgroundImage = `url(${dataUrl})`;
                            } catch(error) {
                                document.getElementById("options-banner-img-input-option-error").classList.add('options-img-input-option-error')
                                document.getElementById("options-banner-img-input-option-error").innerHTML = `
                                    <p>${getTextString("OPTIONS_EXTRA_PROFILE_FILE_TOO_BIG")}</p>
                                `;
                            }
                        };
                        reader.readAsDataURL(file);
                    }
                });

                // Handle image removal
                removeBannerImageButton.addEventListener("click", function () {
                    removeBannerImageButton.style.display = 'none';
                    localStorage.discord_banner = ``
                    bannerImagePreview.style.backgroundImage = '';
                });
            }

            try {
                const currency_picker_currencies = ["USD", "Discord Orb"];

                const currency_picker_currencies_picker = document.getElementById("currency_picker_container");
                

                populate_currency_picker();
                
                const storedTreatment = localStorage.getItem("currency");
                if (storedTreatment) {
                    currency_picker_currencies_picker.value = storedTreatment;
                }

                function populate_currency_picker() {
                    currency_picker_currencies.forEach((treatments) => {
                        const optElement = document.createElement("option");
                        optElement.value = treatments;
                        optElement.textContent = treatments;
                        currency_picker_currencies_picker.appendChild(optElement);
                    });
                }

                currency_picker_currencies_picker.addEventListener("change", () => {
                    const selectedTreatment = currency_picker_currencies_picker.value;
                
                    // Store the selection
                    localStorage.setItem("currency", selectedTreatment);
                });
            } catch(error) {
            }

            if (localStorage.experiment_2024_12_theme_picker == "Treatment 1: Enabled" || localStorage.experiment_2024_12_theme_picker == "Treatment 2: Enabled with custom css") {
                document.getElementById("theme-picker-container").innerHTML = `
                    <p class="center-text" style="font-size: 20px; margin-top: 0px; margin-bottom: 0px; color: var(--white);">${getTextString("OPTIONS_SIDEBAR_APPEARANCE")}</p>
                    <p class="center-text" id="default-theme-title" style="display: none; font-size: 15px; margin-top: 0px; color: var(--white);">${getTextString("OPTIONS_SIDEBAR_APPEARANCE_1")}</p>
                    <div id="theme-selection-box-container">
                        <div class="theme-selection-box" title="${getTextString("OPTIONS_SIDEBAR_APPEARANCE_THEME_1")}" id="theme-dark-button" onclick="themeDarkChecked();"></div>
                        <div class="theme-selection-box" title="${getTextString("OPTIONS_SIDEBAR_APPEARANCE_THEME_2")}" id="theme-midnight-button" onclick="themeMidnightChecked();"></div>
                        <div class="theme-selection-box" title="${getTextString("OPTIONS_SIDEBAR_APPEARANCE_THEME_3")}" id="theme-light-button" onclick="themeLightChecked();"></div>
                    </div>
                    <p class="center-text" id="custom-theme-title" style="display: none; font-size: 15px; margin-top: 0px; color: var(--white);">${getTextString("OPTIONS_SIDEBAR_APPEARANCE_2")}</p>
                `;
                if (localStorage.experiment_2024_12_theme_picker == "Treatment 2: Enabled with custom css") {
                    const themes_container = document.getElementById("theme-picker-container");

                    document.getElementById("default-theme-title").style.display = 'unset';
                    document.getElementById("custom-theme-title").style.display = 'unset';

                    let custom_themes = document.createElement("div");
                    custom_themes.id = 'theme-selection-box-container';

                    custom_themes.innerHTML = `
                        <div class="theme-selection-box" title="Neon Green" id="theme-neongreen-button" onclick="themeNeonGreenChecked();">
                            <div class="edit-custom-theme-box"></div>
                            <div class="delete-custom-theme-box"></div>
                        </div>
                        <div class="theme-selection-box" title="Neon Purple" id="theme-neonpurple-button" onclick="themeNeonPurpleChecked();">
                            <div class="edit-custom-theme-box"></div>
                            <div class="delete-custom-theme-box"></div>
                        </div>
                        <div id="add-custom-theme-box-container">
                            <div class="theme-selection-box" title="Add Custon Theme" id="theme-custom-button" onclick="themeAddCustom();">
                                <svg class="circleIcon_db6521" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M13 5a1 1 0 1 0-2 0v6H5a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V5Z" class=""></path></svg>
                            </div>
                        </div>
                    `;

                    themes_container.appendChild(custom_themes);
                }
            }

            if (localStorage.sa_theme == "dark") {
                try {
                    document.getElementById("theme-dark-button").classList.add('theme-selection-box-selected');
                    document.body.classList.add('theme-dark');
                } catch (error) {
                }
            } else
            if (localStorage.sa_theme == "midnight") {
                try {
                    document.getElementById("theme-midnight-button").classList.add('theme-selection-box-selected');
                    document.body.classList.add('theme-midnight');
                } catch (error) {
                }
            } else
            if (localStorage.sa_theme == "light") {
                try {
                    document.getElementById("theme-light-button").classList.add('theme-selection-box-selected');
                    document.body.classList.add('theme-light');
                } catch (error) {
                }
            } else
            if (localStorage.sa_theme == "neongreen") {
                try {
                    document.getElementById("theme-neongreen-button").classList.add('theme-selection-box-selected');
                    document.body.classList.add('theme-neongreen');
                } catch (error) {
                }
            } else
            if (localStorage.sa_theme == "neonpurple") {
                try {
                    document.getElementById("theme-neonpurple-button").classList.add('theme-selection-box-selected');
                    document.body.classList.add('theme-neonpurple');
                } catch (error) {
                }
            }
            

            if (localStorage.fetch_collectibles_variants == "true") {
                document.getElementById("is-in-shop-box").checked = true;
            }
        
            if (localStorage.fetch_collectibles_variants == "none") {
                document.getElementById("is-in-shop-box").checked = true;
            }
    
            if (localStorage.reduced_motion == "true") {
                document.getElementById("reduced-motion-box").checked = true;
            }

            if (localStorage.is_nitro_user == "true" && localStorage.experiment_2025_02_extra_options && localStorage.experiment_2025_02_extra_options != "Treatment 5: Enabled w/o currency picker" && localStorage.experiment_2025_02_extra_options != "Treatment -1: Disabled") {
                document.getElementById("options-has-nitro-box").checked = true;
            }

            if (localStorage.disable_client_banner_overrides == "true") {
                document.getElementById("disable-banner-overrides-box").checked = true;
            }

            fetch(api + DOWNLOADABLE_DATA, {
                method: "GET",
                headers: {
                    "Password": api_password,
                    "Token": api_token
                }
            })
                .then(response => response.json())
                .then(data => {
                    // Call the function to display the data
                    displayData(data);
                })
                .catch(error => {
                    console.error('Error fetching the API:', error);
                });
                
                // Function to display the data in the HTML
                function displayData(data) {
                const content = document.getElementById('downloadables-output');
                const template = document.getElementById('downloadables-api-template');
                
                data.forEach(item => {
                    // Clone the template
                    const clone = template.content.cloneNode(true);
                
                    // Fill in the name and summary
                    clone.querySelector('.name').textContent = item.name;
                    clone.querySelector('.summary').textContent = item.summary;
                
                    if (item.id === "discord_marketing") {
                        // Add buttons for downloadables
                        const downloadablesDiv = clone.querySelector('.downloadables');
                        item.downloadables.forEach(downloadable => {
                            const button = document.createElement('button');
                            button.textContent = `${downloadable.id}: ` + downloadable.name;
                            button.classList.add('card-button');
                            button.addEventListener('click', () => {
                                window.open('https://item.yapper.shop/marketing/' + downloadable.id + '/data.zip', '_blank');
                            });
                            downloadablesDiv.appendChild(button);
                        });
                    }

                    if (item.id === "profiles_plus_marketing") {
                        // Add buttons for downloadables
                        const downloadablesDiv = clone.querySelector('.downloadables');
                        item.downloadables.forEach(downloadable => {
                            const button = document.createElement('button');
                            button.textContent = `${downloadable.id}: ` + downloadable.name;
                            button.classList.add('card-button');
                            button.addEventListener('click', () => {
                                window.open('https://item.yapper.shop/profiles-plus-marketing/' + downloadable.id + '/data.zip', '_blank');
                            });
                            downloadablesDiv.appendChild(button);
                        });
                    }
                
                    // Append the cloned template to the content
                    content.appendChild(clone);
                });
            }


            if (localStorage.dev == "true") {
                document.getElementById("new-options-experiments-container").innerHTML = `

                    <p class="center-text" style="font-size: 30px; margin-top: 20px; margin-bottom: 0px; color: var(--white);">Experiments</p>

                    <div class="options-option-card">
                        <p class="option-card-title" style="color: var(--white);">${getTextString("OPTIONS_SIDEBAR_NO_FORCE_ROLLOUT")}</p>
                        <input class="options-toggle-box" onclick="disabledExperimentForceRollout();" style="cursor: pointer; scale: 2; posision: center;" id="experiment-force-rollout" type="checkbox">
                    </div>

                    <div id="experiments-container-output"></div>

                `;

                if (localStorage.experiment_force_rollout == "false") {
                    document.getElementById("experiment-force-rollout").checked = true;
                }

                experimentsList.forEach(({ title, id, name, treatments, needs_api_token }) => {
                    try {

                        let experimentCard = document.createElement("div");

                        experimentCard.classList.add('options-option-card');
                        experimentCard.innerHTML = `
                            <p class="option-card-title">${title}</p>
                            <p class="new-experiment-subtext">${id}</p>
                            <select id="${name}_treatment_container" class="experiment-treatment-picker">
                            </select>
                            <button class="new-experiment-clear-button" onclick="clearSetExperiment('${name}')">Clear</button>
                        `;

                        if (needs_api_token === "true") {
                            let apiNotice = document.createElement("p");

                            apiNotice.classList.add('new-experiment-subtext-api-notice');
                            apiNotice.textContent = getTextString("OPTIONS_SIDEBAR_EXPERIMENTS_API_PASSWORD")

                            experimentCard.appendChild(apiNotice);
                        }


                        document.getElementById("experiments-container-output").appendChild(experimentCard);

                        const treatmentPicker = document.getElementById(`${name}_treatment_container`);
                
                        if (!treatmentPicker) return; // Skip if element doesn't exist
                
                        populateExperimentOptions(treatmentPicker, treatments);
                
                        const storedTreatment = localStorage.getItem(name);
                        if (storedTreatment) {
                            treatmentPicker.value = storedTreatment;
                        }
                
                        treatmentPicker.addEventListener("change", () => {
                            localStorage.setItem(name, treatmentPicker.value);
                        });
                
                    } catch (error) {
                        console.error(`Error setting up experiment: ${name}`, error);
                    }
                });
                
                function populateExperimentOptions(selectElement, treatments) {
                    treatments.forEach((treatment) => {
                        const optElement = document.createElement("option");
                        optElement.value = treatment;
                        optElement.textContent = treatment;
                        selectElement.appendChild(optElement);
                    });
                }
                







                document.getElementById("new-options-dismissible-content-container").innerHTML = `

                    <p class="center-text" style="font-size: 30px; margin-top: 20px; margin-bottom: 0px; color: var(--white);">${getTextString("OPTIONS_SIDEBAR_DISMISSIBLE_CONTENT")}</p>

                    <div id="dismissible-content-container-output"></div>

                `;

                dismissibleContentList.forEach(({ title, id, name, treatments, needs_api_token }) => {
                    try {

                        let experimentCard = document.createElement("div");

                        experimentCard.classList.add('options-option-card');
                        experimentCard.innerHTML = `
                            <p class="option-card-title">${title}</p>
                            <p class="new-experiment-subtext">${id}</p>
                            <select id="${name}_treatment_container" class="experiment-treatment-picker">
                            </select>
                        `;


                        document.getElementById("dismissible-content-container-output").appendChild(experimentCard);

                        const treatmentPicker = document.getElementById(`${name}_treatment_container`);
                
                        if (!treatmentPicker) return; // Skip if element doesn't exist
                
                        populateDismissibleContentOptions(treatmentPicker, treatments);
                
                        const storedTreatment = localStorage.getItem(name);
                        if (storedTreatment) {
                            treatmentPicker.value = storedTreatment;
                        }
                
                        treatmentPicker.addEventListener("change", () => {
                            localStorage.setItem(name, treatmentPicker.value);
                        });
                
                    } catch (error) {
                        console.error(`Error setting up experiment: ${name}`, error);
                    }
                });
                
                function populateDismissibleContentOptions(selectElement, treatments) {
                    treatments.forEach((treatment) => {
                        const optElement = document.createElement("option");
                        optElement.value = treatment;
                        optElement.textContent = treatment;
                        selectElement.appendChild(optElement);
                    });
                }
            }
            if (localStorage.experiment_2025_03_extra_options_dismissible_content === "Treatment 1: V1") {
                localStorage.dismissible_newProfileSettings = "Treatment 1: Seen"
                if (document.getElementById("newProfileSettingsDismissible")) {
                    document.getElementById("newProfileSettingsDismissible").remove();
                }
            }
        }
    }

    experimentsList.forEach(({ name, rollout }) => {
        try {
            if (localStorage.experiment_force_rollout != "false") {
                localStorage.setItem(name, rollout);
            } else if (localStorage.getItem(name) == null) {
                localStorage.setItem(name, rollout);
            }
    
        } catch (error) {
            console.error(`Error setting up experiment: ${name}`, error);
        }
    });

    function clearSetExperiment(experimentName) {
        const experiment = experimentsList.find(exp => exp.name === experimentName);
        
        if (!experiment) {
            console.warn(`Experiment "${experimentName}" not found.`);
            return;
        }
    
        const { rollout } = experiment;
        const treatmentPicker = document.getElementById(`${experimentName}_treatment_container`);
    
        if (treatmentPicker) {
            treatmentPicker.value = rollout;
            localStorage.setItem(experimentName, rollout);
        }
    }


    function changeUsernameFromInput() {
        const input = document.getElementById('profile-username-text-input')

        localStorage.discord_username = input.value;

        const displayname = document.getElementById('options-preview-profile-displayname')

        displayname.textContent = input.value;


        const usernamename = document.getElementById('options-username-preview')

        usernamename.textContent = input.value.toLowerCase();
    }

    function changeAvatarFromInput() {
        const input = document.getElementById('profile-avatar-text-input')

        localStorage.discord_avatar = input.value;
    }


    if (localStorage.experiment_2025_03_extra_options_dismissible_content === "Treatment 1: V1") {

        if (localStorage.dismissible_newProfileSettings != "Treatment 1: Seen") {
            let newProfileSettingsDismissible = document.createElement("div");

            newProfileSettingsDismissible.onclick = function() {
                optionsSidebarToggle();
                localStorage.dismissible_newProfileSettings = "Treatment 1: Seen"
                newProfileSettingsDismissible.remove();
            };

            newProfileSettingsDismissible.classList.add('newProfileSettingsDismissible');

            newProfileSettingsDismissible.id = `newProfileSettingsDismissible`;

            document.body.appendChild(newProfileSettingsDismissible);
        }
    }

    if (localStorage.experiment_2024_12_profiles_plus_marketing_variants === "Treatment 1: Paper Beach V2") {

        if (localStorage.dismissible_paper_beach_v2_marketing != "Treatment 1: Seen") {
            const profiles_plus_tab = document.getElementById("pplus-tab");
            if (profiles_plus_tab) {
                profiles_plus_tab.innerHTML = `
                    <img class="paper-beach-v2-greeting-catgirl-1" src="https://cdn.yapper.shop/assets/null.png">
                    <p class="dm-button-text">${getTextString("PROFILES_PLUS_BROWSE_ALL_TAB_TITLE")}</p>
                    <div class="dm-new-icon">${getTextString("DM_NEW")}</div>
                    <div class="dm-tab-preview-avatar-decoration-rotate">
                        <div class="dm-tab-preview-avatar-decoration-container" id="dm-tab-preview-avatar-decoration-container">
                            <img class="dm-tab-preview-avatar-decoration-3" id="dm-tab-preview-avatar-decoration" src="https://cdn.yapper.shop/custom-collectibles/paper-beach/avatar-decorations/2.png">
                        </div>
                        <div class="dm-tab-preview-avatar-decoration-back"></div>
                    </div>
                    <p class="dm-button-text dm-button-text-marketing-1">${getTextString("DISMISSIBLE_CONTENT_PAPER_BEACH_V2_TITLE")}</p>
                `;
                profiles_plus_tab.classList.add('paper_beach_v2_marketing_tab');
    
                profiles_plus_tab.addEventListener("mouseenter", () => {
                    if (document.getElementById("dm-tab-preview-avatar-decoration").src == "https://cdn.yapper.shop/custom-collectibles/paper-beach/avatar-decorations/12.png") {
                        document.getElementById("dm-tab-preview-avatar-decoration-container").innerHTML = `
                            <img class="dm-tab-preview-avatar-decoration-3" id="dm-tab-preview-avatar-decoration" src="https://cdn.yapper.shop/custom-collectibles/paper-beach/avatar-decorations/8.png">
                        `;
                    } else if (document.getElementById("dm-tab-preview-avatar-decoration").src == "https://cdn.yapper.shop/custom-collectibles/paper-beach/avatar-decorations/8.png") {
                        document.getElementById("dm-tab-preview-avatar-decoration-container").innerHTML = `
                            <img class="dm-tab-preview-avatar-decoration-3" id="dm-tab-preview-avatar-decoration" src="https://cdn.yapper.shop/custom-collectibles/paper-beach/avatar-decorations/2.png">
                        `;
                    } else if (document.getElementById("dm-tab-preview-avatar-decoration").src == "https://cdn.yapper.shop/custom-collectibles/paper-beach/avatar-decorations/2.png") {
                        document.getElementById("dm-tab-preview-avatar-decoration-container").innerHTML = `
                            <img class="dm-tab-preview-avatar-decoration-3" id="dm-tab-preview-avatar-decoration" src="https://cdn.yapper.shop/custom-collectibles/paper-beach/avatar-decorations/12.png">
                        `;
                    }
                });
            }
        }
    }


    if (localStorage.experiment_2024_12_profiles_plus_marketing_variants === "Treatment 2: Roblox Doors") {

        if (localStorage.dismissible_roblox_doors_marketing != "Treatment 1: Seen") {
            const profiles_plus_tab = document.getElementById("pplus-tab");
            if (profiles_plus_tab) {
                profiles_plus_tab.innerHTML = `
                    <img class="paper-beach-v2-greeting-catgirl-1" src="https://cdn.yapper.shop/assets/null.png">
                    <p class="dm-button-text">${getTextString("PROFILES_PLUS_BROWSE_ALL_TAB_TITLE")}</p>
                    <div class="dm-new-icon">${getTextString("DM_NEW")}</div>
                    <div class="dm-tab-preview-avatar-decoration-rotate">
                        <div class="dm-tab-preview-avatar-decoration-container" id="dm-tab-preview-avatar-decoration-container">
                            <img class="dm-tab-preview-avatar-decoration-3" id="dm-tab-preview-avatar-decoration" src="https://cdn.yapper.shop/custom-collectibles/paper-beach/avatar-decorations/2.png">
                        </div>
                        <div class="dm-tab-preview-avatar-decoration-back"></div>
                    </div>
                    <p class="dm-button-text dm-button-text-marketing-1">${getTextString("DISMISSIBLE_CONTENT_ROBLOX_DOORS_TITLE")}</p>
                `;
                profiles_plus_tab.classList.add('roblox_doors_marketing_tab');
    
                profiles_plus_tab.addEventListener("mouseenter", () => {
                    if (document.getElementById("dm-tab-preview-avatar-decoration").src == "https://cdn.yapper.shop/custom-collectibles/paper-beach/avatar-decorations/12.png") {
                        document.getElementById("dm-tab-preview-avatar-decoration-container").innerHTML = `
                            <img class="dm-tab-preview-avatar-decoration-3" id="dm-tab-preview-avatar-decoration" src="https://cdn.yapper.shop/custom-collectibles/paper-beach/avatar-decorations/8.png">
                        `;
                    } else if (document.getElementById("dm-tab-preview-avatar-decoration").src == "https://cdn.yapper.shop/custom-collectibles/paper-beach/avatar-decorations/8.png") {
                        document.getElementById("dm-tab-preview-avatar-decoration-container").innerHTML = `
                            <img class="dm-tab-preview-avatar-decoration-3" id="dm-tab-preview-avatar-decoration" src="https://cdn.yapper.shop/custom-collectibles/paper-beach/avatar-decorations/2.png">
                        `;
                    } else if (document.getElementById("dm-tab-preview-avatar-decoration").src == "https://cdn.yapper.shop/custom-collectibles/paper-beach/avatar-decorations/2.png") {
                        document.getElementById("dm-tab-preview-avatar-decoration-container").innerHTML = `
                            <img class="dm-tab-preview-avatar-decoration-3" id="dm-tab-preview-avatar-decoration" src="https://cdn.yapper.shop/custom-collectibles/paper-beach/avatar-decorations/12.png">
                        `;
                    }
                });
            }
        }
    }





    function themeDarkChecked() {
        clearCurrentTheme()
        localStorage.sa_theme = "dark"
        document.body.classList.add('theme-dark');
        document.getElementById("theme-dark-button").classList.add('theme-selection-box-selected');
    }

    function themeMidnightChecked() {
        clearCurrentTheme()
        localStorage.sa_theme = "midnight"
        document.body.classList.add('theme-midnight');
        document.getElementById("theme-midnight-button").classList.add('theme-selection-box-selected');
    }

    function themeLightChecked() {
        clearCurrentTheme()
        localStorage.sa_theme = "light"
        document.body.classList.add('theme-light');
        document.getElementById("theme-light-button").classList.add('theme-selection-box-selected');
    }

    function themeNeonGreenChecked() {
        clearCurrentTheme()
        localStorage.sa_theme = "neongreen"
        document.body.classList.add('theme-neongreen');
        document.getElementById("theme-neongreen-button").classList.add('theme-selection-box-selected');
    }

    function themeNeonPurpleChecked() {
        clearCurrentTheme()
        localStorage.sa_theme = "neonpurple"
        document.body.classList.add('theme-neonpurple');
        document.getElementById("theme-neonpurple-button").classList.add('theme-selection-box-selected');
    }

    function clearCurrentTheme() {
        try {
            document.getElementById("theme-dark-button").classList.remove('theme-selection-box-selected');
            document.body.classList.remove('theme-dark');
            document.getElementById("theme-midnight-button").classList.remove('theme-selection-box-selected');
            document.body.classList.remove('theme-midnight');
            document.getElementById("theme-light-button").classList.remove('theme-selection-box-selected');
            document.body.classList.remove('theme-light');
            document.getElementById("theme-neongreen-button").classList.remove('theme-selection-box-selected');
            document.body.classList.remove('theme-neongreen');
            document.getElementById("theme-neonpurple-button").classList.remove('theme-selection-box-selected');
            document.body.classList.remove('theme-neonpurple');
        } catch (error) {
        }
    }

    function disabledExperimentForceRollout() {
        if (localStorage.experiment_force_rollout != "true") {
            localStorage.experiment_force_rollout = "true"
        }
        else {
            localStorage.experiment_force_rollout = "false"
        }
    }

    function inShopIsChecked() {
        if (localStorage.fetch_collectibles_variants != "true") {
            localStorage.fetch_collectibles_variants = "true"
        }
        else {
            localStorage.fetch_collectibles_variants = "false"
        }
        if (typeof fetchData === 'function') {
            fetchData(pageCheck());
        }
    }

    function reducedMotionChecked() {
        if (localStorage.reduced_motion != "true") {
            localStorage.reduced_motion = "true"
        }
        else {
            localStorage.reduced_motion = "false"
        }
        if (typeof fetchData === 'function') {
            fetchData(pageCheck());
        }
    }

    function optionsHasNitroChecked() {
        if (localStorage.is_nitro_user != "true") {
            localStorage.is_nitro_user = "true"
        } else {
            localStorage.is_nitro_user = "false"
        }
        if (typeof fetchData === 'function') {
            fetchData(pageCheck());
        }
    }

    function disableBannerOverridesChecked() {
        if (localStorage.disable_client_banner_overrides != "true") {
            localStorage.disable_client_banner_overrides = "true"
        }
        else {
            localStorage.disable_client_banner_overrides = "false"
        }
        if (typeof fetchData === 'function') {
            fetchData(pageCheck());
        }
    }
    
    function noBundlesInShopIsChecked() {
        if (localStorage.shop_have_no_bundles != "true") {
            localStorage.shop_have_no_bundles = "true"
        }
        else {
            localStorage.shop_have_no_bundles = "false"
        }
        if (typeof fetchData === 'function') {
            pageCheck();
        }
    }
    
    function openMobileModal() {
        const lost_modal = document.getElementById('modal-housing');
        lost_modal.innerHTML = `
            <div class="modal-housing-1" id="modal-housing-1">
                <div class="lost-modal">
                    <div class="lost-modal-inner">
                        <h1 class="center-text" style="font-size: 54px; margin-top: 40px;">Looks like you're on mobile</h1>
                        <p>Would you like to use the mobile client?</p>
                        <button class="refresh-button" onclick="location.href='https://m.yapper.shop/';">Yes</button>
                        <button class="refresh-button" onclick="closeMobileModal()">No</button>
                    </div>
                </div>
            </div>
        `;
    }
    
    function openOptionsModal() {
        const options_modal = document.getElementById('modal-housing');
        options_modal.innerHTML = `
        <div class="modal-housing-1" id="modal-housing-1">
            <div class="lost-modal">
                <div class="lost-modal-inner">
                    <h1 class="center-text" style="font-size: 54px; margin-top: 40px;">Options</h1>
                    <div>
                        <div class="experiment-card-holder">
                            <div class="experiment-card" id="is-in-shop-box-option">
                                <p>Shop: Hide removed items</p>
                                <p class="experiment-subtext">This will hide all categories that are not currently in the shop</p>
                                <input class="options-toggle-box" onclick="inShopIsChecked();" style="cursor: pointer; scale: 2; posision: center;" id="is-in-shop-box" type="checkbox">
                            </div>
                            <div class="experiment-card">
                                <p>Shop: Hide bundles</p>
                                <p class="experiment-subtext">This will hide all bundles in the shop page</p>
                                <input class="options-toggle-box" onclick="noBundlesInShopIsChecked();" style="cursor: pointer; scale: 2; posision: center;" id="no-bundles-in-shop-box" type="checkbox">
                            </div>
                        </div>
                    </div>
                    <button class="refresh-button" onclick="closeLostModal()">Close</button>
                </div>
            </div>
        </div>
        `;
    
        if (localStorage.fetch_collectibles_variants == "true") {
            document.getElementById("is-in-shop-box").checked = true;
        }
    
        if (localStorage.fetch_collectibles_variants == "none") {
            document.getElementById("is-in-shop-box").checked = true;
        }
    
        if (localStorage.items_in_shop != "true") {
            if (localStorage.items_in_shop != "none") {
                document.getElementById("is-in-shop-box-option").style.display = 'none';
            }
        }
    
    
        if (localStorage.shop_have_no_bundles == "true") {
            document.getElementById("no-bundles-in-shop-box").checked = true;
        }
    }
    
    function openDownloadsModal() {
        const downloads_modal = document.getElementById('modal-housing');
        downloads_modal.innerHTML = `
        <div class="modal-housing-1" id="modal-housing-1">
            <div class="dev-modal">
                <div class="dev-modal-inner">
                    <h1 class="center-text" style="font-size: 54px; margin-top: 40px;">Manual Downloads</h1>
                    <p style="margin-top: -50px;">Experimental</p>
                    <div>
                        <div class="experiment-card-holder">
                        <template id="downloadables-api-template">
                            <div class="item experiment-card">
                                <p class="name"></p>
                                <p class="summary experiment-subtext"></p>
                                <div class="downloadables"></div>
                            </div>
                        </template>
                        <div class="experiment-card-holder" id="downloadables-output"></div>
                    </div>
                    <button class="refresh-button" onclick="closeLostModal()">Close</button>
                </div>
            </div>
        </div>
        `;
        
        // Fetch the data from the API
        fetch(DOWNLOADABLE_DATA, {
            method: "GET",
            headers: {
                "Password": api_password,
                "Token": api_token
            }
        })
            .then(response => response.json())
            .then(data => {
                // Call the function to display the data
                displayData(data);
            })
            .catch(error => {
                console.error('Error fetching the API:', error);
            });
            
            // Function to display the data in the HTML
            function displayData(data) {
            const content = document.getElementById('downloadables-output');
            const template = document.getElementById('downloadables-api-template');
            
            data.forEach(item => {
                // Clone the template
                const clone = template.content.cloneNode(true);
            
                // Fill in the name and summary
                clone.querySelector('.name').textContent = item.name;
                clone.querySelector('.summary').textContent = item.summary;
            
                // Add buttons for downloadables
                const downloadablesDiv = clone.querySelector('.downloadables');
                item.downloadables.forEach(downloadable => {
                    const button = document.createElement('button');
                    button.textContent = downloadable.name;
                    button.classList.add('card-button');
                    button.addEventListener('click', () => {
                        window.open(downloadable.url, '_blank');
                    });
                    downloadablesDiv.appendChild(button);
                });
            
                // Append the cloned template to the content
                content.appendChild(clone);
            });
        }
    
    }
    
    
    function openDevModal() {
        if (localStorage.dev == "true") {
            document.getElementById('modal-housing').innerHTML = `
            <div class="modal-housing-1" id="modal-housing-1">
                <div class="dev-modal">
                    <div class="dev-modal-inner">
                        <h1 class="center-text" style="font-size: 54px; margin-top: -10px; margin-bottom: -5px;">${getTextString("OPTIONS_DEV_TITLE")}</h1>
                        <p>${getTextString("OPTIONS_DEV_DESC")}</p>
                        <button class="staff-close-button" onclick="closeDevModal()">${getTextString("OPTIONS_DEV_CLOSE")}</button>
                        <button class="staff-safe-mode-button" onclick="turnOffDevMode()">${getTextString("OPTIONS_DEV_SAFE_MODE")}</button>
                        <hr>
                        <div>
                            <h2>Debug</h2>
                            <p class="experiment-subtext">Overrides</p>
                            <div class="experiment-card-holder">
                                <div class="experiment-card">
                                    <p>Disable Client Reowrk (Possible to re-enable on old client)</p>
                                    <p class="experiment-subtext">2024-12_disable_client_rework</p>
                                    <button class="newish-experiment-button" onclick="disableClientReworkTrue()" id="2024-12_disable_client_rework-1">1</button>
                                    <button class="newish-experiment-button" onclick="disableClientReworkFalse()" id="2024-12_disable_client_rework-00">-1</button>
                                </div>
                                <div class="experiment-card">
                                    <p>Force Private API</p>
                                    <p class="experiment-subtext">2024-12_force_all_api_to_fectch_private_api</p>
                                    <button class="newish-experiment-button" onclick="forceAllApiToFectchPrivateApiTrue()" id="2024-12_force_all_api_to_fectch_private_api-1">1</button>
                                    <button class="newish-experiment-button" onclick="forceAllApiToFectchPrivateApiFalse()" id="2024-12_force_all_api_to_fectch_private_api-2">-1</button>
                                </div>
                                <div class="experiment-card">
                                    <p>Show Leaks Button</p>
                                    <p class="experiment-subtext">2024-11_override_leaks_button</p>
                                    <button class="newish-experiment-button" onclick="overrideLeaksButtonShow()" id="2024-11_override_leaks_button-1">1</button>
                                    <button class="newish-experiment-button" onclick="overrideLeaksButtonHide()" id="2024-11_override_leaks_button-2">-1</button>
                                </div>
                                <div class="experiment-card">
                                    <p>Project Joshua</p>
                                    <p class="experiment-subtext">2024-11_unreleased_discord_collectibles</p>
                                    <button class="newish-experiment-button" onclick="unreleasedDiscordCollectiblesTrue()" id="2024-11_unreleased_discord_collectibles-1">1</button>
                                    <button class="newish-experiment-button" onclick="unreleasedDiscordCollectiblesFalse()" id="2024-11_unreleased_discord_collectibles-2">-1</button>
                                </div>
                                <div class="experiment-card">
                                    <p>Unreleased Profiles Plus Items</p>
                                    <p class="experiment-subtext">2024-09_profiles_plus</p>
                                    <button class="newish-experiment-button" onclick="unreleasedProfilesPlusItemsTrue()" id="2024-09_profiles_plus-1">1</button>
                                    <button class="newish-experiment-button" onclick="unreleasedProfilesPlusItemsFalse()" id="2024-09_profiles_plus-2">-1</button>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <div>
                            <h2>Modals</h2>
                            <div class="experiment-card-holder">
                                <div class="experiment-card">
                                    <p>Lost</p>
                                    <p class="experiment-subtext">modal no longer supported on client</p>
                                    <button class="refresh-button" onclick="openLostModal()">Open</button>
                                </div>
                                <div class="experiment-card">
                                    <p>Dev</p>
                                    <button class="refresh-button" onclick="openDevModal()">Open</button>
                                </div>
                                <div class="experiment-card">
                                    <p>Options</p>
                                    <button class="refresh-button" onclick="openOptionsModal()">Open</button>
                                </div>
                                <div class="experiment-card">
                                    <p>Downloads</p>
                                    <button class="refresh-button" onclick="openDownloadsModal()">Open</button>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <div>
                            <h2>Local Storage Overrides</h2>
                            <p class="experiment-subtext">Refresh the page for changes to take effect</p>
                            <button class="refresh-button" onclick="localStorage.clear()">Delete All</button>
                            <input type="text" class="dev-local-storage-input-1" id="keyInput" placeholder="Enter key">
                            <input type="text" class="dev-local-storage-input-1" id="valueInput" placeholder="Enter value">
                            <button class="refresh-button" onclick="saveToLocalStorage()">Save</button>
                            <div id="storageItems"></div>
                        </div>
                        <hr>
                        <div>

                            <p>${getTextString("APP_VERSION")}${tcbx926n29}</p>
                        </div>
                        <hr>
                        <button class="staff-close-button" onclick="closeDevModal()">${getTextString("OPTIONS_DEV_CLOSE")}</button>
                        <button class="staff-safe-mode-button" onclick="turnOffDevMode()">${getTextString("OPTIONS_DEV_SAFE_MODE")}</button>
                    </div>
                </div>
            </div>
            `;
    
        
        
            // if (localStorage.top_selling_item != "true") {
            //     if (localStorage.top_selling_item != "false") {
            //         if (localStorage.top_selling_item != "two") {
            //             document.getElementById("2024-11_top_selling_item_tag-2").classList.remove('newish-experiment-button-selected');
            //             document.getElementById("2024-11_top_selling_item_tag-1").classList.remove('newish-experiment-button-selected');
            //             document.getElementById("2024-11_top_selling_item_tag-0").classList.add('newish-experiment-button-selected');
            //             document.getElementById("2024-11_top_selling_item_tag-00").classList.remove('newish-experiment-button-selected');
            //         }
            //     }
            // }
        
            // if (localStorage.top_selling_item == "two") {
            //     document.getElementById("2024-11_top_selling_item_tag-2").classList.add('newish-experiment-button-selected');
            //     document.getElementById("2024-11_top_selling_item_tag-1").classList.remove('newish-experiment-button-selected');
            //     document.getElementById("2024-11_top_selling_item_tag-0").classList.remove('newish-experiment-button-selected');
            //     document.getElementById("2024-11_top_selling_item_tag-00").classList.remove('newish-experiment-button-selected');
            // }
            
            // if (localStorage.top_selling_item == "true") {
            //     document.getElementById("2024-11_top_selling_item_tag-2").classList.remove('newish-experiment-button-selected');
            //     document.getElementById("2024-11_top_selling_item_tag-1").classList.add('newish-experiment-button-selected');
            //     document.getElementById("2024-11_top_selling_item_tag-0").classList.remove('newish-experiment-button-selected');
            //     document.getElementById("2024-11_top_selling_item_tag-00").classList.remove('newish-experiment-button-selected');
            // }
        
            // if (localStorage.top_selling_item == "false") {
            //     document.getElementById("2024-11_top_selling_item_tag-2").classList.remove('newish-experiment-button-selected');
            //     document.getElementById("2024-11_top_selling_item_tag-1").classList.remove('newish-experiment-button-selected');
            //     document.getElementById("2024-11_top_selling_item_tag-0").classList.remove('newish-experiment-button-selected');
            //     document.getElementById("2024-11_top_selling_item_tag-00").classList.add('newish-experiment-button-selected');
            // }
        
        
        
            // if (localStorage.item_data_downloads != "true") {
            //     if (localStorage.item_data_downloads != "false") {
            //         if (localStorage.item_data_downloads != "two") {
            //             document.getElementById("2024-11_item_data_downloads-2").classList.remove('newish-experiment-button-selected');
            //             document.getElementById("2024-11_item_data_downloads-1").classList.remove('newish-experiment-button-selected');
            //             document.getElementById("2024-11_item_data_downloads-0").classList.add('newish-experiment-button-selected');
            //             document.getElementById("2024-11_item_data_downloads-00").classList.remove('newish-experiment-button-selected');
            //         }
            //     }
            // }
        
            // if (localStorage.item_data_downloads == "two") {
            //     document.getElementById("2024-11_item_data_downloads-2").classList.add('newish-experiment-button-selected');
            //     document.getElementById("2024-11_item_data_downloads-1").classList.remove('newish-experiment-button-selected');
            //     document.getElementById("2024-11_item_data_downloads-0").classList.remove('newish-experiment-button-selected');
            //     document.getElementById("2024-11_item_data_downloads-00").classList.remove('newish-experiment-button-selected');
            // }
            
            // if (localStorage.item_data_downloads == "true") {
            //     document.getElementById("2024-11_item_data_downloads-2").classList.remove('newish-experiment-button-selected');
            //     document.getElementById("2024-11_item_data_downloads-1").classList.add('newish-experiment-button-selected');
            //     document.getElementById("2024-11_item_data_downloads-0").classList.remove('newish-experiment-button-selected');
            //     document.getElementById("2024-11_item_data_downloads-00").classList.remove('newish-experiment-button-selected');
            // }
            
            // if (localStorage.item_data_downloads == "false") {
            //     document.getElementById("2024-11_item_data_downloads-2").classList.remove('newish-experiment-button-selected');
            //     document.getElementById("2024-11_item_data_downloads-1").classList.remove('newish-experiment-button-selected');
            //     document.getElementById("2024-11_item_data_downloads-0").classList.remove('newish-experiment-button-selected');
            //     document.getElementById("2024-11_item_data_downloads-00").classList.add('newish-experiment-button-selected');
            // }
        
        

            if (localStorage.full_client_rework == "true") {
                document.getElementById("2024-12_disable_client_rework-1").classList.remove('newish-experiment-button-selected');
                document.getElementById("2024-12_disable_client_rework-00").classList.add('newish-experiment-button-selected');
            }
            
            if (localStorage.full_client_rework != "true") {
                document.getElementById("2024-12_disable_client_rework-1").classList.add('newish-experiment-button-selected');
                document.getElementById("2024-12_disable_client_rework-00").classList.remove('newish-experiment-button-selected');
            }



            if (localStorage.force_all_api_to_fectch_private_api == "true") {
                document.getElementById("2024-12_force_all_api_to_fectch_private_api-1").classList.add('newish-experiment-button-selected');
                document.getElementById("2024-12_force_all_api_to_fectch_private_api-2").classList.remove('newish-experiment-button-selected');
            }
            
            if (localStorage.force_all_api_to_fectch_private_api != "true") {
                document.getElementById("2024-12_force_all_api_to_fectch_private_api-1").classList.remove('newish-experiment-button-selected');
                document.getElementById("2024-12_force_all_api_to_fectch_private_api-2").classList.add('newish-experiment-button-selected');
            }



            if (localStorage.override_leaks_button == "true") {
                document.getElementById("2024-11_override_leaks_button-1").classList.add('newish-experiment-button-selected');
                document.getElementById("2024-11_override_leaks_button-2").classList.remove('newish-experiment-button-selected');
            }
            
            if (localStorage.override_leaks_button != "true") {
                document.getElementById("2024-11_override_leaks_button-1").classList.remove('newish-experiment-button-selected');
                document.getElementById("2024-11_override_leaks_button-2").classList.add('newish-experiment-button-selected');
            }



            if (localStorage.unreleased_discord_collectibles == "true") {
                document.getElementById("2024-11_unreleased_discord_collectibles-1").classList.add('newish-experiment-button-selected');
                document.getElementById("2024-11_unreleased_discord_collectibles-2").classList.remove('newish-experiment-button-selected');
            }
            
            if (localStorage.unreleased_discord_collectibles != "true") {
                document.getElementById("2024-11_unreleased_discord_collectibles-1").classList.remove('newish-experiment-button-selected');
                document.getElementById("2024-11_unreleased_discord_collectibles-2").classList.add('newish-experiment-button-selected');
            }
            
            
            if (localStorage.unreleased_profiles_plus == "true") {
                document.getElementById("2024-09_profiles_plus-1").classList.add('newish-experiment-button-selected');
            }
            
            if (localStorage.unreleased_profiles_plus != "true") {
                document.getElementById("2024-09_profiles_plus-1").classList.remove('newish-experiment-button-selected');
                document.getElementById("2024-09_profiles_plus-2").classList.add('newish-experiment-button-selected');
            }
        
            displayLocalStorage();
        }else {
            console.error('403 (Forbidden)')
        }
    }

    function colorButtonsPerRollout() {

        if (localStorage.experiment_theme_picker == "two" || localStorage.experiment_theme_picker == "two_autorollout") {
            document.getElementById("2024-12_theme_picker-2").classList.add('newish-experiment-button-selected');
        }

        if (localStorage.experiment_theme_picker == "true" || localStorage.experiment_theme_picker == "true_autorollout") {
            document.getElementById("2024-12_theme_picker-1").classList.add('newish-experiment-button-selected');
        }
    
        if (localStorage.experiment_theme_picker == "false" || localStorage.experiment_theme_picker == "false_autorollout") {
            document.getElementById("2024-12_theme_picker-00").classList.add('newish-experiment-button-selected');
        }


        if (localStorage.profiles_plus_marketing_variants == "variant_1" || localStorage.profiles_plus_marketing_variants == "variant_1_autorollout") {
            document.getElementById("2024-12_profiles_plus_marketing_variants-1").classList.add('newish-experiment-button-selected');
        }
    
        if (localStorage.profiles_plus_marketing_variants == "false" || localStorage.profiles_plus_marketing_variants == "false_autorollout") {
            document.getElementById("2024-12_profiles_plus_marketing_variants-00").classList.add('newish-experiment-button-selected');
        }



        if (localStorage.collectibles_variants == "true" || localStorage.collectibles_variants == "true_autorollout") {
            document.getElementById("2024-11_collectibles_variants-1").classList.add('newish-experiment-button-selected');
        }
    
        if (localStorage.collectibles_variants == "false" || localStorage.collectibles_variants == "false_autorollout") {
            document.getElementById("2024-11_collectibles_variants-00").classList.add('newish-experiment-button-selected');
        }




        if (localStorage.recap_items_2024 == "true" || localStorage.recap_items_2024 == "true_autorollout") {
            document.getElementById("2024-11_recap-1").classList.add('newish-experiment-button-selected');
        }
    
        if (localStorage.recap_items_2024 == "false" || localStorage.recap_items_2024 == "false_autorollout") {
            document.getElementById("2024-11_recap-00").classList.add('newish-experiment-button-selected');
        }
    }


    
    
    function closeDevModal() {
        const dev_modal = document.getElementById('modal-housing');
        dev_modal.innerHTML = ``;
    }
    
    function closeMobileModal() {
        const mobile_modal = document.getElementById('modal-housing');
        mobile_modal.innerHTML = ``;
    }
    
    function closeLostModal() {
        const lost_modal = document.getElementById('modal-housing');
        lost_modal.innerHTML = ``;
    }
    
    
    
    
    const fourohfour = document.getElementById("404-mains-button");
    if (fourohfour) {  // Check if element exists
        if (localStorage.not_found_found == "true") {
            document.getElementById("404-mains-button").classList.remove('hidden');
        }
    }
    
    
    function turnOffDevMode() {
        localStorage.dev = "false"
        location.reload();
    }
    
    function dev() {
        localStorage.dev = "true"
        location.reload();
    }




    function themePicker2() {
        localStorage.experiment_theme_picker = "two"
        document.getElementById("2024-12_theme_picker-2").classList.add('newish-experiment-button-selected');
        document.getElementById("2024-12_theme_picker-1").classList.remove('newish-experiment-button-selected');
        document.getElementById("2024-12_theme_picker-00").classList.remove('newish-experiment-button-selected');
    }

    function themePicker1() {
        localStorage.experiment_theme_picker = "true"
        document.getElementById("2024-12_theme_picker-2").classList.remove('newish-experiment-button-selected');
        document.getElementById("2024-12_theme_picker-1").classList.add('newish-experiment-button-selected');
        document.getElementById("2024-12_theme_picker-00").classList.remove('newish-experiment-button-selected');
    }

    function themePicker00() {
        localStorage.experiment_theme_picker = "false"
        document.getElementById("2024-12_theme_picker-2").classList.remove('newish-experiment-button-selected');
        document.getElementById("2024-12_theme_picker-1").classList.remove('newish-experiment-button-selected');
        document.getElementById("2024-12_theme_picker-00").classList.add('newish-experiment-button-selected');
    }

    function themePicker0() {
        localStorage.experiment_theme_picker = "pleasesetautorollout"
        document.getElementById("2024-12_theme_picker-2").classList.remove('newish-experiment-button-selected');
        document.getElementById("2024-12_theme_picker-1").classList.remove('newish-experiment-button-selected');
        document.getElementById("2024-12_theme_picker-00").classList.remove('newish-experiment-button-selected');
        fetchExperimentRolloutData();
    }


    function profilesPlusMarketingVariants1() {
        localStorage.profiles_plus_marketing_variants = "variant_1"
        document.getElementById("2024-12_profiles_plus_marketing_variants-1").classList.add('newish-experiment-button-selected');
        document.getElementById("2024-12_profiles_plus_marketing_variants-00").classList.remove('newish-experiment-button-selected');
    }

    function profilesPlusMarketingVariants00() {
        localStorage.profiles_plus_marketing_variants = "false"
        document.getElementById("2024-12_profiles_plus_marketing_variants-1").classList.remove('newish-experiment-button-selected');
        document.getElementById("2024-12_profiles_plus_marketing_variants-00").classList.add('newish-experiment-button-selected');
    }

    function profilesPlusMarketingVariants0() {
        localStorage.profiles_plus_marketing_variants = "pleasesetautorollout"
        document.getElementById("2024-12_profiles_plus_marketing_variants-1").classList.remove('newish-experiment-button-selected');
        document.getElementById("2024-12_profiles_plus_marketing_variants-00").classList.remove('newish-experiment-button-selected');
        fetchExperimentRolloutData();
    }


    function collectiblesVariants1() {
        localStorage.collectibles_variants = "true"
        document.getElementById("2024-11_collectibles_variants-1").classList.add('newish-experiment-button-selected');
        document.getElementById("2024-11_collectibles_variants-00").classList.remove('newish-experiment-button-selected');
    }

    function collectiblesVariants00() {
        localStorage.collectibles_variants = "false"
        document.getElementById("2024-11_collectibles_variants-1").classList.remove('newish-experiment-button-selected');
        document.getElementById("2024-11_collectibles_variants-00").classList.add('newish-experiment-button-selected');
    }

    function collectiblesVariants0() {
        localStorage.collectibles_variants = "pleasesetautorollout"
        document.getElementById("2024-11_collectibles_variants-1").classList.remove('newish-experiment-button-selected');
        document.getElementById("2024-11_collectibles_variants-00").classList.remove('newish-experiment-button-selected');
        fetchExperimentRolloutData();
    }



    function recap2024Items1() {
        localStorage.recap_items_2024 = "true"
        document.getElementById("2024-11_recap-1").classList.add('newish-experiment-button-selected');
        document.getElementById("2024-11_recap-00").classList.remove('newish-experiment-button-selected');
    }

    function recap2024Items00() {
        localStorage.recap_items_2024 = "false"
        document.getElementById("2024-11_recap-1").classList.remove('newish-experiment-button-selected');
        document.getElementById("2024-11_recap-00").classList.add('newish-experiment-button-selected');
    }

    function recap2024Items0() {
        localStorage.recap_items_2024 = "pleasesetautorollout"
        document.getElementById("2024-11_recap-1").classList.remove('newish-experiment-button-selected');
        document.getElementById("2024-11_recap-00").classList.remove('newish-experiment-button-selected');
        fetchExperimentRolloutData();
    }




    function disableClientReworkTrue() {
        localStorage.full_client_rework = "false"
        document.getElementById("2024-12_disable_client_rework-1").classList.remove('newish-experiment-button-selected');
        document.getElementById("2024-12_disable_client_rework-00").classList.add('newish-experiment-button-selected');
        location.reload();
    }
    
    function disableClientReworkFalse() {
        localStorage.full_client_rework = "true"
        document.getElementById("2024-12_disable_client_rework-1").classList.add('newish-experiment-button-selected');
        document.getElementById("2024-12_disable_client_rework-00").classList.remove('newish-experiment-button-selected');
        location.reload();
    }




    function forceAllApiToFectchPrivateApiFalse() {
        localStorage.force_all_api_to_fectch_private_api = "none"
        document.getElementById("2024-12_force_all_api_to_fectch_private_api-1").classList.remove('newish-experiment-button-selected');
        document.getElementById("2024-12_force_all_api_to_fectch_private_api-2").classList.add('newish-experiment-button-selected');
        fetchData(pageCheck());
    }
    
    function forceAllApiToFectchPrivateApiTrue() {
        localStorage.force_all_api_to_fectch_private_api = "true"
        document.getElementById("2024-12_force_all_api_to_fectch_private_api-1").classList.add('newish-experiment-button-selected');
        document.getElementById("2024-12_force_all_api_to_fectch_private_api-2").classList.remove('newish-experiment-button-selected');
        fetchData(pageCheck());
    }


    

    function overrideLeaksButtonHide() {
        localStorage.override_leaks_button = "none"
        document.getElementById("2024-11_override_leaks_button-1").classList.remove('newish-experiment-button-selected');
        document.getElementById("2024-11_override_leaks_button-2").classList.add('newish-experiment-button-selected');
        leaksCheck();
    }
    
    function overrideLeaksButtonShow() {
        localStorage.override_leaks_button = "true"
        document.getElementById("2024-11_override_leaks_button-1").classList.add('newish-experiment-button-selected');
        document.getElementById("2024-11_override_leaks_button-2").classList.remove('newish-experiment-button-selected');
        leaksCheck();
    }

    

    function unreleasedDiscordCollectiblesFalse() {
        localStorage.unreleased_discord_collectibles = "none"
        document.getElementById("2024-11_unreleased_discord_collectibles-1").classList.remove('newish-experiment-button-selected');
        document.getElementById("2024-11_unreleased_discord_collectibles-2").classList.add('newish-experiment-button-selected');
        fetchData(pageCheck());
    }
    
    function unreleasedDiscordCollectiblesTrue() {
        localStorage.unreleased_discord_collectibles = "true"
        document.getElementById("2024-11_unreleased_discord_collectibles-1").classList.add('newish-experiment-button-selected');
        document.getElementById("2024-11_unreleased_discord_collectibles-2").classList.remove('newish-experiment-button-selected');
        fetchData(pageCheck());
    }

    
    
    
    function unreleasedProfilesPlusItemsFalse() {
        localStorage.unreleased_profiles_plus = "none"
        document.getElementById("2024-09_profiles_plus-1").classList.remove('newish-experiment-button-selected');
        document.getElementById("2024-09_profiles_plus-2").classList.add('newish-experiment-button-selected');
        fetchData(pageCheck());
    }
    
    function unreleasedProfilesPlusItemsTrue() {
        localStorage.unreleased_profiles_plus = "true"
        document.getElementById("2024-09_profiles_plus-1").classList.add('newish-experiment-button-selected');
        document.getElementById("2024-09_profiles_plus-2").classList.remove('newish-experiment-button-selected');
        fetchData(pageCheck());
    }
    
    
    
    
    function saveToLocalStorage() {
        // Get the values from the inputs
        const key = document.getElementById('keyInput').value;
        const value = document.getElementById('valueInput').value;
        
        // Save to local storage
        localStorage.setItem(key, value);
        
        // Refresh the display
        displayLocalStorage();
    }
        
    function displayLocalStorage() {
        // Get the container element
        const storageItems = document.getElementById('storageItems');
        
        // Clear the container
        storageItems.innerHTML = '';
        
        // Iterate over all items in local storage
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            const value = localStorage.getItem(key);
            
            // Create a container for each item
            const itemDiv = document.createElement('div');
            
            // Create editable input fields for key and value
            const keyInput = document.createElement('input');
            keyInput.type = 'text';
            keyInput.value = key;
            keyInput.disabled = true; // Disable key editing
            keyInput.className = 'dev-local-storage-input-2';
            
            const valueInput = document.createElement('input');
            valueInput.type = 'text';
            valueInput.value = value;
            valueInput.className = 'dev-local-storage-input-3';
            
            // Save button for each item
            const saveButton = document.createElement('button');
            saveButton.textContent = 'Update';
            saveButton.className = 'refresh-button';
            saveButton.onclick = function() {
                localStorage.setItem(key, valueInput.value);
            };
            
            // Delete button for each item
            const deleteButton = document.createElement('button');
            deleteButton.textContent = 'Delete';
            deleteButton.className = 'refresh-button';
            deleteButton.onclick = function() {
                localStorage.removeItem(key);
                displayLocalStorage(); // Refresh the display
            };
            
            // Append elements to the item div
            itemDiv.appendChild(deleteButton);
            itemDiv.appendChild(keyInput);
            itemDiv.appendChild(valueInput);
            itemDiv.appendChild(saveButton);
            
            // Append the item div to the container
            storageItems.appendChild(itemDiv);
        }
    }


    function triggerCrash() {
        if (localStorage.crash_count == null) {
            document.body.innerHTML = `
                <div class="crash-info-container">
                    <p style="font-size: 34px;">${getTextString("CRASH_UH_OH")}</p>
                    <p style="font-size: 20px;">${getTextString("CRASH_REFRESH")}</p>
                </div>
            `;
            crashCountIncrease()
        } else if (localStorage.crash_count == "1") {
            document.body.innerHTML = `
                <div class="crash-info-container">
                    <p style="font-size: 34px;">${getTextString("CRASH_UH_OH")}</p>
                    <p style="font-size: 20px;">${getTextString("CRASH_REFRESH")}</p>
                    <p style="font-size: 20px;">${getTextString("CRASH_EASTER_EGG_1")}</p>
                </div>
            `;
            crashCountIncrease()
        } else if (localStorage.crash_count == "2") {
            document.body.innerHTML = `
                <div class="crash-info-container">
                    <p style="font-size: 34px;">${getTextString("CRASH_UH_OH")}</p>
                    <p style="font-size: 20px;">${getTextString("CRASH_REFRESH")}</p>
                    <p style="font-size: 20px;">${getTextString("CRASH_EASTER_EGG_2")}</p>
                </div>
            `;
            crashCountIncrease()
        } else if (localStorage.crash_count == "3") {
            document.body.innerHTML = `
                <div class="crash-info-container">
                    <p style="font-size: 34px;">${getTextString("CRASH_UH_OH")}</p>
                    <p style="font-size: 20px;">${getTextString("CRASH_REFRESH")}</p>
                    <p style="font-size: 20px;">${getTextString("CRASH_EASTER_EGG_3")}</p>
                </div>
            `;
            crashCountIncrease()
        } else if (localStorage.crash_count == "4") {
            document.body.innerHTML = `
                <div class="crash-info-container">
                    <p style="font-size: 34px;">${getTextString("CRASH_UH_OH")}</p>
                    <p style="font-size: 20px;">${getTextString("CRASH_REFRESH")}</p>
                    <p style="font-size: 20px;">${getTextString("CRASH_EASTER_EGG_4")}</p>
                </div>
            `;
            crashCountIncrease()
        } else if (localStorage.crash_count == "5") {
            document.body.innerHTML = `
                <div class="crash-info-container">
                    <p style="font-size: 34px;">${getTextString("CRASH_UH_OH")}</p>
                    <p style="font-size: 20px;">${getTextString("CRASH_REFRESH")}</p>
                    <p style="font-size: 20px;">${getTextString("CRASH_EASTER_EGG_5")}</p>
                </div>
            `;
            crashCountIncrease()
        } else if (localStorage.crash_count == "6") {
            document.body.innerHTML = `
                <div class="crash-info-container">
                    <p style="font-size: 34px;">${getTextString("CRASH_UH_OH")}</p>
                    <p style="font-size: 20px;">${getTextString("CRASH_REFRESH")}</p>
                    <p style="font-size: 20px;">${getTextString("CRASH_EASTER_EGG_6")}</p>
                </div>
            `;
            crashCountIncrease()
        } else if (localStorage.crash_count == "7") {
            if (localStorage.dev == "true") {
                document.body.innerHTML = `
                    <div class="crash-info-container">
                        <p style="font-size: 34px;">${getTextString("CRASH_UH_OH")}</p>
                        <p style="font-size: 20px;">${getTextString("CRASH_REFRESH")}</p>
                        <p style="font-size: 20px;">${getTextString("CRASH_EASTER_EGG_DEV")}</p>
                    </div>
                `;
            } else {
                document.body.innerHTML = `
                    <div class="crash-info-container">
                        <p style="font-size: 34px;">${getTextString("CRASH_UH_OH")}</p>
                        <p style="font-size: 20px;">${getTextString("CRASH_EASTER_EGG_7")}</p>
                    </div>
                `;
            }
            crashCountIncrease()
        } else if (localStorage.crash_count == "8") {
            document.body.innerHTML = `
                <div class="crash-info-container">
                    <p style="font-size: 34px;">${getTextString("CRASH_UH_OH")}</p>
                    <p style="font-size: 20px;">${getTextString("CRASH_REFRESH")}</p>
                    <p style="font-size: 20px;">${getTextString("CRASH_SUPPORT")}</p>
                </div>
            `;
        }
    }

    window.addEventListener('error', (event) => {
        if (event.message.includes("is not defined")) {
            triggerCrash();
        }
    });

    function crashCountIncrease() {
        // Retrieve the counter from localStorage or initialize it to 0
        let crashCount = parseInt(localStorage.getItem('crash_count')) || 0;
    
        // Increment the counter
        crashCount++;
    
        // Store the updated counter back to localStorage
        localStorage.setItem('crash_count', crashCount);
    }

    function heartBeat() {
        fetch(api + HEARTBEAT_DATA, {
            method: "GET",
            headers: {
                "Token": api_token
            }
        })
            .then(response => response.json())
            .then(data => {
                console.log('sending heartbeat');

                if (isFirstHeartbeat === true && localStorage.ongoing_discord_event_version != data.ongoing_discord_events[0].version) {

                }

                if (app_version2 === "Dev") {
                    if (app_version1 != data.latest_version_dev) {
                        console.log(`${getTextString("HEARTBEAT_UPDATE_READY")}`)

                        let update_button = document.createElement("div");

                        update_button.style.position = 'absolute';
                        update_button.style.marginLeft = '70px';
                        update_button.style.marginTop = '-5px';
                        update_button.innerHTML = `
                            <button type="button" class="card-button" onClick="location.reload();">
                                <div class="contents_dd4f85">${getTextString("HEARTBEAT_UPDATE_READY")}</div>
                            </button>
                        `;


                        document.body.appendChild(update_button);
                    }
                } else if (app_version2 === "Stable") {
                    if (app_version1 != data.latest_version_stable) {
                        console.log(`${getTextString("HEARTBEAT_UPDATE_READY")}`)

                        let update_button = document.createElement("div");

                        update_button.style.position = 'absolute';
                        update_button.style.marginLeft = '70px';
                        update_button.style.marginTop = '-5px';
                        update_button.innerHTML = `
                            <button type="button" class="card-button" onClick="location.reload();">
                                <div class="contents_dd4f85">${getTextString("HEARTBEAT_UPDATE_READY")}</div>
                            </button>
                        `;


                        document.body.appendChild(update_button);
                    }
                }
                isFirstHeartbeat = false;
            })
            .catch(error => console.error('Error fetching data:', error));
    }

    let isFirstHeartbeat = true;
    
    if (localStorage.experiment_2025_03_heartbeat === "Treatment 1: Fetch once on startup") {
        heartBeat();
    } else if (localStorage.experiment_2025_03_heartbeat === "Treatment 2: Fetch every 60 seconds") {
        heartBeat();
        setInterval(heartBeat, 60000);
    }
    
    


    function getTextString(variableName) {
        return window[variableName] || variableName; // Uses the variable if it exists, otherwise keeps ${TEXT}
    }
    // getTextString("")
    // ${getTextString("")}
}